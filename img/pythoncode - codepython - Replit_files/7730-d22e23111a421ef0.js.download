"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7730],{20578:function(e,r,t){t.d(r,{Z:function(){return _}});var n=t(35944),i=t(67294),a=t(56834),o=t(5560),l=t(93943),s=t(79547),c=t.n(s),u=t(72218),d=t(3204),f=t(88768),m=t(54920),p=t(5440),v=t(85060),b=t(89431);function h(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function g(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,r)||x(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,r){if(e){if("string"===typeof e)return h(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?h(e,r):void 0}}function w(e){var r,t,a=e.onClick,o=(0,f.r92)(),l=(0,b.Z)("flag-threads-popup-notifications"),s=i.useContext(m.Z).generalThread,u=function(e){var r=g(i.useState([]),2),t=r[0],n=r[1],a=g(i.useState(null),2),o=a[0],l=a[1],s=i.useRef(t);s.current=t;var c=i.useRef(null);return i.useEffect((function(){if(null===c.current){var e=t[0];e&&(l(e),c.current=setTimeout((function(){n(s.current.slice(1)),0===s.current.length&&l(null),c.current=null}),2500))}}),[t]),(0,v.Z)((function(){e[e.length-1]&&n(y(t).concat([e[e.length-1]]))}),[e.length]),o}((null===s||void 0===s?void 0:s.messages)||[]),d=i.useMemo((function(){if("TextMessageContentType"!==(null===u||void 0===u?void 0:u.content.__typename))return null;var e=null===u||void 0===u?void 0:u.content.text;return e?(0,p.kW)(e,{}):null}),[u]);return l&&u&&u.user&&u.user.id!==(null===(r=o.data)||void 0===r||null===(t=r.currentUser)||void 0===t?void 0:t.id)?(0,n.BX)("div",{onClick:function(e){e.stopPropagation(),a(e)},className:"jsx-4ee14b2dec205719 message-notification",children:[(0,n.tZ)(f.jq$,{variables:{username:u.user.username},children:function(e){var r=e.loading,t=e.data;return!r&&t&&t.user&&t.user.image?(0,n.tZ)("img",{src:t.user.image,className:"jsx-4ee14b2dec205719 chat-message-picture"}):(0,n.tZ)("div",{className:"jsx-4ee14b2dec205719 chat-message-picture"})}}),(0,n.BX)("div",{className:"jsx-4ee14b2dec205719 message",children:[(0,n.tZ)("span",{className:"jsx-4ee14b2dec205719 dimmed-text",children:u.user.username}),":"," ",(0,n.tZ)("span",{className:"jsx-4ee14b2dec205719 bold-text",children:d&&(0,n.tZ)(p.YI,{message:d})})]}),(0,n.tZ)(c(),{id:"4ee14b2dec205719",children:".message-notification.jsx-4ee14b2dec205719{background:var(--background-default);border:1px solid var(--accent-purple-default);position:absolute;right:60px;bottom:0;color:var(--foreground-default);-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;padding:3px 15px;cursor:auto;max-width:250px;width:auto;height:36px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;opacity:1;cursor:pointer;font-size:14px}.chat-message-picture.jsx-4ee14b2dec205719{min-width:24px;margin-right:10px;width:24px;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px;border:1px solid transparent}.bold-text.jsx-4ee14b2dec205719{color:var(--foreground-default)}.dimmed-text.jsx-4ee14b2dec205719{color:var(--foreground-dimmest)}.message.jsx-4ee14b2dec205719{-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}"})]}):null}var Z=function(e){var r=e.unreadThreadCount,t=e.onClick;return(0,n.BX)("div",{onClick:t,css:{backgroundColor:d.TV.blurpleDefault},className:c().dynamic([["9525eb8c09ba8e13",[d.TV.borderRadius8,d.TV.borderRadius8]]])+" floating-icon-wrapper",children:[(0,n.tZ)(w,{onClick:t}),(0,n.tZ)("div",{className:c().dynamic([["9525eb8c09ba8e13",[d.TV.borderRadius8,d.TV.borderRadius8]]])+" chat-icon-wrapper",children:(0,n.tZ)(u.Z,{})}),r>0&&(0,n.tZ)("div",{className:c().dynamic([["9525eb8c09ba8e13",[d.TV.borderRadius8,d.TV.borderRadius8]]])+" unread-icon"}),(0,n.tZ)(c(),{id:"9525eb8c09ba8e13",dynamic:[d.TV.borderRadius8,d.TV.borderRadius8],children:".floating-icon-wrapper.__jsx-style-dynamic-selector{height:36px;width:50px;-webkit-border-radius:".concat(d.TV.borderRadius8," 0 0 ").concat(d.TV.borderRadius8,";-moz-border-radius:").concat(d.TV.borderRadius8," 0 0 ").concat(d.TV.borderRadius8,";border-radius:").concat(d.TV.borderRadius8," 0 0 ").concat(d.TV.borderRadius8,";position:absolute;right:0px;bottom:var(--space-16);z-index:10;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;opacity:1;-webkit-transition:300ms;-moz-transition:300ms;-o-transition:300ms;transition:300ms}.chat-icon-wrapper.__jsx-style-dynamic-selector{width:32px;height:32px;padding:5px;color:#fff}.unread-icon.__jsx-style-dynamic-selector{position:absolute;top:5px;left:12px;background:red;width:8px;height:8px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;z-index:11}")})]})},k=t(91131),j=t(33379);function I(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function S(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return I(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return I(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(){var e=(0,o.Z)(),r=(0,l.Z)(e,{onReceiveAnnotationUpdate:function(){}}).unreadThreadCount,t=S((0,k.KO)(j.c),2),i=t[0],s=t[1];return(0,n.tZ)(Z,{onClick:function(){i||((0,a.j)(a.U3.THREADS_OPENED,{unread:Boolean(r)}),(0,a.j)(a.U3.MESSAGES_LIST_OPENED,{replId:e,context:"threads",variant:"replace-chat"})),s((function(e){return!e}))},unreadThreadCount:r})}},11427:function(e,r,t){t.d(r,{Z:function(){return c}});var n=t(35944),i=(t(67294),t(534)),a=t(79635),o=t(54929),l=t(3204);function s(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function c(e){var r=function(){e.canClick&&e.onClick&&e.onClick({username:e.username,id:e.id})};return(0,n.tZ)(a.ZP,{placement:"bottom",tooltip:"Observe ".concat(e.username),children:function(t,a){return(0,n.tZ)(o.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){s(e,r,t[r])}))}return e}({},t,{innerRef:a,onClick:r,children:(0,n.tZ)(i.Z,{size:e.size||35,src:e.image,alt:e.username,css:[e.canClick&&l.l0.cursor.pointer,{transition:"all 0.2s ease",border:"2px solid "+e.color,"&:hover":{filter:"brightness(95%)",boxShadow:l.TV.shadow1}}]})}))}})}},64457:function(e,r,t){t.d(r,{e:function(){return o}});var n=t(88768),i=t(89431),a=t(5560);function o(){return function(e){var r=(0,i.Z)("flag-tutorial-pane"),t=(0,n.JBO)({variables:{replId:e}}),a=t.data,o=t.loading,l=t.error,s=o||l||"Repl"!==(null===a||void 0===a?void 0:a.repl.__typename)?null:a.repl;return{loading:o,error:l,isTutorial:r&&Boolean(null===s||void 0===s?void 0:s.isTutorial)}}((0,a.Z)())}},62867:function(e,r,t){t.d(r,{Z:function(){return l}});var n=t(50348),i=t(88768),a=t(5560),o=t(27754);function l(){var e=(0,a.Z)(),r=(0,n.Z)();(0,i.LSc)({variables:{replId:e},skip:r!==o.e.CONNECTED})}},72839:function(e,r,t){t.d(r,{Z:function(){return a}});var n=t(67294),i=t(30617);function a(){var e=(0,i.Z)(),r=e.session,t=e.presence;return n.useCallback((function(e){var n=e.username,i=e.id,a=t.getFollowedUser();if((null===a||void 0===a?void 0:a.username)!==n){t.followUser(n);var o=t.getActiveFileForUser(i),l=r.getActiveFile();o&&o!==l&&r.openFile(o)}else t.unfollowUser()}),[r,t])}},90768:function(e,r,t){t.d(r,{$q:function(){return b},Oc:function(){return y},eo:function(){return m},sc:function(){return w}});var n=t(34051),i=t.n(n),a=t(44894),o=t(88768),l=t(87152),s=t(56834);function c(e,r,t,n,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?r(s):Promise.resolve(s).then(n,i)}function u(e){return function(){var r=this,t=arguments;return new Promise((function(n,i){var a=e.apply(r,t);function o(e){c(a,n,i,o,l,"next",e)}function l(e){c(a,n,i,o,l,"throw",e)}o(void 0)}))}}function d(e){return f.apply(this,arguments)}function f(){return(f=u(i().mark((function e(r){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l.l){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,l.l.query({query:o.vce,variables:{username:r}});case 5:return n=e.sent.data,e.abrupt("return",null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.image);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return"Notification"in window?"true"===a.Z.get(g,"string")?"dismissed":window.Notification.permission:"denied"}function p(){return v.apply(this,arguments)}function v(){return(v=u(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,window.Notification.requestPermission().then(),e.next=7;break;case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",new Promise((function(e){window.Notification.requestPermission((function(r){e(r)}))})));case 7:return e.abrupt("return",window.Notification.requestPermission());case 8:case"end":return e.stop()}}),e,null,[[0,4]])})))).apply(this,arguments)}function b(){return h.apply(this,arguments)}function h(){return(h=u(i().mark((function e(){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:r=e.sent,y(!1),(0,s.j)("granted"===r?s.U3.WEB_NOTIFICATION_PERM_GRANTED:s.U3.WEB_NOTIFICATION_PERM_DENIED);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g="notifications/dismissedModal";function y(e){a.Z.set(g,String(e)),e&&(0,s.j)(s.U3.WEB_NOTIFICATION_PERM_DISMISSED_MODAL)}var x={};function w(e){return Z.apply(this,arguments)}function Z(){return(Z=u(i().mark((function e(r){var t,n,a,o,l,s,c,u,f,p,v;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.title,n=r.body,a=r.badge,o=r.icon,l=r.iconByUsername,s=r.tag,c=r.onClick,u=r.cacheDuration,f=void 0===u?0:u,document.hidden||!document.hasFocus()){e.next=3;break}return e.abrupt("return");case 3:if("granted"===m()){e.next=5;break}return e.abrupt("return");case 5:if(p=Date.now(),!(s in x)){e.next=9;break}if(!(x[s]+f>p)){e.next=9;break}return e.abrupt("return");case 9:if(!l){e.next=13;break}return e.next=12,d(l);case 12:o=e.sent;case 13:(v=new window.Notification(t,{body:n,badge:a||"/public/images/logo-grayscale.png",icon:o||"/public/images/icon-square.png",tag:s})).addEventListener("click",(function(){window.focus(),v.close()})),c&&v.addEventListener("click",c),x[s]=p;case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},60789:function(e,r,t){t.d(r,{Z:function(){return C}});var n=t(35944),i=t(79547),a=t.n(i),o=t(67294),l=t(40425),s=t(8996),c=t(44054),u=t(94184),d=t.n(u),f=t(17632),m=t(53985),p=t(56834),v=t(88768),b=t(51281),h=t(35060),g=t(39155),y=t(38880),x=t(95757),w=t(64711);function Z(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function k(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,r)||I(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e){return function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,r){if(e){if("string"===typeof e)return Z(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Z(e,r):void 0}}function S(e){var r=e.replId,t=(0,v.X6F)({variables:{replId:r},pollInterval:8e3}),i=t.data,c=t.loading,u=(0,y.Z)(),Z=u.showConfirm,I=u.showError,S=k(o.useState(!1),2),_=S[0],C=S[1],A=k((0,v.QNh)({onCompleted:function(e){var t,n=null===(t=e.addMultiplayerUser.user)||void 0===t?void 0:t.username;n&&((0,p.j)(p.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"username"}),Z("Added @".concat(n)))}}),2),E=A[0],O=A[1],T=k((0,v.GkG)({onError:function(e){return I(e.message)},onCompleted:function(e){var t,n=null===(t=e.removeMultiplayerUser.user)||void 0===t?void 0:t.username;n&&((0,p.j)(p.U3.MP2_REMOVED_USER_PERMISSION,{replId:r,username:n}),Z("".concat(n," removed")))}}),2),U=T[0],N=T[1],R=k((0,v.SvR)({update:function(e,t){var n,i=null===(n=t.data)||void 0===n?void 0:n.createMultiplayerInvite2;if(i)if("UserError"!==i.__typename){if("MultiplayerInvite"===i.__typename){var a=i.email;return(0,p.j)(p.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"email"}),void Z("Invited ".concat(a," via email"))}if("ReplPermission"===i.__typename){var o;e.modify({id:e.identify({__typename:"Repl",id:r}),fields:{permissions:function(r){var t=e.writeFragment({data:i,fragment:v.L13});return j(r).concat([t])}}});var l=null===(o=i.user)||void 0===o?void 0:o.username;if(!l)return;(0,p.j)(p.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"email"}),Z("Invited @".concat(l))}}else I(i.message)}}),2),B=R[0],M=R[1],P=k((0,v.Ejz)({onError:function(e){return I(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var t=e.deleteMultiplayerInvite.email;(0,p.j)(p.U3.MP2_REMOVED_EMAIL_INVITE,{replId:r,email:t}),Z("invite for ".concat(t," deleted"))}}else I(e.deleteMultiplayerInvite.message)}}),2),D=P[0],z=P[1];o.useEffect((function(){var e=O.error||M.error;e&&(e.message.includes("reached the limit")?C(!0):I(e.message))}),[O.error,M.error,I]);var X="Repl"===(null===i||void 0===i?void 0:i.repl.__typename)?i.repl:null,F=null===i||void 0===i?void 0:i.currentUser,L=null===X||void 0===X?void 0:X.permissions.reduce((function(e,r){return r.user?j(e).concat([r.user.username]):e}),[]),V=null===X||void 0===X?void 0:X.currentUserPermissions.editMultiplayers,G=Boolean(X&&!X.permissions.length&&!X.multiplayerInvites.length),W=(null===X||void 0===X?void 0:X.permissions)?X.permissions.length:null;return(0,n.BX)("div",{className:"jsx-7043475ed4bd7433 root",children:[(0,n.BX)(s.gC,{spacing:2,align:"stretch",children:[V&&L&&X?(0,n.tZ)("div",{className:"jsx-7043475ed4bd7433",children:(0,n.tZ)(x.Z,{existingUsernames:L,onSubmit:function(e){!!!e.match(/.+@.+/)||M.loading?O.loading||E({variables:{username:e,replId:X.id,type:"rw"}}):B({variables:{email:e,replId:X.id,type:"rw"}})}})}):null,(0,n.tZ)("div",{className:"jsx-7043475ed4bd7433",children:(0,n.BX)(l.Z,{level:5,foreground:c?3:1,children:[null!==W&&(null===F||void 0===F?void 0:F.isSubscribed)?"".concat((0,w.Z)("multiplayer",W,!0)):null,null===W||(null===F||void 0===F?void 0:F.isSubscribed)?null:"".concat(W,"/").concat(50," ").concat((0,w.Z)("multiplayer",W))," ",!c&&!(null===F||void 0===F?void 0:F.isSubscribed)&&(0,n.tZ)("a",{onClick:function(){return C(!0)},"aria-label":"Click to upgrade for unlimited invites","data-microtip-position":"top",role:"tooltip",className:"jsx-7043475ed4bd7433 info-tooltip",children:(0,n.tZ)(f.Z,{})}),c?"Loading...":null]})}),G?(0,n.tZ)("div",{className:"jsx-7043475ed4bd7433 empty-list",children:(0,n.BX)(s.Ug,{align:"center",justify:"center",children:[(0,n.tZ)("div",{className:"jsx-7043475ed4bd7433",children:"No one is here"}),(0,n.tZ)("div",{className:"jsx-7043475ed4bd7433",children:(0,n.tZ)("img",{src:"/public/images/rainy-computer.png",className:"jsx-7043475ed4bd7433"})})]})}):(0,n.BX)("div",{className:"jsx-7043475ed4bd7433 multiplayers-list",children:[null===X||void 0===X?void 0:X.permissions.map((function(e){var t=e.user,i=e.type;return t?(0,n.BX)("div",{className:"jsx-7043475ed4bd7433 "+(d()("multiplayer-item",{"is-editable":X.currentUserPermissions.editMultiplayers})||""),children:[(0,n.tZ)(g.Z,{size:"s",url:t.image}),(0,n.BX)("div",{className:"jsx-7043475ed4bd7433 label",children:[t.username," ",i===v.aQH.Rw?" (can edit)":null]}),X.currentUserPermissions.editMultiplayers?(0,n.tZ)(b.Z,{border:!1,filled:!1,"aria-label":"Remove member",role:"tooltip","data-microtip-position":"left",onClick:function(){N.loading||U({variables:{replId:r,username:t.username}})},children:(0,n.tZ)(h.Z,{size:12})}):null]},t.id):null})),null===X||void 0===X?void 0:X.multiplayerInvites.map((function(e){return(0,n.BX)("div",{className:"jsx-7043475ed4bd7433 "+(d()("multiplayer-item",{"is-editable":V})||""),children:[(0,n.tZ)(g.Z,{size:"s"}),(0,n.BX)("div",{className:"jsx-7043475ed4bd7433 label",children:[e.email," (pending)"]}),V?(0,n.tZ)(b.Z,{border:!1,filled:!1,"aria-label":"Remove email invite",role:"tooltip","data-microtip-position":"left",onClick:function(){z.loading||D({variables:{replId:r,email:e.email}})},children:(0,n.tZ)(h.Z,{size:12})}):null]},e.email)}))]})]}),(0,n.tZ)(m.Z,{isOpen:_,onClose:function(){return C(!1)},trackingInfo:{context:"workspace-multiplayer-header"}}),(0,n.tZ)(a(),{id:"7043475ed4bd7433",children:".root.jsx-7043475ed4bd7433{color:var(--foreground-default)}.multiplayers-list.jsx-7043475ed4bd7433,.empty-list.jsx-7043475ed4bd7433{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);height:200px}.multiplayers-list.jsx-7043475ed4bd7433{overflow-y:auto;padding:var(--space-8)0}.multiplayer-item.jsx-7043475ed4bd7433{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-4)var(--space-16);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.multiplayer-item.is-editable.jsx-7043475ed4bd7433{padding-right:var(--space-8)}.multiplayer-item.is-editable.jsx-7043475ed4bd7433:hover{background-color:var(--background-root)}.label.jsx-7043475ed4bd7433{margin-right:auto;padding-left:var(--space-8)}.info-tooltip.jsx-7043475ed4bd7433{display:inline-block}.info-tooltip.jsx-7043475ed4bd7433,.info-tooltip.jsx-7043475ed4bd7433:hover,.info-tooltip.jsx-7043475ed4bd7433:focus{color:var(--foreground-default);border:none;outline:none}.empty-list.jsx-7043475ed4bd7433 img.jsx-7043475ed4bd7433{display:block;height:200px;opacity:60%}"})]})}var _=t(76543);function C(e){var r=e.replId;return(0,n.BX)("div",{className:a().dynamic([["55263c1c9413c0cf",[c.j.mobileMax]]]),children:[(0,n.BX)(s.gC,{spacing:2,align:"stretch",children:[(0,n.tZ)(l.Z,{level:4,children:"Invite"}),(0,n.tZ)(S,{replId:r}),(0,n.tZ)(_.Z,{replId:r})]}),(0,n.tZ)(a(),{id:"55263c1c9413c0cf",dynamic:[c.j.mobileMax],children:"div.__jsx-style-dynamic-selector{padding:var(--space-16)}@media screen and (min-width:".concat(c.j.mobileMax,"px){div.__jsx-style-dynamic-selector{padding:var(--space-32)}}")})]})}},27545:function(e,r,t){t.d(r,{Z:function(){return P}});var n=t(35944),i=t(79547),a=t.n(i),o=t(67294),l=t(94184),s=t.n(l),c=t(88768),u=t(8996),d=t(23589),f=t(81736),m=t(15866),p=t(39155),v=t(38880),b=t(35060),h=t(94590),g=t(40425),y=t(58458),x=t(44054),w=t(57541),Z=t(66754),k=t(48015),j=t(95757),I=t(56834),S=t(51281);function _(e){var r=e.value,t=e.onButtonPress,i=e.statusText,o=void 0===i?"":i,l=e.image,c=e.filterValue,d=e.type,f=e.Icon;return(0,n.BX)("div",{className:"jsx-a16e88ad40d0e05c "+(s()("multiplayer-item",{"is-editable":!!t})||""),children:[(0,n.BX)(u.Ug,{align:"center",spacing:1,children:[(0,n.tZ)(p.Z,{size:"s",url:null!==l&&void 0!==l?l:""}),(0,n.tZ)("div",{className:"jsx-a16e88ad40d0e05c label",children:c?(0,n.tZ)(Z.gr,{source:r,match:c}):"".concat(r," ").concat(o)}),!!t&&(0,n.tZ)(S.Z,{className:"remove-button",border:!1,filled:!1,"aria-label":"Remove ".concat(d||"email invite"),role:"tooltip","data-microtip-position":"left",onClick:t,children:f&&(0,n.tZ)(f,{size:12,className:"jsx-a16e88ad40d0e05c"})})]}),(0,n.tZ)(a(),{id:"a16e88ad40d0e05c",children:".multiplayer-item.jsx-a16e88ad40d0e05c{padding:var(--space-4)var(--space-16)}.multiplayer-item.is-editable.jsx-a16e88ad40d0e05c{padding-right:var(--space-8)}.multiplayer-item.is-editable.jsx-a16e88ad40d0e05c:hover{background-color:var(--background-root)}.label.jsx-a16e88ad40d0e05c{margin-right:auto}"})]})}var C=t(78135),A=t(17632),E=t(45193);function O(e){var r=e.email,t=e.onInvite,i=e.onCancel;return(0,n.BX)("div",{className:"jsx-1a6ae4ac10e8f1fa root",children:[(0,n.tZ)(g.Z,{level:3,align:"center",children:"Are you sure?"}),(0,n.BX)(y.Z,{align:"center",children:[(0,n.tZ)("p",{className:"jsx-1a6ae4ac10e8f1fa message",children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,n.tZ)("p",{className:"jsx-1a6ae4ac10e8f1fa email",children:r})]}),(0,n.BX)("div",{className:"jsx-1a6ae4ac10e8f1fa controls",children:[(0,n.tZ)(S.Z,{onClick:i,children:"Cancel"}),(0,n.tZ)(S.Z,{filled:!0,color:"primary",onClick:t,children:"Invite"})]}),(0,n.tZ)(a(),{id:"1a6ae4ac10e8f1fa",children:".root.jsx-1a6ae4ac10e8f1fa{color:var(--foreground-default);padding:var(--space-24);display:grid;grid-gap:var(--space-24)}.controls.jsx-1a6ae4ac10e8f1fa{display:grid;grid-gap:var(--space-8);grid-auto-flow:column}.message.jsx-1a6ae4ac10e8f1fa{padding-bottom:var(--space-16)}"})]})}var T=t(76543),U=t(64711);function N(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function R(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,r)||M(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||M(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,r){if(e){if("string"===typeof e)return N(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?N(e,r):void 0}}function P(e){var r,t=e.replId,i=(0,c.JT6)({variables:{replId:t}}),l=i.data,S=i.loading,N=(0,C.v9)((function(e){return e.user.userInfo.isLoggedIn?e.user.userInfo.id:null})),M=(0,v.Z)(),P=M.showConfirm,D=M.showError,z=R(o.useState(""),2),X=z[0],F=z[1],L=R((0,c.fSO)({onError:function(e){return D(e.message)},onCompleted:function(e){var r=e.addMultiplayerUser.user;(0,I.j)(I.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"username"});var n=r?"@".concat(r.username):"Member";P("".concat(n," added"))}}),2),V=L[0],G=L[1],W=R((0,c.QIy)({onError:function(e){return D(e.message)},onCompleted:function(e){var r=e.removeMultiplayerUser.user,t=r?"@".concat(r.username):"Member";P("".concat(t," removed"))}}),2),q=W[0],H=W[1],$="Repl"===(null===l||void 0===l?void 0:l.repl.__typename)?l.repl:null,Y=R((0,c.SvR)({onError:function(e){D(e.message)},update:function(e,r){var n,i=null===(n=r.data)||void 0===n?void 0:n.createMultiplayerInvite2;if(i)if("UserError"!==i.__typename){if("MultiplayerInvite"===i.__typename){var a=i.email;return(0,I.j)(I.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"}),void P("Invited ".concat(a," via email"))}if("ReplPermission"===i.__typename){e.modify({id:e.identify({__typename:"Repl",id:t}),fields:{permissions:function(r){var t=e.writeFragment({data:i,fragment:c.L13});return B(r).concat([t])}}});var o=i.user;(0,I.j)(I.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"});var l=o?"@".concat(o.username):"Member";P("".concat(l," added"))}}else D(i.message)}}),2),K=Y[0],Q=Y[1],J=R((0,c.Ejz)({onError:function(e){return D(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var r=e.deleteMultiplayerInvite.email;(0,I.j)(I.U3.MP2_REMOVED_EMAIL_INVITE,{replId:t,email:r}),P("Invite for ".concat(r," deleted"))}}else D(e.deleteMultiplayerInvite.message)}}),2),ee=J[0],re=J[1];if($&&!$.owner)throw new Error("Cannot manage members on anon repls");if((null===$||void 0===$?void 0:$.owner)&&"Team"!==(null===$||void 0===$?void 0:$.owner.__typename))throw new Error("Expect repl owned by a team");var te,ne,ie,ae="Team"===(null===$||void 0===$||null===(r=$.owner)||void 0===r?void 0:r.__typename)?$.owner:null,oe=null!==(te=null===$||void 0===$?void 0:$.permissions.reduce((function(e,r){return r.user?B(e).concat([r.user.username]):e}),[]))&&void 0!==te?te:[],le=null===$||void 0===$?void 0:$.permissions.reduce((function(e,r){if(!r.user)return e;var t=r.user;return!X||k.Z.filter(X,[t.username]).length>0?((null===ae||void 0===ae?void 0:ae.members.some((function(e){var r;return(null===(r=e.user)||void 0===r?void 0:r.id)===t.id})))||e.users.push(t),e):e}),{users:[]}),se=null===$||void 0===$?void 0:$.multiplayerInvites.filter((function(e){return!X||k.Z.filter(X,[e.email]).length>0})),ce=null===ae||void 0===ae?void 0:ae.members.reduce((function(e,r){if(!r.user)return e;var t=r.user;if(!(!X||k.Z.filter(X,[t.username]).length>0))return e;var n=r.permissions&&r.permissions!==c.SV1.Member,i=null===$||void 0===$?void 0:$.permissions.find((function(e){var r;return e.user&&(null===(r=e.user)||void 0===r?void 0:r.id)===t.id}));return n?e.teamAdmins.push(t):(null===i||void 0===i?void 0:i.type)?e.withPermission.push(t):e.withoutPermission.push(t),e}),{teamAdmins:[],withPermission:[],withoutPermission:[]}),ue=null===ce||void 0===ce?void 0:ce.teamAdmins.some((function(e){return e.id===N})),de=(null!==(ne=null===le||void 0===le?void 0:le.users.length)&&void 0!==ne?ne:0)+(null!==(ie=null===se||void 0===se?void 0:se.length)&&void 0!==ie?ie:0),fe=null===$||void 0===$?void 0:$.currentUserPermissions.editMultiplayers,me=null===$||void 0===$?void 0:$.currentUserPermissions.inviteGuests,pe=Boolean(ce&&!ce.teamAdmins.length&&!ce.withPermission.length&&(!(null===le||void 0===le?void 0:le.users.length)&&!(null===se||void 0===se?void 0:se.length)&&me||!me&&!ce.withoutPermission.length)),ve=R(o.useState(null),2),be=ve[0],he=ve[1];return(0,n.BX)("div",{className:a().dynamic([["dc878561b7535f01",[x.j.mobileMax]]])+" root",children:[(0,n.BX)(u.gC,{spacing:2,align:"stretch",children:[(0,n.BX)(u.Ug,{children:[(0,n.BX)(g.Z,{level:5,foreground:S?3:1,children:[fe?"Add or remove members from this repl":null,S?"Loading...":null]}),fe&&me&&!S&&(0,n.tZ)("div",{"aria-label":" Add team members or invite external guests via email or username","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip",className:a().dynamic([["dc878561b7535f01",[x.j.mobileMax]]])+" information-icon-container",children:(0,n.tZ)(A.Z,{})})]}),me?(0,n.tZ)(j.Z,{existingUsernames:oe,onSubmit:function(e){!!e.match(/.+@.+/)&&!Q.loading?he(e):G.loading||V({variables:{username:e,replId:t,type:"rw"}}),F("")},placeholder:fe?"Search for users or invite guests":"Filter users",isDisabled:S,onChange:function(e){return F(e)}}):(0,n.tZ)(w.ZP,{disabled:S,value:X,onChange:function(e){return F(e.currentTarget.value)},placeholder:fe?"Filter team members to add or remove":"Filter team members"}),(0,n.tZ)(E.Z,{isOpen:!!be,onRequestClose:function(){return he(null)},children:be?(0,n.tZ)(O,{email:be,onInvite:function(){K({variables:{email:be,replId:t,type:"rw"}}),he(null)},onCancel:function(){return he(null)}}):null}),(0,n.BX)("div",{className:a().dynamic([["dc878561b7535f01",[x.j.mobileMax]]])+" "+(s()("multiplayers-list",{"is-empty":pe})||""),children:[(null===ce||void 0===ce?void 0:ce.withPermission.length)?(0,n.tZ)("div",{className:a().dynamic([["dc878561b7535f01",[x.j.mobileMax]]])+" list-heading",children:(0,n.BX)(u.Ug,{align:"center",spacing:1,children:[(0,n.tZ)(d.Z,{size:12}),(0,n.BX)(y.Z,{foreground:2,size:"small",children:[null===ce||void 0===ce?void 0:ce.withPermission.length," member",1===(null===ce||void 0===ce?void 0:ce.withPermission.length)?"":"s"," with access"]})]})}):null,null===ce||void 0===ce?void 0:ce.withPermission.map((function(e){return(0,n.tZ)(_,{value:e.username,image:e.image,statusText:"(can edit)",type:"member",onButtonPress:ue?function(){H.loading||q({variables:{replId:t,username:e.username}})}:void 0,Icon:b.Z},e.id)})),!!de&&(0,n.tZ)("div",{className:a().dynamic([["dc878561b7535f01",[x.j.mobileMax]]])+" list-heading",children:(0,n.BX)(u.Ug,{align:"center",spacing:1,children:[(0,n.tZ)(d.Z,{size:12}),(0,n.BX)(y.Z,{foreground:2,size:"small",children:[(0,U.Z)("guest",de,!0),"with access"]})]})}),null===le||void 0===le?void 0:le.users.map((function(e){return(0,n.tZ)(_,{value:e.username,image:e.image,statusText:"(can edit)",type:"guest",onButtonPress:ue?function(){H.loading||q({variables:{replId:t,username:e.username}})}:void 0,Icon:b.Z},e.id)})),null===se||void 0===se?void 0:se.map((function(e){return(0,n.tZ)(_,{value:e.email,statusText:"(pending)",onButtonPress:ue?function(){re.loading||ee({variables:{replId:t,email:e.email}})}:void 0,Icon:b.Z},e.email)})),!me&&(null===ce||void 0===ce?void 0:ce.withoutPermission.length)?(0,n.tZ)("div",{className:a().dynamic([["dc878561b7535f01",[x.j.mobileMax]]])+" list-heading",children:(0,n.BX)(u.Ug,{align:"center",spacing:1,children:[(0,n.tZ)(f.Z,{size:12}),(0,n.BX)(y.Z,{foreground:2,size:"small",children:[(0,U.Z)("member",null===ce||void 0===ce?void 0:ce.withoutPermission.length,!0),"without access"]})]})}):null,!me&&(null===ce||void 0===ce?void 0:ce.withoutPermission.map((function(e){return(0,n.tZ)(_,{value:e.username,image:e.image,type:"member",onButtonPress:fe?function(){G.loading||V({variables:{replId:t,username:e.username,type:"rw"}})}:void 0,Icon:h.Z},e.id)}))),(null===ce||void 0===ce?void 0:ce.teamAdmins.length)?(0,n.tZ)("div",{className:a().dynamic([["dc878561b7535f01",[x.j.mobileMax]]])+" list-heading",children:(0,n.BX)(u.Ug,{align:"center",spacing:1,children:[(0,n.tZ)(m.Z,{size:12}),(0,n.tZ)(y.Z,{foreground:2,size:"small",children:"Team admins cannot be removed from repls"})]})}):null,null===ce||void 0===ce?void 0:ce.teamAdmins.map((function(e){return(0,n.tZ)("div",{className:a().dynamic([["dc878561b7535f01",[x.j.mobileMax]]])+" "+(s()("multiplayer-item",{"is-editable":fe})||""),children:(0,n.BX)(u.Ug,{align:"center",spacing:1,children:[(0,n.tZ)(p.Z,{size:"s",url:e.image}),(0,n.tZ)("div",{className:a().dynamic([["dc878561b7535f01",[x.j.mobileMax]]])+" label",children:X?(0,n.tZ)(Z.gr,{source:e.username,match:X}):e.username})]})},e.id)})),pe?(0,n.BX)(y.Z,{foreground:2,align:"center",children:['No members matching "',X,'" found']}):null]}),fe||S?null:(0,n.tZ)(y.Z,{foreground:2,size:"small",children:"Only admins can add and remove members to multiplayer"}),fe&&me&&(0,n.tZ)(T.Z,{replId:t})]}),(0,n.tZ)(a(),{id:"dc878561b7535f01",dynamic:[x.j.mobileMax],children:".root.__jsx-style-dynamic-selector{padding:var(--space-16);color:var(--foreground-default)}.multiplayers-list.__jsx-style-dynamic-selector{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);height:300px;overflow-y:auto}.multiplayers-list.is-empty.__jsx-style-dynamic-selector{display:grid;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-16);word-break:break-word}.multiplayer-item.__jsx-style-dynamic-selector{padding:var(--space-4)var(--space-16)}.multiplayer-item.is-editable.__jsx-style-dynamic-selector{padding-right:var(--space-8)}.multiplayer-item.is-editable.__jsx-style-dynamic-selector:hover{background-color:var(--background-root)}.list-heading.__jsx-style-dynamic-selector{padding:var(--space-16)var(--space-16)0}.label.__jsx-style-dynamic-selector{margin-right:auto}.information-icon-container.__jsx-style-dynamic-selector{margin-left:5px}@media screen and (min-width:".concat(x.j.mobileMax,"px){.root.__jsx-style-dynamic-selector{padding:var(--space-48)}}")})]})}},95757:function(e,r,t){t.d(r,{Z:function(){return Z}});var n=t(35944),i=t(79547),a=t.n(i),o=t(67294),l=t(94184),s=t.n(l),c=t(96594),u=t(57541),d=t(51281),f=t(90652),m=t(88768),p=t(38880),v=t(8996),b=t(8286),h=t(39155);function g(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function y(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function x(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){y(e,r,t[r])}))}return e}function w(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return g(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e){var r=e.onSubmit,t=e.existingUsernames,i=e.isDisabled,l=e.onChange,g=e.placeholder,y=w(o.useState(""),2),Z=y[0],k=y[1],j=!!Z.match(/.+@.+/),I=(0,f.Z)(Z.trim().replace(/^@/,""),250),S=(0,m.skk)({skip:!I||j,variables:{query:I,limit:6}}),_=S.data,C=S.loading,A=S.error,E=(0,p.Z)().showError;o.useEffect((function(){A&&E(A.message)}),[A,E]);var O=null===_||void 0===_?void 0:_.usernameSearch;return(0,n.BX)("form",{onSubmit:function(e){e.preventDefault(),r(Z),k("")},className:"jsx-d408485a86637a91",children:[(0,n.BX)("div",{className:"jsx-d408485a86637a91 form-content",children:[(0,n.tZ)(c.ZP,{onChange:function(e){e&&k(e.username)},itemToString:function(e){return(null===e||void 0===e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var i=e.getInputProps,a=e.getItemProps,o=e.getMenuProps,c=e.isOpen,d=e.highlightedIndex;return(0,n.BX)("div",{className:"jsx-d408485a86637a91 dropdown",children:[(0,n.tZ)(u.ZP,x({},i({ref:null,value:Z,onChange:function(e){k(e.currentTarget.value),null===l||void 0===l||l(e.currentTarget.value)},placeholder:null!==g&&void 0!==g?g:"Search by username or invite by email",autoComplete:"off",onKeyDown:function(e){"Enter"===e.key&&Z.match(/.+@.+/)&&(r(Z),k(""),e.currentTarget.blur())}}))),(0,n.BX)("div",x({},o(),{className:"jsx-d408485a86637a91",children:[c&&O&&O.length?(0,n.tZ)("div",{className:"jsx-d408485a86637a91 dropdown-menu",children:O.map((function(e,r){return(0,n.tZ)("div",x({},a({item:e,index:r}),{className:"jsx-d408485a86637a91 "+(s()("result",{"is-active":d===r})||""),children:(0,n.BX)(v.Ug,{align:"center",spacing:1,children:[(0,n.tZ)(h.Z,{size:"s",url:e.image}),(0,n.tZ)("div",{className:"jsx-d408485a86637a91",children:e.username}),t.includes(e.username)?(0,n.tZ)("div",{className:"jsx-d408485a86637a91 check-icon",children:(0,n.tZ)(b.Z,{})}):null]})}),e.username)}))}):null,c&&C?(0,n.tZ)("div",{className:"jsx-d408485a86637a91 dropdown-menu is-loading",children:"loading..."}):null,c&&O&&0===O.length?(0,n.BX)("div",{className:"jsx-d408485a86637a91 dropdown-menu is-empty",children:['no results found for "',Z,'"']}):null]}))]})}}),(0,n.tZ)("div",{className:"jsx-d408485a86637a91",children:(0,n.tZ)(d.Z,{color:"primary",type:"submit",filled:!0,disabled:i||!Z,children:"Invite"})})]}),(0,n.tZ)(a(),{id:"d408485a86637a91",children:".form-content.jsx-d408485a86637a91{display:grid;position:relative;width:100%;grid-template-columns:1fr auto;grid-column-gap:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.dropdown.jsx-d408485a86637a91{position:relative;z-index:5}.dropdown-menu.jsx-d408485a86637a91{position:absolute;z-index:1;top:100%;left:0;width:100%;background-color:var(--background-default);border:1px solid var(--foreground-dimmest);border-top:0 none;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);max-height:300px;overflow:auto}.dropdown-menu.is-loading.jsx-d408485a86637a91,.dropdown-menu.is-empty.jsx-d408485a86637a91{color:var(--foreground-dimmer);padding:var(--space-8)}.dropdown.jsx-d408485a86637a91:focus-within .dropdown-menu.jsx-d408485a86637a91{border-color:var(--accent-primary-default)}.spacer.jsx-d408485a86637a91{width:var(--space-8);pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.result.jsx-d408485a86637a91{cursor:pointer;padding:var(--space-8)var(--space-16)}.result.jsx-d408485a86637a91:hover,.is-active.jsx-d408485a86637a91{background-color:var(--accent-primary-dimmer)}.check-icon.jsx-d408485a86637a91{margin-left:auto;color:var(--accent-positive-default)}"})]})}},25398:function(e,r,t){function n(e){var r={};return e.lite&&(r.lite=e.lite),e.classroom_template&&(r.classroom_template=e.classroom_template),e.outputonly&&(r.outputonly=e.outputonly),e.fileName&&(r.fileName=e.fileName),e.debug&&(r.debug=e.debug),e.inspector&&(r.inspector=e.inspector),e.fallback&&(r.fallback=e.fallback),e.vcr&&(r.vcr=e.vcr),r}t.d(r,{Z:function(){return n}})},86035:function(e,r,t){t.d(r,{Z:function(){return m}});var n=t(34051),i=t.n(n),a=t(67294),o=t(87152),l=t(88768),s=t(30617),c=t(90768);function u(e,r,t,n,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?r(s):Promise.resolve(s).then(n,i)}function d(e){return function(){var r=this,t=arguments;return new Promise((function(n,i){var a=e.apply(r,t);function o(e){u(a,n,i,o,l,"next",e)}function l(e){u(a,n,i,o,l,"throw",e)}o(void 0)}))}}function f(){return(f=d(i().mark((function e(r){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.l){e.next=2;break}throw new Error("Expected Apollo client");case 2:return e.next=4,o.l.query({query:l.UxF,variables:{id:r}});case 4:return t=e.sent.data,e.abrupt("return","Repl"===(null===t||void 0===t?void 0:t.repl.__typename)?t.repl.title:null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){var e=(0,s.Z)(),r=e.container,t=e.presence;a.useEffect((function(){var e=t.onUserJoin((function(t){var n,i=null===(n=r.getContext())||void 0===n?void 0:n.repl;if(i){var a=t.username;return function(e){return f.apply(this,arguments)}(i.id).then((function(e){e&&(0,c.sc)({title:"",body:"".concat(a," joined ").concat(e),tag:"".concat(i.id,"-").concat(a,"-joined"),iconByUsername:a,cacheDuration:9e5})})),function(){e()}}}))}),[t,r])}},56167:function(e,r,t){t.d(r,{Z:function(){return a}});var n=t(67294),i=t(90601);function a(){n.useEffect((function(){var e=function(e){"s"===e.key&&(0,i.j)(e)&&e.preventDefault()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[])}},50999:function(e,r,t){t.d(r,{Z:function(){return a}});var n=t(5560),i=t(88768);function a(e){var r=e.isAnon,t=e.isOwner,a=e.ignoreUnloadPrompt,o=(0,n.Z)();(0,i.Vgw)({skip:r||t,variables:{replId:o},onSubscriptionData:function(e){var r;!1===(null===(r=e.subscriptionData.data)||void 0===r?void 0:r.currentUserCanWrite)&&(a(!0),window.location.reload())}})}},53408:function(e,r,t){t.d(r,{Z:function(){return l}});var n=t(67294),i=t(5560),a=t(88768),o=t(30617);function l(){var e=(0,i.Z)(),r=(0,o.Z)().container,t=(0,a.Uv9)({variables:{replId:e}}).data,l=null===t||void 0===t?void 0:t.repl;(0,n.useEffect)((function(){if(l){var e=null!==l.origin,t=new Date(l.timeUpdated).getTime()-new Date(l.timeCreated).getTime()<1e3;e&&t&&r.exec("bash","-c","git rev-parse 2>/dev/null && for i in $(git remote); do git remote remove $i; done")}}),[r,l])}},18292:function(e,r,t){t.d(r,{Z:function(){return l}});var n=t(67294),i=t(30617),a=t(56834),o=t(28566);function l(){var e=(0,i.Z)().presence;n.useEffect((function(){return e.onFollowingUsersChanged((function(e){var r=e.followingUsers,t=e.type,n=r.length;"follow"===t?(0,a.j)(o.events.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:n}):(0,a.j)(o.events.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:n})}))}),[e])}},5881:function(e,r,t){t.d(r,{Z:function(){return p}});var n=t(35944);var i=44100,a=32896,o=function e(){var r=this;!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.audioStart=0,this.feed=function(e){var t=r.getFormatedValue(e),n=new Float32Array(r.samples.length+t.length);n.set(r.samples,0),n.set(t,r.samples.length),r.samples=n},this.getFormatedValue=function(e){for(var r=new Float32Array(e.length),t=0;t<e.length;t++)r[t]=e[t]/2147483648;return r},this.stop=function(){if(r.bufferSource)try{r.bufferSource.stop()}catch(e){if("InvalidStateError"!==e.name&&"RangeError"!==e.name)throw e}},this.flush=function(e){if(r.audioCtx&&r.samples.length){var t=0,n=r.audioCtx.currentTime;if(0===e)r.startTime=n,r.audioStart=n;else{for(var o=n-r.audioStart,l=Math.floor(o*i);l>e-a;)r.audioStart+=.7459410430839002,l-=a;l>e&&(t=l-e,r.startTime=n),r.startTime=n}r.samples=r.samples.slice(t,r.samples.length);for(var s,c,u,d=r.audioCtx.createBufferSource(),f=r.samples.length/1,m=r.audioCtx.createBuffer(1,f,i),p=0;p<1;p++)for(s=m.getChannelData(p),c=p,u=0;u<f;u++)s[u]=r.samples[c],c+=1;r.startTime<r.audioCtx.currentTime&&(r.startTime=r.audioCtx.currentTime),d.buffer=m,d.connect(r.gainNode),d.start(r.startTime),r.stop(),r.bufferSource=d,r.startTime+=m.duration,r.samples=new Float32Array}},this.samples=new Float32Array;var t=window.AudioContext||window.webkitAudioContext;this.audioCtx=new t,this.gainNode=this.audioCtx.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioCtx.destination),this.startTime=this.audioCtx.currentTime},l=t(56834),s=t(67294),c=t(45193),u=t(51281),d=t(67938),f=t(54929),m=t(3204);function p(e){var r=e.container,t=(0,s.useState)(!1),i=t[0],a=t[1],p=(0,s.useRef)(null);(0,s.useEffect)((function(){return r.openChannel({name:"audio",service:"audio"},(function(e){var r=e.channel;if(r){var t=null,n=!1;return r.onCommand((function(e){var r;n||(n=!0,(0,l.j)(l.U3.AUDIO_PLAYING_STARTED),p.current=function(){t=new o,p.current=null},a(!0)),t&&(null===e||void 0===e||null===(r=e.audio2)||void 0===r?void 0:r.data)&&(e.audio2.samples||(e.audio2.samples=0),t.feed(Int32Array.from(e.audio2.data)),t.flush(e.audio2.samples))})),function(){a(!1),t&&(t.stop(),t=null),p.current=null}}}))}),[r]);var v=function(){a(!1),(0,l.j)(l.U3.AUDIO_PROMPT_CLOSED,{accepted:!1})};return(0,n.tZ)(c.Z,{isOpen:i,preventClose:!0,onRequestClose:v,children:(0,n.BX)(f.Z,{css:[m.l0.colWithGap(32),m.l0.p(32)],children:[(0,n.BX)(f.Z,{css:[m.l0.colWithGap(16)],children:[(0,n.tZ)(d.h,{variant:"headerBig",level:3,children:"We hear audio!"}),(0,n.tZ)(d.x,{children:"Hey! It appears that this Repl is playing audio."}),(0,n.tZ)(d.x,{children:"In order for us to hear the audio you\u2019re receiving, please click confirm."})]}),(0,n.BX)(f.Z,{css:[m.l0.rowWithGap(16)],children:[(0,n.tZ)(u.Z,{onClick:v,children:"Cancel"}),(0,n.tZ)(u.Z,{color:"positive",filled:!0,onClick:function(){a(!1),(0,l.j)(l.U3.AUDIO_PROMPT_CLOSED,{accepted:!0}),p.current&&p.current()},children:"Confirm"})]})]})})}},38835:function(e,r,t){t.d(r,{Z:function(){return d}});var n=t(56834),i=t(67294),a=t(31284),o=t(30617),l=t(6763),s=t(5560),c=t(88768),u=t(27291);function d(e){var r=e.onOpenFile,t=e.onOutput,d=(0,o.Z)(),f=d.debuggest,m=d.dotReplit,p=(0,s.Z)(),v=(0,c.NJw)({variables:{replId:p}}).data,b=function(e){var r=e.repl,t=e.dotReplit,n=e.debuggest;return(0,i.useEffect)((function(){if(r){if(!r.lang.hasDAP)return t.watch((function(e){var r;e.error||(null===(r=e.config.debugger)||void 0===r?void 0:r.support)&&n.connect()}));n.connect()}}),[r,n]),(0,a.Z)(n.mainClient)}({debuggest:f,dotReplit:m,repl:"Repl"===(null===v||void 0===v?void 0:v.repl.__typename)?v.repl:null});!function(e){(0,i.useEffect)((function(){if(e){var r=e.onStarted((function(e){(0,n.j)(n.U3.DEBUGGER_USED,{action:"started",joined:e})})),t=e.onPaused((function(e){(0,n.j)(n.U3.DEBUGGER_USED,{action:"paused",reason:e})})),i=e.onBreakpoint((function(r){(0,n.j)(n.U3.DEBUGGER_USED,{action:"breakpointToggled",breakpointAction:r,state:e.state.current})}));return function(){r(),t(),i()}}}),[e])}(b),function(e,r){var t,n=r.onOutput,o=r.onOpenFile,s=(0,u.Z)(n),c=(0,u.Z)(o);(0,i.useEffect)((function(){if(e)return e.onOutput((function(e){s.current(e)}))}),[e]);var d=(0,a.Z)(e?e.stackFrames:null),f=null===d||void 0===d?void 0:d[0],m=null===f||void 0===f||null===(t=f.source)||void 0===t?void 0:t.path,p=null===f||void 0===f?void 0:f.line;(0,i.useEffect)((function(){if(m&&p&&e){var r=(0,l.om)(m);r?c.current({path:r,line:p}):e.stepOut()}}),[e,m,p])}(b,{onOpenFile:r,onOutput:t})}},70700:function(e,r,t){t.d(r,{Z:function(){return K}});var n=t(35944),i=t(79547),a=t.n(i),o=t(67294),l=t(51739),s=t(59367),c=t(56718),u=t(43421),d=t(30617),f=t(56834),m=t(46846),p=t(39644);function v(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function b(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return v(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return v(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e){var r=e.language,t=e.tabIndex,i=e.filePath,a=e.onClick,o=e.onClose,s=e.isActive,v=(0,d.Z)().session,h=b((0,u.c)({item:{type:c.z.FileHeaderTab,path:i},type:c.z.FileHeaderTab}),2)[1],g=b((0,l.L)({accept:[m.Tv.File,c.z.FileNode,c.z.FileHeaderTab],collect:function(e){return{isOver:e.isOver()}},drop:function(e){var n=e.path;n!==i&&(v.openFile(n,{tabIndex:t}),(0,f.j)(f.U3.FILE_HEADER_TAB_REPLACED,{language:r,tabIndex:t}))}}),2),y=g[0].isOver,x=g[1];return(0,n.tZ)(p.s,{innerRef:function(e){x(e),h(e)},filePath:i,isActive:s,isDragOver:y,onClick:a,onClose:o})}var g=t(58458);function y(e){var r=e.text;return(0,n.BX)("div",{className:"jsx-9398341bd91701d empty",children:[(0,n.tZ)(g.Z,{size:"small",foreground:2,children:r}),(0,n.tZ)(a(),{id:"9398341bd91701d",children:".empty.jsx-9398341bd91701d{background-color:var(--background-default);height:100%;min-width:var(--space-80);padding:var(--space-8)var(--space-16);-webkit-border-top-right-radius:var(--border-radius-4);-moz-border-radius-topright:var(--border-radius-4);border-top-right-radius:var(--border-radius-4);-webkit-border-top-left-radius:var(--border-radius-4);-moz-border-radius-topleft:var(--border-radius-4);border-top-left-radius:var(--border-radius-4)}"})]})}var x=t(5560),w=t(88768),Z=t(39809),k=t(93577),j=t(67289),I=t(42458),S=t(92594),_=t(36377),C=t(41045),A=t(90039),E=t(39550),O=t(11427),T=t(35060),U=t(51281),N=t(8996),R=t(34140);function B(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function M(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return B(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return B(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e){var r=e.id,t=e.username,i=e.color,o=(0,d.Z)().presence,l=(0,w.qC4)({variables:{ids:[r]},ssr:!1}).data;if(!l)return null;var s=M(l.usersByIds,1)[0].image;return(0,n.BX)("div",{className:a().dynamic([["8eb09786a976f628",[i]]])+" following-indicator",children:[(0,n.BX)(N.Ug,{wrap:"nowrap",className:"stack",spacing:"var(--space-4)",children:[(0,n.tZ)(N.gC,{className:"stack",align:"center",justify:"center",children:(0,n.tZ)(O.Z,{id:r,username:t,image:s,color:i,size:22})}),(0,n.tZ)(N.gC,{className:"text-container",align:"center",justify:"center",children:(0,n.BX)(g.Z,{className:"following-text",children:["Observing ",t]})}),(0,n.tZ)(N.gC,{className:"stack",align:"center",justify:"center",children:(0,n.BX)(U.Z,{size:"small",filled:!1,border:!1,textColor:i,onClick:function(){o.unfollowUser()},children:[(0,n.tZ)(R.T,{children:"stop observing"}),(0,n.tZ)(T.Z,{})]})})]}),(0,n.tZ)(a(),{id:"8eb09786a976f628",dynamic:[i],children:".following-indicator.__jsx-style-dynamic-selector{height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8)}.following-indicator.__jsx-style-dynamic-selector .stack{height:100%;max-width:100%;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;overflow:clip}.following-indicator.__jsx-style-dynamic-selector .text-container{height:100%;margin-right:-2px}.following-indicator.__jsx-style-dynamic-selector .following-text{color:".concat(i,";white-space:nowrap}")})]})}function D(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function z(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return D(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return D(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function F(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return X(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return X(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(){var e=function(){var e=(0,d.Z)().presence,r=z(o.useState(e.getFollowingUsers()),2),t=r[0],n=r[1];return o.useEffect((function(){return n(e.getFollowingUsers()),e.onFollowingUsersChanged((function(e){n(e.followingUsers)}))}),[e]),t}();return 0===e.length?null:1===e.length?(0,n.tZ)(V,{user:e[0]}):(0,n.BX)("div",{className:"jsx-4f2e88846001c10e followed-indicator",children:[(0,n.BX)(g.Z,{children:[e.length," users are observing you"]}),(0,n.tZ)(a(),{id:"4f2e88846001c10e",children:".followed-indicator.jsx-4f2e88846001c10e{white-space:nowrap;height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}"})]})}function V(e){var r=e.user,t=(0,w.qC4)({variables:{ids:[r.id]},ssr:!1}).data;if(!t)return null;var i=F(t.usersByIds,1)[0].image,o=r.id,l=r.username,s=r.color;return(0,n.BX)("div",{className:"jsx-add9eb548244268a followed-indicator",children:[(0,n.BX)(N.Ug,{wrap:"nowrap",align:"center",className:"stack",spacing:"var(--space-4)",children:[(0,n.tZ)(O.Z,{id:o,username:l,image:i,color:s,size:22}),(0,n.tZ)(g.Z,{className:"username",children:l}),(0,n.tZ)("div",{className:"jsx-add9eb548244268a text",children:(0,n.tZ)(g.Z,{children:"is observing you"})})]}),(0,n.tZ)(a(),{id:"add9eb548244268a",children:".followed-indicator.jsx-add9eb548244268a{height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8)}.text.jsx-add9eb548244268a{white-space:nowrap}.followed-indicator.jsx-add9eb548244268a .stack{height:100%}.followed-indicator.jsx-add9eb548244268a .username{overflow:clip;max-width:150px;display:inline-block;-o-text-overflow:ellipsis;text-overflow:ellipsis}"})]})}var G=t(95722),W=t(91510),q=t(88457),H={overflowBehavior:{y:"hidden"},scrollbars:{autoHide:"leave"}};function $(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Y(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return $(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e){var r=e.style,t=(0,x.Z)(),i=(0,d.Z)(),u=i.session,p=i.fs,v=i.presence,b=(0,Z.Z)().openFiles,g=(0,k.Z)(),O=(0,S.Z)(),T=(0,E.Z)(),U=(0,A.Z)(),N=(0,_.Z)({fs:p,path:C.Q,initialExpanded:!0}).loading,R=(0,w.IqK)({variables:{replId:t}}).data,B="Repl"===(null===R||void 0===R?void 0:R.repl.__typename)?R.repl.language:"",M="md"===(0,j.r6)(g||""),D=o.useCallback((function(){(0,f.j)(f.U3.MARKDOWN_PREVIEW_TOGGLE_CLICKED,{isOn:Boolean(O)}),u.setPreviewedFile(O?null:g)}),[u,O,g]),z=b.map((function(e,r){return(0,n.tZ)(h,{language:B,filePath:e,tabIndex:r,onClick:function(){e!==g&&(u.openFile(e),T&&v.unfollowUser())},onClose:function(){u.closeTab(r),(0,f.j)(f.U3.FILE_HEADER_TAB_CLOSED,{language:B})},isActive:e===g},r)})),X=function(){var e,r=(0,o.useRef)(null),t=null===(e=r.current)||void 0===e?void 0:e.osInstance(),n=(0,o.useRef)(0),i=(0,o.useRef)(0),a=(0,q.Fg)();return{options:H,handleWheel:function(e){if(t&&0!==e.deltaY&&0===e.deltaX){var r=e.deltaY<0?-1:1,a=i.current!==r?t.scroll().position.x:n.current,o=25*r,l=t.scroll().max.x;n.current=Math.max(0,Math.min(l,a-o)),i.current=r;var s=function(){if(t){var e=t.scroll().position.x,r=n.current-e,i=Math.round(e+r/10);0!==r&&(t.scroll({x:i}),window.requestAnimationFrame(s))}};window.requestAnimationFrame(s)}},ref:r,className:a===q.V2.replitLight?"os-theme-dark":"os-theme-light"}}(),F=Y((0,l.L)({accept:[m.Tv.File,c.z.FileNode,c.z.FileHeaderTab],collect:function(e){var r,t=null===(r=e.getItem())||void 0===r?void 0:r.isFolder;return{isOver:e.isOver({shallow:!0})&&!t}},canDrop:function(e){return!e.isFolder},drop:function(e,r){if(e&&!e.isFolder&&!r.didDrop()){var n=b.length;u.openFile(e.path,{tabIndex:n}),(0,W.Z)({replId:t,action:"newTab",source:"dragdrop"})}}}),2),V=F[0],$=F[1],K=N?"Loading files...":"No files open";return(0,n.BX)("div",{ref:$,style:r,className:a().dynamic([["a00e92b504a67b64",[V.isOver?"var(--background-higher)":"var(--background-root)",U?"0 0 0 3px ".concat(U):"0",T?"inset(-4px -4px 0px -4px)":"none",V.isOver?"var(--background-higher)":"var(--background-root)"]]])+" file-header",children:[(0,n.tZ)(s.E,{className:X.className,options:X.options,onWheel:X.handleWheel,ref:X.ref,children:(0,n.tZ)("div",{className:a().dynamic([["a00e92b504a67b64",[V.isOver?"var(--background-higher)":"var(--background-root)",U?"0 0 0 3px ".concat(U):"0",T?"inset(-4px -4px 0px -4px)":"none",V.isOver?"var(--background-higher)":"var(--background-root)"]]])+" file-header-name",children:z.length>0?z:(0,n.tZ)(y,{text:K})})}),T?null:(0,n.tZ)(L,{}),M||!g||T?null:(0,n.tZ)(G.Z,{filePath:g,replLanguage:B}),T?(0,n.tZ)(P,{id:T.id,username:T.username,color:T.color}):null,M&&!T?(0,n.tZ)(I.Z,{isOn:Boolean(O),onChange:D}):null,(0,n.tZ)(a(),{id:"a00e92b504a67b64",dynamic:[V.isOver?"var(--background-higher)":"var(--background-root)",U?"0 0 0 3px ".concat(U):"0",T?"inset(-4px -4px 0px -4px)":"none",V.isOver?"var(--background-higher)":"var(--background-root)"],children:".file-header.__jsx-style-dynamic-selector{position:relative;z-index:3;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;height:48px;width:100%;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;background-color:".concat(V.isOver?"var(--background-higher)":"var(--background-root)",";-webkit-border-top-right-radius:var(--border-radius-4);-moz-border-radius-topright:var(--border-radius-4);border-top-right-radius:var(--border-radius-4);-webkit-border-top-left-radius:var(--border-radius-4);-moz-border-radius-topleft:var(--border-radius-4);border-top-left-radius:var(--border-radius-4);-webkit-box-shadow:").concat(U?"0 0 0 3px ".concat(U):"0",";-moz-box-shadow:").concat(U?"0 0 0 3px ".concat(U):"0",";box-shadow:").concat(U?"0 0 0 3px ".concat(U):"0",";-webkit-clip-path:").concat(T?"inset(-4px -4px 0px -4px)":"none",";clip-path:").concat(T?"inset(-4px -4px 0px -4px)":"none","}.file-header.__jsx-style-dynamic-selector .os-host{height:100%;-webkit-box-flex:1;-webkit-flex:auto;-moz-box-flex:1;-ms-flex:auto;flex:auto;min-width:0}.os-content-glue{height:50px!important}.file-header.__jsx-style-dynamic-selector .os-scrollbar-handle{max-width:300px}.file-header-name.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;width:100%;background-color:").concat(V.isOver?"var(--background-higher)":"var(--background-root)",";color:var(--foreground-dimmer);font-size:var(--font-size-default);height:100%;text-align:center;-webkit-box-align:end;-webkit-align-items:flex-end;-moz-box-align:end;-ms-flex-align:end;align-items:flex-end}")})]})}},22315:function(e,r,t){var n=t(35944),i=(t(67294),t(92704)),a=t(7177),o=t(35060),l=t(54929),s=t(67938),c=t(3204),u=t(8286);r.Z=function(e){return(0,n.tZ)(a.Z,{preventClose:!0,isOpen:!0,onRequestClose:e.onCancel,maxWidth:512,children:(0,n.BX)(l.Z,{css:[c.l0.colWithGap(24)],children:[(0,n.tZ)(s.h,{variant:"headerDefault",level:2,css:c.l0.maxWidth("100%"),children:"Replit needs your permission to enable notifications."}),(0,n.tZ)(s.x,{multiline:!0,children:"Never miss messages from your collaborators if you\u2019re in another tab or window."}),(0,n.BX)(l.Z,{css:[c.l0.rowWithGap(12),c.l0.justify.end],children:[(0,n.tZ)(i.ZP,{onClick:e.onCancel,text:"Deny",iconLeft:(0,n.tZ)(o.Z,{})}),(0,n.tZ)(i.ZP,{text:"Allow notifications",colorway:"positive",iconLeft:(0,n.tZ)(u.Z,{}),onClick:e.onConfirm})]})]})})}},19378:function(e,r,t){var n=t(5152),i=t.n(n);r.Z=i()((function(){return Promise.all([t.e(4885),t.e(8966),t.e(9710),t.e(3220),t.e(6063),t.e(3308),t.e(6447)]).then(t.bind(t,19345)).then((function(e){return e.EditReplTemplate}))}),{loadableGenerated:{webpack:function(){return[19345]}}})},39644:function(e,r,t){t.d(r,{s:function(){return g},q:function(){return h}});var n=t(35944),i=t(23139),a=t(35060),o=t(30617),l=t(46846),s=t(58123),c=t(36377);var u=t(67294),d=t(70917),f=t(98009),m=t(91131),p=t(54372),v={base:(0,d.iv)([i.l0.display.inlineFlex,i.l0.height("100%"),i.l0.color.foregroundDimmer,i.l0.borderRadius(4,4,0,0),{transition:"0.2s background-color"}]),active:(0,d.iv)({color:i.TV.foregroundDefault}),inactive:(0,d.iv)({"&:hover":{color:i.TV.foregroundDefault}})},b=(0,d.iv)([i.l0.cursor.pointer,{border:"none",font:"inherit",lineHeight:"normal",color:"inherit"}]);function h(e){var r=e.paneId,t=e.isActive,a=e.onClick,o=(0,f.Se)().getTitle,l=(0,m.Dv)((0,p.z)(r)),s=o((0,m.Dv)(l.data));return(0,n.tZ)(i.Tg,{background:t?"default":"root",tag:"button",css:[i.l0.p(8),b,v.base,t?v.active:v.inactive],onClick:function(){return a()},children:(0,n.tZ)(i.xv,{children:s})})}function g(e){var r=e.filePath,t=e.onClick,d=e.onClose,f=e.isActive,m=e.isDragOver,p=e.innerRef,h=(0,o.Z)().fs,g=r.split("/"),y=g.pop(),x=g.join("/"),w=(0,u.useState)(!1),Z=w[0],k=w[1],j=function(e){var r=e.path,t=e.initialExpanded,n=(0,o.Z)().fs;return(0,c.Z)({path:r,initialExpanded:t,fs:n})}({path:x.length>0?x:".",initialExpanded:!0}).children,I=null===j||void 0===j?void 0:j.filter((function(e){return e.filename!==y}));return(0,n.BX)(i.Tg,{innerRef:p,background:f||m?"default":"root",css:[v.base,f?v.active:v.inactive,i.l0.pr(4),i.l0.flex.row,i.l0.align.center],children:[Z?(0,n.tZ)(s.Z,{onSubmit:function(e){var t=x.length>0?x+"/"+e:e;h.moveFile(r,t),k(!1)},onCancel:function(){k(!1)},loading:!1,siblings:I||[],parentPath:x,type:l.Tv.File,initialValue:y,rename:!0}):(0,n.tZ)(i.G7,{tag:"button",onDoubleClick:function(){k(!0)},css:[b,i.l0.justify.center,i.l0.pl(8),{paddingRight:2,backgroundColor:"transparent"}],onClick:t,children:(0,n.tZ)(i.xv,{children:r})}),(0,n.tZ)(i.hU,{tooltipHidden:!0,onClick:d,alt:"Close",css:[{"&& svg":{width:12,height:12,minWidth:"unset",minHeight:"unset"}}],children:(0,n.tZ)(a.Z,{})})]})}},45823:function(e,r,t){t.d(r,{Z:function(){return M}});var n=t(35944),i=t(44894),a=t(67294),o=t(92704),l=t(45193),s=t(7177),c=t(88768),u=t(19378),d=t(38880),f=t(67938),m=t(54929),p=t(30617),v=t(3204),b=t(8286);function h(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function g(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return h(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return h(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){var r,t=e.replId,i=e.onDone,a=e.isResubmit,l=e.lastUpdated,s=e.openIOtesterPane,u=(0,p.Z)().iotester,h=(0,c.CHr)({variables:{replId:t}}),y=u.lastRunAt.getTime()>l,x=(0,c.xhi)({variables:{replId:t}}).data,w="Repl"===(null===x||void 0===x?void 0:x.repl.__typename)?x.repl:null,Z=(null===w||void 0===w?void 0:w.template)||null,k=(null===Z||void 0===Z?void 0:Z.dueDate)||null,j=(new Date).toISOString(),I=(0,d.Z)(),S=I.showConfirm,_=I.showError,C=g((0,c.xAQ)({variables:{replId:t},onCompleted:function(e){var r=e.submitRepl;"UserError"!==r.__typename?"Repl"===r.__typename&&(S("Repl submitted"),i()):_(r.message)},onError:function(e){_(e.message)}}),2),A=C[0],E=C[1],O=y&&u.lastRunDidPass;return"Repl"===(null===(r=h.data)||void 0===r?void 0:r.repl.__typename)&&h.data.repl.ioTests.length>0&&!O?(0,n.BX)(m.Z,{css:[v.l0.colWithGap(24)],children:[(0,n.tZ)(f.h,{variant:"headerDefault",level:2,children:y?"Fix test failures before submitting":"Run tests before submitting"}),(0,n.tZ)(f.x,{multiline:!0,children:y?"Input/Output tests did not pass.":"Input/Output tests have not been run since this Repl was last changed."}),(0,n.BX)(m.Z,{css:[v.l0.rowWithGap(12),v.l0.justify.end],children:[(0,n.tZ)(o.ZP,{disabled:E.loading,colorway:"primary",onClick:function(){s(),i()},text:"View tests"}),(0,n.tZ)(o.ZP,{disabled:E.loading,onClick:function(){return A()},iconLeft:(0,n.tZ)(b.Z,{}),text:"Submit anyway"})]})]}):(0,n.BX)(m.Z,{css:[v.l0.colWithGap(24)],children:[(0,n.tZ)(f.h,{variant:"headerDefault",level:2,children:a?" Resubmit Repl":"Submit Repl"}),(0,n.tZ)(f.x,{multiline:!0,children:a?"This will re-notify team admins about your submission.":"This will submit your Repl for review and notify the team's admins."}),k&&k<j&&(0,n.tZ)(f.x,{multiline:!0,css:[v.l0.color.accentNegativeStronger],children:"Note: Your submission is past the due date and will be marked late."}),(0,n.BX)(m.Z,{css:[v.l0.rowWithGap(12),v.l0.justify.end],children:[(0,n.tZ)(o.ZP,{disabled:E.loading,onClick:i,text:"Cancel"}),(0,n.tZ)(o.ZP,{colorway:"primary",disabled:E.loading,onClick:function(){return A()},iconLeft:(0,n.tZ)(b.Z,{}),text:a?"Submit again":"Submit"})]})]})}var x=t(26400),w=t(93577),Z=t(46846),k=t(67289),j=t(37424),I=t(28593),S=t(6529),_=t(71480),C=t(64711);function A(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function E(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return A(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return A(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var O,T=function(e){var r,t,i,l,s,u,p,b,h,g=e.replId,y=e.onDone,x=(0,d.Z)(),w=x.showConfirm,Z=x.showError,k=(0,c.fuF)({variables:{replId:g},onCompleted:function(e){var r,t,n=e.repl;"Repl"===n.__typename&&(null===(r=n.origin)||void 0===r||null===(t=r.template)||void 0===t?void 0:t.modelSolution)&&"ReplTemplateModelSolution"===n.origin.template.modelSolution.__typename&&(M(n.origin.template.modelSolution.visibleAfterSubmitting),z(n.origin.template.modelSolution.visibleAfterPassingTests),L(n.origin.template.modelSolution.visibleAfterDueDate))}}),A=k.data,O=k.loading,T=E((0,c.GA6)({onError:function(e){return Z(e)},onCompleted:function(){w("Updated solution"),y()}}),2),U=T[0],N=T[1],R=E(a.useState(!1),2),B=R[0],M=R[1],P=E(a.useState(!1),2),D=P[0],z=P[1],X=E(a.useState(!1),2),F=X[0],L=X[1],V=E(a.useState(),2),G=V[0],W=V[1],q=(0,j.H)();if(a.useEffect((function(){var e="Students can ";if(B||F||D){e+="view the solution after";var r=[];B&&r.push("submitting their project"),D&&r.push("passing all tests"),F&&r.push("the due date has passed");for(var t=0;t<r.length;t++)t>0&&(e+=",",t===r.length-1&&(e+=" and")),e+=" "+r[t];e+="."}else e+="never view the solution.";W(e)}),[B,D,F]),O)return(0,n.tZ)(m.Z,{css:[v.l0.center],children:(0,n.tZ)(I.Z,{})});var H="Repl"===(null===A||void 0===A?void 0:A.repl.__typename)&&"Team"===(null===(r=A.repl.owner)||void 0===r?void 0:r.__typename)&&(null===(t=A.repl.owner)||void 0===t?void 0:t.id),$="Repl"===(null===A||void 0===A?void 0:A.repl.__typename)&&(null===(i=A.repl.origin)||void 0===i||null===(l=i.template)||void 0===l?void 0:l.modelSolution);if(!$)return null;var Y=$.id,K="Repl"===(null===A||void 0===A?void 0:A.repl.__typename)&&((null===(s=A.repl.origin)||void 0===s?void 0:s.ioTests.length)||(null===(u=A.repl.origin)||void 0===u||null===(p=u.unitTests)||void 0===p?void 0:p.tests.length)),Q="Repl"===(null===A||void 0===A?void 0:A.repl.__typename)&&(null===(b=A.repl.origin)||void 0===b||null===(h=b.template)||void 0===h?void 0:h.dueDate);return(0,n.tZ)("form",{onSubmit:function(e){e.preventDefault(),H&&Y&&U({variables:{input:{teamId:H,solutionId:Y,visibleAfterSubmitting:B,visibleAfterPassingTests:D,visibleAfterDueDate:F}}})},children:(0,n.BX)(m.Z,{css:[v.l0.colWithGap(32),v.l0.p(24)],children:[(0,n.tZ)(f.h,{level:2,variant:"headerDefault",children:"Update solution"}),(0,n.BX)(m.Z,{css:[v.l0.colWithGap(16)],children:[(0,n.BX)(m.Z,{css:[v.l0.rowWithGap(8)],children:[(0,n.tZ)(S.Z,{id:q("availableAfterSubmitting"),checked:B,onChange:function(){return M(!B)}}),(0,n.tZ)("label",{htmlFor:q("availableAfterSubmitting"),children:(0,n.tZ)(f.x,{children:"Available after submitting"})})]}),(0,n.BX)(m.Z,{css:[v.l0.rowWithGap(8)],children:[(0,n.tZ)(S.Z,{id:q("availableAfterPassingTests"),checked:D,onChange:function(){return z(!D)}}),(0,n.tZ)("label",{htmlFor:q("availableAfterPassingTests"),children:(0,n.BX)(m.Z,{css:[v.l0.rowWithGap(4)],children:[(0,n.tZ)(f.x,{children:"Available after passing tests"}),(0,n.BX)(f.x,{children:["(",K?"".concat(K," ").concat((0,C.Z)("test",K)," defined"):"no tests exist yet",")"]})]})})]}),(0,n.BX)(m.Z,{css:[v.l0.rowWithGap(8),{verticalAlign:"baseline"}],children:[(0,n.tZ)(S.Z,{id:q("availableAfterDueDate"),checked:F,onChange:function(){return L(!F)}}),(0,n.tZ)("label",{htmlFor:q("availableAfterDueDate"),children:(0,n.BX)(m.Z,{css:[v.l0.rowWithGap(4)],children:[(0,n.tZ)(f.x,{children:"Available after due date"}),(0,n.BX)(f.x,{css:{textDecoration:"italic"},children:["(",Q?(0,_.p)(Q):"no due date set yet",")"]})]})})]})]}),(0,n.tZ)(m.Z,{css:[B||D||F?v.l0.backgroundColor.accentPositiveDimmest:v.l0.backgroundColor.accentNegativeDimmest,v.l0.p(8),v.l0.borderRadius(8)],children:G}),(0,n.tZ)(m.Z,{css:{alignItems:"start"},children:(0,n.tZ)(o.zx,{stretch:!1,colorway:"primary",text:"Save",disabled:N.loading})})]})})};function U(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function N(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function R(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return U(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return U(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var B=(N(O={},c.Sy.PublishTemplate,"Publish project"),N(O,c.Sy.EditTemplate,"Edit project"),N(O,c.Sy.Submit,"Submit"),N(O,c.Sy.Resubmit,"Resubmit"),N(O,c.Sy.UpdateModelSolution,"Update solution"),O);function M(e){var r=e.cta,t=e.replId,d=e.isGroupProject,f=e.openIOtesterPane,m=R(a.useState(null),2),v=m[0],h=m[1],g=function(){return h(null)},j=(0,w.Z)(),I=(0,p.Z)().fs,S=R(a.useState(0),2),_=S[0],C=S[1];a.useEffect((function(){if(j&&!(0,k.T3)(j)&&!(0,k.sL)(j))return I.watchOtFile(j,{onChange:function(e){e.changeSource===Z.Fl.Local&&C(Date.now())}})}),[j,I,C]);var A=Boolean(v&&[c.Sy.PublishTemplate,c.Sy.EditTemplate].includes(v));return a.useEffect((function(){r===c.Sy.ReviewSubmission&&(i.Z.get("annotations/educationModalDismissed")||(h(r),i.Z.set("annotations/educationModalDismissed",!0)))}),[r]),(0,n.BX)(n.HY,{children:[B[r]&&(0,n.tZ)(o.ZP,{onClick:function(){return h(r)},text:B[r],iconLeft:(0,n.tZ)(b.Z,{})}),(0,n.tZ)(s.Z,{isOpen:v===c.Sy.Submit||v===c.Sy.Resubmit,onRequestClose:g,maxWidth:512,children:(0,n.tZ)(y,{replId:t,onDone:g,isResubmit:v===c.Sy.Resubmit,lastUpdated:_,openIOtesterPane:f})}),(0,n.tZ)(l.Z,{preventClose:!0,isOpen:A,onRequestClose:g,width:d?"large":"medium",children:(0,n.tZ)(u.Z,{replId:t,onDone:g})}),(0,n.tZ)(s.Z,{isOpen:v===c.Sy.UpdateModelSolution,onRequestClose:g,maxWidth:600,children:(0,n.tZ)(T,{replId:t,onDone:g})}),(0,n.tZ)(x.Z,{isOpen:v===c.Sy.ReviewSubmission,onRequestClose:g})]})}},98009:function(e,r,t){t.d(r,{Se:function(){return l},fK:function(){return a},kz:function(){return s}});var n=t(35944),i=t(67294);function a(e){var r=e.config;return{Icon:function(e){var t=e.pane,i=e.size,a=void 0===i?16:i,o=r[t.type].Icon;return(0,n.tZ)(o,{pane:t,size:a})},Content:function(e){var t=e.pane,i=e.options,a=r[t.type].Content;return(0,n.tZ)(a,{pane:t,options:i})},getTitle:function(e){return(0,r[e.type].getTitle)(e)},getActions:function(e){var t=r[e.type].getActions;if(t)return t(e)}}}var o=(0,i.createContext)(null);function l(){var e=(0,i.useContext)(o);if(!e)throw new Error("Expected PaneUI in context");return e}var s=o.Provider},48610:function(e,r,t){var n=t(35944),i=t(67294),a=t(40425),o=t(58458),l=t(8996),s=t(88341),c=t(67680),u=t(51281),d=t(56834),f=t(43552);function m(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function p(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return m(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.Z=function(e){var r=e.children,t=e.showPopover,m=(0,f.Z)("announcement","add-guest-new-user"),v=m.shouldDisplay,b=m.register,h=m.dismiss,g=p(i.useState(!1),2),y=g[0],x=g[1],w=p(i.useState(!1),2),Z=w[0],k=w[1];i.useEffect((function(){t&&!Z&&b()}),[Z,b,t]);var j=v&&!Z;return(0,n.BX)(s.Z,{onClickOutside:function(){return k(!0)},isOpen:j,showArrow:!0,borderColor:"var(--accent-purple-default)",children:[r,(0,n.BX)(l.gC,{spacing:2,align:"stretch",children:[(0,n.BX)(l.Ug,{spacing:1,children:[(0,n.tZ)(c.Z,{}),(0,n.tZ)(a.Z,{level:5,children:"Invite guests to your repl!"})]}),(0,n.BX)(o.Z,{children:[" ","Add external guests to your repl for interviews and collaborative projects."," "]}),(0,n.tZ)(l.Ug,{spacing:1,justify:"end",children:(0,n.tZ)(u.Z,{loading:y,onClick:function(){x(!0),(0,d.j)(d.U3.ADD_GUEST_POPOVER_DISMISSED),h()},children:"Got it"})})]})]})}},91317:function(e,r,t){t.d(r,{Z:function(){return O}});var n=t(35944),i=t(79547),a=t.n(i),o=t(67294),l=t(88768),s=t(44054),c=t(11427),u=t(94184),d=t.n(u),f=t(45193),m=t(28593),p=t(40425),v=t(5560),b=t(49337),h=t(30617),g=t(72839);function y(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function x(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){y(e,r,t[r])}))}return e}function w(e){var r=e.hideModal,t=e.onUserClick,i=e.isOpen,a=(0,v.Z)(),o=(0,h.Z)().presence,l=(0,b.Z)({presence:o});return(0,n.tZ)(f.Z,{isOpen:i,onRequestClose:r,children:(0,n.tZ)(k,{replId:a,onUserClick:t,activeUsers:l,hideModal:r})})}function Z(e,r){return r.some((function(r){return r.id===e}))}function k(e){var r=e.replId,t=e.activeUsers,i=e.onUserClick,o=e.hideModal,s=(0,l.Flq)({variables:{replId:r}}),c=s.data,u=s.loading,d=s.error;if(u)return(0,n.BX)("div",{className:"jsx-4b996b631177bcde user-list-loader",children:[(0,n.tZ)(m.Z,{style:{width:"50px"}}),(0,n.tZ)(a(),{id:"4b996b631177bcde",children:".user-list-loader.jsx-4b996b631177bcde{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;min-height:200px}"})]});if(d)return(0,n.tZ)("div",{children:d.message});if("Repl"===(null===c||void 0===c?void 0:c.repl.__typename)){var f=c.repl,v=c.currentUser,b=f.user,h=b&&t.find((function(e){return e.username===b.username})),g=f.permissions.filter((function(e){var r=e.user;return r&&Z(r.id,t)})),y=f.permissions.filter((function(e){var r=e.user;return r&&!Z(r.id,t)}));return(0,n.BX)("div",{className:"jsx-1623363111be709d user-list-modal",children:[(0,n.tZ)(p.Z,{level:2,children:"Multiplayers"}),(0,n.tZ)(p.Z,{level:5,children:"Users can interact with this Repl in real time."}),(0,n.tZ)("div",{className:"jsx-1623363111be709d user-list",children:(0,n.BX)("div",{className:"jsx-1623363111be709d",children:[b?(0,n.tZ)(I,x({},b,{onClick:i,isOnline:Boolean(h),color:h?h.color:"transparent",isOwner:!0,hideModal:o,canClickAvatar:Boolean(h)&&b.id!==(null===v||void 0===v?void 0:v.id),type:l.aQH.Rw})):null,g.map((function(e){var r=e.type,a=e.user;if(!a)throw new Error("Expected user");var l=t.find((function(e){return e.username===a.username}));if(!l)throw new Error("Expected user online");var s=a.id!==(null===v||void 0===v?void 0:v.id);return(0,n.tZ)(I,x({onClick:i,type:r},a,{isOnline:!0,canClickAvatar:s,color:l.color,hideModal:o,isOwner:!1}),"chat-user-list-".concat(a.username))})),y.map((function(e){var r=e.type,t=e.user;if(!t)throw new Error("Expected user");return(0,n.tZ)(I,x({onClick:i,type:r},t,{canClickAvatar:!1,isOnline:!1,color:"transparent",hideModal:o,isOwner:!1}),"chat-user-list-".concat(t.username))}))]})}),(0,n.tZ)(a(),{id:"1623363111be709d",children:".user-list-modal.jsx-1623363111be709d{color:var(--foreground-default);padding:var(--space-32);display:grid;grid-template-rows:auto auto 1fr;grid-gap:var(--space-16)}.user-list.jsx-1623363111be709d{max-height:330px;overflow-y:auto}"})]})}return"ReplRedirect"===(null===c||void 0===c?void 0:c.repl.__typename)?(0,n.BX)("div",{children:["This Repl has moved to"," ",(0,n.tZ)("a",{href:c.repl.replUrl,children:c.repl.replUrl})]}):"SubscriptionExpiredError"===(null===c||void 0===c?void 0:c.repl.__typename)?(0,n.BX)("div",{children:["Your subscription has expired.",(0,n.tZ)("a",{href:"/pricing",children:"Upgrade here"})]}):null}var j={r:"read only",rw:"can edit"};function I(e){var r=e.type,t=e.id,i=e.username,o=e.image,l=e.isOnline,s=e.isOwner,c=e.color,u=e.onClick,f=e.hideModal,m=e.canClickAvatar,p=(0,g.Z)();return(0,n.BX)("div",{className:a().dynamic([["81a9a688c6047602",[m?"pointer":"auto",c]]])+" "+(d()("user-list-item-wrapper",{online:l})||""),children:[(0,n.tZ)("div",{onClick:function(){m&&(p({username:i,id:t}),f())},className:a().dynamic([["81a9a688c6047602",[m?"pointer":"auto",c]]])+" image",children:(0,n.tZ)("img",{src:o,className:a().dynamic([["81a9a688c6047602",[m?"pointer":"auto",c]]])+" "+((l?"":"offline")||"")})}),(0,n.BX)("div",{className:a().dynamic([["81a9a688c6047602",[m?"pointer":"auto",c]]])+" info",children:[(0,n.BX)("div",{className:a().dynamic([["81a9a688c6047602",[m?"pointer":"auto",c]]]),children:[(0,n.BX)("a",{href:"/@".concat(i),target:"_blank",onClick:u,className:a().dynamic([["81a9a688c6047602",[m?"pointer":"auto",c]]]),children:["@",i]}),!l&&" (offline)"]}),(0,n.tZ)("div",{className:a().dynamic([["81a9a688c6047602",[m?"pointer":"auto",c]]]),children:s?"owner":j[r]})]}),(0,n.tZ)(a(),{id:"81a9a688c6047602",dynamic:[m?"pointer":"auto",c],children:".user-list-item-wrapper.__jsx-style-dynamic-selector{padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-ordinal-group:2;-webkit-order:1;-moz-box-ordinal-group:2;-ms-flex-order:1;order:1}.image.__jsx-style-dynamic-selector{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;cursor:".concat(m?"pointer":"auto","}img.__jsx-style-dynamic-selector{width:40px;height:40px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;border:3px solid ").concat(c,";background:white;-o-object-fit:cover;object-fit:cover}.info.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-left:var(--space-8)}img.offline.__jsx-style-dynamic-selector{-webkit-filter:grayscale(100%);filter:grayscale(100%)}.user-list-item-wrapper.online.__jsx-style-dynamic-selector{-webkit-box-ordinal-group:1;-webkit-order:0;-moz-box-ordinal-group:1;-ms-flex-order:0;order:0}")})]})}var S=t(51281),_=t(56834),C=t(23139);function A(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function E(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return A(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return A(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e){var r=E(o.useState(!1),2),t=r[0],i=r[1],u=(0,v.Z)(),d=(0,l.qC4)({variables:{ids:e.users.map((function(e){return e.id}))},ssr:!1,skip:!e.users.length}),f=d.data,m=d.loading,p=d.error,b=e.users.reduce((function(e,r){return e[r.id]=r.color,e}),{});if(m)return null;if(p)return null;if(!(null===f||void 0===f?void 0:f.currentUser))return null;var h=f.usersByIds,g=f.currentUser,y=h.filter((function(e){return e.id!==g.id})),x=y.length-3;return(0,n.BX)(C.G7,{tag:"ul",className:"multiplayer-users-container",css:[C.l0.px(8),C.l0.rowWithGap(4),C.l0.align.center],"aria-live":"polite","aria-relevant":"additions removals","aria-label":"online users",children:[x>0?(0,n.tZ)("li",{className:a().dynamic([["2d2cab94a913fd79",[s.j.mobileMax+100]]]),children:(0,n.BX)(S.Z,{filled:!1,border:!1,onClick:function(){return i(!0)},children:["+ ",x]})}):null,y.slice(0,3).map((function(r){return(0,n.tZ)("li",{className:a().dynamic([["2d2cab94a913fd79",[s.j.mobileMax+100]]]),children:(0,n.tZ)(c.Z,{id:r.id,username:r.username,image:r.image,color:b[r.id],onClick:e.onAvatarClick,canClick:!0})},r.id)})),(0,n.tZ)(w,{isOpen:t,hideModal:function(){return i(!1)},onUserClick:function(){(0,_.j)(_.U3.MP2_VISITED_PROFILE,{replId:u,from:"OnlineUsers"})}}),(0,n.tZ)(a(),{id:"2d2cab94a913fd79",dynamic:[s.j.mobileMax+100],children:".multiplayer-users-container.__jsx-style-dynamic-selector li.__jsx-style-dynamic-selector{list-style-type:none}@media only screen and (max-width:".concat(s.j.mobileMax+100,"px){.multiplayer-users-container.__jsx-style-dynamic-selector{display:none}}")})]})}},31179:function(e,r,t){t.d(r,{X:function(){return i}});var n=t(32117);function i(){n.v.init({applicationId:"70f7ac46-ee96-4ddc-91fa-db466436f768",clientToken:"pub1bf559fff8bd97cc0f38da70d80a0a17",site:"datadoghq.com",service:"repl-it-web-workspace",env:"production",version:"5c8be70",sampleRate:1,premiumSampleRate:0,trackInteractions:!0,trackViewsManually:!0})}}}]);
//# sourceMappingURL=7730-d22e23111a421ef0.js.map