"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8408],{69219:function(e,n,r){r.d(n,{$:function(){return x},u:function(){return S}});var t=r(35944),o=(r(67294),r(84270)),i=r(36360),a=r(42345),u=r(94157),s=r(9210),c=r(5008),l=r(62857),f=r(8317),d=r(13494),p=r(82298),m=r(39802),v=r(91674),h=r(23139),y=r(84827),b=r(73216);function g(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function E(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return g(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w=function(e){var n=new Map,r=!0,t=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var u=E(i.value,3),s=u[0],c=u[1],l=u[2];"string"===typeof c&&(c=y.s.get(c)),n.set(s,[c,null!==l&&void 0!==l?l:h.TV.foregroundDefault])}}catch(f){t=!0,o=f}finally{try{r||null==a.return||a.return()}finally{if(t)throw o}}return n}([[v.SymbolKind.Array,f.Z],[v.SymbolKind.Boolean,p.Z],[v.SymbolKind.Class,"class",h.TV.yellowDefault],[v.SymbolKind.Constant,"constant",h.TV.blueStronger],[v.SymbolKind.Constructor,"method",h.TV.blurpleDefault],[v.SymbolKind.Enum,a.Z,h.TV.orangeDefault],[v.SymbolKind.EnumMember,m.Z,h.TV.blueStronger],[v.SymbolKind.Event,o.Z],[v.SymbolKind.Field,d.Z],[v.SymbolKind.File,u.Z],[v.SymbolKind.Function,"function",h.TV.blurpleStronger],[v.SymbolKind.Interface,c.Z,h.TV.blueStronger],[v.SymbolKind.Key,l.Z],[v.SymbolKind.Method,"method",h.TV.blurpleDefault],[v.SymbolKind.Module,b.Package,h.TV.purpleDefault],[v.SymbolKind.Namespace,i.Z],[v.SymbolKind.Object,p.Z,h.TV.blueDimmer],[v.SymbolKind.Operator,p.Z],[v.SymbolKind.Package,b.Package,h.TV.purpleDefault],[v.SymbolKind.Property,d.Z],[v.SymbolKind.String,s.Z],[v.SymbolKind.Struct,i.Z],[v.SymbolKind.TypeParameter,m.Z],[v.SymbolKind.Variable,m.Z,h.TV.blueStronger]]),x=Array.from(w.keys());function S(e){var n,r=e.kind,o=E(null!==(n=w.get(r))&&void 0!==n?n:[p.Z,h.TV.foregroundDefault],2),i=o[0],a=o[1];return(0,t.tZ)(i,{color:a,size:16})}},62774:function(e,n,r){r.d(n,{Z:function(){return u}});var t=r(67294),o=r(57923);function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function a(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return i(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){var n=e.container,r=e.service,i=e.name,u=e.skip,s=void 0!==u&&u,c=(0,o.Z)(),l=a(t.useState({isConnecting:!0,channel:null,error:null,context:null}),2),f=l[0],d=l[1];return t.useEffect((function(){var e=n.openChannel({service:r,name:i,skip:function(){return s}},(function(e){if(!e.error)return d({context:e.context,channel:e.channel,error:null,isConnecting:!1}),function(e){c.current&&d({isConnecting:e.willReconnect,channel:null,error:null,context:null})};d({context:e.context,channel:null,error:e.error,isConnecting:!1})}));return function(){e()}}),[n,r,i,s,c]),f}},53818:function(e,n,r){r.d(n,{Z:function(){return f}});var t=r(34051),o=r.n(t),i=r(67294),a=r(62774),u=r(27291);function s(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function c(e,n,r,t,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void r(c)}u.done?n(s):Promise.resolve(s).then(t,o)}function l(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return s(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e){var n,r=(0,a.Z)({container:e,service:"exec"}).channel,t=(0,i.useRef)(!1),s=(0,i.useRef)([]),f=(0,u.Z)((n=o().mark((function e(){var n,i,a,u,c,d,p,m,v,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.current){e.next=2;break}return e.abrupt("return");case 2:if(s.current.length){e.next=4;break}return e.abrupt("return");case 4:if("open"===(null===r||void 0===r?void 0:r.status)){e.next=6;break}return e.abrupt("return");case 6:if(n=s.current.pop()){e.next=9;break}throw new Error("Expected request");case 9:return i=l(n,2),a=i[0],u=a.args,c=a.env,d=i[1],p="",m=r.onCommand((function(e){e.output&&(p+=e.output)})),t.current=!0,e.next=15,r.request({exec:{args:u,env:c}});case 15:v=e.sent,t.current=!1,m(),h=v.channelClosed?"Channel closed":v.error,d(h?{error:h,output:p||null}:{output:p,error:null}),f.current();case 21:case"end":return e.stop()}}),e)})),function(){var e=this,r=arguments;return new Promise((function(t,o){var i=n.apply(e,r);function a(e){c(i,t,o,a,u,"next",e)}function u(e){c(i,t,o,a,u,"throw",e)}a(void 0)}))})),d=null===r||void 0===r?void 0:r.status;return(0,i.useEffect)((function(){"open"===d&&f.current()}),[d,f]),(0,i.useCallback)((function(e){var n=e.args,r=e.env;return new Promise((function(e){s.current.push([{args:n,env:r},e]),f.current()}))}),[f])}},76890:function(e,n,r){r.d(n,{Z:function(){return On}});var t,o=r(34051),i=r.n(o),a=r(27754),u=r(39441);!function(e){e.USER_JOIN="USER_JOIN",e.USER_LEAVE="USER_LEAVE",e.USERS_UPDATE="USERS_UPDATE",e.USER_OPENED_FILE="USER_OPENED_FILE",e.FOLLOWED_USER_CHANGED="FOLLOWED_USER_CHANGED",e.FOLLOWING_USERS_CHANGED="FOLLOWING_USERS_CHANGED"}(t||(t={}));var s=r(50055),c=r(15602),l=Object.values(c.Z.multiplayer);function f(e){var n={};return l.forEach((function(e){n[e]=0})),e.forEach((function(e){n[e.color]++})),Object.keys(n).sort((function(e,r){return n[e]-n[r]}))[0]}function d(e){var n=e.sessions.sort((function(e,n){return e.timestamp-n.timestamp})),r=!0,t=!1,o=void 0;try{for(var i,a=n[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var u=i.value;if(u.activeFile)return u.activeFile}}catch(s){t=!0,o=s}finally{try{r||null==a.return||a.return()}finally{if(t)throw o}}return null}function p(e,n){var r=n.find((function(n){return n.sessions.some((function(n){return n.id===e}))}));if(!r)throw new Error("Expected user with session ID ".concat(e));return r}function m(e){var n=e.seconds,r=e.nanos;return Number(n||0)+(r||0)/1e9}var v=r(56834);function h(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function y(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return h(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b,g=r(75944),E=r(67289),w=r(62991),x=r.n(w);function S(e,n,r,t,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void r(c)}u.done?n(s):Promise.resolve(s).then(t,o)}function I(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function a(e){S(i,t,o,a,u,"next",e)}function u(e){S(i,t,o,a,u,"throw",e)}a(void 0)}))}}function A(e){var n=e.container,r=function(e){x()(u,e)||(u=e,o.emit(t.FOLLOWED_USER_CHANGED,e))},o=(0,g.ZP)();o.setMaxListeners(1/0);var a=[],u=null,c=[],l={},h=null,b=window.performance.now();function w(){return S.apply(this,arguments)}function S(){return(S=I(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=2;break}return e.abrupt("return",h);case 2:return e.abrupt("return",new Promise((function(e){o.once(t.USERS_UPDATE,(function(){if(!h)throw new Error("Expected presenceChannel to be set");e(h)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=I(i().mark((function e(n){var t,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===u||void 0===u?void 0:u.username)!==n){e.next=2;break}throw new Error("Already following user with username ".concat(n));case 2:if(!u){e.next=5;break}return e.next=5,D();case 5:return e.next=7,w();case 7:if(t=e.sent,o=a.find((function(e){return e.username===n}))){e.next=11;break}return e.abrupt("return");case 11:r(o),o.sessions.forEach((function(e){t.send({followUser:{session:e.id}})})),b=window.performance.now(),(0,v.j)(v.U3.LOCAL_USER_CURSOR_FOLLOWED);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return T.apply(this,arguments)}function T(){return(T=I(i().mark((function e(){var n,t,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}throw new Error("No user to unfollow");case 2:return n=u,r(null),e.next=6,w();case 6:t=e.sent,n.sessions.forEach((function(e){t.send({unfollowUser:{session:e.id}})})),o=window.performance.now()-b,(0,v.j)(v.U3.LOCAL_USER_CURSOR_UNFOLLOWED,{sessionLength:o});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n.openChannel({service:"presence",name:"presencer"},(function(e){var n=e.channel;if(!e.error){if(!n)throw new Error("Expected channel");return n.onCommand((function(e){var n={cmd:e,emitter:o,activeUsers:a,userIdToFile:l,followedUser:u,setFollowedUser:r,followingUsers:c};switch(e.body){case"roster":!function(e){var n=e.cmd,r=e.emitter,o=e.activeUsers,i=e.userIdToFile,a=e.followedUser,u=e.followingUsers,s=e.setFollowedUser,c=n.roster;if(c){var l=c.user,p=c.files;if(l&&p){var h=new Set;if(o.splice(0,o.length),l.forEach((function(e){if(e.id&&e.name&&e.roles&&!h.has(e.id)){var n=p.filter((function(n){return n.userId===e.id})).map((function(e){if(!e.session||!e.timestamp)throw new Error("Expected session and associated with user");return{id:e.session,activeFile:e.file||null,timestamp:m(e.timestamp)}}));o.push({id:e.id,username:e.name,roles:e.roles,color:f(o),sessions:n}),h.add(e.id)}})),o.forEach((function(e){i[e.id]=d(e)})),r.emit(t.USERS_UPDATE,y(o)),o.length>1&&(0,v.j)(v.U3.MP2_USER_JOINED,{count:o.length}),u.filter((function(e){return!o.some((function(n){return n.id===e.id}))})).forEach((function(e){var n=u.indexOf(e);-1!==n&&(u.splice(n,1),r.emit(t.FOLLOWING_USERS_CHANGED,{followingUsers:y(u),user:e,type:"unfollow"}))})),a)if(o.some((function(e){return e.id===a.id}))){var b=i[a.id];r.emit(t.USER_OPENED_FILE,{user:a,file:b})}else s(null)}}}(n);break;case"join":!function(e){var n=e.cmd,r=e.emitter,o=e.activeUsers,i=e.userIdToFile,a=n.join;if(a.id&&a.name&&a.roles&&a.session){var u=o.find((function(e){return e.id===a.id})),c=Math.floor(Date.now()/1e3),l=m(s.google.protobuf.Timestamp.create({seconds:c}));if(u)u.sessions.push({id:a.session,activeFile:null,timestamp:l});else{var d={id:a.id,username:a.name,roles:a.roles,color:f(o),sessions:[{id:a.session,activeFile:null,timestamp:l}]};i[a.id]=null,o.push(d),r.emit(t.USER_JOIN,d),r.emit(t.USERS_UPDATE,y(o)),(0,v.j)(v.U3.MP2_USER_JOINED,{count:o.length})}}}(n);break;case"part":!function(e){var n=e.cmd,r=e.emitter,o=e.activeUsers,i=e.userIdToFile,a=e.followedUser,u=e.followingUsers,s=e.setFollowedUser;if(n.part&&n.part.id&&n.part.session){var c=n.part,l=c.id,f=c.session,p=o.findIndex((function(e){return e.id===l})),m=o[p];if(1===m.sessions.length){o.splice(p,1),delete i[m.id],r.emit(t.USER_LEAVE,m),r.emit(t.USERS_UPDATE,y(o)),a&&s(null);var v=u.findIndex((function(e){return e.id===m.id}));-1!==v&&(u.splice(v,1),r.emit(t.FOLLOWING_USERS_CHANGED,{followingUsers:y(u),user:m,type:"unfollow"}))}else{m.sessions=m.sessions.filter((function(e){return e.id!==f}));var h=d(m);i[m.id]!==h&&(i[m.id]=h,r.emit(t.USER_OPENED_FILE,{user:m,file:h}))}}}(n);break;case"fileOpened":!function(e){var n=e.emitter,r=e.cmd,o=e.activeUsers,i=e.userIdToFile;if(r.fileOpened){var a=r.fileOpened,u=a.userId,s=a.file,c=a.timestamp,l=a.session,f=s||null;if(!u||!c)throw new Error("Expected userId and timestamp associated with file opened command");var d=o.find((function(e){return e.id===u}));if(!d)throw new Error("Expected user with ID ".concat(u));var p=d.sessions.find((function(e){return e.id===l}));if(!p)throw new Error("Expected session with ID ".concat(p));p.activeFile=f,p.timestamp=m(c),i[u]=f,n.emit(t.USER_OPENED_FILE,{user:d,file:f})}}(n);break;case"followUser":!function(e){var n=e.cmd,r=e.emitter,o=e.activeUsers,i=e.followingUsers,a=n.followUser;if(!a.session)throw new Error("Expected session associated with follow user");var u=p(a.session,o);i.some((function(e){return e.id===u.id}))||(i.push(u),r.emit(t.FOLLOWING_USERS_CHANGED,{followingUsers:y(i),user:u,type:"follow"}))}(n);break;case"unfollowUser":!function(e){var n=e.cmd,r=e.emitter,o=e.activeUsers,i=e.followingUsers,a=n.unfollowUser;if(!a.session)throw new Error("Expected session associated with follow user");var u=p(a.session,o),s=i.findIndex((function(e){return e.id===u.id}));-1!==s&&(i.splice(s,1),r.emit(t.FOLLOWING_USERS_CHANGED,{followingUsers:y(i),user:u,type:"unfollow"}))}(n);break;case"sessionTimestampUpdated":!function(e){var n=e.cmd,r=e.emitter,o=e.activeUsers,i=e.userIdToFile,a=n.sessionTimestampUpdated;if(!a.session||!a.timestamp)throw new Error("Expected session and tiemstamp associated with update");var u=a.session,s=p(u,o),c=i[s.id],l=s.sessions.find((function(e){return e.id===u}));if(!l)throw new Error("Expected user ".concat(s.id," to have a session with ID ").concat(u));l.timestamp=m(a.timestamp);var f=l.activeFile;f!==c&&(i[s.id]=f,r.emit(t.USER_OPENED_FILE,{user:s,file:f}))}(n)}})),h=n,function(){h=null}}})),{onUserLeave:function(e){return o.on(t.USER_LEAVE,e),function(){o.removeListener(t.USER_LEAVE,e)}},onUserJoin:function(e){return o.on(t.USER_JOIN,e),function(){o.removeListener(t.USER_LEAVE,e)}},onActiveUsersChange:function(e){return o.on(t.USERS_UPDATE,e),function(){o.removeListener(t.USERS_UPDATE,e)}},onUserOpenedFile:function(e){return o.on(t.USER_OPENED_FILE,e),function(){o.removeListener(t.USER_OPENED_FILE,e)}},onFollowedUserChanged:function(e){return o.on(t.FOLLOWED_USER_CHANGED,e),function(){o.removeListener(t.FOLLOWED_USER_CHANGED,e)}},onFollowingUsersChanged:function(e){return o.on(t.FOLLOWING_USERS_CHANGED,e),function(){o.removeListener(t.FOLLOWING_USERS_CHANGED,e)}},getActiveFileForUser:function(e){var n=l[e];if("undefined"===typeof n)throw new Error("Expected file for user with ID ".concat(e," to be defined"));return n},updateOpenFile:function(e){return I(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w();case 2:n.sent.send({openFile:{file:e}});case 4:case"end":return n.stop()}}),n)})))()},updateSessionTimestamp:function(){return I(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:e.sent.send({updateSessionTimestamp:{}});case 4:case"end":return e.stop()}}),e)})))()},followUser:function(e){return A.apply(this,arguments)},unfollowUser:D,getActiveUsers:function(){return a},getFollowedUser:function(){return u},getFollowingUsers:function(){return c},getUserIdToFile:function(){return l},getPathToUserIds:function(){var e=new Map;function n(r,t){var o;if(""!==r){e.has(r)||e.set(r,[]);var i=e.get(r);if(!i)throw new Error("Expected user Ids");i.some((function(e){return e===t}))||(null===(o=e.get(r))||void 0===o||o.push(t),n((0,E.Il)(r),t))}}return a.forEach((function(e){var r=e.id,t=l[r];t&&n(t,r)})),e}}}!function(e){e.COMMAND_BAR_TOGGLED="COMMAND_BAR_TOGGLED",e.DEEPLINK_CHANGED="DEEPLINK_CHANGED",e.EDITOR_FOCUSED="EDITOR_FOCUSED",e.SESSION_STATE_CHANGED="SESSION_STATE_CHANGED",e.PREVIEWED_FILE_CHANGED="PREVIEWED_FILE_CHANGED",e.INSTRUCTIONS_VIEWER_TOGGLED="INSTRUCTIONS_VIEWER_TOGGLED",e.FOLLOWING_USERS_CHANGED="FOLLOWING_USERS_CHANGED",e.CURSOR_POSITION_CHANGED="CURSOR_POSITION_CHANGED",e.CONFIG_FILE_VISIBILITY_TOGGLED="CONFIG_FILE_VISIBILITY_TOGGLED",e.RESOURCE_MONITORING_STATE_CHANGED="RESOURCE_MONITORING_STATE_CHANGED",e.TERMINAL_WRITE_CALLED="TERMINAL_WRITE_CALLED",e.TERMINAL_CLEAR_CALLED="TERMINAL_CLEAR_CALLED",e.WPX_TASK_COMPLETION_SURVEY_READY="WPX_TASK_COMPLETION_SURVEY_READY"}(b||(b={}));var D=r(7377);function T(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function k(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){T(e,n,r[n])}))}return e}var O,C=r(44160);function R(e,n,r,t,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void r(c)}u.done?n(s):Promise.resolve(s).then(t,o)}function _(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function a(e){R(i,t,o,a,u,"next",e)}function u(e){R(i,t,o,a,u,"throw",e)}a(void 0)}))}}!function(e){e.MESSAGES_LOADED="MESSAGES_LOADED",e.MESSAGE_RECEIVED="MESSAGE_RECEIVED",e.MESSAGE_SENT="MESSAGE_SENT",e.USER_TYPING_UPDATED="USER_TYPING_UPDATED"}(O||(O={}));var N,P=r(22654),L=r(78842),U=r(96194);function F(e,n,r,t,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void r(c)}u.done?n(s):Promise.resolve(s).then(t,o)}function j(e){var n,r=e.container,t=(0,g.ZP)(),o=new Promise((function(e){return n=e})),a=null;return r.openChannel({service:"chat",name:"broadcaster"},(function(e){if(!e.error){var r=e.channel,i=e.context;if(!r)throw new Error("Expected channel");return i.currentUser&&(a=i.currentUser.username),r.onCommand((function(e){if("chatMessage"===e.body){var n=e.chatMessage;if(!n||!n.username||!n.text)throw new Error("unexpected broadcast without a message");t.emit(N.MESSAGE_RECEIVED,{text:n.text,username:n.username})}})),n(r),function(){o=new Promise((function(e){return n=e}))}}})),{broadcastMessage:function(e){var n,r=e.text;return(n=i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o;case 2:if(n=e.sent,a){e.next=5;break}throw new Error("Cannot broadcast without as username. Is currentUser in context?");case 5:n.send({chatMessage:{text:r,username:a}});case 6:case"end":return e.stop()}}),e)})),function(){var e=this,r=arguments;return new Promise((function(t,o){var i=n.apply(e,r);function a(e){F(i,t,o,a,u,"next",e)}function u(e){F(i,t,o,a,u,"throw",e)}a(void 0)}))})()},onBroadcastReceived:function(e){return t.on(N.MESSAGE_RECEIVED,e),function(){t.removeListener(N.MESSAGE_RECEIVED,e)}}}}!function(e){e.MESSAGE_RECEIVED="MESSAGE_RECEIVED"}(N||(N={}));var G,M=r(69987),Z=r(6763),B=r(50658),H="{".charCodeAt(0),V="}".charCodeAt(0),J="[".charCodeAt(0),z="]".charCodeAt(0),W='"'.charCodeAt(0),q="\\".charCodeAt(0);var K=new TextEncoder,Y=new TextDecoder,$="\r".charCodeAt(0),X="\n".charCodeAt(0);var Q=function(){var e=/[a-z\d_-]+: [a-z\d_ :;.,/"'?!(){}[\]@<>=+*#$&`|~^%-]+/.source;return RegExp("(".concat(e,"\\r\\n)*(").concat(e,")$"),"i")}();function ee(e,n){var r,t,o=Y.decode(e.slice(0,n));try{return{json:JSON.parse(o),buffer:e.slice(n)}}catch(s){if(r=s,(null!=(t=SyntaxError)&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](r):r instanceof t)&&"Unexpected end of JSON input"===s.message){var i=function(e,n){for(var r=0,t=0,o=!1,i=n;i<e.length+1;i++){if(i!==n&&!r&&!t&&!o)return i;var a=e[i];switch(a){case q:i++;continue;case W:o=!o;continue}if(!o)switch(a){case H:r++;break;case V:r--;break;case J:t++;break;case z:t--}}return-1}(e,0);if(-1!==i){var a=e.slice(0,i),u=Y.decode(a);try{return{json:JSON.parse(u),buffer:e.slice(i)}}catch(c){B.Tb(c)}}}return B.Tb(s),{json:void 0,buffer:e.slice(n)}}}var ne=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.onMessage=n,this.buffer=new Uint8Array,this.read=this.read.bind(this)}var n=e.prototype;return n.consumeHeaders=function(){var e=function(e){var n=e.findIndex((function(n,r){return n===$&&e[r+1]===X&&e[r+2]===$&&e[r+3]===X}));if(-1!==n){var r=Y.decode(e.slice(0,n)),t=r.match(Q);if(!t)throw new Error("Unable to match header, text: ".concat(r));var o=Object.create(null),i=t[0].split("\r\n"),a=!0,u=!1,s=void 0;try{for(var c,l=i[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value,d=f.indexOf(":");if(-1===d)throw new Error('Message header must separate key and value using ":"');var p=f.substr(0,d),m=f.substr(d+1).trim();if("Content-Length"===p){var v=parseInt(m,10);if(isNaN(v))throw new Error("Content-Length value must be a number.");o[p]=parseInt(m,10)}else o[p]=m}}catch(h){u=!0,s=h}finally{try{a||null==l.return||l.return()}finally{if(u)throw s}}if(null==o["Content-Length"])throw new Error("Header must provide a Content-Length property.");return{headerLength:n,value:o}}}(this.buffer);if(e)return this.buffer=this.buffer.slice(e.headerLength+4),e},n.read=function(e){var n;for(this.buffer=function(e,n){var r=new Uint8Array(e.length+n.length);return r.set(e),r.set(n,e.length),r}(this.buffer,K.encode(e));null!==(n=(G=this).headers)&&void 0!==n?n:G.headers=this.consumeHeaders();){var r=this.headers.value["Content-Length"];if(this.buffer.length<r)return;var t=ee(this.buffer,r),o=t.json,i=t.buffer;if(this.headers=void 0,this.buffer=i,void 0!==o)try{this.onMessage(o)}catch(a){B.Tb(a)}}},e}();function re(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function te(e,n,r,t,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void r(c)}u.done?n(s):Promise.resolve(s).then(t,o)}function oe(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function a(e){te(i,t,o,a,u,"next",e)}function u(e){te(i,t,o,a,u,"throw",e)}a(void 0)}))}}function ie(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function ae(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){ie(e,n,r[n])}))}return e}function ue(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return re(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return re(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var se=i().mark(ce);function ce(e,n){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.length===n.length){t.next=2;break}return t.abrupt("return");case 2:r=0;case 3:if(!(r<e.length)){t.next=9;break}return t.next=6,[e[r],n[r]];case 6:r++,t.next=3;break;case 9:case"end":return t.stop()}}),se)}var le=r(48764).Buffer;function fe(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function de(e,n,r,t,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void r(c)}u.done?n(s):Promise.resolve(s).then(t,o)}function pe(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function a(e){de(i,t,o,a,u,"next",e)}function u(e){de(i,t,o,a,u,"throw",e)}a(void 0)}))}}function me(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function ve(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){me(e,n,r[n])}))}return e}function he(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,n)||be(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||be(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,n){if(e){if("string"===typeof e)return fe(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fe(e,n):void 0}}function ge(e){var n=e.channel,r=e.beforeRun,t=function(){a.current="terminated",u.current=[],c.current=[],f.current=null,p.handleDebugSessionEnded(),m.current=!1},o=function(e){return d.on("started",e),function(){d.removeListener("started",e)}},a=(0,M.u)("terminated"),u=(0,M.u)([]),c=(0,M.u)([]),l=(0,M.u)(new Map),f=(0,M.u)(null),d=(0,g.ZP)(),p=function(e,n){var r=function(){var e=new Map,n=new Set,r=!0,i=!1,u=void 0;try{for(var s,c=t.entries()[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=ue(s.value,2),f=l[0],d=l[1];if(0!==d.length){var p=[],m=!0,v=!1,h=void 0;try{for(var y,b=d[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var g=y.value;if(g.breakpointId&&g.line){var E=a.get(g.breakpointId),w=void 0===E?void 0:o.get(E);w&&n.add(E),p.push({dapId:E,pid1Id:g.breakpointId,line:w&&w.line||g.line,verified:Boolean(null===w||void 0===w?void 0:w.verified),logMessage:g.logMessage||void 0})}}}catch(H){v=!0,h=H}finally{try{m||null==b.return||b.return()}finally{if(v)throw h}}e.set(f,p)}}}catch(H){i=!0,u=H}finally{try{r||null==c.return||c.return()}finally{if(i)throw u}}var x=!0,S=!1,I=void 0;try{for(var A,D=o.entries()[Symbol.iterator]();!(x=(A=D.next()).done);x=!0){var T,k,O=ue(A.value,2),C=O[0],R=O[1];if(!n.has(C)){var _=(0,Z.IT)((null===(T=R.source)||void 0===T?void 0:T.path)||(null===(k=R.source)||void 0===k?void 0:k.name)||""),N=R.line;if(_&&N){var P=e.get(_);P||(P=[],e.set(_,P));var L=!1,U=!0,F=!1,j=void 0;try{for(var G,M=P[Symbol.iterator]();!(U=(G=M.next()).done);U=!0){var B=G.value;if(B.line===R.line){B.dapId=C,B.verified=R.verified,L=!0;break}}}catch(H){F=!0,j=H}finally{try{U||null==M.return||M.return()}finally{if(F)throw j}}L||P.push({dapId:C,line:N,verified:R.verified})}}}}catch(H){S=!0,I=H}finally{try{x||null==D.return||D.return()}finally{if(S)throw I}}return e},t=new Map,o=new Map,a=new Map;function u(){return(u=oe(i().mark((function n(r){var u,s,c,l,f,d,p,m,v,h,y,b,g,E,w,x,S,I,A,D,T,k,O,C,R,_,N,P,L,U,F,j,G,M,Z,B,H,V,J,z;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:u=!0,s=!1,c=void 0,n.prev=1,l=t.entries()[Symbol.iterator]();case 3:if(u=(f=l.next()).done){n.next=91;break}if(d=ue(f.value,2),p=d[0],m=d[1],void 0===r||r===p){n.next=7;break}return n.abrupt("continue",88);case 7:return n.next=9,e({command:"setBreakpoints",arguments:{source:{name:p,path:p},breakpoints:m.map((function(e){return{line:e.line,logMessage:e.logMessage||void 0}}))}});case 9:if((v=n.sent).success){n.next=12;break}return n.abrupt("continue",88);case 12:h=!0,y=!1,b=void 0,n.prev=13,g=o[Symbol.iterator]();case 15:if(h=(E=g.next()).done){n.next=39;break}for(w=ue(E.value,2),x=w[0],S=w[1],(null===(I=S.source)||void 0===I?void 0:I.name)===p&&o.delete(x),A=!0,D=!1,T=void 0,n.prev=20,k=a[Symbol.iterator]();!(A=(O=k.next()).done);A=!0)C=ue(O.value,2),R=C[0],C[1]===x&&a.delete(R);n.next=28;break;case 24:n.prev=24,n.t0=n.catch(20),D=!0,T=n.t0;case 28:n.prev=28,n.prev=29,A||null==k.return||k.return();case 31:if(n.prev=31,!D){n.next=34;break}throw T;case 34:return n.finish(31);case 35:return n.finish(28);case 36:h=!0,n.next=15;break;case 39:n.next=45;break;case 41:n.prev=41,n.t1=n.catch(13),y=!0,b=n.t1;case 45:n.prev=45,n.prev=46,h||null==g.return||g.return();case 48:if(n.prev=48,!y){n.next=51;break}throw b;case 51:return n.finish(48);case 52:return n.finish(45);case 53:for(_=v,N=!0,P=!1,L=void 0,n.prev=55,U=_.body.breakpoints[Symbol.iterator]();!(N=(F=U.next()).done);N=!0)null!=(j=F.value).id&&o.set(j.id,ae({source:{name:p,path:p}},j));n.next=63;break;case 59:n.prev=59,n.t2=n.catch(55),P=!0,L=n.t2;case 63:n.prev=63,n.prev=64,N||null==U.return||U.return();case 66:if(n.prev=66,!P){n.next=69;break}throw L;case 69:return n.finish(66);case 70:return n.finish(63);case 71:for(G=!0,M=!1,Z=void 0,n.prev=72,B=ce(m,_.body.breakpoints)[Symbol.iterator]();!(G=(H=B.next()).done);G=!0)V=ue(H.value,2),J=V[0],z=V[1],J.breakpointId&&null!=z.id&&a.set(J.breakpointId,z.id);n.next=80;break;case 76:n.prev=76,n.t3=n.catch(72),M=!0,Z=n.t3;case 80:n.prev=80,n.prev=81,G||null==B.return||B.return();case 83:if(n.prev=83,!M){n.next=86;break}throw Z;case 86:return n.finish(83);case 87:return n.finish(80);case 88:u=!0,n.next=3;break;case 91:n.next=97;break;case 93:n.prev=93,n.t4=n.catch(1),s=!0,c=n.t4;case 97:n.prev=97,n.prev=98,u||null==l.return||l.return();case 100:if(n.prev=100,!s){n.next=103;break}throw c;case 103:return n.finish(100);case 104:return n.finish(97);case 105:case"end":return n.stop()}}),n,null,[[1,93,97,105],[13,41,45,53],[20,24,28,36],[29,,31,35],[46,,48,52],[55,59,63,71],[64,,66,70],[72,76,80,88],[81,,83,87],[98,,100,104]])})))).apply(this,arguments)}return{findPathByBreakpointId:function(e){var n=!0,r=!1,o=void 0;try{for(var i,a=t.entries()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=ue(i.value,2),s=u[0];if(u[1].some((function(n){return n.breakpointId===e})))return s}}catch(c){r=!0,o=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return null},getBreakpoints:r,flush:function(e){return u.apply(this,arguments)},handleDAPBreakpointEvent:function(e){var t=e.body,i=t.reason,a=t.breakpoint,u=a.id;if(null!==u&&void 0!==u){switch(i){case"changed":case"new":o.set(u,ae({},o.get(u),a));break;case"removed":o.delete(u);break;default:return}n(r())}},handlePID1BreakpointEvent:function(e){var o=e.absolutePath?(0,Z.IT)(e.absolutePath):null;o&&(t.set(o,e.breakpoints||[]),n(r()))},handleDebugSessionEnded:function(){o.clear(),a.clear();var e=!0,i=!1,u=void 0;try{for(var s,c=t.entries()[Symbol.iterator]();!(e=(s=c.next()).done);e=!0){var l=ue(s.value,2),f=l[0];0===l[1].length&&t.delete(f)}}catch(d){i=!0,u=d}finally{try{e||null==c.return||c.return()}finally{if(i)throw u}}n(r())}}}(w,(function(e){l.current=e})),m=(0,M.u)(!1),v=[],h=new ne((function(e){if(v.push({time:Date.now(),direction:"in",data:e}),"event"===e.type)switch(e.event){case"continued":a.current="running";break;case"stopped":var n;a.current="paused",f.current=null!==(n=e.body.threadId)&&void 0!==n?n:null,d.emit("paused",e.body.reason),function(){A.apply(this,arguments)}();break;case"breakpoint":p.handleDAPBreakpointEvent(e)}else if("response"===e.type){var r=e,t=y.get(r.request_seq);t&&(y.delete(r.request_seq),t(e))}})),y=new Map,b=100,E=!1;function w(e){return x.apply(this,arguments)}function x(){return(x=pe(i().mark((function e(r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var t=b++;y.set(t,e);var o=ve({},r,{type:"request",seq:t});v.push({time:Date.now(),direction:"out",data:o});var i={debugInput:{session:"main",adapterInput:Ee(o)}};v.push({time:Date.now(),direction:"out",data:i}),n.send(i)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return I.apply(this,arguments)}function I(){return(I=pe(i().mark((function e(r){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.push({time:Date.now(),direction:"out",data:r}),e.next=3,n.request(r);case 3:if(t=e.sent,v.push({time:Date.now(),direction:"in",data:t}),!t.error){e.next=7;break}throw t.error;case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=pe(i().mark((function e(){var n,r,t,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.current=[],c.current=[],e.next=4,w({command:"stackTrace",arguments:{threadId:f.current}});case 4:if((n=e.sent).success){e.next=7;break}return e.abrupt("return");case 7:if(u.current=n.body.stackFrames,0!==u.current.length){e.next=10;break}return e.abrupt("return");case 10:return r=u.current[0],e.next=13,w({command:"scopes",arguments:{frameId:r.id}});case 13:if((t=e.sent).success){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,Promise.all(t.body.scopes.map((function(e){return w({command:"variables",arguments:{variablesReference:e.variablesReference}}).then((function(n){return{response:n,parentVariableReference:e.variablesReference}}))})));case 18:o=e.sent,c.current=o.filter((function(e){return e.response.success})).reduce((function(e,n){var r=n.response,t=n.parentVariableReference;return e.concat(r.body.variables.map((function(e){return ve({},e,{parentVariableReference:t})})))}),[]);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return T.apply(this,arguments)}function T(){return(T=pe(i().mark((function e(){var t,o,s,c,l,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("terminated"===a.current){e.next=3;break}throw new Error("Cant start while debugger is already running");case 3:return a.current="preinitializing",u.current=[],e.next=7,r();case 7:if("stopping"!==a.current){e.next=10;break}return a.current="terminated",e.abrupt("return");case 10:return E=!0,a.current="initializing",s={debugMain:{session:"main",readOnly:!1}},v.push({time:Date.now(),direction:"out",data:s}),e.next=16,n.request(s);case 16:if(c=e.sent,v.push({time:Date.now(),direction:"in",data:c}),!c.error){e.next=22;break}return d.emit("output",c.error),a.current="terminated",e.abrupt("return");case 22:return e.next=24,w({command:"initialize",arguments:{clientID:"replit",clientName:"replit.com",adapterID:"cppdbg",pathFormat:"path",linesStartAt1:!0,columnsStartAt1:!0,supportsVariableType:!0,supportsVariablePaging:!0,supportsRunInTerminalRequest:!1,locale:"en-us",supportsProgressReporting:!0,supportsInvalidatedEvent:!0}});case 24:if((l=e.sent).success){e.next=28;break}return a.current="terminated",e.abrupt("return");case 28:return m.current=Boolean(null===(t=l.body)||void 0===t?void 0:t.supportsStepBack),f=!(null===(o=l.body)||void 0===o?void 0:o.supportsConfigurationDoneRequest),e.next=32,p.flush();case 32:if(f){e.next=35;break}return e.next=35,w({command:"configurationDone"});case 35:"initializing"===a.current&&(a.current="running"),d.emit("started",f);case 37:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,n){return O.apply(this,arguments)}function O(){return(O=pe(i().mark((function e(n,r){var t,o,u,s,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.line,o=r.otIndex,u=r.otVersion,s=r.logMessage,c=(0,Z.om)(n)||n,e.next=4,S({debugAddBreakpointRequest:{path:c,line:t,otIndex:o,otVersion:u,logMessage:s}});case 4:if("terminated"===a.current){e.next=7;break}return e.next=7,p.flush(n);case 7:d.emit("breakpoint","added");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return R.apply(this,arguments)}function R(){return(R=pe(i().mark((function e(n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.findPathByBreakpointId(n),e.next=3,S({debugRemoveBreakpointRequest:{breakpointId:n}});case 3:if("terminated"===a.current||!r){e.next=6;break}return e.next=6,p.flush(r);case 6:d.emit("breakpoint","removed");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=pe(i().mark((function e(n,r){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.findPathByBreakpointId(n)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,S({debugUpdateBreakpointRequest:{breakpointId:n,logMessage:r.logMessage}});case 5:if("terminated"===a.current){e.next=8;break}return e.next=8,p.flush(t);case 8:d.emit("breakpoint","updated");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=pe(i().mark((function e(n,r){var t,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=null===(o=null===(t=l.current.get(n))||void 0===t?void 0:t.find((function(e){return e.line===r.line&&void 0!==e.pid1Id})))||void 0===o?void 0:o.pid1Id)){e.next=7;break}return e.next=5,C(a);case 5:e.next=9;break;case 7:return e.next=9,k(n,r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n.onCommand((function(e){var n,r;v.push({time:Date.now(),direction:"in",data:e});var o=e.debugOutput,i=e.debugState,u=e.debugBreakpointEvent,c=e.debugSessions;if(o){if("main"!==o.session)return;o.adapterOutput&&h.read(o.adapterOutput),o.output&&d.emit("output",o.output)}if(u&&p.handlePID1BreakpointEvent(u),i&&i.state===s.api.State.Stopped&&t(),(null===c||void 0===c||null===(n=c.sessions)||void 0===n?void 0:n.main)!==s.api.State.Running&&(null===i||void 0===i?void 0:i.state)!==s.api.State.Running||"terminated"===a.current&&D(),(null===c||void 0===c||null===(r=c.sessions)||void 0===r?void 0:r.main)===s.api.State.Stopped||(null===i||void 0===i?void 0:i.state)===s.api.State.Stopped){if(E)return void(E=!1);t()}})),{state:a,stackFrames:u,variables:c,breakpoints:l,supportsStepBack:m,onOutput:function(e){return d.on("output",e),function(){d.removeListener("output",e)}},onStarted:o,onPaused:function(e){return d.on("paused",e),function(){d.removeListener("paused",e)}},onBreakpoint:function(e){return d.on("breakpoint",e),function(){d.removeListener("breakpoint",e)}},sendInput:function(e){return pe(i().mark((function r(){var t,o;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t={debugInput:{session:"main",input:e}},v.push({time:Date.now(),direction:"out",data:t}),r.next=4,n.request(t);case 4:if(o=r.sent,v.push({time:Date.now(),direction:"in",data:o}),!o.error){r.next=8;break}throw o.error;case 8:case"end":return r.stop()}}),r)})))()},fetchVariables:function(e){return pe(i().mark((function n(){var r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w({command:"variables",arguments:{variablesReference:e}});case 2:if(!(r=n.sent).success){n.next=5;break}return n.abrupt("return",r.body.variables.map((function(n){return ve({},n,{parentVariableReference:e})})));case 5:throw new Error(r.message);case 6:case"end":return n.stop()}}),n)})))()},addBreakpoint:k,removeBreakpoint:C,updateBreakpoint:function(e,n){return _.apply(this,arguments)},toggleBreakpoint:function(e,n){return N.apply(this,arguments)},start:D,continue:function(){return pe(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.current=[],a.current="running",e.next=4,w({command:"continue",arguments:{threadId:f.current}});case 4:case"end":return e.stop()}}),e)})))()},reverseContinue:function(){return pe(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.current=[],a.current="running",e.next=4,w({command:"reverseContinue",arguments:{threadId:f.current}});case 4:case"end":return e.stop()}}),e)})))()},back:function(){return pe(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.current="running",e.next=3,w({command:"stepBack",arguments:{threadId:f.current}});case 3:case"end":return e.stop()}}),e)})))()},next:function(){return pe(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.current="running",e.next=3,w({command:"stepIn",arguments:{threadId:f.current}});case 3:case"end":return e.stop()}}),e)})))()},skip:function(){return pe(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.current="running",e.next=3,w({command:"next",arguments:{threadId:f.current,granularity:"line"}});case 3:case"end":return e.stop()}}),e)})))()},stepOut:function(){return pe(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.current="running",e.next=3,w({command:"stepOut",arguments:{threadId:f.current}});case 3:case"end":return e.stop()}}),e)})))()},stop:function(){return pe(i().mark((function e(){var r,t,u,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("terminated"!==a.current){e.next=2;break}throw new Error("Debugger already terminated");case 2:if(r=a.current,a.current="stopping","preinitializing"!==r){e.next=6;break}return e.abrupt("return");case 6:if("initializing"!==r){e.next=13;break}return t=[],e.next=10,Promise.race([new Promise((function(e){t.push(a.subscribe((function(){return e()})))})),new Promise((function(e){t.push(o((function(){return e()})))}))]);case 10:if(t.forEach((function(e){return e()})),"terminated"!==a.current){e.next=13;break}return e.abrupt("return");case 13:return u={debugStop:{session:"main"}},v.push({time:Date.now(),direction:"out",data:u}),e.next=17,n.request(u);case 17:if(s=e.sent,v.push({time:Date.now(),direction:"in",data:s}),!s.error){e.next=21;break}throw new Error("Failed to stop debugger "+s.error);case 21:case"end":return e.stop()}}),e)})))()},getSource:function(e){return pe(i().mark((function n(){var r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w({command:"source",arguments:{source:{path:e}}});case 2:if((r=n.sent).success){n.next=5;break}throw new Error(r.message);case 5:return n.abrupt("return",r.body.content);case 6:case"end":return n.stop()}}),n)})))()},getDebugLogs:function(){return Object.entries({state:a,stackFrames:u,variables:c,breakpoints:l,threadId:f}).map((function(e){var n,r,t=he(e,2),o=t[0],i=t[1];return"".concat(o," = ").concat(JSON.stringify((n=i.current,(null!=(r=Map)&&"undefined"!==typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](n):n instanceof r)?ye(i.current):i.current),void 0,2))})).join("\n")+"\n\n"+v.map((function(e){return[new Date(e.time).toLocaleString(),"in"===e.direction?"->":"<-",JSON.stringify(e.data)].join(" ")})).join("\n")}}}function Ee(e){var n=JSON.stringify(e);return"Content-Length: ".concat(le.byteLength(n),"\r\n\r\n").concat(n)}var we,xe=r(11938),Se=r(70240),Ie=r(24865),Ae=r(27740),De=r.n(Ae),Te=r(28468),ke=r(69219),Oe=function(e){var n=e.configurationSupport;return{textDocument:{synchronization:{dynamicRegistration:!0,didSave:!0},signatureHelp:{dynamicRegistration:!0,signatureInformation:{documentationFormat:["plaintext","markdown"]}},publishDiagnostics:{relatedInformation:!0},formatting:{dynamicRegistration:!0},documentSymbol:{dynamicRegistration:!0,hierarchicalDocumentSymbolSupport:!0,symbolKind:{valueSet:ke.$}},definition:{dynamicRegistration:!0},typeDefinition:{dynamicRegistration:!0},implementation:{dynamicRegistration:!0},references:{dynamicRegistration:!0},rename:{dynamicRegistration:!0,prepareSupport:!0},completion:{dynamicRegistration:!0,completionItem:{documentationFormat:["plaintext","markdown"],snippetSupport:!0}},codeAction:{dynamicRegistration:!0,codeActionLiteralSupport:{codeActionKind:{valueSet:Object.values(Te.CodeActionKind)}}},hover:{dynamicRegistration:!0,contentFormat:["plaintext"]}},workspace:{applyEdit:!0,didChangeConfiguration:n.clientToServer?{dynamicRegistration:!0}:void 0,configuration:n.serverToClient,executeCommand:{dynamicRegistration:!0},workspaceEdit:{documentChanges:!0,resourceOperations:[Te.ResourceOperationKind.Create,Te.ResourceOperationKind.Delete,Te.ResourceOperationKind.Rename]}}}},Ce=r(51717),Re=r(15111),_e=r(48764).Buffer;function Ne(e,n,r,t,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void r(c)}u.done?n(s):Promise.resolve(s).then(t,o)}function Pe(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function a(e){Ne(i,t,o,a,u,"next",e)}function u(e){Ne(i,t,o,a,u,"throw",e)}a(void 0)}))}}function Le(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function Ue(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){Le(e,n,r[n])}))}return e}function Fe(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function je(e,n){return(0,Re.D)(e)||n}function Ge(e,n){return e.line<n.line||e.line===n.line&&e.character<=n.character}function Me(){return Math.floor(Math.random()*(Math.pow(2,31)-1))}function Ze(e){var n=JSON.stringify(Ue({},e,{jsonrpc:"2.0"})),r=_e.byteLength(n,"utf8");return"Content-Length: ".concat(r,"\r\n\r\n").concat(n)}function Be(e){var n=e.connection,r=e.isSupportedFile,t=e.clientId,o=e.getWorkspaceConfiguration,a=e.onWorkspaceConfigurationChange,u=function(e){if(!h)throw new Error("Expected rootUri");return e.slice(h.length+1)},s=function(e){if(!h)throw new Error("Expected rootUri");if(e.startsWith("/"))throw new Error("Path must be relative. Got: ".concat(e));return h+"/"+e},c=function(e){y!==e&&(y=e,v.emit(we.SERVER_STATE_CHANGE,y))},l=function(e){v.emit(we.SEND_NOTIFICATION,e),n.write(Ze(e))},f=function(e){var r=e.options,t=void 0===r?{}:r,o=t.id,i=void 0===o?Me():o,a=t.signal,u=t.tap,s=Fe(e,["options"]);if(!Number.isInteger(i))throw new Error("Request ID must be an integer");if(n.didClose())return Promise.resolve({result:null,cancelled:!0});v.emit(we.REQUEST,{id:i,data:s}),null===a||void 0===a||a.addEventListener("abort",(function(){p(i)}),{once:!0}),n.write(Ze(Ue({},s,{id:i})));var c=new Promise((function(e){w.set(i,e)}));return u&&u(c),c},d=function(e,r){n.write(Ze(Ue({},r,{id:e})))},p=function(e){var n=w.get(e);n&&(v.emit(we.CANCEL_REQUEST,e),n({result:null,cancelled:!0}),w.delete(e),l({method:"$/cancelRequest",params:{id:e}}))},m=function(e){if(!b)throw new Error("Expected client to be initialized");if(!b[e])throw new Error("LSP Server does not support ".concat(e.replace(/Provider$/,"")));return b[e]},v=(0,g.ZP)(),h=null,y=Ie.a.OFFLINE,b=null,E=new Map,w=new Map,x=new ne((function(e){if(e.id&&w.has(e.id)){var n=w.get(e.id);w.delete(e.id);var r=e.result,i=e.error;if((void 0!==r||i)&&v.emit(we.RESPONSE,e),"undefined"!==typeof r)return void n({result:r,cancelled:!1});if(i){var a=i.code,s=i.message,c=i.data;return Se.kg.error("LSP request failed",{code:a,lspId:t,errorMessage:s,data:JSON.stringify(c)}),void n({error:i})}throw Se.kg.error("LSP response message contained neither error nor result"),new Error("Expected either message or error in LSP response")}var l=e.method;if("client/registerCapability"!==l)if("workspace/applyEdit"!==l){if("textDocument/publishDiagnostics"===l){var f=u(e.params.uri),p=E.get(f);if(!p)return;var m=e.params.diagnostics;return p.diagnostics=m,E.set(f,p),void v.emit(we.DIAGNOSTICS,{path:f,diagnostics:m})}if("workspace/configuration"===l){var h,y=e.params,g=Array(y.items.length).fill(null),x=null!==(h=null===o||void 0===o?void 0:o())&&void 0!==h?h:null;x&&(g=y.items.map((function(e){return e.section?(0,Ce.Z)(x,e.section):x}))),d(e.id,{result:g,cancelled:!1})}}else v.emit(we.WORKSPACE_EDIT,Ue({id:e.id},e.params));else{var S=e.params.registrations;if(!S||!Array.isArray(S))throw new Error("Expected registrations array");S.forEach((function(e){var n=e.method;if(!n)throw new Error("Expected registration method");if(!b)throw new Error("Expected server capabilities");var r=e.registerOptions||!0;switch(n){case"textDocument/definition":b.definitionProvider=!0;break;case"textDocument/typeDefinition":b.typeDefinitionProvider=!0;break;case"textDocument/implementation":b.implementationProvider=!0;break;case"textDocument/references":b.referencesProvider=!0;break;case"textDocument/hover":b.hoverProvider=!0;break;case"textDocument/completion":b.completionProvider=r;break;case"textDocument/formatting":b.documentFormattingProvider=r;break;case"textDocument/rename":b.renameProvider=r;break;case"textDocument/codeAction":b.codeActionProvider=r;break;case"textDocument/signatureHelp":b.signatureHelpProvider=r;break;case"textDocument/didSave":if("number"===typeof b.textDocumentSync)break;b.textDocumentSync=Ue({},b.textDocumentSync||{},{save:r});break;case"textDocument/willSaveWaitUntil":if("number"===typeof b.textDocumentSync)break;b.textDocumentSync=Ue({},b.textDocumentSync||{},{willSave:!0});break;case"textDocument/didChange":if("number"===typeof b.textDocumentSync)break;b.textDocumentSync=Ue({},b.textDocumentSync||{},{change:r});break;case"textDocument/didOpen":case"textDocument/didClose":if("number"===typeof b.textDocumentSync)break;b.textDocumentSync=Ue({},b.textDocumentSync||{},{openClose:!0});break;case"workspace/executeCommand":b.executeCommandProvider=r;break;default:Se.kg.info("Unexpected dynamically registered capability in LSP client",{method:n})}v.emit(we.SERVER_CAPABILITIES_CHANGE,b)}))}}));n.read(x.read);var S=function(){};return{initialize:function(e){var n=e.pwd,r=e.initializationOptions;return Pe(i().mark((function e(){var t,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(Ie.a.INITIALIZING),h="file://".concat(n),e.next=4,f({method:"initialize",params:{initializationOptions:r,capabilities:Oe({configurationSupport:{serverToClient:Boolean(o),clientToServer:Boolean(a)}}),processId:null,rootUri:h,workspaceFolders:[{name:h,uri:h}]}});case 4:if(!("error"in(t=e.sent))){e.next=7;break}throw new Error("Something went wrong initializing the LSP client: ".concat(t.error.message));case 7:if(!t.cancelled){e.next=9;break}throw new Error("Initialize request cancelled");case 9:if(t.result){e.next=11;break}throw new Error("Expected result in initialize request");case 11:l({method:"initialized",params:{}}),b=t.result.capabilities,v.emit(we.SERVER_CAPABILITIES_CHANGE,b),c(Ie.a.INITIALIZED),a&&(S=a((function(e){l({method:"workspace/didChangeConfiguration",params:{settings:e}})})),o&&(u=o(),l({method:"workspace/didChangeConfiguration",params:{settings:u}})));case 16:case"end":return e.stop()}}),e)})))()},generateId:Me,notify:{didOpen:function(e,n){if(!r(e))throw new Error("Path not supported");var o,i=E.get(e);if(i&&0!==i.buffers)return i.buffers++,void E.set(e,i);var a=null!==(o=null===i||void 0===i?void 0:i.version)&&void 0!==o?o:0;E.set(e,{version:a,buffers:1,diagnostics:[]}),l({method:"textDocument/didOpen",params:{textDocument:{uri:s(e),languageId:je(e,t),text:n,version:a}}})},didChange:function(e,n){var r=E.get(e);if(!r)throw new Error('Document for "'.concat(e,'" is not open'));r.version++,l({method:"textDocument/didChange",params:{textDocument:{uri:s(e),version:r.version},contentChanges:n}})},didSave:function(e){if(!E.get(e))throw new Error('Document for "'.concat(e,'" is not open'));m("textDocumentSync"),l({method:"textDocument/didSave",params:{textDocument:{uri:s(e)}}})},didClose:function(e){var n=E.get(e);if(!n)throw new Error('Document for "'.concat(e,'" is not open'));n.buffers--,n.buffers>0||(l({method:"textDocument/didClose",params:{textDocument:{uri:s(e)}}}),E.delete(e))},cancelRequest:function(e){p(e)}},request:{completion:function(e,n,r){return m("completionProvider"),f({method:"textDocument/completion",params:{textDocument:{uri:s(e)},position:n,context:r}})},resolveCompletionItem:function(e){if(!m("completionProvider").resolveProvider)throw new Error("LSP Server does not support resolving completion items");return f({method:"completionItem/resolve",params:e})},signatureHelp:function(e,n){return f({method:"textDocument/signatureHelp",params:{textDocument:{uri:s(e)},position:n}})},hover:function(e,n){return f({method:"textDocument/hover",params:{textDocument:{uri:s(e)},position:n}})},codeActions:function(e,n){var r=E.get(e);if(!r)throw new Error("Document for path ".concat(e," is not open."));var t=r.diagnostics.filter((function(e){return r=e.range,t=n,Ge(r.start,t.end)&&Ge(t.start,r.end);var r,t}));return f({method:"textDocument/codeAction",params:{textDocument:{uri:s(e)},range:n,context:{diagnostics:t}}})},executeCommand:function(e,n){return f({method:"workspace/executeCommand",params:{command:e,arguments:n}})},format:function(e,n){return m("documentFormattingProvider"),f({method:"textDocument/formatting",params:{textDocument:{uri:s(e)},options:n}})},findDefinitions:function(e,n,r){return Pe(i().mark((function t(){var o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m("definitionProvider"),t.next=3,f({options:r,method:"textDocument/definition",params:{textDocument:{uri:s(e)},position:n}});case 3:if("result"in(o=t.sent)){t.next=6;break}return t.abrupt("return",o);case 6:if(!o.result||Array.isArray(o.result)){t.next=8;break}return t.abrupt("return",{result:[o.result],cancelled:!1});case 8:return t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)})))()},findTypeDefinitions:function(e,n,r){return Pe(i().mark((function t(){var o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m("typeDefinitionProvider"),t.next=3,f({options:r,method:"textDocument/typeDefinition",params:{textDocument:{uri:s(e)},position:n}});case 3:if("result"in(o=t.sent)){t.next=6;break}return t.abrupt("return",o);case 6:if(!o.result||Array.isArray(o.result)){t.next=8;break}return t.abrupt("return",{result:[o.result],cancelled:!1});case 8:return t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)})))()},findImplementations:function(e,n,r){return Pe(i().mark((function t(){var o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m("implementationProvider"),t.next=3,f({options:r,method:"textDocument/implementation",params:{textDocument:{uri:s(e)},position:n}});case 3:if("result"in(o=t.sent)){t.next=6;break}return t.abrupt("return",o);case 6:if(!o.result||Array.isArray(o.result)){t.next=8;break}return t.abrupt("return",{result:[o.result],cancelled:!1});case 8:return t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)})))()},findReferences:function(e,n,r){return m("referencesProvider"),f({method:"textDocument/references",params:{textDocument:{uri:s(e)},position:n,context:r}})},rename:function(e,n,r,t){return m("renameProvider"),f({options:t,method:"textDocument/rename",params:{textDocument:{uri:s(e)},position:n,newName:r}})},prepareRename:function(e,n){var r=m("renameProvider");if("boolean"===typeof r||!r.prepareProvider)throw new Error("LSP server does not support prepare rename");return f({method:"textDocument/prepareRename",params:{textDocument:{uri:s(e)},position:n}})},documentSymbol:function(e,n){return Pe(i().mark((function r(){var t;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f({options:n,method:"textDocument/documentSymbol",params:{textDocument:{uri:s(e)}}});case 2:if("result"in(t=r.sent)){r.next=5;break}return r.abrupt("return",t);case 5:if(!t.result){r.next=7;break}return r.abrupt("return",{result:t.result,cancelled:!1});case 7:case"end":return r.stop()}}),r)})))()}},onDiagnostics:(0,g.JV)(v,we.DIAGNOSTICS),onWorkspaceEdit:function(e){return(0,g.NH)(v,we.WORKSPACE_EDIT,(function(n){var r=e(n);d(n.id,{result:r,cancelled:!1})}))},onServerStateChange:(0,g.JV)(v,we.SERVER_STATE_CHANGE),onServerCapabilitiesChange:(0,g.JV)(v,we.SERVER_CAPABILITIES_CHANGE),onRequest:(0,g.JV)(v,we.REQUEST),onResponse:(0,g.JV)(v,we.RESPONSE),onCancelRequest:(0,g.JV)(v,we.CANCEL_REQUEST),onSendNotification:(0,g.JV)(v,we.SEND_NOTIFICATION),shutdown:function(){for(var e in c(Ie.a.EXITING),E.clear(),w)p(Number(e));S(),f({method:"shutdown"}).then((function(){l({method:"exit"}),c(Ie.a.EXITED),v.removeAllListeners()}))},destroy:function(){for(var e in E.clear(),w)p(Number(e));S(),c(Ie.a.EXITED),v.removeAllListeners()},getServerState:function(){return y},getServerCapabilities:function(){return b},getDiagnostics:function(e){var n=E.get(e);if(!n)throw new Error("File with path ".concat(e," is not open."));return n.diagnostics},isOpen:function(e){return E.has(e)},documentUriToPath:u,pathToDocumentURI:s,isSupportedFile:r}}!function(e){e.INITIALIZED="INITIALIZED",e.DIAGNOSTICS="DIAGNOSTICS",e.WORKSPACE_EDIT="WORKSPACE_EDIT",e.SERVER_STATE_CHANGE="SERVER_STATE_CHANGE",e.SERVER_CAPABILITIES_CHANGE="SERVER_CAPABILITIES_CHANGE",e.REQUEST="REQUEST",e.RESPONSE="RESPONSE",e.CANCEL_REQUEST="CANCEL_REQUEST",e.SEND_NOTIFICATION="SEND_NOTIFICATION"}(we||(we={}));var He,Ve=["typescript","javascript","javascriptreact","typescriptreact"];!function(e){e.ON_CLIENT="ON_CLIENT"}(He||(He={}));var Je=r(93770),ze=r(58646);function We(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function qe(e,n,r,t,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void r(c)}u.done?n(s):Promise.resolve(s).then(t,o)}function Ke(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function a(e){qe(i,t,o,a,u,"next",e)}function u(e){qe(i,t,o,a,u,"throw",e)}a(void 0)}))}}function Ye(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return We(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return We(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=Ke(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.t1=Je.Z,e.next=4,Qe(n);case 4:return e.t2=e.sent,e.t3=e.t1.from.call(e.t1,e.t2),e.abrupt("return",e.t0.writeFile.call(e.t0,"index.html",e.t3));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(e){return en.apply(this,arguments)}function en(){return(en=Ke(i().mark((function e(n){var r,t,o,a,u,s,c,l,f,d,p,m,v,h,y,b,g,w,x,S,I,A,D,T,k,O,C,R,_,N,P,L,U,F,j,G,M,Z,B,H,V;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",t="",e.next=4,n.readFile("conf.json");case 4:if(!(o=e.sent).error){e.next=7;break}return e.abrupt("return","");case 7:return a=JSON.parse(o.content.toString()),(0,ze.h)(a.version,"0.1.0")?t+="kaboom.import();\n":(0,ze.h)(a.version,"0.4.0")&&(t+="kaboom.global();\n"),(0,ze.h)(a.version,"0.4.0")?t+="\ninit({\n  ...".concat(JSON.stringify(a),",\n  clearColor: ").concat(a.clearColor?function(){var e=a.clearColor;return JSON.stringify({r:e[0],g:e[1],b:e[2],a:e[3]})}():"undefined","\n});\n  "):t+="\nkaboom({\n  ...".concat(JSON.stringify(a),",\n  global: true,\n  plugins: [ peditPlugin, asepritePlugin, kbmspritePlugin ],\n});\n"),e.t0=Ye,e.next=13,Promise.all(["scenes","sprites","sounds"].map(n.readDir));case 13:if(e.t1=e.sent,u=(0,e.t0)(e.t1,3),s=u[0],c=u[1],l=u[2],c.error){e.next=36;break}for(f=!0,d=!1,p=void 0,e.prev=20,m=c.children[Symbol.iterator]();!(f=(v=m.next()).done);f=!0)h=v.value,y=JSON.stringify((0,E.eb)(h.filename)),b=JSON.stringify("sprites/".concat(h.filename)),(0,ze.H)(a.version,"0.4.0")?h.filename.endsWith(".pedit")?t+="loadPedit(".concat(y,", ").concat(b,");\n"):h.filename.endsWith(".kbmsprite")?t+="loadKbmsprite(".concat(y,", ").concat(b,");\n"):t+="loadSprite(".concat(y,", ").concat(b,");\n"):t+="loadSprite(".concat(y,", ").concat(b,");\n");e.next=28;break;case 24:e.prev=24,e.t2=e.catch(20),d=!0,p=e.t2;case 28:e.prev=28,e.prev=29,f||null==m.return||m.return();case 31:if(e.prev=31,!d){e.next=34;break}throw p;case 34:return e.finish(31);case 35:return e.finish(28);case 36:if(l.error){e.next=54;break}for(g=!0,w=!1,x=void 0,e.prev=38,S=l.children[Symbol.iterator]();!(g=(I=S.next()).done);g=!0)A=I.value,D=JSON.stringify((0,E.eb)(A.filename)),T=JSON.stringify("sounds/".concat(A.filename)),t+="loadSound(".concat(D,", ").concat(T,");\n");e.next=46;break;case 42:e.prev=42,e.t3=e.catch(38),w=!0,x=e.t3;case 46:e.prev=46,e.prev=47,g||null==S.return||S.return();case 49:if(e.prev=49,!w){e.next=52;break}throw x;case 52:return e.finish(49);case 53:return e.finish(46);case 54:if(s.error){e.next=84;break}return e.next=57,Promise.all(s.children.map((function(e){var r=e.filename;return Promise.all([(0,E.eb)(r),n.readFile("scenes/".concat(r))])})));case 57:k=e.sent,O=!0,C=!1,R=void 0,e.prev=59,_=k[Symbol.iterator]();case 61:if(O=(N=_.next()).done){e.next=70;break}if(P=N.value,L=Ye(P,2),U=L[0],!(F=L[1]).error){e.next=66;break}return e.abrupt("continue",67);case 66:t+="scene(".concat(JSON.stringify(U),", (args = {}) => {\n").concat(F.content.toString(),"\n});\n");case 67:O=!0,e.next=61;break;case 70:e.next=76;break;case 72:e.prev=72,e.t4=e.catch(59),C=!0,R=e.t4;case 76:e.prev=76,e.prev=77,O||null==_.return||_.return();case 79:if(e.prev=79,!C){e.next=82;break}throw R;case 82:return e.finish(79);case 83:return e.finish(76);case 84:for(t+="start(".concat(JSON.stringify(a.startScene),");\n"),j=["kaboom.js"],(0,ze.h)(a.version,"0.1.0")?(j.push("kit/physics.js"),j.push("kit/starter.js"),j.push("kit/level.js")):(0,ze.H)(a.version,"0.4.0")&&(j.push("plugins/aseprite.js"),j.push("plugins/pedit.js")),G=!0,M=!1,Z=void 0,e.prev=88,B=j[Symbol.iterator]();!(G=(H=B.next()).done);G=!0)V=H.value,r+='<script src="https://kaboomjs.com/lib/'.concat(encodeURIComponent(a.version),"/").concat(encodeURI(V),'"><\/script>\n');e.next=96;break;case 92:e.prev=92,e.t5=e.catch(88),M=!0,Z=e.t5;case 96:e.prev=96,e.prev=97,G||null==B.return||B.return();case 99:if(e.prev=99,!M){e.next=102;break}throw Z;case 102:return e.finish(99);case 103:return e.finish(96);case 104:return(0,ze.H)(a.version,"0.4.0")&&(r+='<script src="https://kaboomjs.com/pub/legacy/kbmsprite.js"><\/script>\n'),e.abrupt("return",'\n<!DOCTYPE html>\n\n<html>\n\n<head>\n  <title>kaboom</title>\n  <meta charset="utf-8">\n  <style>\n    * {\n      margin: 0;\n    }\n    html,\n    body {\n      width: 100%;\n      height: 100%;\n      overflow: hidden;\n    }\n    canvas {\n      display: block;\n    }\n  </style>\n</head>\n\n<body>\n'.concat(r,"\n  <script>\n").concat(t,"\n  <\/script>\n</body>\n\n</html>\n"));case 106:case"end":return e.stop()}}),e,null,[[20,24,28,36],[29,,31,35],[38,42,46,54],[47,,49,53],[59,72,76,84],[77,,79,83],[88,92,96,104],[97,,99,103]])})))).apply(this,arguments)}var nn=r(9440),rn=r(41951),tn=r(923),on=r(83633),an=r.n(on);function un(e,n,r,t,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void r(c)}u.done?n(s):Promise.resolve(s).then(t,o)}var sn;function cn(e){var n=e.container,r=e.beforeRun,t=(0,g.ZP)(),o=tn.Z.Idle,a=new Date(0),u=!1;t.on(tn.z.TEST_RESULT,(function(e){u=u&&"passed"===e.body}));var c=function(e){t.emit(tn.z.STATE_CHANGED,e),o=e},l=function(){var e,n=(e=i().mark((function e(n,r){var o,a,u,l,f,d,p,m,v,h,y;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=rn.api.Payload.fromObject(r),!(a=rn.api.Payload.verify(o))){e.next=4;break}throw a;case 4:return u=new(an())((function(e){var n=rn.api.Response.fromObject(e),r=rn.api.Response.verify(n);if(r)B.Tb(new TypeError("invalid payload received"),(function(t){return t.setExtras({validationError:r,payload:o,message:e,response:n})}));else switch(n.body){case"error":return t.emit(tn.z.ERROR,n.error);case"instructionResult":return t.emit(tn.z.INSTRUCTION_RESULT,n.instructionResult);case"testResult":return t.emit(tn.z.TEST_RESULT,n.testResult);case"status":switch(n.status){case rn.api.Status.Ready:return c(tn.Z.Ready);case rn.api.Status.Building:return c(tn.Z.Building);case rn.api.Status.Running:return c(tn.Z.Running)}}})),l=n.onCommand((function(e){if(e.output)try{u.submit(e.output)}catch(n){B.Tb(new SyntaxError("invalid response received from i/o testing binary"),(function(r){return r.setExtras({err:n,payload:o,cmd:e})}))}})),f=n.request({exec:{args:["io-tester"],splitStderr:!0,lifecycle:s.api.Exec.Lifecycle.STDIN,splitLogs:!0}}),e.next=9,new Promise((function(e,n){var r,o=function(){r(),e()};t.once(tn.z.STATE_CHANGED,o);var i=setTimeout((function(){r(),n(new Error("timeout while waiting for iotester to start"))}),2e4);r=function(){clearTimeout(i),t.off(tn.z.STATE_CHANGED,o)}}));case 9:return e.next=11,n.request({input:JSON.stringify(o)+"\n"});case 11:if((d=e.sent).ok){e.next=17;break}throw m=new Error(null!==(p=d.error)&&void 0!==p?p:"unexpected error occurred while sending input to i/o testing binary"),B.Tb(m,(function(e){return e.setExtra("status",d)})),m;case 17:return e.next=19,f;case 19:(v=e.sent).ok||(y=new Error(null!==(h=v.error)&&void 0!==h?h:"unexpected error occurred while executing i/o testing binary"),B.Tb(y,(function(e){return e.setExtra("result",v)}))),l();case 22:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function a(e){un(i,t,o,a,u,"next",e)}function u(e){un(i,t,o,a,u,"throw",e)}a(void 0)}))});return function(e,r){return n.apply(this,arguments)}}();return{run:function(e){if(o!==tn.Z.Idle)throw new Error("iotester already running");return c(tn.Z.Starting),a=new Date,u=!0,r().then((function(){return new Promise((function(r,t){var o=n.openChannel({service:"exec"},(function(n){if(n.error)return t(n.error),o;var i="",a="",u=n.channel.onCommand((function(e){e.log?i+=e.log:e.stderr&&(a+=e.stderr)}));return r(l(n.channel,e).finally((function(){u(),o(),(a||i)&&B.Tb(new Error("logs received from io tseter"),(function(n){return n.setExtras({logs:i,stderr:a,payload:e})}))}))),o}))}))})).catch((function(e){return u=!1,Promise.reject(e)})).finally((function(){return c(tn.Z.Idle)}))},get lastRunAt(){return a},get state(){return o},get lastRunDidPass(){return u},onInstructionResult:function(e){return t.on(tn.z.INSTRUCTION_RESULT,e),function(){t.off(tn.z.INSTRUCTION_RESULT,e)}},onStateChanged:function(e){return t.on(tn.z.STATE_CHANGED,e),function(){t.off(tn.z.STATE_CHANGED,e)}},onTestResult:function(e){return t.on(tn.z.TEST_RESULT,e),function(){t.off(tn.z.TEST_RESULT,e)}},onError:function(e){return t.on(tn.z.ERROR,e),function(){t.off(tn.z.ERROR,e)}}}}function ln(e,n,r,t,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void r(c)}u.done?n(s):Promise.resolve(s).then(t,o)}function fn(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function a(e){ln(i,t,o,a,u,"next",e)}function u(e){ln(i,t,o,a,u,"throw",e)}a(void 0)}))}}function dn(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function pn(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){dn(e,n,r[n])}))}return e}!function(e){e.ANCHORS_ADDED="ANCHORS_ADDED",e.ANCHORS_REMOVED="ANCHORS_REMOVED",e.PORTAL_UPDATED="PORTAL_UPDATED",e.THREAD_CREATED="THREADS_CREATED",e.CODE_EXPLAINED="CODE_EXPLAINED"}(sn||(sn={}));var mn=r(90361),vn=r(81700),hn=r.n(vn);function yn(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function bn(e,n,r,t,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void r(c)}u.done?n(s):Promise.resolve(s).then(t,o)}function gn(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function a(e){bn(i,t,o,a,u,"next",e)}function u(e){bn(i,t,o,a,u,"throw",e)}a(void 0)}))}}function En(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function wn(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function xn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return yn(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yn(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sn(e,n){return hn()(e,{extended:!0,globstar:!0}).test(n)}function In(e,n){return e&&n?e.globPattern===n.globPattern&&(JSON.stringify(e.startCommand)===JSON.stringify(n.startCommand)&&(JSON.stringify(e.startCommand)===JSON.stringify(n.startCommand)&&(e.initializationOptionsJson===n.initializationOptionsJson&&e.configurationJson===n.configurationJson))):Boolean(e)===Boolean(n)}function An(e){return Dn.apply(this,arguments)}function Dn(){return Dn=gn(i().mark((function e(n){var r,t,o=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:0,e.next=3,n.exec("pwd");case 3:if(null===(t=e.sent).error){e.next=8;break}if(!(r>5)){e.next=7;break}return e.abrupt("return",{error:new Error("Could not get cwd "+t.error),workingDirectory:null});case 7:return e.abrupt("return",An(n,r+1));case 8:return e.abrupt("return",{error:null,workingDirectory:t.output.replace("\n","")});case 9:case"end":return e.stop()}}),e)}))),Dn.apply(this,arguments)}function Tn(e){var n=e.container,r=e.dotReplit,t=e.allowNonNix,o=void 0!==t&&t,i=function(e){var n=l[e];if(!n)throw new Error("configId was never configured");var r=n.client;if(r){n.client=null,r.destroy();var t=!0,o=!1,i=void 0;try{for(var a,s=u[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var f=xn(a.value,2),d=f[0],p=f[1];if(c.get(d)===r){c.delete(d);var m=!0,v=!1,h=void 0;try{for(var y,b=p[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){(0,y.value)(null)}}catch(g){v=!0,h=g}finally{try{m||null==b.return||b.return()}finally{if(v)throw h}}}}}catch(g){o=!0,i=g}finally{try{t||null==s.return||s.return()}finally{if(o)throw i}}}n.closeChannel(),delete l[e]},a=function(e,n){if(l[e])throw new Error("configId is already configured");l[e]=function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){En(e,n,r[n])}))}return e}({client:null,closeChannel:function(){}},n),f&&d(e)},u=new Map,c=new Map,l=Object.create(null),f=!0;function d(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!f)throw new Error("Called startClient while not enabled");if(!l[e])throw new Error("No config found for language");var t=l[e],i=t.client,a=(t.closeChannel,wn(t,["client","closeChannel"]));if(i)throw new Error("A client is already set for language");var p=new Date,m=[],v=n.openChannel({service:"lsp2",skip:function(e){if(o)return!1;var n=e.repl.language;return!n.startsWith("nix")&&!n.startsWith("html")}},(function(t){var o=t.channel;if(o){var i=null,h=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];m.forEach((function(e){return e()})),null===i||void 0===i||i.destroy(),l[e].client===i&&(l[e].client=null),n&&f||v();var r=!0,t=!1,o=void 0;try{for(var a,s=u[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var d=xn(a.value,2),p=d[0],h=d[1],y=c.get(p);if(y===i){c.delete(p);var b=!0,g=!1,E=void 0;try{for(var w,x=h[Symbol.iterator]();!(b=(w=x.next()).done);b=!0){var S=w.value;S(null)}}catch(I){g=!0,E=I}finally{try{b||null==x.return||x.return()}finally{if(g)throw E}}}}}catch(I){t=!0,o=I}finally{try{r||null==s.return||s.return()}finally{if(t)throw o}}};return o.request({startLSP:{language:e}}).then((function(t){t.ok&&f&&l[e]&&(m.push(o.onCommand((function(n){if(n.state===s.api.State.Stopped)if(Se.kg.error("LSP server unexpectedly disconnected",{lspId:e,appService:"lspnix"}),h(),(new Date).getTime()-p.getTime()<5e3){if(r<3){var t=1e3*Math.pow(2,r);setTimeout((function(){return d(e,r+1)}),t)}}else d(e)}))),An(n).then((function(n){if(In(l[e],a)&&"open"===o.status&&!n.error){var r;if(i=Be({connection:{read:function(e){o.onCommand((function(n){n.output&&e(n.output)}))},write:function(e){"open"===o.status&&o.send({input:e})},didClose:function(){return"open"!==o.status}},clientId:e,isSupportedFile:function(e){return Sn(a.globPattern,e)},getWorkspaceConfiguration:function(){if(!a.configurationJson)return null;var e=null;try{e=JSON.parse(a.configurationJson)}catch(n){Se.kg.error("Failed to parse LSP workspace configuration",{configurationJson:a.configurationJson})}return e}}),a.initializationOptionsJson)try{r=JSON.parse(a.initializationOptionsJson)}catch(t){Se.kg.error("Failed to parse LSP initializationOptions",{initializationOptionsJson:a.initializationOptionsJson})}i.initialize({pwd:n.workingDirectory,initializationOptions:r}).catch((function(e){if("Initialize request cancelled"!==e.message)throw e})),m.push(i.onServerStateChange((function(n){if("open"===o.status&&i&&In(l[e],a)&&n===Ie.a.INITIALIZED){l[e].client=i;var r=!0,t=!1,s=void 0;try{for(var f,d=u[Symbol.iterator]();!(r=(f=d.next()).done);r=!0){var p=xn(f.value,2),m=p[0],v=p[1];if(Sn(a.globPattern,m)&&!c.has(m)){c.set(m,i);var h=!0,y=!1,b=void 0;try{for(var g,E=v[Symbol.iterator]();!(h=(g=E.next()).done);h=!0){(0,g.value)(i)}}catch(w){y=!0,b=w}finally{try{h||null==E.return||E.return()}finally{if(y)throw b}}}}}catch(w){t=!0,s=w}finally{try{r||null==d.return||d.return()}finally{if(t)throw s}}}})))}})))})),function(e){var n=e.willReconnect;h(n)}}}));l[e].closeChannel=v}return r.watch((function(e){if(e.error){if(e.error===mn.Yt.NotFound){var n=!0,r=!1,t=void 0;try{for(var o,u=Object.keys(l)[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var s=o.value;i(s)}}catch(Z){r=!0,t=Z}finally{try{n||null==u.return||u.return()}finally{if(r)throw t}}}}else if(e.config.languages){var c={},f=!0,d=!1,p=void 0;try{for(var m,v=Object.entries(e.config.languages)[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){var h,y,b=xn(m.value,2),g=b[0],E=b[1];if(E.pattern&&E.languageServer&&E.languageServer.startCommand)c[g]={globPattern:E.pattern,startCommand:E.languageServer.startCommand,initializationOptionsJson:null!==(h=E.languageServer.initializationOptionsJson)&&void 0!==h?h:void 0,configurationJson:null!==(y=E.languageServer.configurationJson)&&void 0!==y?y:void 0}}}catch(Z){d=!0,p=Z}finally{try{f||null==v.return||v.return()}finally{if(d)throw p}}var w=!0,x=!1,S=void 0;try{for(var I,A=Object.keys(l)[Symbol.iterator]();!(w=(I=A.next()).done);w=!0){var D=I.value;c[D]||i(D)}}catch(Z){x=!0,S=Z}finally{try{w||null==A.return||A.return()}finally{if(x)throw S}}var T=!0,k=!1,O=void 0;try{for(var C,R=Object.keys(c)[Symbol.iterator]();!(T=(C=R.next()).done);T=!0){var _=C.value,N=l[_],P=c[_];N?In(N,P)||(i(_),a(_,P)):a(_,P)}}catch(Z){k=!0,O=Z}finally{try{T||null==R.return||R.return()}finally{if(k)throw O}}}else{var L=!0,U=!1,F=void 0;try{for(var j,G=Object.keys(l)[Symbol.iterator]();!(L=(j=G.next()).done);L=!0){var M=j.value;i(M)}}catch(Z){U=!0,F=Z}finally{try{L||null==G.return||G.return()}finally{if(U)throw F}}}})),{disable:function(){if(f){f=!1;var e=!0,n=!1,r=void 0;try{for(var t,o=Object.values(l)[Symbol.iterator]();!(e=(t=o.next()).done);e=!0){var i,a=t.value;a.closeChannel(),null===(i=a.client)||void 0===i||i.destroy(),a.client=null;var s=!0,d=!1,p=void 0;try{for(var m,v=u[Symbol.iterator]();!(s=(m=v.next()).done);s=!0){var h=xn(m.value,2),y=h[0],b=h[1];if(c.has(y)){c.delete(y);var g=!0,E=!1,w=void 0;try{for(var x,S=b[Symbol.iterator]();!(g=(x=S.next()).done);g=!0){(0,x.value)(null)}}catch(I){E=!0,w=I}finally{try{g||null==S.return||S.return()}finally{if(E)throw w}}}}}catch(I){d=!0,p=I}finally{try{s||null==v.return||v.return()}finally{if(d)throw p}}}}catch(I){n=!0,r=I}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},enable:function(){if(!f){f=!0;var e=!0,n=!1,r=void 0;try{for(var t,o=Object.keys(l)[Symbol.iterator]();!(e=(t=o.next()).done);e=!0){d(t.value)}}catch(i){n=!0,r=i}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},onClient:function(e,n){var r;u.has(e)||u.set(e,[]),null===(r=u.get(e))||void 0===r||r.push(n);var t=c.get(e);if(t)n(t);else{var o=!0,i=!1,a=void 0;try{for(var s,f=Object.values(l)[Symbol.iterator]();!(o=(s=f.next()).done);o=!0){var d=s.value;if(Sn(d.globPattern,e)){d.client&&n(d.client);break}}}catch(p){i=!0,a=p}finally{try{o||null==f.return||f.return()}finally{if(i)throw a}}}return function(){u.set(e,(u.get(e)||[]).filter((function(e){return e!==n})))}}}}function kn(e,n,r,t,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void r(c)}u.done?n(s):Promise.resolve(s).then(t,o)}function On(e){var n=e.runnerMode,r=void 0===n?"shellrunner":n,t=e.onUnrecoverableError,o=(0,a.Z)({onUnrecoverableError:t}),c=function(){var e=function(e){x()(l,e)||(l=e,r.emit(b.SESSION_STATE_CHANGED,l))},n=function(e,n){var r=n||l.openFiles.length;if(e<0||e>=r||!Number.isInteger(e))throw new Error("Invalid index: ".concat(e,". Index must be an integer between 0 and ").concat(r))},r=(0,g.ZP)();r.setMaxListeners(20);var t=null,o=null,i=[],a=!1,u=!1,s=!1,c={column:1,lineNumber:1,offset:0},l={openFiles:[],activeTab:0},f=window.performance.now(),d=0;return{onSessionStateChanged:function(e){return r.on(b.SESSION_STATE_CHANGED,e),function(){r.removeListener(b.SESSION_STATE_CHANGED,e)}},onPreviewedFileChanged:function(e){return r.on(b.PREVIEWED_FILE_CHANGED,e),function(){r.removeListener(b.PREVIEWED_FILE_CHANGED,e)}},onCursorPositionChanged:function(e){return r.on(b.CURSOR_POSITION_CHANGED,e),function(){r.removeListener(b.CURSOR_POSITION_CHANGED,e)}},onCommandBarToggled:function(e){return r.on(b.COMMAND_BAR_TOGGLED,e),function(){r.removeListener(b.COMMAND_BAR_TOGGLED,e)}},onHiddenFileVisibilityToggled:function(e){return r.on(b.CONFIG_FILE_VISIBILITY_TOGGLED,e),function(){r.removeListener(b.CONFIG_FILE_VISIBILITY_TOGGLED,e)}},onDeeplinkUpdated:function(e){return r.on(b.DEEPLINK_CHANGED,e),o&&(e(o),o=null),function(){r.removeListener(b.DEEPLINK_CHANGED,e)}},onEditorFocused:function(e){return r.on(b.EDITOR_FOCUSED,e),function(){r.removeListener(b.EDITOR_FOCUSED,e)}},closeTab:function(r){n(r);var t=l.openFiles.slice(),o=l.activeTab;r<=l.activeTab&&0!==l.activeTab&&o--,t.splice(r,1),e({openFiles:t,activeTab:o})},closeFile:function(e){var n=l.openFiles.indexOf(e);n>-1&&this.closeTab(n)},openFile:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.tabIndex,a=t.newTab,u=i.indexOf(r);if(-1!==u?(i.splice(u),i.unshift(r)):(i.unshift(r),i.length>5&&i.pop()),void 0===o)if(l.openFiles.includes(r))e(k({},l,{activeTab:l.openFiles.indexOf(r)}));else{var s=l.openFiles.slice();if(a){var c=0===s.length?0:l.activeTab+1;return s.splice(c,0,r),void e({openFiles:s,activeTab:c})}var f=l.activeTab;s.splice(f,1,r),e({openFiles:s,activeTab:f})}else{n(o,l.openFiles.length+1);var d=l.openFiles.slice(),p=l.openFiles.indexOf(r);if(-1===p)return d.splice(o,1,r),void e({openFiles:d,activeTab:d.indexOf(r)});if(p===o)return void e(k({},l,{activeTab:d.indexOf(r)}));d.splice(p,1),d.splice(o,0,r);var m=d.indexOf(r);e({openFiles:d,activeTab:m})}},moveFile:function(n,r){var t=l.openFiles.map((function(e){return e===n?r:(0,D.yr)(n,e)?(0,D.hk)(n,r,e):e}));e(k({},l,{openFiles:t}))},deleteFile:function(n){var r=l.openFiles[l.activeTab],t=l.openFiles.filter((function(e){return e!==n&&!(0,D.yr)(n,e)})),o=t.includes(r)?t.indexOf(r):t.length-1,a=Math.max(0,o),u=i.findIndex((function(e){return e===n}));u&&i.splice(u,1),e({openFiles:t,activeTab:a})},updateDeeplink:function(e){r.emit(b.DEEPLINK_CHANGED,e),o=e},focusEditor:function(){r.emit(b.EDITOR_FOCUSED)},writeToTerminal:function(e){r.emit(b.TERMINAL_WRITE_CALLED,e)},clearTerminal:function(){r.emit(b.TERMINAL_CLEAR_CALLED)},onTerminalWrite:function(e){return r.on(b.TERMINAL_WRITE_CALLED,e),function(){r.off(b.TERMINAL_WRITE_CALLED,e)}},onTerminalClear:function(e){return r.on(b.TERMINAL_CLEAR_CALLED,e),function(){r.off(b.TERMINAL_CLEAR_CALLED,e)}},getActiveFile:function(){var e=l.openFiles,n=l.activeTab;if(0!==e.length)return e[n]},getCursorPosition:function(){return c},getRecentFiles:function(){return i},setPreviewedFile:function(e){t!==e&&(t=e,r.emit(b.PREVIEWED_FILE_CHANGED,e))},setCursorPosition:function(e){x()(e,c)||(c=e,r.emit(b.CURSOR_POSITION_CHANGED,e))},setIsCommandBarOpen:function(e){a!==e&&(a=e,r.emit(b.COMMAND_BAR_TOGGLED,a))},setAreHiddenFilesVisible:function(e){u!==e&&(u=e,r.emit(b.CONFIG_FILE_VISIBILITY_TOGGLED,u))},getPreviewedFile:function(){return t},getIsCommandBarOpen:function(){return a},getAreHiddenFilesVisible:function(){return u},onWpxTaskCompletionSurveyReady:function(e){return r.on(b.WPX_TASK_COMPLETION_SURVEY_READY,e),function(){r.removeListener(b.WPX_TASK_COMPLETION_SURVEY_READY,e)}},incrementProjectRunCount:function(){if(++d>=5){var e=window.performance.now()-f;setTimeout((function(){r.emit(b.WPX_TASK_COMPLETION_SURVEY_READY)}),Math.max(3e5-e,0))}},getState:function(){return l},getInstructionsViewerVisible:function(){return s},setInstructionsViewerVisible:function(e){x()(s,e)||(s=e,r.emit(b.INSTRUCTIONS_VIEWER_TOGGLED,e))},onInstructionsViewerToggled:function(e){return r.on(b.INSTRUCTIONS_VIEWER_TOGGLED,e),function(){r.off(b.INSTRUCTIONS_VIEWER_TOGGLED,e)}}}}(),l=(0,P.Z)({container:o}),f=A({container:o}),d=(0,xe.Z)({container:o,fs:l}),p=(0,u.Z)({container:o,dotReplit:d}),m=function(e){var n=e.container,r=(0,g.ZP)(),t=null,o=[],a=[];function u(){return s.apply(this,arguments)}function s(){return(s=_(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",t);case 2:return e.abrupt("return",new Promise((function(e){r.once(O.MESSAGES_LOADED,(function(){e(t)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n.openChannel({service:"chat",name:"chatter"},(function(e){var n=e.channel;if(!e.error){if(!n)throw new Error("Expected channel");return n.onCommand((function(e){switch(e.body){case"chatMessage":var i=e.chatMessage;if(!i||!i.username||!i.text)throw new Error("expected a chat message in the response");o.push(i),r.emit(O.MESSAGE_RECEIVED,{text:i.text,username:i.username});break;case"chatTyping":var u=e.chatTyping;if(!u||!u.username)return;var s=u.username,c=u.typing;c&&!a.includes(s)&&a.push(s),!c&&a.includes(s)&&a.splice(a.indexOf(s),1),r.emit(O.USER_TYPING_UPDATED,{username:s,isTyping:Boolean(c)});break;case"chatScrollback":var l=e.chatScrollback;if(!(null===l||void 0===l?void 0:l.scrollback))return;l.scrollback.forEach((function(e){return o.push(e)})),t=n,r.emit(O.MESSAGES_LOADED,o)}})),function(){t=null}}})),{sendMessage:function(e){return _(i().mark((function n(){var t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u();case 2:t=n.sent,o.push(e),t.send({chatMessage:e}),r.emit(O.MESSAGE_SENT,e);case 6:case"end":return n.stop()}}),n)})))()},onMessageReceived:function(e){return r.on(O.MESSAGE_RECEIVED,e),function(){r.removeListener(O.MESSAGE_RECEIVED,e)}},onMessageSent:function(e){return r.on(O.MESSAGE_SENT,e),function(){r.removeListener(O.MESSAGE_SENT,e)}},updateUserTyping:function(e){return _(i().mark((function n(){var r,t,o;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u();case 2:r=n.sent,t=e.username,o=e.isTyping,r.send({chatTyping:{username:t,typing:o}});case 5:case"end":return n.stop()}}),n)})))()},onUserTypingUpdated:function(e){return r.on(O.USER_TYPING_UPDATED,e),function(){r.removeListener(O.USER_TYPING_UPDATED,e)}},onMessagesLoaded:function(e){return r.on(O.MESSAGES_LOADED,e),function(){r.removeListener(O.MESSAGES_LOADED,e)}},getMessages:function(){return o},getUsersTyping:function(){return a}}}({container:o}),v=function(){var e,n=(e=i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("kaboom"!==(null===(n=o.getContext())||void 0===n?void 0:n.repl.language)){e.next=4;break}return e.next=4,$e(l);case 4:return e.next=6,l.flush();case 6:return e.next=8,(0,nn.Z)(o,d);case 8:if(!e.sent){e.next=11;break}return e.next=11,p.installPackages();case 11:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function a(e){kn(i,t,o,a,u,"next",e)}function u(e){kn(i,t,o,a,u,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}(),h=(0,C.Z)({mode:r,container:o,beforeRun:v}),y=function(e){var n=e.container,r=e.beforeRun,t=(0,M.u)(null);return{mainClient:t,connect:function(){return new Promise((function(e,o){t.current||n.openChannel({service:"debugger"},(function(n){if(!n.error)return t.current=ge({channel:n.channel,beforeRun:r}),e(null),function(){t.current=null};o(n.error)}))}))}}}({container:o,beforeRun:v}),E=(0,U.Z)({beforeRun:v,getMainFileContents:function(e){return(0,L.Z)({language:e,fs:l})}}),w=j({container:o}),S=function(e){var n=e.container,r=function(e){o!==e&&(o=e,t.emit(He.ON_CLIENT,o))},t=(0,g.ZP)(),o=null,i=!1,a=0,u=null,c=function(){r(null)},l=!1,f={start:function(){l||(l=!0,c=n.openChannel({service:"lsp",skip:function(e){if(e.repl.language.startsWith("nix")||e.repl.language.startsWith("html"))return!0;var n=De().get(e.repl.language).entrypoint;return!(0,Re.D)(n)||!De().supportsLSP(e.repl.language)}},(function(e){var t=e.error,o=e.channel,c=e.context;if(!t){var l=!1,d=function(){},p=De().get(c.repl.language).entrypoint,m=(0,Re.D)(p);if(!m)throw new Error("Expected languageId");var v=Be({connection:{read:function(e){o.onCommand((function(n){n.output&&e(n.output)}))},write:function(e){"open"===o.status&&o.send({input:e})},didClose:function(){return"open"!==o.status}},clientId:"legacy-"+m,isSupportedFile:function(e){var n=(0,Re.D)(e);return n===m||!(!Ve.includes(m)||!Ve.includes(n||""))}});n.exec("pwd").then((function(e){if(!l){var n=e.output?e.output.replace(/\n/,""):null;if(!n)throw new Error("Expected pwd");if(!v)throw new Error("Expected client");v.initialize({pwd:n}),d=v.onServerStateChange((function(e){l||e===Ie.a.INITIALIZED&&r(v)}))}}));var h=o.onCommand((function(e){e.output||e.state===s.api.State.Stopped&&(Se.kg.error("LSP server unexpectedly disconnected",{lspId:m,appService:"lsp"}),a++,f.stop(),u=setTimeout((function(){return f.start()}),1e3*Math.pow(2,a)))}));return function(){v&&(v.destroy(),r(null)),l=!0,d(),h(),i&&(i=!1)}}})))},getClient:function(){return o},onClient:function(e){return(0,g.NH)(t,He.ON_CLIENT,e)},stop:function(){if(i=!0,l=!1,null!==u&&clearTimeout(u),o){var e=o.onServerStateChange((function(n){n===Ie.a.EXITED&&(e(),c())}));return o.destroy(),void r(null)}c()}};return f}({container:o}),I=Tn({container:o,dotReplit:d}),T=cn({container:o,beforeRun:v}),R=function(e){var n=e.fs,r={},t={},o={},a=(0,g.ZP)();function u(e){return s.apply(this,arguments)}function s(){return s=fn(i().mark((function e(r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(r.map(function(){var e=fn(i().mark((function e(r){var t,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,new Promise((function(e){t=n.watchOtFile(r.path,{onReady:function(n){var o=n.transformSelection,i=n.version;if(t(),i===r.otVersion)return e({indexStart:r.indexStart,indexEnd:r.indexEnd,version:r.otVersion});e(o({indexStart:r.indexStart,indexEnd:r.indexEnd,versionFrom:r.otVersion,versionTo:i}))}})}));case 3:return o=e.sent,a=pn({},r,{indexStart:o.indexStart,indexEnd:o.indexEnd,otVersion:o.version}),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}return{onAnchorPortalSet:function(e,n){var r=function(r){r.id===e&&n(r)};return a.on(sn.PORTAL_UPDATED,r),function(){a.removeListener(sn.PORTAL_UPDATED,r)}},addAnchors:function(e){return fn(i().mark((function n(){var o,s,c,l,f,d,p,m,v,h,y,b,g;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(o=!0,s=!1,c=void 0,n.prev=1,l=e[Symbol.iterator]();!(o=(f=l.next()).done);o=!0)d=f.value,r[d.id]=d;n.next=9;break;case 5:n.prev=5,n.t0=n.catch(1),s=!0,c=n.t0;case 9:n.prev=9,n.prev=10,o||null==l.return||l.return();case 12:if(n.prev=12,!s){n.next=15;break}throw c;case 15:return n.finish(12);case 16:return n.finish(9);case 17:return n.next=19,u(e);case 19:for(p=n.sent,m=!0,v=!1,h=void 0,n.prev=21,y=p[Symbol.iterator]();!(m=(b=y.next()).done);m=!0)g=b.value,t[g.id]=g;n.next=29;break;case 25:n.prev=25,n.t1=n.catch(21),v=!0,h=n.t1;case 29:n.prev=29,n.prev=30,m||null==y.return||y.return();case 32:if(n.prev=32,!v){n.next=35;break}throw h;case 35:return n.finish(32);case 36:return n.finish(29);case 37:a.emit(sn.ANCHORS_ADDED,p);case 38:case"end":return n.stop()}}),n,null,[[1,5,9,17],[10,,12,16],[21,25,29,37],[30,,32,36]])})))()},removeAnchors:function(e){return fn(i().mark((function n(){var u,s,c,l,f,d,p;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:u=[],s=!0,c=!1,l=void 0,n.prev=2,f=e[Symbol.iterator]();case 4:if(s=(d=f.next()).done){n.next=15;break}if(p=d.value,r[p]){n.next=8;break}return n.abrupt("continue",12);case 8:u.push(r[p]),delete o[p],delete t[p],delete r[p];case 12:s=!0,n.next=4;break;case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(2),c=!0,l=n.t0;case 21:n.prev=21,n.prev=22,s||null==f.return||f.return();case 24:if(n.prev=24,!c){n.next=27;break}throw l;case 27:return n.finish(24);case 28:return n.finish(21);case 29:a.emit(sn.ANCHORS_REMOVED,u);case 30:case"end":return n.stop()}}),n,null,[[2,17,21,29],[22,,24,28]])})))()},getAnchors:function(e){return fn(i().mark((function n(){var o,a,s,c,l,f,d,p;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=Object.values(r).filter((function(n){return n.path===e})),n.next=3,u(o);case 3:for(a=n.sent,s=!0,c=!1,l=void 0,n.prev=5,f=a[Symbol.iterator]();!(s=(d=f.next()).done);s=!0)p=d.value,t[p.id]=p;n.next=13;break;case 9:n.prev=9,n.t0=n.catch(5),c=!0,l=n.t0;case 13:n.prev=13,n.prev=14,s||null==f.return||f.return();case 16:if(n.prev=16,!c){n.next=19;break}throw l;case 19:return n.finish(16);case 20:return n.finish(13);case 21:return n.abrupt("return",a);case 22:case"end":return n.stop()}}),n,null,[[5,9,13,21],[14,,16,20]])})))()},createThread:function(e){a.emit(sn.THREAD_CREATED,e)},explainCode:function(e){a.emit(sn.CODE_EXPLAINED,e)},onThreadCreated:function(e){return a.on(sn.THREAD_CREATED,e),function(){a.off(sn.THREAD_CREATED,e)}},onCodeExplained:function(e){return a.on(sn.CODE_EXPLAINED,e),function(){a.off(sn.CODE_EXPLAINED,e)}},onAnchorsAdded:function(e){return a.on(sn.ANCHORS_ADDED,e),function(){a.removeListener(sn.ANCHORS_ADDED,e)}},onAnchorsRemoved:function(e){return a.on(sn.ANCHORS_REMOVED,e),function(){a.removeListener(sn.ANCHORS_REMOVED,e)}},setAnchorPortal:function(e){r[e.id]&&t[e.id]&&(o[e.id]=e,a.emit(sn.PORTAL_UPDATED,e))}}}({fs:l});return{session:c,presence:f,packager:p,container:o,fs:l,chat:m,runner:h,debuggest:y,replbox:E,broadcast:w,dotReplit:d,lsp:S,lspnix:I,iotester:T,anchorer:R}}},923:function(e,n,r){var t,o;r.d(n,{Z:function(){return o},z:function(){return t}}),function(e){e.INSTRUCTION_RESULT="INSTRUCTION_RESULT",e.TEST_RESULT="TEST_RESULT",e.ERROR="ERROR",e.STATE_CHANGED="STATE_CHANGED"}(t||(t={})),function(e){e[e.Idle=0]="Idle",e[e.Starting=1]="Starting",e[e.Ready=2]="Ready",e[e.Building=3]="Building",e[e.Running=4]="Running"}(o||(o={}))},15111:function(e,n,r){r.d(n,{D:function(){return i}});var t=r(1864),o=[{id:"abap",extensions:[".abap"]},{id:"aes",extensions:[".aes"]},{id:"apex",extensions:[".cls"]},{id:"azcli",extensions:[".azcli"]},{id:"bat",extensions:[".bat",".cmd"]},{id:"bibtex",extensions:[".bib",".bbl"]},{id:"bicep",extensions:[".bicep"]},{id:"c",extensions:[".c",".h"]},{id:"cameligo",extensions:[".mligo"]},{id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"]},{id:"coffeescript",extensions:[".coffee"]},{id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"]},{id:"csharp",extensions:[".cs",".csx",".cake"]},{id:"css",extensions:[".css"]},{id:"d",extensions:[".d"]},{id:"dart",extensions:[".dart"]},{id:"diff",extensions:[".diff",".patch"]},{id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"]},{id:"ecl",extensions:[".ecl"]},{id:"ejs",extensions:[".ejs"]},{id:"elisp",extensions:[".el"]},{id:"elixir",extensions:[".ex",".exs"]},{id:"elm",extensions:[".elm"]},{id:"erlang",extensions:[".erl",".hrl"]},{id:"flow9",extensions:[".flow"]},{id:"forth",extensions:[".fth"]},{id:"fortran",extensions:[".f",".for",".f90"]},{id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"]},{id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"]},{id:"gitignore"},{id:"glsl",extensions:[".vert",".tesc",".tese",".geom",".frag",".comp",".glsl",".glslv",".glslf",".glslg"]},{id:"go",extensions:[".go"]},{id:"graphql",extensions:[".graphql",".gql"]},{id:"groovy",extensions:[".groovy",".gvy",".gy",".gsh"]},{id:"handlebars",extensions:[".handlebars",".hbs"]},{id:"haskell",extensions:[".hs",".lhs"]},{id:"hcl",extensions:[".tf",".tfvars",".hcl"]},{id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"]},{id:"erb",extensions:[".erb",".rhtml",".rhtm"]},{id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"]},{id:"jade",extensions:[".jade",".pug"]},{id:"java",extensions:[".java",".jav"]},{id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],filenames:["jakefile"]},{id:"javascriptreact",extensions:[".jsx"]},{id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"]},{id:"julia",extensions:[".jl"]},{id:"kotlin",extensions:[".kt",".kts"]},{id:"latext",extensions:[".tex"]},{id:"less",extensions:[".less"]},{id:"lexon",extensions:[".lex"]},{id:"liquid",extensions:[".liquid"]},{id:"lisp",extensions:[".lisp",".lsp",".l",".fasl"]},{id:"lua",extensions:[".lua"]},{id:"m3",extensions:[".m3",".i3",".mg",".ig"]},{id:"makefile",filenames:["Makefile","makefile","GNUmakefile"],extensions:[".mak",".MAKE"]},{id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"]},{id:"mips",extensions:[".s"]},{id:"msdax",extensions:[".dax",".msdax"]},{id:"nim",extensions:[".nim"]},{id:"objective-c",extensions:[".m"]},{id:"objective-cpp",extensions:[".mm"]},{id:"ocaml",extensions:[".ml",".mli"]},{id:"pascal",extensions:[".pas",".p",".pp"]},{id:"pascaligo",extensions:[".ligo"]},{id:"perl",extensions:[".pl"]},{id:"perl6",extensions:[".pl6",".p6",".pm6",".pod6",".t6",".raku",".rakumod",".rakutest"]},{id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"]},{id:"pla",extensions:[".pla"]},{id:"plaintext",extensions:[".txt"]},{id:"postiats",extensions:[".dats",".sats",".hats"]},{id:"powerquery",extensions:[".pq",".pqm"]},{id:"powershell",extensions:[".ps1",".psm1",".psd1"]},{id:"processing",extensions:[".pde"]},{id:"prolog",extensions:[".pro",".plg"]},{id:"proto",extensions:[".proto"]},{id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"]},{id:"qsharp",extensions:[".qs"]},{id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"]},{id:"razor",extensions:[".cshtml"]},{id:"reason",extensions:[".re",".rei"]},{id:"redis",extensions:[".redis"]},{id:"restructuredtext",extensions:[".rst"]},{id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"]},{id:"rust",extensions:[".rs",".rlib"]},{id:"sass",extensions:[".sass"]},{id:"sb",extensions:[".sb"]},{id:"scala",extensions:[".scala",".sc",".sbt"]},{id:"scheme",extensions:[".scm",".ss",".sch",".rkt"]},{id:"scss",extensions:[".scss"]},{id:"shellscript",extensions:[".sh",".bash"]},{id:"sol",extensions:[".sol"]},{id:"sparql",extensions:[".rq"]},{id:"sql",extensions:[".sql"]},{id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib"]},{id:"svelte",extensions:[".svelte"]},{id:"swift",extensions:[".swift"]},{id:"systemverilog",extensions:[".sv",".svh"]},{id:"tcl",extensions:[".tcl"]},{id:"toml",extensions:[".toml"]},{id:"twig",extensions:[".twig"]},{id:"typescript",extensions:[".ts"]},{id:"typescriptreact",extensions:[".tsx"]},{id:"vb",extensions:[".vb"]},{id:"verilog",extensions:[".v",".vh"]},{id:"vue",extensions:[".vue"]},{id:"xml",extensions:[".xml",".dtd",".ascx",".csproj",".config",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xsl"]},{id:"yaml",extensions:[".yaml",".yml"]}],i=function(e){var n=(0,t.extname)(e),r=(0,t.basename)(e),i=!0,a=!1,u=void 0;try{for(var s,c=o[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var l,f,d=s.value;if((null===(l=d.extensions)||void 0===l?void 0:l.includes(n))||(null===(f=d.filenames)||void 0===f?void 0:f.includes(r)))return d.id}}catch(p){a=!0,u=p}finally{try{i||null==c.return||c.return()}finally{if(a)throw u}}return null}},24865:function(e,n,r){var t;r.d(n,{a:function(){return t}}),function(e){e.OFFLINE="OFFLINE",e.INITIALIZING="INITIALIZING",e.INITIALIZED="INITIALIZED",e.EXITING="EXITING",e.EXITED="EXITED"}(t||(t={}))},93577:function(e,n,r){r.d(n,{Z:function(){return o}});var t=r(39809);function o(){var e=(0,t.Z)();return e.openFiles[e.activeTab]||null}},39809:function(e,n,r){r.d(n,{Z:function(){return u}});var t=r(67294),o=r(30617);function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function a(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return i(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(){var e=(0,o.Z)().session,n=a(t.useState(e.getState()),2),r=n[0],i=n[1];return t.useEffect((function(){return i(e.getState()),e.onSessionStateChanged(i)}),[e]),r}},15602:function(e,n){n.Z={brand:{darkBlue:"#0D101E",lightBlue:"#68CDEE",gray:"#6D7D84"},main:{green:{dark:"#0A6640",default:"#0F9960",light:"#3DCC91",25:"rgba(15,153,96,0.25)",15:"rgba(15,153,96,0.15)"},red:{dark:"#A82A2A",default:"#DB3737",light:"#FF7373",25:"rgba(219, 55, 55, 0.25)",15:"rgba(219, 55, 55, 0.15)"},blue:{dark:"#0068AD",default:"#0097FB",light:"#73C4FA",25:"rgba(0, 151, 251, 0.25)",15:"rgba(0, 151, 251, 0.15)"},orange:{dark:"#A14809",default:"#E16D1A",light:"#FC9C58",25:"rgba(225, 109, 26, 0.25)",15:"rgba(225, 109, 26, 0.15)"},purple:{dark:"#6213B1",default:"#9D43F7",light:"#BF80FF",25:"rgba(98, 19, 177, 0.25)",15:"rgba(98, 19, 177, 0.15)"},gold:{dark:"#A67908",default:"#D99E0B",light:"#FFC940",25:"rgba(217, 158, 11, 0.25)",15:"rgba(217, 158, 11, 0.15)"}},neutrals:{black:"#21242C",white:"#FFFFFF",offWhite:"#F7F8FA",black64:"rgba(33, 36, 44, 0.64)",black50:"rgba(33, 36, 44, 0.50)",black16:"rgba(33, 36, 44, 0.16)",black8:"rgba(33, 36, 44, 0.08)",white64:"rgba(255, 255, 255, 0.64)",white50:"rgba(255, 255, 255, 0.50)",white16:"rgba(255, 255, 255, 0.16)",white8:"rgba(255, 255, 255, 0.08)"},multiplayer:{green:"#1BC47D",red:"#EF5533",blue:"#18A0FB",gold:"#FFC700",purple:"#907CFF",teal:"#00B5CE",pink:"#EE46D3"},languages:{java:"#b07219",scheme:"#1e4aec",clojure:"#db5855",haskell:"#5e5086",lua:"#000080",ruby:"#701516",python:"#3572A5",go:"#00ADD8",cpp:"#f34b7d",c:"#555555","c#":"#178600","f#":"#b845fc",rust:"#dea584",swift:"#ffac45",r:"#198CE7",bash:"#000000",crystal:"#000100",julia:"#a270ba",elixir:"#6e4a7e",nim:"#37775b",dart:"#00B4AB",erlang:"#B83998",typescript:"#2b7489",elisp:"#c065db",sql:"#e34c26",php:"#4F5D95",html:"#e34c26",css:"#563d7c",javascript:"#f1e05a"}}},83002:function(e,n,r){r.d(n,{P:function(){return f}});var t=r(67294),o=r(90361),i=r(81700),a=r.n(i),u=r(57923),s=r(30617);function c(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function l(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return c(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=function(){var e=(0,s.Z)().dotReplit,n=(0,u.Z)(),r=l(t.useState(null),2),i=r[0],c=r[1];return t.useEffect((function(){return e.watch((function(e){n.current&&(e.error?e.error===o.Yt.NotFound&&c([]):e.config.hidden?c(e.config.hidden.map((function(e){return a()(e,{extended:!0,globstar:!0})}))):c([]))}))}),[e]),i}},16782:function(e,n,r){r.d(n,{Z:function(){return Ce}});var t,o=r(34051),i=r.n(o),a=r(35944),u=r(79547),s=r.n(u),c=r(67294),l=r(46846),f=r(41045),d=r(30617),p=r(40425),m=r(11542),v=r(60139),h=r(37156),y=r(93770),b=r(69987),g=r(89431),E=r(96076);function w(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function x(e,n,r,t,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void r(c)}u.done?n(s):Promise.resolve(s).then(t,o)}function S(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function a(e){x(i,t,o,a,u,"next",e)}function u(e){x(i,t,o,a,u,"throw",e)}a(void 0)}))}}function I(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,n)||D(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,n){if(e){if("string"===typeof e)return w(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,n):void 0}}function T(){return T=S(i().mark((function e(n){var r,o,a,u,s,c,l,f,d,p,m,v;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.parentPath,o=n.overwrite,a=n.fs,u=n.files,s=n.shouldUseFileTransferAPI,c=n.onStart,l=n.onUpload,f=n.onError,d=n.onDone,p=function(){var e=S(i().mark((function e(n){var r,u,c,d,p,m,v;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.targetPath,u=n.file,c=n.progress,o){e.next=9;break}return e.next=4,a.stat(r);case 4:if(!e.sent.exists){e.next=9;break}return d={file:u,path:r,error:t.AlreadyExists},f(d),e.abrupt("return",d);case 9:return p=null,e.prev=10,e.next=13,(0,E.pV)(u);case 13:p=e.sent,e.next=21;break;case 16:return e.prev=16,e.t0=e.catch(10),m={file:u,path:r,error:t.FileRead},f(m),e.abrupt("return",m);case 21:if(v=y.Z.from(p),!s){e.next=27;break}return e.next=25,a.transferFile(r,v,(function(e,n){c.current=n/e}));case 25:e.next=29;break;case 27:return e.next=29,a.writeFile(r,v);case 29:return l({file:u,path:r}),e.abrupt("return",{path:r,file:u});case 31:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(n){return e.apply(this,arguments)}}(),m=u.map((function(e){var n=e.path||e.webkitRelativePath||e.name;return{targetPath:r?r+"/"+n:n,progress:(0,b.u)(0),file:e}})),c(m),e.next=6,Promise.all(m.map(p));case 6:v=e.sent,d({parentPath:r,uploads:v.filter((function(e){return!("error"in e)})),errors:v.reduce((function(e,n){return"error"in n?A(e).concat([n]):e}),[])});case 8:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function k(e){var n=e.fs,r=e.onDone,t=I(c.useState([]),2),o=t[0],i=t[1],a=c.useRef(r);c.useEffect((function(){a.current=r}),[r]);var u=(0,g.Z)("flag-transfer-files"),s=c.useCallback((function(e){var r=e.parentPath,t=e.files;!function(e){T.apply(this,arguments)}({overwrite:e.overwrite,parentPath:r,files:t.filter(Boolean),fs:n,shouldUseFileTransferAPI:u,onStart:function(e){return i((function(n){return A(n).concat(A(e))}))},onUpload:function(e){i((function(n){return n.filter((function(n){return n.targetPath!==e.path}))}))},onError:function(e){i((function(n){return n.filter((function(n){return n.targetPath!==e.path}))}))},onDone:function(e){a.current&&a.current(e)}})}),[n,i,u]);return{uploadFiles:s,pendingUploads:o}}!function(e){e.AlreadyExists="ALREADY_EXIST",e.FileRead="FILE_READ",e.Network="NETWORK"}(t||(t={}));var O=r(91510),C=r(39511);function R(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function _(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return R(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(){var e=(0,d.Z)().session,n=_(c.useState(e.getAreHiddenFilesVisible()),2),r=n[0],t=n[1];return c.useEffect((function(){return t(e.getAreHiddenFilesVisible()),e.onHiddenFileVisibilityToggled(t)}),[e]),r}var P=r(5560),L=r(89796);function U(e){var n=e.onDownloadZip,r=(0,L.y)().uploadFiles,t=c.useRef(null),o=c.useRef(null),i=N(),u=(0,P.Z)(),f=(0,d.Z)().session,p=c.useMemo((function(){if("undefined"===typeof document)return[];var e=document.createElement("input"),n="webkitdirectory"in e||"mozdirectory"in e||"msdirectory"in e||"odirectory"in e||"directory"in e,r=[C.s.UploadFile];return n&&r.push(C.s.UploadFolder),r.push(C.s.DownloadZip),r.push(i?C.s.HideHiddenFiles:C.s.ShowHiddenFiles),r}),[i]);return(0,a.BX)(a.HY,{children:[(0,a.tZ)("input",{ref:t,type:"file",onChange:function(e){var n=e.target.files;n&&r({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},multiple:!0,accept:"*",className:"jsx-2ff4f6cb1b2dc3a5"}),(0,a.tZ)("input",{ref:o,type:"file",onChange:function(e){var n=e.target.files;n&&r({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",accept:"*",className:"jsx-2ff4f6cb1b2dc3a5"}),(0,a.tZ)(C.Z,{actions:p,onAction:function(e){switch(e){case C.s.UploadFile:if(!t.current)return;return t.current.click(),void(0,O.Z)({replId:u,action:"uploaded",fileType:l.Tv.File});case C.s.UploadFolder:if(!o.current)return;return o.current.click(),void(0,O.Z)({replId:u,action:"uploaded",fileType:l.Tv.Directory});case C.s.DownloadZip:return n(),void(0,O.Z)({replId:u,action:"zipDownloaded"});case C.s.ShowHiddenFiles:return void f.setAreHiddenFilesVisible(!0);case C.s.HideHiddenFiles:f.setAreHiddenFilesVisible(!1)}}}),(0,a.tZ)(s(),{id:"2ff4f6cb1b2dc3a5",children:"input.jsx-2ff4f6cb1b2dc3a5{display:none}"})]})}var F=r(23139),j=r(88768),G=r(70240),M=r(39499),Z=r.n(M),B=r(53818);function H(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function V(e,n,r,t,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void r(c)}u.done?n(s):Promise.resolve(s).then(t,o)}function J(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function a(e){V(i,t,o,a,u,"next",e)}function u(e){V(i,t,o,a,u,"throw",e)}a(void 0)}))}}function z(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function W(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return H(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var q="date '+%s%N' && cat /sys/fs/cgroup/cpu/cpuacct.usage /sys/fs/cgroup/cpu/cpu.cfs_quota_us /sys/fs/cgroup/cpu/cpu.cfs_period_us /sys/fs/cgroup/memory/memory.usage_in_bytes /sys/fs/cgroup/memory/memory.limit_in_bytes ",K="cat /repl/stats/subvolume_usage_bytes /repl/stats/subvolume_total_bytes";function Y(e,n){if(6!==e.length)throw new Error("Received unexpected output from resource tracking command: ".concat(e));var r={wallTimeNanos:Z().BigInt(0),cpuTimeNanos:Z().BigInt(0),cpuUtilPercent:0,memoryUsageBytes:0,memoryLimitBytes:0,storageUsedBytes:0,storageTotalBytes:1073741824},t=e.map((function(e){return parseInt(e,10)}));if(t.includes(NaN))throw new Error("Could not parse one or more values from resource monitoring command: ".concat(e));var o=Z().BigInt(e[0]),i=Z().BigInt(e[1]),a=t[2],u=t[3],s=t[4],c=t[5];if(!(s>=0&&c>0))throw new Error("Memory usage or limit reported negative: ".concat(e));if(r.memoryUsageBytes=s,r.memoryLimitBytes=c,Z().GT(n.wallTimeNanos,0)&&Z().GT(n.cpuTimeNanos,0)){var l=Z().toNumber(Z().subtract(o,n.wallTimeNanos)),f=Z().toNumber(Z().subtract(i,n.cpuTimeNanos));if(l>0&&f>=0&&a>0&&u>0){var d=a/u;r.cpuUtilPercent=100*f/l/d}else{r.cpuUtilPercent=0;var p=JSON.stringify(function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){z(e,n,r[n])}))}return e}({},n,{wallTimeNanos:n.wallTimeNanos.toString(),cpuTimeNanos:n.cpuTimeNanos.toString()}));G.kg.error("CPU usage calculation returned negative value: ".concat(e,". Previous resources: ").concat(p))}}return r.wallTimeNanos=o,r.cpuTimeNanos=i,r}function $(e){if(2!==e.length)throw new Error("Received unexpected output from storage command: ".concat(e));var n=parseInt(e[0],10),r=parseInt(e[1],10);if(isNaN(n)||isNaN(r))throw new Error("Could not parse values from storage output command: ".concat(e));return{storageUsedBytes:n,storageTotalBytes:r}}function X(e){return e/1024/1024}function Q(e){var n=e.callToAction,r=function(){var e=(0,d.Z)().container,n=W(c.useState({wallTimeNanos:Z().BigInt(0),cpuTimeNanos:Z().BigInt(0),cpuUtilPercent:0,memoryUsageBytes:0,memoryLimitBytes:0,storageUsedBytes:0,storageTotalBytes:0}),2),r=n[0],t=n[1],o=(0,B.Z)(e);return c.useEffect((function(){var e=!1,n=null;function r(){return a.apply(this,arguments)}function a(){return(a=J(i().mark((function a(){var u,s,c;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=3,o({args:["bash","-c",q]});case 3:if(s=i.sent,!e){i.next=6;break}return i.abrupt("return");case 6:if(null===s.error){i.next=9;break}return G.kg.error("Error running resource tracking command",{errorMessage:s.error}),i.abrupt("return");case 9:return i.next=11,o({args:["bash","-c",K]});case 11:if(c=i.sent,!e){i.next=14;break}return i.abrupt("return");case 14:if(null===c.error||(null===(u=c.output)||void 0===u?void 0:u.includes("No such file or directory"))){i.next=17;break}return G.kg.error("Error running storage command",{errorMessage:c.error}),i.abrupt("return");case 17:t((function(e){var n,r;try{n=Y(s.output.trim().split("\n"),e)}catch(t){return G.kg.error("Could not calculate resources",{errorMessage:t.message}),e}if(!n)throw new Error("Expected resources");try{r=$((c.output||"").trim().split("\n"))}catch(o){return G.kg.error("Could not calculate resources",{errorMessage:o.message}),e}return n.storageUsedBytes=r.storageUsedBytes,n.storageTotalBytes=r.storageTotalBytes,n})),n=setTimeout(r,2e3);case 19:case"end":return i.stop()}}),a)})))).apply(this,arguments)}return r(),function(){e=!0,n&&clearTimeout(n)}}),[o]),r}();return(0,a.tZ)(F.G7,{css:[F.l0.p(8),F.l0.backgroundColor.backgroundDefault,{borderTop:"1px solid ".concat(F.TV.backgroundHigher)}],children:(0,a.tZ)(F.w3,{callToAction:n,cpuTotal:100,cpuCurrent:r.cpuUtilPercent,ramTotal:X(r.memoryLimitBytes),ramCurrent:X(r.memoryUsageBytes),diskTotal:X(r.storageTotalBytes),diskCurrent:X(r.storageUsedBytes)})})}var ee=r(8996),ne=r(7177),re=r(60032),te=r(38880),oe=r(95883),ie=r(21130),ae=r(7477),ue=r(74627),se=r(93577),ce=r(44660),le=r(84948),fe=r(83002),de=r(67289);function pe(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function me(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function ve(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){me(e,n,r[n])}))}return e}function he(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return pe(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pe(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ye=/\(copy\)( \d+)?$/,be=/\d+$/;function ge(e,n){for(var r=(0,de.r6)(e),t=(0,de.eb)(e),o=ye.test(t)?e:"".concat(t," (copy)").concat(r.length>0?".".concat(r):""),i=1;i<=n.size;i++){if(!n.has(o))return o;var a=(0,de.eb)(o),u=a.split(" ");be.test(a)&&u.pop(),o="".concat(u.join(" ")," ").concat(i),r.length>0&&(o+=".".concat(r))}return o}var Ee=r(73440),we=r(90361),xe=r(57923);function Se(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function Ie(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Se(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Se(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ae=r(63292);function De(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function Te(e,n,r,t,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void r(c)}u.done?n(s):Promise.resolve(s).then(t,o)}function ke(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function a(e){Te(i,t,o,a,u,"next",e)}function u(e){Te(i,t,o,a,u,"throw",e)}a(void 0)}))}}function Oe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return De(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return De(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e){var n=(0,te.Z)().showError,r=(0,P.Z)(),o=Oe(c.useState(null),2),u=o[0],y=o[1],b=(0,d.Z)(),g=b.presence,E=b.fs,w=(0,fe.P)(),x=function(){var e=(0,d.Z)().dotReplit,n=(0,xe.Z)(),r=Ie(c.useState(null),2),t=r[0],o=r[1];return c.useEffect((function(){return e.watch((function(e){var r;n.current&&(e.error?e.error===we.Yt.NotFound&&o(null):o(null!==(r=e.config.entrypoint)&&void 0!==r?r:null))}))}),[e]),t}(),S=Oe(c.useState(null),2),I=S[0],A=S[1],D=(0,se.Z)(),T=N(),C=function(e){var n=he(c.useState(null),2),r=n[0],t=n[1],o=he(c.useState(null),2),i=o[0],a=o[1];return c.useEffect((function(){if(i){var n=!1;return"rename"===i.type?(i.fileType===l.Tv.File?e.moveFile(i.path,i.to):e.moveDir(i.path,i.to)).then((function(e){n||(a(null),e.error&&t(e.error))})):(i.fileType===l.Tv.File?e.deleteFile(i.path):e.deleteDir(i.path)).then((function(e){n||(a(null),e.error&&t(e.error))})),function(){n=!0}}t(null)}),[i,e]),{renameNode:function(e){return a(ve({},e,{type:"rename"}))},deleteNode:function(e){return a(ve({},e,{type:"delete"}))},currentOp:i,error:r}}(E),R=C.renameNode,_=C.deleteNode,G=C.currentOp,M=C.error;c.useEffect((function(){M&&n("Something went wrong trying to move or remove a file.")}),[M,n]);var Z=(0,j.aEG)({variables:{replId:r}}).data,B="Repl"===(null===Z||void 0===Z?void 0:Z.repl.__typename)?Z.repl:void 0,H=B?B.url:void 0,V=function(e){var n;if(!e)return F.Jd.Nothing;var r,t="Repl"===(null===e||void 0===e?void 0:e.repl.__typename)?e.repl:void 0,o=(null===e||void 0===e?void 0:e.currentUser)?e.currentUser:void 0;if(void 0===t||void 0===o)return F.Jd.Nothing;if(o.hasFlagBuyCycles)return o.id!==(null===(r=t.owner)||void 0===r?void 0:r.id)||t.isBoosted||"PowerUpCostsType"!==t.powerUpCosts.__typename||t.powerUpCosts.boost.explanation!==j.ChQ.NeedsCycles?F.Jd.Nothing:F.Jd.Upgrade;if("User"===(null===(n=t.owner)||void 0===n?void 0:n.__typename)){var i,a;if(o.id!==(null===(i=t.owner)||void 0===i?void 0:i.id))return F.Jd.Nothing;if(!(null===(a=o.capabilities)||void 0===a?void 0:a.canBoost))return F.Jd.Upgrade;if(!t.isBoosted)return F.Jd.Boost}return F.Jd.Nothing}(Z),J="Repl"===(null===Z||void 0===Z?void 0:Z.repl.__typename)?Z.repl.language:void 0,z="Repl"===(null===Z||void 0===Z?void 0:Z.repl.__typename)&&(Z.repl.isProjectFork||Z.repl.isModelSolution||Z.repl.isModelSolutionFork),W=c.useCallback((function(){var e=(H||window.location.pathname)+".zip";window.open(e,"_blank")}),[H]),q=c.useCallback(function(){var e=ke(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(n),!n||!I){e.next=6;break}return e.next=4,E.stat(I);case 4:e.sent.exists||A(D||null);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[D,I,E]),K=Oe(c.useState(null),2),Y=K[0],$=K[1];c.useEffect((function(){D!==I&&A(D)}),[D]);var X=k({onDone:function(e){var r=e.parentPath,o=e.errors;if(o.length){var i=o.filter((function(e){return e.error===t.AlreadyExists}));i.length&&$({parentPath:r,errors:i});var a=o.filter((function(e){return e.error!==t.AlreadyExists}));a.length&&n("There was an error uploading: ".concat(a.map((function(e){return e.path})).join(", ")))}},fs:E}),pe=X.uploadFiles,me=X.pendingUploads,ye=Oe(c.useState(null),2),be=ye[0],Se=ye[1],De=Oe(c.useState(null),2),Te=De[0],Ce=De[1],Re=(0,Ee.Z)({fs:E}),_e=Re.dirInfo,Ne=Re.setExpandedState,Pe=Re.watchDir,Le=(0,le.Z)(ce.H.Sidepane);return(0,a.tZ)(L.i.Provider,{value:{dirInfo:_e,setExpandedState:Ne,watchDir:Pe,fs:E,activePath:I,pendingFileType:u,setPendingFileType:q,pendingUploads:me,uploadFiles:pe,getNodeType:function(){var e=ke(i().mark((function e(n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.readFile(n);case 2:return r=e.sent,e.abrupt("return",r.error===l.Df.IsDirectory?l.Tv.Directory:l.Tv.File);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),transformChildren:J?(0,oe.Z)({language:J,entrypointFile:x,shouldHideHiddenFiles:!T,hiddenFiles:null!==w&&void 0!==w?w:[],isProjectFork:z}):void 0,downloadFile:function(){var e=ke(i().mark((function e(r,t){var o,a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.readFile(r);case 2:if(!(o=e.sent).error){e.next=6;break}return n(o.error),e.abrupt("return");case 6:a=(0,de.yC)(r),(u=document.createElement("a")).setAttribute("href","data:".concat(a,";base64,").concat(o.content.toString("base64"))),u.setAttribute("download",t),u.style.display="none",document.body.appendChild(u),u.click(),document.body.removeChild(u);case 14:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}(),currentRenamePath:be,setCurrentRenamePath:Se,pendingDelete:Te,setPendingDelete:Ce,renameNode:R,deleteNode:_,currentOp:G,nodeOpError:M,overwriteNode:function(){var e=ke(i().mark((function e(r,t){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.type===l.Tv.Directory?E.deleteDir:E.deleteFile,e.next=3,o(t.path);case 3:if(!e.sent.error){e.next=7;break}return n("Something went wrong trying to move: ".concat(r)),e.abrupt("return");case 7:R({path:r,fileType:t.type,to:t.path});case 8:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}(),duplicateFile:function(){var e=ke(i().mark((function e(r,t){var o,a,u,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=ge((0,de.UO)(r),new Set(t)),a=(0,de.Il)(r),u=a?"".concat(a,"/").concat(o):o,e.next=5,E.copyFile(r,u);case 5:if(!(s=e.sent).error){e.next=9;break}return n(s.error),e.abrupt("return");case 9:Se(u);case 10:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}()},children:(0,a.tZ)(h.Z,{children:(0,a.BX)("div",{ref:Le,className:"jsx-83bcd956121ee5ca filetree",children:[(0,a.BX)(ee.Ug,{align:"center",wrap:"nowrap",spacing:0,className:"filetree-header",children:[(0,a.tZ)("div",{className:"jsx-83bcd956121ee5ca heading",children:(0,a.tZ)(p.Z,{level:4,css:[{userSelect:"none"}],children:"Files"})}),(0,a.tZ)(ie.Z,{css:[F.l0.color.foregroundDimmer],tooltipDelay:100,onClick:function(){(0,O.Z)({replId:r,action:"added",source:"filetree",fileType:l.Tv.File}),q(l.Tv.File)},alt:"Add file",children:(0,a.tZ)(ae.Z,{})}),(0,a.tZ)("div",{className:"jsx-83bcd956121ee5ca filetree-action-separator"}),(0,a.tZ)(ie.Z,{css:[F.l0.color.foregroundDimmer],tooltipDelay:100,onClick:function(){(0,O.Z)({replId:r,action:"added",fileType:l.Tv.Directory,source:"filetree"}),q(l.Tv.Directory)},alt:"Add folder",children:(0,a.tZ)(ue.Z,{})}),(0,a.tZ)(U,{onDownloadZip:W})]}),(0,a.tZ)(m.Z,{height:1}),(0,a.tZ)(v.Z,{siblings:[],onClick:function(){return null},onNodeClick:function(n){var t=n.path,o=n.type,i=n.newTab;(A(t),o!==l.Tv.Directory)&&((0,O.Z)(i?{replId:r,action:"newTab",source:"filetree"}:{replId:r,action:"select",source:"filetree"}),e.onFileNodeClick(t,i),g.getFollowedUser()&&g.unfollowUser())},path:f.Q}),(0,a.tZ)(Q,{callToAction:V}),(0,a.tZ)(ne.Z,{isOpen:Boolean(Y),onRequestClose:function(){return $(null)},maxWidth:512,children:Y?(0,a.tZ)(re.Z,{paths:Y.errors.map((function(e){return e.path})),onCancel:function(){return $(null)},onConfirm:function(){pe({overwrite:!0,parentPath:Y.parentPath,files:Y.errors.map((function(e){return e.file}))}),$(null)}}):null}),(0,a.tZ)(ne.Z,{isOpen:Boolean(Te),onRequestClose:function(){return Ce(null)},maxWidth:512,children:Te?(0,a.tZ)(Ae.Z,{name:Te.path,entityType:Te.type===l.Tv.File?"file":"folder",hideModal:function(){return Ce(null)},delete:function(){Ce(null),_({fileType:Te.type,path:Te.path})}}):null}),(0,a.tZ)(s(),{id:"83bcd956121ee5ca",children:".filetree.jsx-83bcd956121ee5ca{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:100%;overflow:hidden;-webkit-border-top-right-radius:var(--border-radius-4);-moz-border-radius-topright:var(--border-radius-4);border-top-right-radius:var(--border-radius-4);-webkit-border-bottom-right-radius:var(--border-radius-4);-moz-border-radius-bottomright:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);background-color:var(--background-default)}.filetree.jsx-83bcd956121ee5ca .filetree-header{padding:var(--space-8);background-color:var(--background-default);position:-webkit-sticky;position:sticky;top:0;z-index:1}.filetree-action-separator.jsx-83bcd956121ee5ca{height:6px;width:0;margin-left:4px;margin-right:4px;border-right:1px solid var(--foreground-dimmest)}.add-button:hover{color:var(--foreground-default)!important}.heading.jsx-83bcd956121ee5ca{margin-right:auto}"})]})})})}},6763:function(e,n,r){function t(e){return e.startsWith("/")?e:null}function o(e){var n=t(e);if(null===n)throw new Error("Expected an absolute path but got ".concat(e));return n}function i(e){return e.startsWith("/home/runner/")?e.split("/").slice(4).join("/"):null}r.d(n,{IT:function(){return t},ZF:function(){return o},om:function(){return i}})},58646:function(e,n,r){function t(e,n){if("dev"===e)return!0;if("dev"===n)return!1;for(var r=function(e){var n=[0,0,0];return e.split(".").map(Number).forEach((function(r,t){if("number"!==typeof r||isNaN(r))throw new Error("invalid version: ".concat(e));n[t]=r})),n},t=r(e),o=r(n),i=0;i<3;i++){if(o[i]>t[i])return!1;if(t[i]>o[i])return!0}return!0}function o(e,n){return!t(e,n)}r.d(n,{H:function(){return t},h:function(){return o}})}}]);
//# sourceMappingURL=8408-3082801c9594a8ea.js.map