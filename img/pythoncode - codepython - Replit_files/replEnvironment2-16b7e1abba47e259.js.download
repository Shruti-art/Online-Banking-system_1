(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9460],{44725:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/replEnvironment2",function(){return n(89724)}])},75661:function(e,t,n){"use strict";n.d(t,{g:function(){return i}});var r=n(32537),o=n(83964);function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32;e.stopPropagation(),e.preventDefault();var i=(0,o.uJ)(e),a=i.pageX,l=i.pageY,c={x:a,y:l},u={x:0,y:0};t.start&&t.start({mouse:c,shiftKey:e.shiftKey});var s=(0,r.Z)((function(e){e.preventDefault(),e.stopPropagation();var n=(0,o.uJ)(e),r={x:n.pageX,y:n.pageY};u={x:r.x-c.x,y:r.y-c.y},t.move({delta:u,shiftKey:e.shiftKey,mouse:r})}),n),f=function(){s.cancel(),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",f),document.removeEventListener("touchmove",s),document.removeEventListener("touchend",f),document.removeEventListener("touchcancel",f),t.end&&t.end({delta:u,shiftKey:e.shiftKey})};document.addEventListener("mousemove",s),document.addEventListener("mouseup",f),document.addEventListener("touchmove",s),document.addEventListener("touchend",f),document.addEventListener("touchcancel",f)}},89724:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Wo}});var r=n(34051),o=n.n(r),i=n(35944),a=n(67294),l=n(91131),c=n(11163),u=n(17221),s=n(36526),f=n(9116),d=n(27740),p=n.n(d),v=n(88768),h=n(23139),m=n(79523),y=n(22315),b=n(37156),g=n(56834),Z=n(41664),w=n.n(Z),x=n(62873),E=n(34996),I=n(4590),k=n(30617),S=n(49337),C=n(88341),A=n(25398),O=n(59325),P=n(50553),D=n(27318),R=n(83347),T=n(74255);function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_(e,t,n[t])}))}return e}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(){return(0,i.tZ)(h.G7,{children:(0,i.tZ)(h.G7,{"aria-label":"Always on","data-microtip-position":"bottom",role:"tooltip",css:[h.l0.width(8),h.l0.height(8),h.l0.borderRadius("full"),h.l0.backgroundColor.accentPositiveDefault,{alignSelf:"start",boxShadow:"0 0 12px "+h.TV.accentPositiveDefault}]})})}function G(e){var t,n=e.repl,r=e.refetch,o=(0,c.useRouter)(),l=U(a.useState(!1),2),u=l[0],s=l[1],f=(0,v.koY)().data,d=function(e){if(n&&(!!e.title&&e.title!==n.title)){var t=(0,A.Z)(o.query);o.push({pathname:o.pathname,query:M({},o.query,{replUrl:n.url})},{pathname:n.url,query:t},{shallow:!0})}};return(0,i.BX)(C.Z,{isOpen:u,maxWidth:460,onClickOutside:function(){},padding:0,placement:"bottom-start",growToMaxWidth:!0,zIndex:T.I-1,children:[(0,i.BX)(h.G7,{tag:"button","data-cy":"ws-repl-info-container",onClick:function(){s(!0)},css:[h.l0.align.center,h.l0.cursor.pointer,h.l0.rowWithGap(8),h.l0.p(4),h.l0.borderRadius(8),h.l0.color.foregroundDefault,u&&{pointerEvents:"none"},{border:"1px solid transparent",backgroundColor:"transparent","&:hover":{borderColor:h.TV.outlineDimmest}}],children:[(0,i.tZ)(D.sJ,{user:n.user}),(0,i.tZ)(O.Z,{repl:n}),n.isAlwaysOn?(0,i.tZ)(N,{}):null,(0,i.tZ)(h.G7,{css:[h.l0.p(4)],children:(0,i.tZ)(P.Z,{})})]}),(0,i.tZ)(h.G7,{css:[h.l0.backgroundColor.backgroundDefault],children:(null===f||void 0===f||null===(t=f.currentUser)||void 0===t?void 0:t.hasFlagBuyCyclesGate)?(0,i.tZ)(R.Sq,{setIsEditing:s,repl:n,refetch:r,onUpdateRepl:d}):(0,i.tZ)(D.E3,{setIsEditing:s,repl:n,refetch:r,onUpdateRepl:d})})]})}var F=n(57337),z=n(22944),B=n(91317),K=n(45193),W=n(7177),X=n(27545),L=n(48610),H=n(60789),V=n(5560),$=n(18172),q=n(71171),Y=n.n(q),J=n(54372),Q=n(47865),ee=n(23880);function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,l.cn)(null,(function(e,t,n){var r=e(J.Eh).find((function(e){return e.isDialog}));r?t(Q.$r,r.paneId):t(re,n)}));var ne=(0,l.cn)(null,(function(e,t,n){var r=e(J.Eh).find((function(e){return e.isDialog}));if(r){var o=e(r.data);o.type!==o.type?(t(Q.$r,r.paneId),t(re,n)):t(Q.vN,{paneId:r.paneId,data:n.pane})}else t(re,n)})),re=(0,l.cn)(null,(function(e,t,n){if(!e(J.Eh).find((function(e){return e.isDialog}))){var r=e(J.g4),o=e(J.CK),i=Y()(),a=o.x+o.width,l=o.y+o.height,c=n.maxWidth||a,u=n.maxHeight||l,s=Math.min(c,.8*a),f=Math.min(u,.8*l),d={width:s,height:f,x:a/2-s/2-o.x,y:l/2-f/2-o.y},p=(0,$.ZP)(r,(function(e){(0,ee.mZ)(e,{isFloating:!0,panes:[i],rect:d})}));t(J.YF,p),t(J.W1,{paneId:i});var v=(0,J.z)(i),h=e(v);t(J.W1,{paneId:i}),t(v,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){te(e,t,n[t])}))}return e}({},h,{isDialog:!0})),t(h.data,n.pane)}})),oe=(0,l.cn)(null,(function(e,t){var n=e(J.Eh).find((function(e){return e.isDialog}));n&&t(Q.$r,n.paneId)})),ie=n(45823),ae=n(88503),le=n(18056),ce=n(33468),ue=n(1619),se=n(36107),fe=n(34699),de=n(52620),pe=n(73216),ve=n(50876),he=n(39473),me=n(54970),ye=n(61069),be=n(44660),ge=n(72839);function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var xe=(0,h.KD)("a"),Ee=[v.Sy.Submit,v.Sy.Resubmit,v.Sy.UpdateModelSolution,v.Sy.PublishTemplate,v.Sy.EditTemplate,v.Sy.ReviewSubmission],Ie={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"M"};function ke(){var e,t,n,r,o,c=(0,k.Z)(),u=c.runner,s=c.presence,f=c.replbox,d=c.session,p=(0,V.Z)(),m=(0,S.Z)({presence:s}),y=we(a.useState(!1),2),b=y[0],Z=y[1],C=we(a.useState(!1),2),A=C[0],O=C[1],P=we(a.useState(!1),2),D=P[0],R=P[1],T=we(a.useState(u),2),j=T[0],_=T[1],M=we(a.useState(!1),2),U=M[0],N=M[1],$=(0,ye.e)(be.H.Run),q=(0,ye.e)(be.H.Share),Y=(0,v.ggE)({variables:{id:p}}),J=Y.data,Q=Y.refetch,ee=(0,l.b9)(ne),te=(0,ge.Z)(),re=(0,l.b9)(le.cN),oe="Repl"===(null===J||void 0===J?void 0:J.repl.__typename)?J.repl:null,Ze=null===J||void 0===J?void 0:J.currentUser,ke="replbox"===(null===oe||void 0===oe||null===(e=oe.lang)||void 0===e?void 0:e.engine)&&"html"!==(null===oe||void 0===oe?void 0:oe.lang.id);(0,a.useEffect)((function(){_(ke?f:u)}),[ke,f,u]);var Se=(0,a.useRef)(null),Ce=(0,a.useRef)(null),Ae=(0,a.useRef)(U&&(null===q||void 0===q?void 0:q.isActive));(0,a.useEffect)((function(){Ae.current&&!(null===q||void 0===q?void 0:q.isActive)&&N(!1),Ae.current=U&&(null===q||void 0===q?void 0:q.isActive)}),[q,U]),(0,a.useEffect)((function(){(null===q||void 0===q?void 0:q.isActive)&&(U&&Ce.current?null===q||void 0===q||q.delegateTooltip(Ce.current):q.delegateTooltip(Se.current))}),[q,U,Ce]);var Oe="Team"===(null===oe||void 0===oe||null===(t=oe.owner)||void 0===t?void 0:t.__typename),Pe=Boolean("Team"===(null===oe||void 0===oe||null===(n=oe.owner)||void 0===n?void 0:n.__typename)&&(null===(r=null===oe||void 0===oe?void 0:oe.owner.capabilities)||void 0===r?void 0:r.isEducationPlan)),De=Ee.find((function(e){return e===(null===oe||void 0===oe?void 0:oe.workspaceCta)})),Re=!(null===oe||void 0===oe?void 0:oe.publishedAs),Te=null===oe||void 0===oe?void 0:oe.currentUserPermissions.publish,je=(null===oe||void 0===oe?void 0:oe.publishedAs)===v.O2h.Template,_e=(null===oe||void 0===oe?void 0:oe.publishedAs)===v.O2h.RegularRepl,Me=!Pe&&(null===oe||void 0===oe?void 0:oe.currentUserPermissions.editMultiplayers);return(0,fe.x)(Ie,{enabled:!Pe,run:function(){N(!0)}}),(0,ce.Y)({match:se.pl,data:{type:"action",label:"Multiplayer",icon:(0,i.tZ)(ue.Z,{}),description:"Open multiplayer mode",run:function(){N(!0)},keyboardShortcut:Ie}},{enabled:!Pe}),(0,a.useEffect)((function(){return s.onUserOpenedFile((function(e){var t=e.user,n=e.file,r=s.getFollowedUser();r&&r.id===t.id&&n&&d.openFile(n)}))}),[s,d]),oe?(0,i.BX)(h.Tg,{elevated:!0,tag:"header",css:[h.l0.height(60),h.l0.rowWithGap(8),h.l0.align.center,h.l0.justify.spaceBetween,h.l0.p(8),h.l0.position.relative,h.l0.pl(48)],children:[(0,i.BX)(h.G7,{css:[h.l0.flex.row,h.l0.center],children:[(0,i.tZ)(h.G7,{css:[h.l0.p(8),h.l0.pl(0)],children:(0,i.tZ)(w(),{as:"/~",href:"/home",passHref:!0,children:(0,i.tZ)(xe,{css:[h.l0.center,h.l0.color.foregroundDefault,h.l0.width(32),h.l0.height(32)],children:(0,i.tZ)(x.Z,{})})})}),(0,i.tZ)(G,{repl:oe,refetch:Q}),(0,i.tZ)(z.Z,{repl:oe,canEdit:oe.currentUserPermissions.containerWrite})]}),(0,i.tZ)(h.G7,{innerRef:null===$||void 0===$?void 0:$.delegateTooltip,"data-cy":"ws-run-btn",onClick:function(){(null===$||void 0===$?void 0:$.isActive)&&$.next()},css:[h.l0.position.absolute,h.l0.height(42),{transform:"translate(-50%, -50%)",left:"50%",top:"50%"}],children:(0,i.tZ)(F.Z,{runner:j,disableTooltip:null===$||void 0===$?void 0:$.isActive})}),(0,i.BX)(h.G7,{css:[h.l0.rowWithGap(8),h.l0.align.center,h.l0.justify.end],children:[m&&m.length>0?(0,i.tZ)(B.Z,{users:m,onAvatarClick:te}):null,(null===Ze||void 0===Ze?void 0:Ze.isExplorer)?(0,i.tZ)(h.G7,{tag:"a",href:"/account#roles",target:"_blank",className:"explorer-badge",children:(0,i.tZ)(h.hU,{colorway:"negative",size:28,alt:"You are an explorer. You may see bugs or other surprising behavior!",tooltipPlacement:"bottom-end",tooltipDelay:500,children:(0,i.tZ)(E.Z,{})})}):null,De?(0,i.tZ)(h.G7,{css:[h.l0.pr(8)],children:(0,i.tZ)(ie.Z,{cta:De,replId:p,isGroupProject:Boolean(null===oe||void 0===oe||null===(o=oe.template)||void 0===o?void 0:o.isGroupProject),openIOtesterPane:function(){ee({pane:{type:"autograder"}})}})}):null,Te&&Re?(0,i.tZ)(h.zx,{type:"button",iconLeft:(0,i.tZ)(de.Z,{}),onClick:function(){Z(!0)},cypressHandle:"ws-publish-button",text:"Publish"}):null,je?(0,i.tZ)(h.zx,{type:"button",iconLeft:(0,i.tZ)(de.Z,{}),onClick:function(){return O(!0)},text:"Update"}):null,_e?(0,i.tZ)(h.zx,{type:"button",iconLeft:(0,i.tZ)(pe.Chat,{}),onClick:function(){return R(!0)},text:"Update"}):null,Me?(0,i.tZ)(h.G7,{innerRef:Se,children:(0,i.tZ)(L.Z,{showPopover:oe.currentUserPermissions.inviteGuests,children:(0,i.tZ)(h.zx,{onClick:function(){(0,g.j)(g.U3.INVITE_MODAL_OPENED,{language:oe.lang.id,replId:oe.id,source:"replEnvironment"}),N(!0)},iconLeft:(0,i.tZ)(I.Z,{}),text:"Invite"})})}):null,(0,i.tZ)(h.hU,{size:28,onClick:function(){re()},tooltipDelay:500,alt:"Search & run commands",tooltipPlacement:"bottom-end",children:(0,i.tZ)(ae.Z,{})})]}),(0,i.tZ)(K.Z,{isOpen:U,onRequestClose:function(){return N(!1)},children:(0,i.tZ)(h.G7,{innerRef:Ce,children:Oe?(0,i.tZ)(X.Z,{replId:p}):(0,i.tZ)(H.Z,{replId:p})})}),(0,i.tZ)(W.Z,{isOpen:b,onRequestClose:function(){return Z(!1)},noPadding:!0,children:(0,i.tZ)(ve.Z,{source:"replEnvironment",replId:oe.id})}),(0,i.tZ)(K.Z,{isOpen:A,onRequestClose:function(){return O(!1)},width:"medium",children:(0,i.tZ)(me.Z,{repl:oe})}),(0,i.tZ)(W.Z,{isOpen:D,onRequestClose:function(){return R(!1)},maxWidth:512,children:(0,i.tZ)(he.Z,{repl:oe,onDone:function(){return R(!1)},source:"replEnvironment"})})]}):(0,i.tZ)(h.G7,{tag:"header",css:[h.l0.backgroundColor.backgroundDefault,h.l0.height(60)]})}var Se=(0,a.memo)(ke),Ce=n(50658),Ae=n(76890),Oe=n(81544),Pe=n(84635),De=n(98009),Re=n(35932),Te=n(3846),je=n(55877),_e=n.n(je);var Me=n(36793),Ue=n(31179),Ne=n(84637),Ge=n(79771),Fe=n(56801);function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||We(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e){return function(e){if(Array.isArray(e))return ze(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||We(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){if(e){if("string"===typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(e,t):void 0}}var Xe=["tutorial","kaboombar","filetree","git","packager","envEditor","debugger","database","autograder","unitTests","education","preferences","adminPanel"],Le=(0,l.cn)([]),He=(0,l.cn)((function(e){var t=e(Je);return t&&Xe.includes(t.type)?t.type:null})),Ve=(0,l.cn)(null,(function(e,t,n){var r=e(Je);r?r.type!==n?t(Q.vN,{paneId:r.paneId,data:{type:n}}):t(Q.$r,r.paneId):t(Q.Et,{pane:{type:n},percent:20,placement:"leftOf",makeActive:!1})})),$e=(0,l.cn)(null,(function(e,t,n){var r=e(Je);r?t(Q.vN,{paneId:r.paneId,data:{type:n}}):t(Q.Et,{pane:{type:n},percent:20,placement:"leftOf",makeActive:!1})})),qe=(0,l.cn)(null,(function(e,t,n){var r=e(Le);r.some((function(e){return e.type===n.type}))||t(Le,Xe.reduce((function(e,t){if(n.type===t)return Ke(e).concat([n]);var o=r.find((function(e){return e.type===t}));return o?Ke(e).concat([o]):e}),[]))})),Ye=(0,l.cn)(null,(function(e,t,n){var r=e(Le),o=r.filter((function(e){return e.type!==n}));o.length!==r.length&&t(Le,o)})),Je=(0,l.cn)((function(e){var t=e(J.g4);if(!t.tiling)return null;if("split"!==t.tiling.type)return null;if(t.tiling.stacked)return null;var n=Be(t.tiling.children,1)[0];if("paneGroup"!==n.type)return null;var r=e(J.Eh).find((function(e){return e.paneId===n.panes[0]}));if(!r)return null;var o=e(r.data).type;return Xe.some((function(e){return e===o}))?{paneId:r.paneId,type:o}:null}));(0,l.cn)((function(e){return Boolean(e(Je))}));function Qe(e){return"paneGroup"===e.type?e.panes[0]:Qe(e.children[0])}var et=(0,l.cn)((function(e){var t=e(J.g4).tiling;return t?"paneGroup"===t.type?[t.panes[0]]:t.children.map(Qe):[]})),tt=(0,l.cn)(null,(function(e,t,n){var r=e(J.g4),o=e(Je),i=e(J.Eh).find((function(t){return(0,Pe.Zh)(e(t.data).type)}));if(!i)throw new Error("Expected editorPane");if((0,Ne.R)(r,i.paneId).floating)throw new Error("Expected tiled editorPaneNode");var a=o?(0,Ne.R)(r,o.paneId):null;if(a&&a.floating)throw new Error("Expected tiled sidebarPaneNode");var l=(0,$.ZP)(r,(function(e){(0,Ge.Z)(e,i.paneId),n&&a?(0,ee.mZ)(e,{panes:[i.paneId],relativeTo:["tiling",1],placement:"above"}):n?(0,ee.mZ)(e,{panes:[i.paneId],relativeTo:["tiling",0],placement:"above"}):a?(0,ee.mZ)(e,{panes:[i.paneId],relativeTo:a.paneGroup.panes[0],placement:"rightOf",percent:50}):(0,ee.mZ)(e,{panes:[i.paneId],relativeTo:["tiling"],placement:"leftOf",percent:50}),a&&(0,Fe.Z)(e,{leftPath:["tiling",0],percent:a.paneGroup.percent})}));t(J.YF,l)})),nt=n(85060),rt=n(70240),ot=n(25108);function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){at(e,t,n[t])}))}return e}function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return it(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return it(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ut=!1;function st(e){var t=e.repl,n=e.currentUser,r=(0,c.useRouter)(),o=(0,l.b9)(J.tt),i=(0,a.useState)((function(){return(0,Ae.Z)({runnerMode:"html"===t.language?"html":"shellrunner",onUnrecoverableError:function(e){if(e.message.toLowerCase().includes("repl not found"))r.push("/home","~/");else{var t={replenvironmentservices:!0,layoutv2:!0};ot.error(e),Ce.Tb(e,{tags:t});var n=(0,Re.Z)(e,{tags:t});o(n)}}})}))[0],u=(0,a.useState)((function(){return(0,De.fK)({config:(0,Pe.Ub)()})}))[0],s=(0,l.b9)(J.sq),f=(0,Me.Z)(),d=f.preferences,p=f.initiallyLoading,h=d.isLayoutStacked,m=(0,a.useRef)(!1);(0,a.useEffect)((function(){if(!m.current&&!p){var e=["html","html_beta"].includes(t.language);s(function(e){var t=e.isStacked,n=e.isHTML,r={filetree:{paneId:_e()(),pane:{type:"filetree"}},codeEditor:{paneId:_e()(),pane:{type:"codeEditor",data:{path:""}}},output:{paneId:_e()(),pane:{type:n?"webview":"runnerOutput"}},shell:{paneId:_e()(),pane:{type:"shell"}}},o={};return Object.values(r).forEach((function(e){var t=e.paneId,n=e.pane;o[t]=n})),{layout:function(e){var t=e.filetreeId,n=e.codeEditorId,r=e.outputId,o=e.shellId;return{floating:[],tiling:e.isStacked?{type:"split",stacked:!1,percent:100,children:[{percent:15,type:"paneGroup",panes:[t],activeIndex:0},{type:"split",stacked:!0,percent:85,children:[{percent:60,type:"paneGroup",panes:[n],activeIndex:0},{percent:40,type:"paneGroup",panes:[r,o],activeIndex:0}]}]}:{type:"split",stacked:!1,percent:100,children:[{percent:15,type:"paneGroup",panes:[t],activeIndex:0},{percent:45,type:"paneGroup",panes:[n],activeIndex:0},{percent:40,type:"paneGroup",panes:[r,o],activeIndex:0}]}}}({filetreeId:r.filetree.paneId,codeEditorId:r.codeEditor.paneId,outputId:r.output.paneId,shellId:r.shell.paneId,isStacked:t}),data:o}}({isStacked:h,isHTML:e})),m.current=!0}}),[s,p,h,t.language]),(0,a.useEffect)((function(){return Ce.YA("replId",t.id),function(){Ce.YA("replId",void 0)}}),[t.id]);var y=i.container,b=(0,Oe.b)({repl:t,currentUser:n});(0,a.useEffect)((function(){var e;return ut||(ut=!0,e=r.query.initialConnectionMetadata),i.container.connect({customConnectionMetadata:e,context:b}),function(){i.container.close()}}),[b,i]),(0,a.useEffect)((function(){var e=function(){i.container.destroy()};return r.events.on("routeChangeStart",e),function(){r.events.off("routeChangeStart",e)}}),[r,i.container]);var g=ct((0,v.SrS)(),1)[0],Z=(0,l.b9)(Q.MG);(0,a.useEffect)((function(){return y.onPortOpened((function(e){var n,r=e.isVnc,o=r?"vnc":"webview";(Z({pane:{type:o},match:function(e){return e.data.type===o},insertTrys:[{placement:"above",match:function(e){var t=e.data;return(0,Pe.oq)(t.type)}}]}),t.id)&&(n=r?{isVnc:!0}:{isServer:!0},g({variables:{input:lt({id:t.id},n)}}))}))}),[y,Z,g,t.id]),(0,a.useEffect)((function(){(0,Ue.X)()}),[]),(0,a.useEffect)((function(){var e,n="Repl"===(null===(e=t.origin)||void 0===e?void 0:e.__typename)?t.origin.id:null;return(0,rt.Fy)({id:t.id,slug:t.slug,originId:n}),function(){(0,rt.dv)()}}),[t]),(0,fe.F)();var w=(0,l.b9)(J._E),x=(0,Te.T)();(0,a.useEffect)((function(){w(!x)}),[x,w]);var E=(0,l.b9)(tt);return(0,nt.Z)((function(){E(d.isLayoutStacked)}),[d.isLayoutStacked,E]),{services:i,ui:u}}var ft=n(1517),dt=n(15682),pt=n(71227),vt=n(12603),ht=n(94157),mt=n(66919),yt=n(44262),bt=n(73248),gt=n(57731),Zt=n(15866),wt=n(27248),xt=n(81970),Et=n(8286),It=n(79806),kt=n(51281),St=n(58458),Ct=n(8996),At=n(40425),Ot=n(43552),Pt=n(3204);function Dt(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(u){return void n(u)}l.done?t(c):Promise.resolve(c).then(r,o)}function Rt(e){var t=e.isVisible,n=e.children,r=e.onDismiss,l=(0,V.Z)(),c=(0,k.Z)().fs,u=(0,Ot.Z)("workspace","enveditorintro"),s=u.shouldDisplay,f=u.register,d=u.dismiss;return a.useEffect((function(){var e=!1,n=function(){var n,r=(n=o().mark((function n(){var r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.readFile(".env");case 2:if(r=n.sent,!e){n.next=5;break}return n.abrupt("return");case 5:if(!r.error){n.next=7;break}return n.abrupt("return");case 7:t&&f();case 8:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(e){Dt(i,r,o,a,l,"next",e)}function l(e){Dt(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return n(),function(){e=!0}}),[l,c,t,f]),(0,i.tZ)("div",{css:[Pt.l0.display.flex,Pt.l0.width("100%"),Pt.l0.height("100%"),Pt.l0.center],children:(0,i.BX)(C.Z,{isOpen:s,placement:"right",showArrow:!0,children:[a.cloneElement(n,{tooltipHidden:s}),(0,i.BX)(Ct.gC,{spacing:1,align:"stretch",children:[(0,i.tZ)(At.Z,{level:4,children:"Looking for your .env file?"}),(0,i.tZ)(St.Z,{size:"small",children:"Your environment moved here, click on the icon to the left to check it out and edit your environment."}),(0,i.tZ)(Ct.Ug,{justify:"end",children:(0,i.tZ)(kt.Z,{color:"primary",onClick:function(e){e.stopPropagation(),d(),r()},children:"dismiss"})})]})]})})}var Tt=n(64457),jt=n(64824),_t=(0,l.cn)(null,(function(e,t,n){var r=e(J.g4),o=(0,$.ZP)(r,(function(e){(0,Fe.Z)(e,{leftPath:n.leftPath,percent:n.percent})}));t(J.YF,o)}));var Mt=n(44894);function Ut(e){var t,n,r=e.isVisible,o=e.children,l=e.onDismiss,c=(0,V.Z)(),u=(0,v.CHr)({variables:{replId:c}}),s=u.data,f=u.loading,d="io-tests-popover-dismissed-".concat(c),p=Mt.Z.get(d,"boolean");if(!s||f)return null;var h="Repl"===(null===s||void 0===s||null===(t=s.repl)||void 0===t?void 0:t.__typename)?s.repl:null;if(!h)return null;var m=h.isProjectFork,y=h.ioTests,b=h.owner,g=(null===(n=h.unitTests)||void 0===n?void 0:n.tests)?h.unitTests.tests:[],Z="Team"===(null===b||void 0===b?void 0:b.__typename)&&(null===b||void 0===b?void 0:b.isAdmin),w=y.length>0||g.length>0,x=!Z&&m&&!p&&w&&r;return(0,i.tZ)("div",{css:[Pt.l0.display.flex,Pt.l0.width("100%"),Pt.l0.height("100%"),Pt.l0.center],children:(0,i.BX)(C.Z,{isOpen:x,placement:"right",showArrow:!0,borderColor:"var(--accent-purple-default)",children:[a.cloneElement(o,{tooltipHidden:x}),(0,i.BX)(Ct.gC,{spacing:1,align:"stretch",children:[y.length>0?(0,i.BX)(St.Z,{size:"small",children:["This project has ",(0,i.tZ)("strong",{children:y.length})," input/output"," ",y.length>1?"tests":"test","."]}):(0,i.BX)(St.Z,{size:"small",children:["This project has ",(0,i.tZ)("strong",{children:g.length})," unit"," ",g.length>1?"tests":"test","."]}),(0,i.tZ)(St.Z,{size:"small",children:"Run tests to check your work!"}),(0,i.tZ)(Ct.Ug,{justify:"end",children:(0,i.tZ)(kt.Z,{onClick:function(e){e.stopPropagation(),Mt.Z.set(d,!0),l()},children:"dismiss"})})]})]})})}var Nt=n(90361);function Gt(){var e,t=(0,V.Z)(),n=(0,v.iw1)({variables:{replId:t}}).data,r="Repl"===(null===n||void 0===n||null===(e=n.repl)||void 0===e?void 0:e.__typename)?null===n||void 0===n?void 0:n.repl:null;return r?{repl:r,currentUser:(null===n||void 0===n?void 0:n.currentUser)||null}:{repl:null,currentUser:null}}function Ft(){var e=Gt().repl,t=(0,l.b9)(qe),n=(0,l.b9)(Ye),r=null===e||void 0===e?void 0:e.lang.hasDAP,o=function(){var e=(0,k.Z)().dotReplit,t=(0,a.useState)(!1),n=t[0],r=t[1];return(0,a.useEffect)((function(){return e.watch((function(e){var t,n;e.error?e.error===Nt.Yt.NotFound&&r(!1):r(Boolean(null===e||void 0===e||null===(t=e.config)||void 0===t||null===(n=t.debugger)||void 0===n?void 0:n.support))}))})),n}();(0,a.useEffect)((function(){r||o?t({type:"debugger",icon:(0,i.tZ)(gt.Z,{}),tooltip:"Debugger"}):n("debugger")}),[r,o,t,n])}var zt=!1;function Bt(){var e=(0,l.Dv)(Le),t=(0,l.Dv)(He),n=(0,l.b9)(Ve);return function(){var e=(0,l.b9)(qe),t=(0,l.b9)(Ye),n=(0,Tt.e)().isTutorial,r=(0,l.b9)(Ve),o=(0,l.b9)(_t);(0,a.useEffect)((function(){if(n)return e({type:"tutorial",icon:(0,i.tZ)(yt.Z,{}),tooltip:"Tutorial"}),r("tutorial"),void o({leftPath:["tiling",0],percent:25});t("tutorial")}),[n,t,e,r,o])}(),function(){var e=(0,l.b9)(qe),t=(0,l.b9)(Ye),n=(0,vt.oj)(),r=(0,Tt.e)().isTutorial,o=(0,l.b9)(Ve);(0,a.useEffect)((function(){if(n)return e({type:"kaboombar",icon:(0,i.tZ)(It.Z,{}),tooltip:"Kaboom"}),void(r||o("kaboombar"));t("kaboombar")}),[n,r,t,e,o])}(),function(){var e,t=(0,l.b9)(qe);(0,a.useEffect)((function(){t({type:"filetree",icon:(0,i.tZ)(ht.Z,{}),tooltip:"Files"})}),[t]);var n=(0,l.b9)($e),r=null===(e=(0,ye.e)(be.H.Sidepane))||void 0===e?void 0:e.isActive;(0,a.useEffect)((function(){if(r){var e=setInterval((function(){n("filetree")}),200);return function(){clearInterval(e)}}}),[r,n])}(),function(){var e=Gt().repl,t=(0,l.b9)(qe),n=(0,l.b9)(Ye),r=Boolean(null===e||void 0===e?void 0:e.lang.supportsGit);(0,a.useEffect)((function(){r?t({type:"git",icon:(0,i.tZ)(bt.Z,{}),tooltip:"Version control"}):n("git")}),[r,n,t])}(),function(){var e=(0,l.b9)(qe),t=(0,l.b9)(Ye),n=(0,pt.x)();(0,a.useEffect)((function(){(null===n||void 0===n?void 0:n.packageSearch)?e({type:"packager",tooltip:"Packager",icon:(0,i.tZ)(mt.Z,{})}):t("packager")}),[n,e,t])}(),function(){var e=Gt().repl,t=(0,l.b9)(qe),n=(0,l.b9)(Ye),r=e&&!(null===e||void 0===e?void 0:e.lang.key.startsWith("html"));(0,a.useEffect)((function(){r?t({type:"envEditor",icon:(0,i.tZ)(Zt.Z,{}),IconWrapper:Rt,tooltip:"Secrets (Environment variables)"}):n("envEditor")}),[r,t,n])}(),Ft(),function(){var e=Gt().repl,t=(0,l.b9)(qe),n=(0,l.b9)(Ye),r=e&&!(null===e||void 0===e?void 0:e.lang.key.startsWith("html"));(0,a.useEffect)((function(){r?t({type:"database",icon:(0,i.tZ)(wt.Z,{}),tooltip:"Database"}):n("database")}),[r,t,n])}(),function(){var e=Gt().repl,t=(0,l.b9)(qe),n=(0,l.b9)(Ye),r=(null===e||void 0===e?void 0:e.isProject)||(null===e||void 0===e?void 0:e.isProjectFork);(0,a.useEffect)((function(){r?t({type:"autograder",icon:(0,i.tZ)(Et.Z,{}),tooltip:"Tests",IconWrapper:Ut}):n("autograder")}),[r,t,n])}(),function(){var e=Gt().repl,t=(0,l.b9)(qe),n=(0,l.b9)(Ye),r=!((null===e||void 0===e?void 0:e.isProject)||(null===e||void 0===e?void 0:e.isProjectFork));(0,a.useEffect)((function(){r?t({type:"unitTests",icon:(0,i.tZ)(Et.Z,{}),tooltip:"Unit tests"}):n("unitTests")}),[r,t,n])}(),function(){var e,t,n=Gt().repl,r=(0,l.b9)(qe),o=(0,l.b9)(Ye),c=(null===n||void 0===n?void 0:n.isProjectFork)&&!(null===n||void 0===n?void 0:n.isModelSolution)&&"Team"===(null===n||void 0===n||null===(e=n.owner)||void 0===e?void 0:e.__typename)&&(null===n||void 0===n||null===(t=n.owner)||void 0===t?void 0:t.isAdmin);(0,a.useEffect)((function(){c?r({type:"education",icon:(0,i.tZ)(yt.Z,{}),tooltip:"Teams for Education"}):o("education")}),[c,r,o])}(),function(){var e=(0,l.b9)(qe);(0,a.useEffect)((function(){e({type:"preferences",icon:(0,i.tZ)(xt.Z,{}),tooltip:"Settings"})}),[e])}(),function(){var e=(0,c.useRouter)(),t=Gt().currentUser,n=(0,l.b9)(qe),r=(0,l.b9)(Ye),o=(null===t||void 0===t?void 0:t.isAdmin)||Boolean(e.query.debug)||zt;(0,a.useEffect)((function(){window.debug=function(){zt=!0,n({type:"adminPanel",icon:(0,i.tZ)(E.Z,{}),tooltip:"Debug"})}}),[n]),(0,a.useEffect)((function(){o?n({type:"adminPanel",icon:(0,i.tZ)(E.Z,{}),tooltip:"Debug"}):r("education")}),[o,n,r])}(),{items:e,activeItem:t,onDockItemClick:n}}var Kt=n(21066),Wt=n(45557);function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(e){var t=e.item,n=e.isActive,r=e.onClick,o=Lt(a.useState(!0),2),l=o[0],c=o[1],u=a.useRef(null),s=Lt((0,dt.XZ)(u,!1),4),f=s[0],d=s[1],p=s[2],v=s[3];(0,dt.Ym)(d,u);var m=(0,i.tZ)(h.hU,{innerRef:u,role:"tab",tabIndex:f,tooltipPlacement:"right","aria-selected":n,size:40,alt:t.tooltip,css:[n?[h.l0.backgroundColor.accentPrimaryDimmest,h.l0.color.accentPrimaryStrongest]:h.l0.color.foregroundDimmest,{"&:hover":n?[h.l0.backgroundColor.accentPrimaryDimmest,h.l0.color.accentPrimaryStrongest]:h.l0.color.accentPrimaryStrongest}],onKeyDown:p,onClick:function(e){v(),c(!1),r(e)},children:t.icon},t.type);return t.IconWrapper?(0,i.tZ)(t.IconWrapper,{isVisible:l,onDismiss:function(){return c(!1)},children:m}):m}var Vt={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:","},$t={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"G"};function qt(){var e=Bt(),t=e.items,n=e.activeItem,r=e.onDockItemClick,o=(0,l.b9)($e),a=(0,v.QHX)().data,c=null===a||void 0===a?void 0:a.currentUser;(0,fe.x)(Vt,{run:function(){o("preferences")}}),(0,ce.Y)({match:se.pl,data:{type:"action",icon:(0,i.tZ)(xt.Z,{}),label:"Settings",description:"Manage editor settings",keyboardShortcut:Vt,run:function(){o("preferences")}}});var u=t.some((function(e){return"git"===e.type}));return(0,fe.x)($t,{run:function(){o("git")},enabled:u}),(0,ce.Y)({match:se.pl,data:{icon:(0,i.tZ)(Wt.Z,{}),label:"Version control",description:"Open version control sidebar",type:"action",keyboardShortcut:$t,run:function(){o("git")}}},{enabled:u}),(0,i.BX)(h.Tg,{elevated:!0,css:[h.l0.borderRadius(4,0,0,4),h.l0.colWithGap(4),h.l0.flex.growAndShrink(1),h.l0.justify.spaceBetween,h.l0.align.center,h.l0.pb(8),{borderRight:"1px solid "+h.TV.backgroundHigher}],children:[(0,i.tZ)(dt.uP,{options:{direction:"vertical"},children:(0,i.BX)(h.G7,{css:[h.l0.p(4),h.l0.overflowY("auto"),h.l0.flex.growAndShrink(1),h.l0.colWithGap(4),h.l0.align.start],role:"tablist","aria-orientation":"vertical","aria-label":"Dock",children:[t.map((function(e){var t=e.type===n;return(0,i.tZ)(h.G7,{children:(0,i.tZ)(Ht,{item:e,isActive:t,onClick:function(){return r(e.type)}})},e.type)})),0===t.length?(0,i.tZ)(h.hU,{"aria-disabled":!0,alt:"",size:40,css:{opacity:0},children:(0,i.tZ)(ht.Z,{})}):null]})}),c?(0,i.tZ)(Kt.Z,{css:[h.l0.center,h.l0.shadow(1),h.l0.cursor.pointer,h.l0.color.foregroundDimmer,h.l0.backgroundColor.backgroundDefault,{border:"1px solid ".concat(h.TV.backgroundHighest),userSelect:"none",transition:"0.1s",borderRadius:"100%"}],currentUser:c}):null]})}var Yt=(0,a.memo)(qt),Jt=n(91898),Qt=n(56928),en=n(29868);function tn(e){var t=e.children,n=a.useRef({fileMap:new Map});return(0,i.tZ)(Jt.Z.Provider,{value:n,children:t})}function nn(e){var t=e.ui,n=e.services,r=e.replId,o=e.children;return(0,i.tZ)(De.kz,{value:t,children:(0,i.tZ)(tn,{children:(0,i.tZ)(Qt.Z.Provider,{value:n,children:(0,i.tZ)(en.Z.Provider,{value:r,children:o})})})})}var rn=n(70917),on=n(66552),an=n(54929),ln=n(94074),cn=n(33605);function un(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sn=(0,an.K)("div"),fn=["n","s","e","w","ne","nw","se","sw"];function dn(e){var t=e.resizable&&e.onResizeControlMouseDown?fn.map((function(t){return(0,i.tZ)(pn,{size:8,side:t,onMouseDown:function(n){if(!e.onResizeControlMouseDown)throw new Error("Expected onResizeControlMouseDown");e.onResizeControlMouseDown(n,t)}},t)})):null,n=e.dimWhenInactive&&(0,rn.iv)({transitionProperty:"opacity",transitionTimingFunction:"ease-out",transitionDuration:"1000ms",transitionDelay:"1000ms",opacity:0,"&:hover, &:focus-within":{opacity:1,transitionDelay:"0ms",transitionDuration:"100ms"}}),r=e.rect,o=e.floating?2:void 0;(e.isBeingDragged||e.active)&&(o=(o||2)+1);var a=(0,rn.iv)([Pt.l0.position.absolute,Pt.l0.width(r.width),Pt.l0.height(r.height),e.hidden&&{visibility:"hidden"},{transform:"translate(".concat(Math.round(r.x),"px, ").concat(Math.round(r.y),"px)"),transition:e.animate?"transform 140ms, width 140ms, height 140ms":void 0,transitionTimingFunction:"ease-out",zIndex:o},!cn.g&&{"& .cm-editor > .cm-tooltip":{width:"fit-content",transform:"translate(".concat(-e.viewportInset.x,"px, ").concat(-e.viewportInset.y,"px)")},"& .cm-editor > .cm-tooltip.cm-tooltip-thread":{left:"0px !important",transform:"translateY(".concat(-e.viewportInset.y,"px)")},".cm-custom-context-menu":{transform:"translate(".concat(-e.viewportInset.x,"px, ").concat(-e.viewportInset.y,"px)")}}]),l=(0,rn.iv)([{borderRadius:4}]),c=(0,rn.iv)([{transform:"scale(".concat(e.scaleDown?.8:1,")"),transformOrigin:"center top"},e.animate&&{transition:"transform 140ms ease-out",transitionDelay:e.scaleDown?"100ms":"0ms"}]);return(0,i.tZ)(an.Z,{css:[a,(0,ln.PH)({active:e.active})],children:(0,i.BX)(on.Z,{onClick:e.onClick,onContextMenu:e.onClick,elevated:e.elevated,css:[Pt.l0.coverContainer,l,c],className:e.className,children:[(0,i.tZ)(an.Z,{css:[Pt.l0.coverContainer,n],children:e.children}),t]})})}function pn(e){var t=e.side,n=e.size,r=e.onMouseDown;if("n"===t||"s"===t)return(0,i.tZ)(sn,{onMouseDown:r,css:un({cursor:"ns-resize",width:"calc(100% - ".concat(2*n,"px)"),height:n,position:"absolute",left:"50%",transform:"translate(-50%, ".concat("n"===t?2-n:n-2,"px)")},"n"===t?"top":"bottom",0)});if("e"===t||"w"===t)return(0,i.tZ)(sn,{onMouseDown:r,css:un({cursor:"ew-resize",height:"calc(100% - ".concat(2*n,"px)"),width:n,position:"absolute",top:"50%",transform:"translate(".concat("e"===t?n-2:2-n,"px, -50%)")},"e"===t?"right":"left",0)});var o,a="nw"===t||"se"===t?"nwse-resize":"nesw-resize";return(0,i.tZ)(sn,{onMouseDown:r,css:(o={cursor:a,height:n,width:n,position:"absolute"},un(o,t.includes("n")?"top":"bottom",0),un(o,t.includes("e")?"right":"left",0),o)})}var vn=n(17982),hn=n(75661);function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var bn=(0,l.cn)((function(e){var t=e(J.g4),n={};return e(J.Eh).forEach((function(t){n[t.paneId]=e(t.data)})),{layout:t,data:n}}));function gn(){var e=(0,V.Z)(),t=(0,jt.lV)((0,a.useCallback)((function(e){return e(bn)}),[])),n=yn((0,v.Wlz)(),1)[0];return(0,a.useCallback)((function(){t().then((function(t){n({variables:{input:{replId:e,state:t}}})}))}),[n,e,t])}function Zn(e){return(0,i.tZ)(an.Z,{css:[Pt.l0.width("100%"),Pt.l0.flex.growAndShrink(1),{overflow:"auto"},e.disableInteractions&&{pointerEvents:"none",userSelect:"none"}],children:e.children})}var wn=n(90039),xn=n(70700),En=n(39644);function In(e){var t=e.paneIds,n=e.activeIndex,r=e.onClick;return(0,i.tZ)(h.Tg,{background:"root",css:[h.l0.height(32),h.l0.flex.row,h.l0.align.end,h.l0.position.relative],children:t.map((function(e,t){return(0,i.tZ)(En.q,{paneId:e,isActive:n===t,onClick:function(){r(t)}},e)}))})}var kn=n(38848),Sn=n(25108);function Cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function An(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function On(e){return(On=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pn(e,t){return!t||"object"!==Tn(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dn(e,t){return(Dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Tn=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function jn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=On(e);if(t){var o=On(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pn(this,n)}}var _n=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dn(e,t)}(n,e);var t=jn(n);function n(){var e;return An(this,n),(e=t.apply(this,arguments)).state={error:null,errorInfo:null},e}var r=n.prototype;return r.componentDidCatch=function(e,t){this.setState({error:e,errorInfo:t}),this.props.handleError(e,t),Sn.error(e)},r.render=function(){return this.state.error?(0,i.tZ)(h.G7,{css:[h.l0.font.code,h.l0.p(16),{whiteSpace:"pre",overflow:"hidden",color:"white"},h.l0.backgroundColor.blurpleDefault,h.l0.height("100%")],children:(0,i.tZ)(h.G7,{children:this.state.error.stack})}):this.props.children},n}(a.Component);function Mn(e){var t=e.paneId,n=(0,l.Dv)(J.CK),r=(0,l.Dv)(J.ZP),o=(0,l.Dv)((0,J.z)(t)),a=(0,l.Dv)(o.data),c=(0,l.Dv)(o.isMaximizedAtom),u=(0,l.Dv)(J.uc),s=(0,l.Dv)(o.isActiveAtom),f=(0,l.Dv)(o.isHighlightedAtom),d=gn(),p=Rn((0,l.KO)(J.tt),2),v=(p[0],p[1]),m=(0,l.b9)(vn.H),y=(0,l.b9)(J.W1),b=(0,l.Dv)(et),g="commands"===a.type,Z=!g||"floating"===o.type,w=g&&!o.isDialog&&!s,x="floating"===o.type&&!o.isDialog,E=Boolean(o.dropBehavior),I=E||c,k=c?u:o.rect,S={x:n.x+k.x,y:n.y+k.y},C=(0,Pe.Zh)(a.type),A=(0,Pe.oq)(a.type),O=(0,wn.Z)();return(0,i.BX)(i.HY,{children:[o.isDialog?(0,i.tZ)(Fn,{}):null,(0,i.tZ)(dn,{hidden:o.isHidden,css:[b.includes(t)&&h.l0.borderRadius(0,8,8,0),C&&O&&{boxShadow:"0 0 0 3px ".concat(O)}],viewportInset:S,active:s,highlight:f,rect:k,animate:!1,isBeingDragged:E,floating:I,dimWhenInactive:w,elevated:Z,scaleDown:"tile"===o.dropBehavior,resizable:x,onClick:function(){y({paneId:t})},onResizeControlMouseDown:function(e,n){(0,hn.g)(e,{start:function(){m({type:"start",paneId:t,side:n})},move:function(e){var t=e.delta;m({type:"update",moveDelta:t})},end:function(){m({type:"end"}),d()}})},children:(0,i.BX)(_n,{handleError:function(e,t){var n=(0,Re.Z)(e,{extras:{errInfo:t},tags:{layoutv2:"true",bsod:"true",paneType:o.type}});v(n)},children:[C?(0,i.tZ)(xn.Z,{style:{height:32,minHeight:32,overflowX:"hidden"}}):null,A?(0,i.tZ)(Un,{paneId:t}):null,(0,i.tZ)(Zn,{disableInteractions:r,children:(0,i.tZ)(Gn,{paneId:t,dataAtom:o.data,isHidden:o.isHidden})})]},t)})]})}function Un(e){var t=e.paneId,n=(0,l.Dv)(J.g4),r=(0,Ne.R)(n,t),o=(0,l.b9)(kn.Oe),a=r.paneGroup,c=a.panes,u=a.activeIndex;return 1===c.length?null:(0,i.tZ)(In,{paneIds:c,activeIndex:u,onClick:function(e){var t=c[e];o(t)}})}function Nn(e){var t=e.paneId,n=e.isHidden,r=e.dataAtom,o=(0,l.Dv)(r),a=(0,De.Se)().Content,c=(0,l.b9)(Q.zx);return(0,i.tZ)(a,{pane:o,options:{paneId:t,isHidden:n,openPane:function(e){c({fromPaneId:t,data:e})}}})}var Gn=(0,a.memo)(Nn);function Fn(){var e=(0,l.b9)(oe);return(0,i.tZ)(h.G7,{onClick:function(){return e()},css:[h.l0.coverContainer,h.l0.position.fixed,h.l0.backgroundColor.backgroundOverlay]})}var zn=(0,a.memo)(Mn);function Bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kn(e,t,n){var r="ontouchstart"in window||navigator.maxTouchPoints>0?32:0;if(n){var o=2/3,i=Math.max(e.width,r*o),a=Math.max(e.height,r*o),l="left"===n?1:-1,c=t?0:l*(i-e.width)/2,u=t?l*(a-e.height)/2:0;return{width:t?e.width:i,height:t?a:e.height,x:t?e.x:e.x-(i-e.width)/2+c,y:t?e.y-(a-e.height)/2+u:e.y}}var s=Math.max(e.width,r),f=Math.max(e.height,r);return{width:t?e.width:s,height:t?f:e.height,x:t?e.x:e.x-(s-e.width)/2,y:t?e.y-(f-e.height)/2:e.y}}var Wn="--grip-color",Xn="var(".concat(Wn,")");function Ln(e){var t,n=e.rect,r=e.onMouseDown,o=e.onDoubleClick,a=e.stacked,l=e.snapped,c=Kn(n,a,l);return(0,i.tZ)(an.Z,{className:"tiling-handle",onMouseDown:r,onTouchStart:r,onDoubleClick:o,onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},css:[Pt.l0.width(c.width),Pt.l0.height(c.height),Pt.l0.position.absolute,Pt.l0.center,{zIndex:1},(t={transform:"translate(".concat(c.x,"px, ").concat(c.y,"px)"),borderRadius:Pt.TV.borderRadius8,minWidth:8,minHeight:8,cursor:a?"row-resize":"col-resize"},Bn(t,Wn,Pt.TV.outlineDimmest),Bn(t,":active .grip-line, :hover .grip-line",Bn({},Wn,Pt.TV.foregroundDefault)),t)],children:(0,i.tZ)(an.Z,{className:"grip-line",css:[{transitionDuration:"140ms"},"left"===l&&{transform:a?"translate(0px, -2px) rotate(135deg)":"translate(-2px, 0px) rotate(45deg)"},"right"===l&&{transform:a?"translate(0px, 2px) rotate(-45deg)":"translate(2px, 0px) rotate(-135deg)"},l&&[Pt.l0.width(6),Pt.l0.height(6),{borderRight:"1px solid",borderTop:"1px solid",borderColor:Xn,transition:"border-color"}],!l&&[{width:a?25:2,height:a?2:25,backgroundColor:Xn,transition:"background-color"},Pt.l0.borderRadius(4)]]})})}var Hn=n(78977);function Vn(e){var t=e.handleId,n=(0,l.Dv)((0,J.vv)(t)),r=(0,l.b9)(Hn.N),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(0,a.useRef)(e),n=(0,l.b9)(_t),r=(0,jt.lV)((0,a.useCallback)((function(e){return e(J.g4)}),[]));return(0,a.useCallback)((function(o){o.snapped?n({leftPath:o.leftPath,percent:t.current}):r().then((function(r){var i,a=(0,Ne.K)(r,o.leftPath);t.current=null!==(i=null===a||void 0===a?void 0:a.percent)&&void 0!==i?i:33,n({leftPath:o.leftPath,percent:e})}))}),[e,n,r])}(),c=gn();return(0,i.tZ)(Ln,{snapped:n.snapped,rect:n.rect,stacked:n.stacked,onDoubleClick:function(){o(n),c()},onMouseDown:function(e){(0,hn.g)(e,{start:function(){r({type:"start",leftPath:n.leftPath,stacked:n.stacked})},move:function(e){var t=e.delta;r({type:"update",moveDelta:t})},end:function(){r({type:"end"}),c()}})}})}var $n=(0,a.memo)(Vn);function qn(e){var t=e.rect,n=e.animate,r=e.borderRadius,o=void 0===r?8:r;return(0,i.tZ)("div",{css:[Pt.l0.position.absolute,Pt.l0.width(t.width),Pt.l0.height(t.height),Pt.l0.backgroundColor.accentPrimaryDefault,{borderRadius:o,pointerEvents:"none",zIndex:1,opacity:.2,transform:"translate(".concat(Math.round(t.x),"px, ").concat(Math.round(t.y),"px)")},n&&{transition:"transform 140ms, width 140ms, height 140ms"}]})}function Yn(){var e=(0,l.Dv)(J.mx),t=(0,l.Dv)(J._E);return e?(0,i.tZ)(qn,{rect:e.rect,animate:t}):null}var Jn=(0,a.memo)(Yn),Qn=n(85252);var er=n(82221),tr=n(90768);function nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rr(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(u){return void n(u)}l.done?t(c):Promise.resolve(c).then(r,o)}function or(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return nr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(e){var t=or(a.useState(!1),2),n=t[0],r=t[1];a.useEffect((function(){e&&("default"===(0,tr.eo)()&&r(!0))}),[e]);var i,l=a.useCallback((function(){(0,tr.Oc)(!0),r(!1)}),[]),c=a.useCallback((i=o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,tr.$q)();case 2:r(!1);case 3:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){rr(o,n,r,a,l,"next",e)}function l(e){rr(o,n,r,a,l,"throw",e)}a(void 0)}))}),[]);return{shouldShowModal:n,hideModal:l,confirm:c}}var ar=n(59936),lr=n(91449),cr=n(50999),ur=n(81605),sr=n(56167),fr=n(86035),dr=n(62867),pr=n(18292),vr=n(53408),hr=n(93577);var mr=n(67289),yr=n(46846),br=n(41045);function gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zr(e){return function(e){if(Array.isArray(e))return gr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return gr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var wr=n(73049),xr=n(91272);function Er(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(u){return void n(u)}l.done?t(c):Promise.resolve(c).then(r,o)}function Ir(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Er(i,r,o,a,l,"next",e)}function l(e){Er(i,r,o,a,l,"throw",e)}a(void 0)}))}}function kr(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(u){return void n(u)}l.done?t(c):Promise.resolve(c).then(r,o)}function Sr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){kr(i,r,o,a,l,"next",e)}function l(e){kr(i,r,o,a,l,"throw",e)}a(void 0)}))}}var Cr=n(38880),Ar=n(27754);function Or(){var e=(0,Cr.Z)(),t=e.showConfirm,n=e.showNotice,r=e.hideMessage,o=e.showError,i=(0,k.Z)().container;(0,a.useEffect)((function(){var e=i.onToast((function(e){e.startsWith("PANIC")||n(e,function(e){var t=e.length/.025+1e3;return Math.max(1e4,t)}(e))})),a=null,l=!1,c=i.onConnectionStateChanged((function(e){if(a&&(r(a),a=null),e===Ar.e.CONNECTED)return l=!0,void(a=t("Connected",1500));l&&(e!==Ar.e.CONNECTING?e!==Ar.e.DISCONNECTED||(a=o("Disconnected")):a=n("Reconnecting"))}));return function(){a&&r(a),e(),c()}}),[i,t,n,o,r])}var Pr=n(5499),Dr=n(22654),Rr=n(63431),Tr=n(56700),jr=n(25108);function _r(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(u){return void n(u)}l.done?t(c):Promise.resolve(c).then(r,o)}function Mr(){var e,t,n=(0,V.Z)(),r=(0,k.Z)(),i=r.fs,l=r.session,c=(0,v.eGB)({variables:{id:n}}).data,u="Repl"===(null===c||void 0===c?void 0:c.repl.__typename)?c.repl:null,s="CurrentUser"===(null===c||void 0===c||null===(e=c.currentUser)||void 0===e?void 0:e.__typename)?c.currentUser:null,f="Repl"===(null===c||void 0===c?void 0:c.repl.__typename)&&c.repl.isModelSolutionFork,d=f?u&&(null===(t=u.origin)||void 0===t?void 0:t.origin):u&&u.origin||null,p=(0,Oe.b)("Repl"===(null===d||void 0===d?void 0:d.__typename)?{repl:d,currentUser:s||void 0}:null);a.useEffect((function(){u&&s&&u.isProject&&i.stat(".lesson").then((function(e){e.exists||i.createDir(".lesson")}))}),[i,s,u]),a.useEffect((function(){if(u&&(u.isProjectFork||f)&&d&&p){var e=(0,Ar.Z)({onUnrecoverableError:function(e){jr.error(e),Ce.$e((function(t){t.setTag("curriculum-authoring",!0),t.setExtra("originId",d.id),Ce.Tb(e)}))}}),t=(0,Dr.Z)({container:e});e.connect({context:p,fetchConnectionMetadata:function(){return(0,Rr.Z)({url:"/data/repls/".concat(u.id,"/get_repl_origin_guest_connection_metadata")})}});var n=e.onConnectionStateChanged(function(){var r,a=(r=o().mark((function r(a){var c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a!==Tr.e.CONNECTED){r.next=22;break}return n(),r.prev=2,r.next=5,i.copyDirFromRemote(".lesson",".lesson",t);case 5:if(!(c=r.sent).error){r.next=10;break}Ce.$e((function(e){e.setTag("curriculum-authoring",!0),e.setExtra("originId",d.id),Ce.Tb({message:"Error copying lesson: ".concat(c.error)})})),r.next=14;break;case 10:return r.next=12,i.stat(".lesson/instructions.md");case 12:r.sent.exists&&l.setInstructionsViewerVisible(!0);case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(2),Ce.$e((function(e){e.setTag("curriculum-authoring",!0),Ce.Tb(r.t0)}));case 19:return r.prev=19,e.destroy(),r.finish(19);case 22:case"end":return r.stop()}}),r,null,[[2,16,19,22]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function a(e){_r(i,n,o,a,l,"next",e)}function l(e){_r(i,n,o,a,l,"throw",e)}a(void 0)}))});return function(e){return a.apply(this,arguments)}}());return function(){return e.destroy()}}}),[i,p,u,d,f,l])}var Ur=n(38835),Nr=n(54771),Gr=n(21217);function Fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Fr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Br=n(92594),Kr={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"S"};function Wr(){var e=(0,k.Z)().runner,t=(0,l.b9)(kn.rx),n=(0,l.b9)(kn.IM),r=(0,l.b9)(kn.og),o=(0,l.b9)(kn.ao),i=(0,Br.Z)(),c=function(){var e=(0,k.Z)().session,t=zr(a.useState(e.getInstructionsViewerVisible()),2),n=t[0],r=t[1];return a.useEffect((function(){return r(e.getInstructionsViewerVisible()),e.onInstructionsViewerToggled(r)}),[e]),n}(),u=(0,ye.e)(be.H.Output);a.useEffect((function(){if(null===u||void 0===u?void 0:u.isActive){var e=setInterval((function(){t()}),200);return function(){clearInterval(e)}}}),[null===u||void 0===u?void 0:u.isActive,t]),a.useEffect((function(){return e.onStateChanged((function(e){e===Gr.A.RUNNING&&t()}))}),[e,t]),a.useEffect((function(){i?r({pane:{type:"markdown",data:{path:i}}}):o({type:"markdown"})}),[i,r,o]),a.useEffect((function(){c?r({pane:{type:"instructions"}}):o({type:"instructions"})}),[c,r,o]),(0,fe.x)(Kr,{run:n})}var Xr=n(68906);function Lr(e){var t=e.isOwner,n=(0,k.Z)(),r=n.fs,i=n.session,c=n.dotReplit;!function(){var e,t,n=(0,l.b9)(Q.MG),r=(0,hr.Z)(),o=(0,v.m1t)().data,i=null!==(t=null===o||void 0===o||null===(e=o.currentUser)||void 0===e?void 0:e.flagVisualDotReplitEditorEnabled)&&void 0!==t&&t;(0,a.useEffect)((function(){if(r){var e=(0,Pe.Dp)({path:r,visualDotReplitEditorEnabled:i});n({pane:{type:e,data:{path:r}},match:function(e){var t=e.data;return(0,Pe.Zh)(t.type)},insertTrys:[]})}else n({pane:{type:"codeEditor",data:{path:""}},match:function(e){var t=e.data;return(0,Pe.Zh)(t.type)},insertTrys:[]})}),[r,n,i])}(),function(){var e=(0,k.Z)(),t=e.fs,n=e.dotReplit,r=e.session,i=(0,V.Z)();(0,a.useEffect)((function(){var e=function(){return a||r.getActiveFile()},a=!1;function l(){return(l=Ir(o().mark((function a(){var l,c,u,s,f;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,wr.mv)(t);case 2:if(l=o.sent,!e()){o.next=5;break}return o.abrupt("return");case 5:if(!l.path){o.next=9;break}return r.openFile(l.path),l.line&&r.updateDeeplink({path:l.path,line:l.line,col:l.col}),o.abrupt("return");case 9:return o.next=11,(0,xr.W)({replId:i,dotReplit:n,fs:t});case 11:if(c=o.sent,u=c.entrypoint,s=c.readmeFile,f=u||s,!e()&&f){o.next=17;break}return o.abrupt("return");case 17:r.openFile(f);case 18:case"end":return o.stop()}}),a)})))).apply(this,arguments)}return function(){l.apply(this,arguments)}(),function(){a=!0}}),[r,t,n,i])}(),(0,ar.Z)(),(0,ur.Z)(),(0,Xr.Z)({workspaceType:"desktop"}),(0,sr.Z)(),(0,fr.Z)(),(0,dr.Z)(),(0,pr.Z)();var u=(0,lr.Z)();(0,cr.Z)({isAnon:!1,isOwner:t,ignoreUnloadPrompt:u}),(0,vr.Z)(),function(){var e=(0,k.Z)().presence,t=(0,hr.Z)();(0,a.useEffect)((function(){e.updateOpenFile(t)}),[e,t])}(),function(){var e=(0,k.Z)(),t=e.fs,n=e.session,r=(0,hr.Z)();(0,a.useEffect)((function(){if(r){var e=(0,mr.Mb)(r)?t.watchOtFile:t.watchFile,o=!1,i=e(r,{onChange:function(){},onMoveOrDelete:function(e){if(e.eventType!==yr.kS.Move){var i=(0,mr.Il)(r);t.readDir(i||br.Q).then((function(e){if(o)n.closeFile(r);else if(e.error)n.closeFile(r);else{var t=e.children.filter((function(e){return e.type===yr.Tv.File})).map((function(e){return e.filename}));if(0!==t.length){var a=Zr(t).concat([r]).sort(),l=a.indexOf(r),c=a[0===l?1:l-1],u=""===i?c:"".concat(i,"/").concat(c);n.openFile(u)}else n.closeFile(r)}}))}else n.openFile(e.to)}});return function(){o=!0,i()}}}),[t,r,n])}(),function(){var e=(0,k.Z)(),t=e.session,n=e.fs,r=(0,hr.Z)();a.useEffect((function(){var e=!1;function r(){return(r=Sr(o().mark((function r(){var i,a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.readDir(br.Q);case 2:if(!(i=r.sent).error){r.next=5;break}return r.abrupt("return");case 5:if(!e){r.next=7;break}return r.abrupt("return");case 7:if(a=i.children.find((function(e){return"readme.md"===e.filename.toLowerCase()}))){r.next=10;break}return r.abrupt("return");case 10:t.setPreviewedFile(a.filename);case 11:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),function(){e=!0}}),[t,n]),a.useEffect((function(){r&&"md"===(0,mr.r6)(r)&&t.setPreviewedFile(r)}),[t,r])}(),Or(),(0,Pr.Z)(r,i,c),Mr(),(0,Nr.Z)(),Wr(),(0,Ur.Z)({onOpenFile:function(e){i.openFile(e.path),i.updateDeeplink(e)},onOutput:function(){}})}var Hr=n(5881),Vr=n(10586),$r=n(48015),qr=n(28614),Yr=n(55681),Jr=n(93770);function Qr(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(u){return void n(u)}l.done?t(c):Promise.resolve(c).then(r,o)}function eo(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Qr(i,r,o,a,l,"next",e)}function l(e){Qr(i,r,o,a,l,"throw",e)}a(void 0)}))}}var to={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"P"};function no(){return(0,i.BX)(h.G7,{css:[h.l0.rowWithGap(8)],children:[(0,i.tZ)(qr.Z,{}),(0,i.tZ)(h.xv,{color:"dimmest",children:"Something went wrong searching your Repl's files. Please try again."})]})}function ro(e){return(0,se.fA)({type:"context",label:"Files",description:"Find a file",icon:(0,i.tZ)(ht.Z,{}),keyboardShortcut:to},{match:(0,se.zf)({defaultScore:3}),commands:function(){var t=eo(o().mark((function t(n){var r,a,l,c,u,s,f,d;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.session,a=e.fs,(l=n.search?n.search.toLowerCase():void 0)||n.active){t.next=4;break}return t.abrupt("return",[]);case 4:if(c=r.getRecentFiles(),u=new Set(c),!l&&!n.active){t.next=15;break}return t.next=9,a.listFiles();case 9:if(!(s=t.sent).error){t.next=12;break}return t.abrupt("return",[{data:{type:"error",label:s.error,icon:(0,i.tZ)(qr.Z,{})},match:function(){return{score:1,render:{content:(0,i.tZ)(no,{})}}}}]);case 12:if(s.files){t.next=14;break}throw new Error("Expected files");case 14:s.files.forEach((function(e){u.has(e)||u.add(e)}));case 15:return f=[],u.forEach((function(e){var t=c.includes(e),n={type:"openFile",label:e,icon:(0,i.tZ)(Yr.Z,{path:e}),deeplink:{path:e}};if(l){var r=$r.Z.match(l,e);r&&f.push((0,se.fA)(n,{match:function(){return{score:t?2*r.score:r.score,render:{ranges:r.ranges}}}}))}else f.push((0,se.fA)(n,{match:function(){return{score:1}}}))})),0===f.length&&n.active&&(d=n.search,f.push({data:{label:d,description:"Create a new file",icon:(0,i.tZ)(Yr.Z,{path:d}),type:"action",run:eo(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.writeFile(d,Jr.Z.from(""));case 2:r.openFile(d);case 3:case"end":return e.stop()}}),e)})))},match:function(){return{score:1}}})),t.abrupt("return",f);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})}var oo=n(80796),io=n(66754),ao=n(20730);function lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function co(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(u){return void n(u)}l.done?t(c):Promise.resolve(c).then(r,o)}function uo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return lo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function so(e){var t=e.path,n=e.line;return(0,i.BX)(h.G7,{css:[h.l0.colWithGap(4),h.l0.align.start,h.l0.flex.growAndShrink(1),h.l0.py(4)],children:[(0,i.BX)(h.Tg,{elevated:!0,css:[h.l0.rowWithGap(4),h.l0.borderRadius(8),h.l0.p(2)],children:[(0,i.tZ)(Yr.Z,{path:t,size:12}),(0,i.BX)(h.xv,{variant:"small",children:[t,":",n.lineNumber]})]}),(0,i.tZ)(io.xK,{source:n.content,matches:n.matches})]})}function fo(){return(0,i.BX)(h.G7,{css:[h.l0.rowWithGap(8)],children:[(0,i.tZ)(qr.Z,{}),(0,i.tZ)(h.xv,{color:"dimmest",children:"Something went wrong searching your Repl's contents. Please try again."})]})}function po(){return(0,i.tZ)(h.G7,{children:(0,i.tZ)(h.xv,{color:"dimmest",children:"No results found."})})}var vo={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"F"};function ho(e){var t,n=(0,oo.Z)((function(e,t,n){(0,ao.yC)(e).then(t).catch(n)}),200);return(0,se.fA)({type:"context",description:"Search through your files",label:"Search",icon:(0,i.tZ)(ae.Z,{}),keyboardShortcut:vo},{match:(0,se.zf)({defaultScore:2}),commands:function(){var r,a=(r=o().mark((function r(a){var l,c,u,s,f,d,p,v,m,y,b;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.search){r.next=2;break}return r.abrupt("return",[]);case 2:return l=Math.random(),t=l,r.next=6,new Promise((function(t,r){n({query:a.search,container:e.container},t,r)}));case 6:if(c=r.sent,u=c.results,!(s=c.error)||!a.active){r.next=11;break}return r.abrupt("return",[{data:{type:"error",label:s,icon:(0,i.tZ)(qr.Z,{})},match:function(){return{score:1,render:{content:(0,i.tZ)(fo,{})}}}}]);case 11:if(l===t){r.next=13;break}return r.abrupt("return",[]);case 13:if(u){r.next=17;break}if(a.active){r.next=16;break}return r.abrupt("return",[]);case 16:return r.abrupt("return",[{data:{type:"output",label:"",icon:(0,i.tZ)(h.G7,{})},match:function(){return{score:1,render:{content:(0,i.tZ)(po,{})}}}}]);case 17:for(f=[],d=!0,p=!1,v=void 0,r.prev=19,m=function(e,t){var n=uo(t.value,2),r=n[0];n[1].forEach((function(e){var t=e.matches[0].column;f.push((0,se.fA)({type:"openFile",label:r,icon:(0,i.tZ)(Yr.Z,{path:r}),deeplink:{path:r,line:e.lineNumber,col:t}},{match:function(){var n=$r.Z.match(a.search,e.content);return{score:(null===n||void 0===n?void 0:n.score)||1,render:{content:(0,i.tZ)(so,{path:r,line:e})},key:[r,e.lineNumber,t].join(":")}}}))}))},y=Object.entries(u)[Symbol.iterator]();!(d=(b=y.next()).done);d=!0)m(0,b);r.next=28;break;case 24:r.prev=24,r.t0=r.catch(19),p=!0,v=r.t0;case 28:r.prev=28,r.prev=29,d||null==y.return||y.return();case 31:if(r.prev=31,!p){r.next=34;break}throw v;case 34:return r.finish(31);case 35:return r.finish(28);case 36:return r.abrupt("return",f);case 37:case"end":return r.stop()}}),r,null,[[19,24,28,36],[29,,31,35]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function a(e){co(i,n,o,a,l,"next",e)}function l(e){co(i,n,o,a,l,"throw",e)}a(void 0)}))});return function(e){return a.apply(this,arguments)}}()})}var mo=n(16108),yo=n(6407),bo=n(94590),go=n(30377),Zo={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"Enter"};function wo(){var e=(0,l.b9)(le.cN),t=(0,a.useState)(!1),n=t[0],r=t[1],o=(0,k.Z)(),c=o.fs,u=o.session,s=o.container,f=o.runner,d=(0,F.L)(f);return(0,fe.x)(Vr.q,{run:e}),(0,fe.x)(to,{run:function(){e(ro({fs:c,session:u}))}}),(0,fe.x)(vo,{run:function(){e(ho({container:s}))}}),(0,ce.Y)(ro({session:u,fs:c})),(0,ce.Y)(ho({container:s})),(0,ce.Y)({match:se.pl,data:{type:"action",icon:(0,i.tZ)(mo.Z,{}),label:"Run",description:"Run Repl",run:function(){f.run()},keyboardShortcut:Zo}},{enabled:d===Gr.A.IDLE}),(0,fe.x)(Zo,{run:function(){d===Gr.A.RUNNING&&f.stopRun(),f.run()},enabled:d!==Gr.A.OFFLINE}),(0,ce.Y)({match:se.pl,data:{type:"action",icon:(0,i.tZ)(yo.Z,{}),label:"Stop",description:"Stop Repl",run:function(){f.stopRun()}}},{enabled:d===Gr.A.RUNNING}),(0,ce.Y)({match:(0,se.zf)({defaultScore:.5}),data:{type:"action",label:"Create",icon:(0,i.tZ)(bo.Z,{}),description:"Create a new Repl",run:function(){r(!0)}}}),(0,i.tZ)(W.Z,{isOpen:n,onRequestClose:function(){return r(!1)},maxWidth:600,children:(0,i.tZ)(go.Z,{})})}var xo=(0,a.memo)(wo),Eo=n(67938),Io=n(92704),ko=n(44054);function So(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Co(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(u){return void n(u)}l.done?t(c):Promise.resolve(c).then(r,o)}function Ao(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return So(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return So(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oo(){var e=(0,k.Z)().fs,t=(0,a.useRef)(new Map),n=(0,hr.Z)(),r=(0,a.useState)(!1),l=r[0],c=r[1],u=(0,a.useState)(!1),s=u[0],f=u[1],d=(0,a.useRef)(new Map);(0,a.useEffect)((function(){if(n&&!t.current.has(n)){var r=function(){t.current.delete(n),d.current.delete(n)};(0,mr.Mb)(n)?e.watchOtFile(n,{onMoveOrDelete:r,onReconnectFail:function(e){d.current.set(n,e),c(!0)}}):e.watchFile(n,{onChange:function(){},onMoveOrDelete:r}),t.current.set(n,!0)}}),[n,e]);var p=function(){var e,t=(e=o().mark((function e(t){var n,r,i,a,l,u,s,p,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,g.j)(g.U3.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:t}),(0,g.j)(g.U3.CONTENTS_DIVERGED_ACTION,{action:"local"===t?"client":"server"}),f(!0),e.next=5,new Promise((function(e){return setTimeout(e,1e3)}));case 5:if(!d.current.size){e.next=28;break}for(n=[],r=!0,i=!1,a=void 0,e.prev=8,l=d.current.entries()[Symbol.iterator]();!(r=(u=l.next()).done);r=!0)s=Ao(u.value,2),p=s[0],v=s[1],n.push(v(t)),d.current.delete(p);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),i=!0,a=e.t0;case 16:e.prev=16,e.prev=17,r||null==l.return||l.return();case 19:if(e.prev=19,!i){e.next=22;break}throw a;case 22:return e.finish(19);case 23:return e.finish(16);case 24:return e.next=26,Promise.all(n);case 26:e.next=5;break;case 28:f(!1),c(!1);case 30:case"end":return e.stop()}}),e,null,[[8,12,16,24],[17,,19,23]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Co(i,r,o,a,l,"next",e)}function l(e){Co(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,i.tZ)(h.u_,{preventClose:!0,isOpen:l,onRequestClose:function(){},maxWidth:ko.j.mobileMax,children:(0,i.BX)(h.G7,{css:[h.l0.colWithGap(24)],children:[(0,i.tZ)(Eo.h,{level:3,variant:"headerDefault",children:"Contents diverged"}),(0,i.BX)(h.G7,{css:[h.l0.colWithGap(8)],children:[(0,i.tZ)(Eo.x,{multiline:!0,children:"We had a hard time resolving differences between your content and server content while you were disconnected."}),(0,i.tZ)(Eo.x,{children:"What would you like to do?"})]}),s?(0,i.tZ)(pe.Loader,{}):(0,i.tZ)(i.HY,{children:(0,i.BX)(h.G7,{css:[h.l0.rowWithGap(12),h.l0.justify.end],children:[(0,i.tZ)(Io.zx,{onClick:function(){p("remote")},colorway:"negative",text:"Choose server changes"}),(0,i.tZ)(Io.zx,{onClick:function(){p("local")},colorway:"positive",text:"Choose my changes"})]})})]})})}var Po=n(52242);var Do=n(20578),Ro=n(33379),To=n(18614),jo=n(89319),_o=n(89431);function Mo(){var e=(0,l.Dv)(Ro.c),t=(0,_o.Z)("flag-threads-2");return(0,i.tZ)("div",{style:{position:"fixed",bottom:"var(--space-24)",right:"var(--space-8)",zIndex:10},children:e?(0,i.tZ)("div",{style:{position:"relative",right:"var(--space-8)"},children:t?(0,i.tZ)(jo.Z,{}):(0,i.tZ)(To.Z,{})}):(0,i.tZ)("div",{children:(0,i.tZ)(Do.Z,{})})})}function Uo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function No(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(u){return void n(u)}l.done?t(c):Promise.resolve(c).then(r,o)}function Go(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Uo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fo(e){var t,n=e.repl,r=e.currentUser,o=st({repl:n,currentUser:r}),c=o.services,s=o.ui,f=(0,_o.Z)("flag-old-layout-threads-inbox"),d=Go((0,l.KO)(J.tt),2),p=d[0],v=d[1],m=ir(n.multiplayers.length>0),b=m.shouldShowModal,g=m.hideModal,Z=m.confirm,w=function(){var e=(0,l.b9)(J.rR),t=(0,a.useRef)(null),n=(0,Qn.Z)((function(n){var r=n.width,o=n.height;if(r&&o&&t.current){var i=t.current.getBoundingClientRect(),a=i.top,l=i.left;e({width:r,height:o,x:l,y:a})}}));return function(e){t.current=e,n(e)}}(),x=(0,l.Dv)(J.nJ),E=(0,l.Dv)(J.gg),I=(0,l.Dv)(J.g3),k=r.id===(null===(t=n.user)||void 0===t?void 0:t.id),S=(0,l.Dv)(Po.g);return(0,i.BX)(nn,{ui:s,services:c,replId:n.id,children:[(0,i.tZ)(xo,{}),(0,i.tZ)(er.Z,{}),(0,i.tZ)(Se,{}),(0,i.tZ)(ce.Z,{}),S?(0,i.tZ)(Po.Z,{}):null,(0,i.BX)(h.G7,{css:[h.l0.flex.row,h.l0.flex.growAndShrink(1)],children:[(0,i.tZ)(h.G7,{css:[h.l0.py(8),h.l0.pl(8)],children:(0,i.tZ)(Yt,{})}),(0,i.tZ)(Bo,{setContainerRef:w,isOwner:k,children:x?(0,i.BX)(i.HY,{children:[I.map((function(e){return(0,i.tZ)($n,{handleId:e},e)})),E.map((function(e){return(0,i.tZ)(zn,{paneId:e},e)})),(0,i.tZ)(Jn,{})]}):null})]}),(0,i.tZ)(Hr.Z,{container:c.container}),(0,i.tZ)(Oo,{}),f&&(0,i.tZ)(Mo,{}),b?(0,i.tZ)(y.Z,{onCancel:g,onConfirm:Z}):null,p?(0,i.tZ)(u.Z,{devHide:function(){return v(null)},eventId:p,currentUserImage:r.image,currentUserUsername:r.username}):null]})}var zo=(0,h.KD)("div");function Bo(e){var t=e.padding,n=void 0===t?8:t,r=e.children,o=e.setContainerRef;return Lr({isOwner:e.isOwner}),(0,i.tZ)(h.G7,{css:[h.l0.position.relative,h.l0.flex.growAndShrink(1)],children:(0,i.tZ)(zo,{ref:o,css:[h.l0.position.absolute,h.l0.top(n),h.l0.left(0),h.l0.width("calc(100% - (".concat(n,"px))")),h.l0.height("calc(100% - (".concat(n,"px * 2))"))],children:r})})}var Ko=function(){var e=null,t=(0,c.useRouter)().query;if(!t.replUrl)throw new Error("Expected replUrl to be set");var n=t.replUrl.toString(),r=(0,v.CdZ)({variables:{url:n}}),o=r.data,l=r.loading,u=r.error,s=o&&"Repl"===o.repl.__typename?o.repl:null,d=(null===o||void 0===o?void 0:o.currentUser)||void 0,y="https://replit.com".concat(n),g=function(e){if(e){if(e.description)return e.description;var t=p().get(e.language).displayName;return"A ".concat(t," Repl")}}(s),Z=(0,a.useState)(!1),w=Z[0],x=Z[1];return(0,a.useEffect)((function(){return x(!0)}),[]),(0,a.useEffect)(m.S,[]),function(e){var t=(0,c.useRouter)(),n=e&&"Repl"===e.repl.__typename?e.repl:null;if(!t.query.replUrl)throw new Error("Expected replUrl to be set.");var r=t.query.replUrl.toString();(0,a.useEffect)((function(){n&&p().get(n.language).isDeprecated&&t.replace({pathname:"/deprecatedLangauge",query:{replId:n.id}},t.asPath)}),[n,t]),(0,a.useEffect)((function(){if(e&&e.repl&&"SubscriptionExpiredError"===e.repl.__typename){var n=e.repl,o=n.replId,i=n.isOwner,a=r.split("/")[1].slice(1);t.replace({pathname:"/expiredPrivateRepl",query:{isOwner:i,ownerUsername:a,replId:o}},t.asPath)}}),[e,t,r])}(o),e=u?(0,i.tZ)(h.G7,{css:[h.l0.center,h.l0.flex.growAndShrink(1)],children:(0,i.tZ)(h.xv,{children:"Something went wrong loading the Repl. Please reload the page and try again."})}):l||!w?(0,i.tZ)(h.G7,{css:[h.l0.center,h.l0.flex.growAndShrink(1)],children:(0,i.tZ)(ft.Z,{size:32})}):s&&d?(0,i.tZ)(Fo,{repl:s,currentUser:d}):(0,i.tZ)(h.G7,{css:[h.l0.center,h.l0.flex.growAndShrink(1)],children:(0,i.tZ)(ft.Z,{size:32})}),(0,i.tZ)(be.E,{children:(0,i.tZ)(b.Z,{children:(0,i.tZ)(f.Z,{title:"".concat((null===s||void 0===s?void 0:s.title)||""),oembedUrl:y,description:g,noHeader:!0,noFooter:!0,forceDrawer:!0,hideSidebar:!0,hideEmailVerify:!0,children:(0,i.tZ)(h.Tg,{css:[h.l0.height("100vh"),h.l0.width("100vw"),h.l0.overflow("hidden")],children:e})})})})};Ko.getInitialProps=function(){var e,t=(e=o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.req,r=t.store,e.next=3,(0,s.Z)(n,r);case 3:return e.abrupt("return",{});case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){No(i,r,o,a,l,"next",e)}function l(e){No(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();var Wo=Ko},59367:function(e,t,n){"use strict";n.d(t,{E:function(){return a}});var r=n(67294),o=n(45432),i=n.n(o);class a extends r.Component{constructor(e){super(e),this._osInstance=null,this._osTargetRef=r.createRef()}osInstance(){return this._osInstance}osTarget(){return this._osTargetRef.current||null}componentDidMount(){this._osInstance=i()(this.osTarget(),this.props.options||{},this.props.extensions),l(this._osInstance,this.props.className)}componentWillUnmount(){i().valid(this._osInstance)&&(this._osInstance.destroy(),this._osInstance=null)}componentDidUpdate(e){i().valid(this._osInstance)&&(this._osInstance.options(this.props.options),e.className!==this.props.className&&l(this._osInstance,this.props.className))}render(){const e=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(this.props,["options","extensions","children","className"]);return r.createElement("div",Object.assign({className:"os-host"},e,{ref:this._osTargetRef}),r.createElement("div",{className:"os-resize-observer-host"}),r.createElement("div",{className:"os-padding"},r.createElement("div",{className:"os-viewport"},r.createElement("div",{className:"os-content"},this.props.children))),r.createElement("div",{className:"os-scrollbar os-scrollbar-horizontal "},r.createElement("div",{className:"os-scrollbar-track"},r.createElement("div",{className:"os-scrollbar-handle"}))),r.createElement("div",{className:"os-scrollbar os-scrollbar-vertical"},r.createElement("div",{className:"os-scrollbar-track"},r.createElement("div",{className:"os-scrollbar-handle"}))),r.createElement("div",{className:"os-scrollbar-corner"}))}}function l(e,t){if(i().valid(e)){const{host:n}=e.getElements(),r=new RegExp(`(^os-host([-_].+|)$)|${e.options().className.replace(/\s/g,"$|")}$`,"g"),o=n.className.split(" ").filter((e=>e.match(r))).join(" ");n.className=`${o} ${t||""}`}}}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[5762,8350,3443,2240,6344,6351,9352,3921,4778,4969,8966,9998,3981,8944,9710,5773,3220,815,5225,3129,8486,4906,9490,9677,9116,8534,9838,2654,3325,6871,6934,8543,876,4139,8408,7014,153,7730,9774,2888,179],(function(){return t(97239),t(44725)}));var n=e.O();_N_E=n}]);
//# sourceMappingURL=replEnvironment2-16b7e1abba47e259.js.map