"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7014,6459],{54920:function(e,t,n){var r=n(67294).createContext({activeFile:null,users:[],annotations:[],generalThread:void 0,onRequestCloseThread:function(){},handleFinalizeMessage:function(){},handleChangeMessage:function(){},setResolvedAnnotation:function(){},createAnnotationAnchorPlaceholder:function(){},markAllMessagesInReplAsSeenByUser:function(){},jumpToThread:function(){}});t.Z=r},26400:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(35944),i=n(79547),o=n.n(i),a=(n(67294),n(51281)),c=n(45193);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s="https://docs.replit.com/teams-edu/reviewing-submissions#leaving-feedback-on-projects-using-annotations";function u(e){return(0,r.BX)(c.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}({},e,{children:[(0,r.BX)("div",{className:"jsx-3b78244da897e245 container",children:[(0,r.tZ)("h1",{className:"jsx-3b78244da897e245",children:"Introducing Annotations"}),(0,r.tZ)("p",{className:"jsx-3b78244da897e245",children:"Annotations is a new feature that lets you leave detailed feedback on a student\u2019s code!"}),(0,r.tZ)("div",{className:"jsx-3b78244da897e245 loom-video-container",children:(0,r.tZ)("iframe",{src:"https://www.loom.com/embed/955fb177889c4838b9332224067d4be0?autoplay=1",frameBorder:"0",allowFullScreen:!0,webkitallowfullscreen:!0,mozallowfullscreen:!0,className:"jsx-3b78244da897e245 loom-video"})}),(0,r.BX)("p",{className:"jsx-3b78244da897e245",children:["To learn more, check out the"," ",(0,r.tZ)("a",{href:s,target:"_blank",className:"jsx-3b78244da897e245",children:"docs"})]}),(0,r.BX)("div",{className:"jsx-3b78244da897e245 buttons",children:[(0,r.tZ)("a",{href:s,target:"_blank",className:"jsx-3b78244da897e245",children:(0,r.tZ)(a.Z,{children:"Learn More"})}),(0,r.tZ)(a.Z,{color:"primary",onClick:e.onRequestClose,children:"Okay"})]})]}),(0,r.tZ)(o(),{id:"3b78244da897e245",children:".container.jsx-3b78244da897e245{padding:var(--space-48);display:grid;grid-auto-flow:row;grid-row-gap:var(--space-16)}.container.jsx-3b78244da897e245 h1.jsx-3b78244da897e245{padding:var(--space-16)0;color:var(--foreground-default)}.container.jsx-3b78244da897e245 p.jsx-3b78244da897e245{color:var(--foreground-default)}.buttons.jsx-3b78244da897e245{display:grid;grid-auto-flow:column;-webkit-box-pack:end;-webkit-justify-content:end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:end;grid-column-gap:var(--space-8)}.buttons.jsx-3b78244da897e245 a.jsx-3b78244da897e245{text-decoration:none}.loom-video-container.jsx-3b78244da897e245{position:relative;padding-bottom:56.25%;height:0}.loom-video.jsx-3b78244da897e245{position:absolute;top:0;left:0;width:100%;height:100%}"})]}))}},52697:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(35944),i=n(79547),o=n.n(i),a=(n(67294),n(94184)),c=n.n(a);function l(e){var t=e.unreadDot,n=e.size,i=void 0===n?12:n,a=e.count,l=void 0===a?null:a,s=l&&l>99,u=s?"99+":null===l||void 0===l?void 0:l.toString();return(0,r.BX)("span",{className:"jsx-1c7f3b9066c4c334",children:[(0,r.tZ)("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",className:"jsx-1c7f3b9066c4c334",children:(0,r.tZ)("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-1c7f3b9066c4c334"})}),t&&(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 unread-indicator"}),Boolean(l)&&(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 "+(c()("count",{overflow:s})||""),children:u}),(0,r.tZ)(o(),{id:"1c7f3b9066c4c334",children:"span.jsx-1c7f3b9066c4c334{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.unread-indicator.jsx-1c7f3b9066c4c334{width:5px;height:5px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-red-default);-webkit-transform:translate(8px,-1px);-moz-transform:translate(8px,-1px);-ms-transform:translate(8px,-1px);-o-transform:translate(8px,-1px);transform:translate(8px,-1px);position:absolute}.count.jsx-1c7f3b9066c4c334{-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-negative-default);-webkit-transform:translate(50%,-50%);-moz-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);-o-transform:translate(50%,-50%);transform:translate(50%,-50%);position:absolute;min-width:16px;padding:2px 3px;height:16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;color:white;font-size:var(--font-size-small)}.overflow.jsx-1c7f3b9066c4c334{-webkit-transform:translate(25%,-50%);-moz-transform:translate(25%,-50%);-ms-transform:translate(25%,-50%);-o-transform:translate(25%,-50%);transform:translate(25%,-50%)}"})]})}},38380:function(e,t){t.Z=function(e){var t={},n=!0,r=!1,i=void 0;try{for(var o,a=e.messages[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var c=o.value;c.user&&(t[c.user.id]=c.user)}}catch(l){r=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return Object.values(t)}},74279:function(e,t,n){n.d(t,{Z:function(){return i}});var r=["TextMessageContentType","PreviewMessageContentType"];function i(e){var t=[],n=null,i=!0,o=!1,a=void 0;try{for(var c,l=e[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var s,u,d,f,p=c.value;if(!n||(null===p||void 0===p||null===(s=p.user)||void 0===s?void 0:s.id)!==(null===n||void 0===n||null===(u=n.user)||void 0===u?void 0:u.id)||(null===p||void 0===p||null===(d=p.anchor)||void 0===d?void 0:d.id)!==(null===n||void 0===n?void 0:n.anchorId)||!r.includes(n.messageType)||!r.includes(p.content.__typename)||new Date(p.timeCreated).getTime()-new Date(n.timeCreated).getTime()>6e5)n&&t.push(n),n={user:p.user,timeCreated:p.timeCreated,anchorId:null===p||void 0===p||null===(f=p.anchor)||void 0===f?void 0:f.id,messages:[p],messageType:p.content.__typename};else n.messages.push(p)}}catch(h){o=!0,a=h}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return n&&t.push(n),t}},21837:function(e,t,n){n.d(t,{Ft:function(){return g},Vy:function(){return w},kL:function(){return x}});var r=n(34051),i=n.n(r),o=n(67294),a=n(50658),c=n(78120),l=n(56834);function s(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){s(o,r,i,a,c,"next",e)}function c(e){s(o,r,i,a,c,"throw",e)}a(void 0)}))}}function d(e,t,n){return f.apply(this,arguments)}function f(){return(f=u(i().mark((function e(t,n,r){var o,a,c,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.path&&"number"===typeof t.indexStart&&"number"===typeof t.indexEnd&&t.otVersion){e.next=2;break}return e.abrupt("return");case 2:if(r!==t.otVersion){e.next=4;break}return e.abrupt("return",{path:t.path,indexStart:t.indexStart,indexEnd:t.indexEnd,otVersion:t.otVersion});case 4:return o=r,a=window.performance.now(),c=function(){(0,l.j)(l.U3.ANNOTATION_FASTFORWARDED,{opCount:o-t.otVersion,anchorId:t.id,flagPid1Fastforwards:!0,time:window.performance.now()-a})},e.next=9,n({indexStart:t.indexStart,indexEnd:t.indexEnd,versionFrom:t.otVersion,versionTo:o});case 9:return s=e.sent,c(),e.abrupt("return",{path:t.path,indexStart:s.indexStart,indexEnd:s.indexEnd,otVersion:o});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p=n(30617);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){m(o,r,i,a,c,"next",e)}function c(e){m(o,r,i,a,c,"throw",e)}a(void 0)}))}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){return y.apply(this,arguments)}function y(){return(y=b(i().mark((function e(t){var n,r,o,l,s,u,f,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.anchor,r=t.version,o=t.transformSelection,l=t.content,n.path){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,d(n,o,r);case 5:if(s=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return f=function(){},p=function(){try{for(var e=c.xv.of(l.split("\n")),t=e.lineAt(s.indexStart),n=e.lineAt(s.indexEnd),r=[],i=t.number===n.number?Math.max(0,t.number-1):t.number,o=Math.min(e.lines,n.number+1),u=i;u<=o;u++)r.push(e.line(u).text);return{startLineNumber:i,lines:r}}catch(d){a.Tb(d)}},e.abrupt("return",{anchor:n,newSelection:s,newPosition:undefined,selectedContent:u,getHighlight:f,getSnippet:p});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){var t=(0,p.Z)().fs,n=o.useRef(null),r=o.useRef(null),i=v(o.useState(!1),2),c=i[0],l=i[1];return o.useEffect((function(){if(e){var i=function(){r.current=null,l(!1)},o=t.watchOtFile(e,{onReady:function(e){var t=e.transformSelection,i=e.initialContent;n.current=i.toString(),r.current=t,l(!0)},onMoveOrDelete:function(){i()},onError:function(e){a.Tb(e),i()},onChange:function(e){var t=e.latestContent;n.current=t}});return function(){i(),o()}}}),[e,t]),{contentRef:n,transformSelectionRef:r,loadedFile:c}}function w(e){var t=(0,p.Z)().fs,n=v(o.useState(null),2),r=n[0],i=n[1],a=x(null===e||void 0===e?void 0:e.path),c=a.contentRef,l=a.loadedFile,s=a.transformSelectionRef;return o.useEffect((function(){(null===e||void 0===e?void 0:e.path)&&l&&s.current&&null!==c.current&&g({anchor:e,version:t.getOTVersion(e.path),transformSelection:s.current,content:c.current}).then((function(e){i(e)})).catch((function(){i(null)}))}),[t,e,l]),r}},33379:function(e,t,n){n.d(t,{Q:function(){return o},c:function(){return i}});var r=n(91131),i=(0,r.cn)(!1),o=(0,r.cn)(null)},93943:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(67294),i=n(88768),o=n(38880);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function f(e,t){var n=t.onReceiveAnnotationUpdate,a=void 0===n?function(){}:n,c=(0,o.Z)().showError,d=s(r.useState(null),2),f=d[0],p=d[1],h=(0,i.xTD)({variables:{replId:e}}),m=function(){var e,t=null===(e=h.data)||void 0===e?void 0:e.currentUser;return t?{user:{__typename:"User",id:t.id,username:t.username,image:t.image}}:{}},b=function(t,n){var r=t.readQuery({query:i.yiQ,variables:{replId:e}}),o=[],a=r.repl.annotationAnchors,c=a.findIndex((function(e){return e.id===n.id}));o=-1===c?u(a).concat([n]):u(a.slice(0,c)).concat([n],u(a.slice(c+1))),t.writeQuery({query:i.yiQ,variables:{replId:e},data:l({},r,{repl:l({},r.repl,{annotationAnchors:o})})})},v=s((0,i.ASh)({onError:function(e){return c(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return c(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.createAnnotationAnchor;r&&("UserError"===r.__typename?c(r.message):"AnnotationAnchor"===r.__typename&&b(e,r))}}}),1)[0],g=s((0,i.gEq)({onError:function(e){return c(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return c(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.createAnnotationMessage;r&&("UserError"===r.__typename?c(r.message):"AnnotationAnchor"===r.__typename&&b(e,r))}}}),1)[0],y=s((0,i.RpE)({onError:function(e){return c(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return c(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.updateAnnotationAnchor;r&&("UserError"===r.__typename?c(r.message):"AnnotationAnchor"===r.__typename&&b(e,r))}}}),1)[0],x=s((0,i.nAY)(),1)[0],w=s((0,i.HjV)(),1)[0];(0,i.Tt1)({variables:{replId:e},onSubscriptionData:function(e){var t=e.subscriptionData.data,n=e.client,r=null===t||void 0===t?void 0:t.updatedAnnotation;r&&(b(n,r),a(r))}});var k=s(r.useState([]),2),Z=k[0],j=k[1];r.useEffect((function(){var e,t,n=[];"Repl"===(null===(e=h.data)||void 0===e?void 0:e.repl.__typename)&&(t=n).push.apply(t,u(h.data.repl.annotationAnchors));f&&n.push(l({},f,{isGeneral:Boolean(f.isGeneral),messages:[],isResolved:!1,__typename:"AnnotationAnchor"})),j(n)}),[h,f]);var S=r.useMemo((function(){return Z.find((function(e){return e.isGeneral}))}),[Z]),E=r.useMemo((function(){return Z.reduce((function(e,t){return t.isResolved?e:t.messages.some((function(e){return!1===e.seen}))?e+1:e}),0)}),[Z]),C=function(e){var t=e.annotationAnchor,n=e.annotationMessage,r=e.highlight;v({variables:{annotationAnchor:t,annotationMessage:n,highlight:r},optimisticResponse:{createAnnotationAnchor:l({},m(),t,{isGeneral:Boolean(t.isGeneral),__typename:"AnnotationAnchor",messages:n?[l({},m(),n,{content:{text:n.text,__typename:"TextMessageContentType"},anchor:{id:t.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})]:[],isResolved:!1})}})};return{annotations:Z,generalThread:S,unreadThreadCount:E,placeholderAnchorId:null===f||void 0===f?void 0:f.id,createAnnotationAnchorPlaceholder:function(e){var t=e.annotationAnchor;p(t)},deleteAnnotationAnchorPlaceholder:function(){p(null)},createAnnotationAnchor:C,createAnnotationMessage:function(t){var n=t.anchor,r=t.annotationMessage,i=t.highlight;(null===f||void 0===f?void 0:f.id)===n.id?(p(null),C({annotationAnchor:l({},f),annotationMessage:r,highlight:i})):g({variables:{replId:e,anchorId:n.id,annotationMessage:r,highlight:i},optimisticResponse:{createAnnotationMessage:l({},n,{messages:u(n.messages.filter((function(e){return!e.id.startsWith("chat-")}))).concat([l({},m(),r,{content:{text:r.text,__typename:"TextMessageContentType"},anchor:{id:n.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})])})}})},updateAnnotationAnchor:function(e){var t=e.annotationAnchor,n=e.changes;y({variables:{id:t.id,changes:n},optimisticResponse:{updateAnnotationAnchor:l({},t,n,{isResolved:"boolean"===typeof n.isResolved?n.isResolved:t.isResolved})}})},updateThreadPreview:function(e){var t=e.threadId,n=e.messageId,r=e.message;w({variables:{threadId:t,messageId:n,message:r}})},markAllMessagesInReplAsSeenByUser:function(){x({variables:{replId:e}})}}}},47571:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(67294),i=n(5560),o=n(88768);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){var t=(0,i.Z)(),n=c((0,o.nAY)(),1)[0];r.useEffect((function(){if(e){var r=e.messages.filter((function(e){return!e.seen})).map((function(e){return e.id}));0!==r.length&&n({variables:{replId:t,threadId:e.id,messageIds:r},optimisticResponse:{markMessagesAsSeen:{messages:r.map((function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}})),__typename:"AnnotationMessageList"}}})}}),[t,e,n])}},33630:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(67294),i=n(88768),o=n(54920),a=n(89431);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){var t=(0,a.Z)("flag-typing-indicator"),n=r.useContext(o.Z).users,c=s(r.useState({}),2),u=c[0],d=c[1],f=r.useRef(null),p=r.useCallback((function(){var e={};for(var t in u)Date.now()-u[t].time<1e3&&(e[t]=u[t]);d(e)}),[u,d]);return(0,i.ig3)({variables:{threadId:e},onSubscriptionData:function(t){var r,i,o=t.subscriptionData;if(null===(r=o.data)||void 0===r?void 0:r.threadPreview){var a=null===(i=o.data)||void 0===i?void 0:i.threadPreview;if("number"===typeof a.userId){var c=new Date,s=c.toJSON();d((function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}({},t,l({},a.userId,{time:c.getTime(),user:n.find((function(e){return e.id===a.userId})),id:a.messageId,currentUserIsAuthor:!1,timeCreated:s,timeUpdated:s,anchor:{id:e},content:{__typename:"PreviewMessageContentType",preview:a.message}}))})),f.current&&clearTimeout(f.current),f.current=setTimeout(p,2e3)}}},skip:!t||!e}),r.useMemo((function(){return Object.values(u)}),[u])}},32378:function(e,t,n){n.d(t,{Fy:function(){return S},Vw:function(){return E},dp:function(){return _},u5:function(){return C}});var r=n(35944),i=n(79547),o=n.n(i),a=n(67294),c=n(24561),l=n(38098),s=n(534),u=n(94184),d=n.n(u),f=n(47421),p=n(55681),h=n(54929),m=n(3204),b=n(21130),v=n(14692),g=n(67938),y=n(64711),x=n(32181),w=n(39453);function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e){var t=e.height,n=e.loading;return(0,r.BX)("div",{className:o().dynamic([["dea430aa30530a9e",[t]]])+" "+(d()("loader",{loading:n})||""),children:[(0,r.BX)(c.ZP,{viewBox:"0 0 100 36",primaryColor:"var(--background-highest)",secondaryColor:"var(--background-higher)",children:[(0,r.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"4",height:"4",className:o().dynamic([["dea430aa30530a9e",[t]]])}),(0,r.tZ)("rect",{x:"6",y:"0",rx:"2",ry:"2",width:"92",height:"4",className:o().dynamic([["dea430aa30530a9e",[t]]])})]}),(0,r.tZ)(o(),{id:"dea430aa30530a9e",dynamic:[t],children:".loader.__jsx-style-dynamic-selector{padding:var(--space-8);display:none}.loader.loading.__jsx-style-dynamic-selector{height:".concat(t,";display:block}")})]})}function S(e){var t=e.maxHeight,n=e.minHeight,i=e.extensions,c=void 0===i?[]:i,s=e.allowScroll,u=void 0===s||s,p=e.fontSize,h=e.hideGutter,m=e.path,b=e.snippet,v=e.style,g=e.onNavigateToCode,y=(0,l.Z)({hideGutter:h,filePath:m,fontSize:p,readOnly:!0}),k=y.view,S=y.ref,E=Z(a.useState(!1),2),C=E[0],_=E[1],O=(0,x.Z)({view:k});return a.useEffect((function(){if(k&&b&&m){var e="lines"in b?b.lines.join("\n"):b.doc;return k.dispatch({changes:{from:0,to:k.state.doc.length,insert:e},effects:O.reconfigure([(0,f.Eu)({formatNumber:function(e){return String(e+b.startLineNumber-1)}}),c])}),_(!0),function(){k.dispatch({effects:O.reconfigure([])})}}}),[k,b,m,O,c]),(0,r.BX)("div",{style:v,className:o().dynamic([["8e4c5e25f39205ba",[t||"10em",n]]]),children:[(0,r.tZ)("div",{ref:S,onClick:function(e){if(g&&k){var t=e.clientX,n=e.clientY,r=k.posAtCoords({x:t,y:n}),i=null!==r?(0,w.s)(k.state.doc,r):null;g(i)}},className:o().dynamic([["8e4c5e25f39205ba",[t||"10em",n]]])+" "+(d()("snippet-editor",{"no-scroll":!u,loading:!C})||"")}),(0,r.tZ)(j,{loading:!C,height:t}),(0,r.tZ)(o(),{id:"8e4c5e25f39205ba",dynamic:[t||"10em",n],children:".snippet-editor.__jsx-style-dynamic-selector .cm-scroller{max-height:".concat(t||"10em",";min-height:").concat(n,";scrollbar-width:thin;outline:none}.snippet-editor.__jsx-style-dynamic-selector .cm-content{padding-bottom:0}.snippet-editor.loading.__jsx-style-dynamic-selector{display:none}.snippet-editor.no-scroll.__jsx-style-dynamic-selector .cm-scroller{overflow:hidden}.snippet-editor.__jsx-style-dynamic-selector ::-webkit-scrollbar{width:4px}.snippet-editor.__jsx-style-dynamic-selector .cm-gutters{min-width:unset}")})]})}function E(e){var t=e.path,n=e.doc,i=e.extensions,o=void 0===i?[]:i,c=e.numMatches,l=e.onNavigateToCode,s=e.initiallyExpanded,u=Z(a.useState(s),2),d=u[0],f=u[1],x=d?"block":"none",w=d?180:0,k=d?"Collapse snippet":"Expand snippet";return(0,r.BX)(h.Z,{children:[(0,r.BX)(h.Z,{css:[m.l0.flex.row,m.l0.p(4),{justifyContent:"space-between"}],children:[(0,r.BX)(h.Z,{css:[m.l0.rowWithGap(8),m.l0.center,m.l0.p(4)],children:[(0,r.tZ)(p.Z,{path:t}),(0,r.tZ)(g.x,{children:t}),(0,r.tZ)(g.x,{color:"dimmest",children:(0,y.Z)("match",c,!0)})]}),(0,r.tZ)(b.Z,{alt:k,tooltipHidden:!0,onClick:function(){return f((function(e){return!e}))},children:(0,r.tZ)(v.Z,{rotate:w,style:{transition:"200ms ease"}})})]}),(0,r.tZ)(h.Z,{css:[m.l0.p(4),{display:x}],children:(0,r.tZ)(S,{path:t,snippet:{doc:n,startLineNumber:1},extensions:o,maxHeight:"max-content",allowScroll:!0,hideGutter:!0,onNavigateToCode:l})})]})}function C(e){var t=e.path,n=e.snippet,i=e.maxHeight,a=e.minHeight,c=e.extensions,l=void 0===c?[]:c,s=e.allowScroll,u=void 0===s||s,d=e.onNavigateToCode,f=function(e){if(!e)return"";var t="lines"in e?e.lines.length:e.doc.lines;return(0,y.Z)("line",t,!0)}(n);return(0,r.BX)("div",{className:"jsx-ea81418c08a690a7 snippet-container",children:[(0,r.BX)("div",{className:"jsx-ea81418c08a690a7 snippet-header",children:[(0,r.BX)("div",{className:"jsx-ea81418c08a690a7 path-container",children:[(0,r.tZ)("span",{className:"jsx-ea81418c08a690a7 lang-icon",children:(0,r.tZ)(p.Z,{path:t,fill:"var(--accent-primary-default)"})}),(0,r.tZ)("span",{className:"jsx-ea81418c08a690a7 path",children:t}),(0,r.BX)("span",{className:"jsx-ea81418c08a690a7 lines",children:["  ","\u2022 ",f]})]}),(0,r.tZ)("div",{onClick:d,className:"jsx-ea81418c08a690a7 jump-to-code",children:"Jump to code"})]}),(0,r.tZ)(S,{path:t,fontSize:12,snippet:n,maxHeight:i||"54pt",minHeight:a,extensions:l,allowScroll:u}),(0,r.tZ)(o(),{id:"ea81418c08a690a7",children:".snippet-container.jsx-ea81418c08a690a7{display:grid;border:1px solid var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);grid-gap:var(--space-4)}.snippet-header.jsx-ea81418c08a690a7{display:grid;grid-auto-flow:column;grid-template-columns:1fr -webkit-max-content;grid-template-columns:1fr max-content;padding:var(--space-4);grid-gap:var(--space-8)}.path-container.jsx-ea81418c08a690a7{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden}.lang-icon.jsx-ea81418c08a690a7{width:20px;height:20px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.path.jsx-ea81418c08a690a7{font-size:var(--font-size-small);color:var(--accent-primary-default);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.lines.jsx-ea81418c08a690a7{font-size:var(--font-size-small);color:var(--accent-primary-dimmer);white-space:pre}.jump-to-code.jsx-ea81418c08a690a7{font-size:var(--font-size-small);color:var(--accent-primary-default);cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}"})]})}function _(e){var t=e.extensions,n=void 0===t?[]:t,i=e.timeString,a=e.message,c=e.onClick,l=e.snippet,u=e.avatar,d=e.path;return(0,r.BX)("div",{onClick:c,className:"jsx-ac67521191136beb snippet-container",children:[(0,r.tZ)(S,{path:d,snippet:l,fontSize:12,maxHeight:"36pt",minHeight:"36pt",allowScroll:!1,style:{opacity:.7},extensions:n}),(0,r.BX)("div",{className:"jsx-ac67521191136beb snippet-first-message",children:[u?(0,r.tZ)(s.Z,{src:u.src,size:24,alt:u.name}):(0,r.tZ)("div",{className:"jsx-ac67521191136beb"}),(0,r.tZ)("div",{className:"jsx-ac67521191136beb text",children:a}),(0,r.tZ)("div",{className:"jsx-ac67521191136beb time",children:i})]}),(0,r.tZ)(o(),{id:"ac67521191136beb",children:".snippet-container.jsx-ac67521191136beb{display:grid;border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);overflow:hidden;grid-gap:var(--space-4);max-width:100%;cursor:pointer;-webkit-transition:-webkit-transform.1s ease-in-out;-moz-transition:-moz-transform.1s ease-in-out;-o-transition:-o-transform.1s ease-in-out;transition:-webkit-transform.1s ease-in-out;transition:-moz-transform.1s ease-in-out;transition:-o-transform.1s ease-in-out;transition:transform.1s ease-in-out}.snippet-container.jsx-ac67521191136beb:hover{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-ms-transform:scale(1.05);-o-transform:scale(1.05);transform:scale(1.05)}.snippet-first-message.jsx-ac67521191136beb{border-top:1px solid var(--outline-dimmest);font-size:var(--font-size-default);background:var(--background-root);color:var(--foreground-default);padding:var(--space-8);display:grid;grid-auto-flow:column;grid-template-columns:-webkit-min-content 1fr -webkit-max-content;grid-template-columns:min-content 1fr max-content;grid-gap:var(--space-8);-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.text.jsx-ac67521191136beb{-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.time.jsx-ac67521191136beb{font-size:var(--font-size-small)}"})]})}},35864:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(47421),i=n(78120),o=n(3204),a=n(64711);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function u(e,t){return!t||"object"!==f(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}var h=new(function(e){s(n,e);var t=p(n);function n(){var e;return c(this,n),(e=t.call(this)).elementClass="cm-gutterElement-hidden",e}return n.prototype.toDOM=function(){var e=document.createElement("span");e.classList.add("cm-hidden-lines-gutter");var t=document.createElement("span");return t.classList.add("cm-dot"),e.appendChild(t),e},n}(r.SJ)),m=function(e){s(n,e);var t=p(n);function n(e){var r;return c(this,n),(r=t.call(this)).numLines=e,r}var r=n.prototype;return r.eq=function(e){return e.numLines===this.numLines},r.toDOM=function(){var e=document.createElement("span");return e.textContent="".concat(this.numLines," hidden ").concat((0,a.Z)("line",this.numLines)),e.className="cm-hidden-lines",e},n}(r.l9),b=r.p.mark({class:"cm-searchResultMatch"}),v=r.tk.baseTheme({".cm-hidden-lines":{color:"var(--foreground-dimmer)",backgroundColor:"var(--background-highest)",display:"inline-block",width:"100%"},".cm-hidden-lines-gutter":{backgroundColor:"var(--background-highest)",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},".cm-dot":{height:"5px",width:"5px",backgroundColor:"var(--foreground-dimmest)",borderRadius:"50%",display:"inline-block"},".cm-tooltip .cm-scroller":{border:"2px solid var(--background-highest)",borderRadius:"var(--border-radius-4)"},".cm-tooltip .cm-scroller:hover":{border:"2px solid var(--accent-primary-dimmest)",boxShadow:"var(--shadow-1)",cursor:"pointer"},".cm-searchResultMatch":{color:o.TV.foregroundDefault,backgroundColor:o.TV.accentPrimaryDimmest,outline:o.TV.accentPrimaryDimmer+" solid 1px"},".cm-searchResultMatch span":{color:o.TV.foregroundDefault},".cm-tooltip .cm-searchResultMatch:hover":{opacity:.8},".cm-tooltip .cm-gutterElement":{display:"flex",marginTop:0,padding:"0 !important",width:"var(--space-24) !important",textAlign:"center",alignItems:"center",justifyContent:"center",lineHeight:"21px"},".cm-tooltip .cm-line":{padding:0},".cm-tooltip .cm-gutters":{padding:0},".cm-tooltip .cm-content":{paddingTop:0},".cm-tooltip .cm-lineWrapping":{whiteSpace:"pre"},".cm-tooltip .cm-cursor":{display:"none"},".cm-tooltip .cm-selectionBackground":{display:"none"}});function g(e,t){var n=e.sort((function(e,t){return e.from-t.from})),o=n.map((function(e){var t=e.from,n=e.to;return b.range(t,n)})),a=r.lg.define((function(){return{}}),{decorations:function(){return r.p.set(o)}}),c=function(e,t){var n=[],o=1;e.forEach((function(r,i){var a=t.lineAt(r.from),c=t.lineAt(r.to);o<a.number-2&&n.push({startLine:o,endLine:a.number-2}),o=c.number+2,i===e.length-1&&o<t.lines&&n.push({startLine:o,endLine:t.lines})}));var a=n.map((function(e){var n=t.line(e.startLine),i=t.line(e.endLine);return r.p.replace({widget:new m(e.endLine-e.startLine+1)}).range(n.from,i.to)})),c=n.map((function(e){var n=t.line(e.startLine);return r.p.line({class:"cm-line-hidden"}).range(n.from)})),l=i.QQ.define({create:function(){return r.p.set(a)},update:function(e){return e},provide:function(e){return r.tk.decorations.from(e)}}),s=i.QQ.define({create:function(){return r.p.set(c)},update:function(e){return e},provide:function(e){return r.tk.decorations.from(e)}}),u=n.map((function(e){var n=t.line(e.startLine);return h.range(n.from)})),d=r.p2.of(i.Xs.of(u));return[l,s,v,d]}(n,t);return[a,c]}},91898:function(e,t,n){var r=n(67294).createContext(null);t.Z=r},39453:function(e,t,n){function r(e,t){var n=Math.max(t.line+1,1),r=e.line(Math.min(n,e.lines));if(n>e.lines)return r.to;var i=r.from+t.character;return Math.min(i,r.to)}function i(e,t){var n=e.lineAt(t);return{line:n.number-1,character:t-n.from}}n.d(t,{R:function(){return r},s:function(){return i}})},67952:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(35944),i=n(23139);function o(e){var t=e.prompt,n=e.desc,o=e.confirmText,a=e.loading,c=void 0!==a&&a,l=e.onCancel,s=e.onConfirm,u=e.danger,d=e.icon;return(0,r.BX)(i.G7,{css:[i.l0.colWithGap(24)],children:[(0,r.tZ)(i.h4,{level:3,variant:"headerDefault",children:t}),(0,r.tZ)(i.xv,{multiline:!0,children:n}),(0,r.BX)(i.G7,{css:[i.l0.rowWithGap(12),i.l0.justify.end],children:[l&&(0,r.tZ)(i.zx,{disabled:c,onClick:l,text:"Cancel"}),(0,r.tZ)(i.zx,{colorway:u?"negative":"primary",disabled:c,onClick:s,text:o||"Ok",iconLeft:d})]})]})}},87139:function(e,t,n){var r=n(35944),i=n(79547),o=n.n(i);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}t.Z=function(e){var t=c({},e);return(0,r.BX)(r.HY,{children:[(0,r.tZ)(o(),{id:"fcfe85a13ecbf46b",children:".one.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:0s;-moz-animation-delay:0s;-o-animation-delay:0s;animation-delay:0s}.two.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:.1s;-moz-animation-delay:.1s;-o-animation-delay:.1s;animation-delay:.1s}.three.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s}@-webkit-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@-moz-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@-o-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }"}),(0,r.tZ)("span",l({},t,{className:"jsx-fcfe85a13ecbf46b "+(t&&null!=t.className&&t.className||"one"),children:"."})),(0,r.tZ)("span",l({},t,{className:"jsx-fcfe85a13ecbf46b "+(t&&null!=t.className&&t.className||"two"),children:"."})),(0,r.tZ)("span",l({},t,{className:"jsx-fcfe85a13ecbf46b "+(t&&null!=t.className&&t.className||"three"),children:"."}))]})}},62424:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(35944),i=n(79547),o=n.n(i),a=n(67294),c=n(37026),l=n(29698),s=n(1517),u=n(38956),d=n(8996),f=n(52620),p=n(72829),h=n(45309);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){var t=a.useRef(null),n=b(a.useState(e.value),2),i=n[0],m=n[1],v=b(a.useState(null),2),g=v[0],y=v[1],x=(0,u.Z)({onUpload:function(t){var n=t.url;e.onChange(n)},onUploadPreview:function(e){var t=e.dataUrl;m(t)},onError:function(e){y(e.message)}});a.useEffect((function(){m(e.value)}),[e.value]);var w=null===i||void 0===i?void 0:i.startsWith("data:"),k=32;return(0,r.BX)(d.gC,{spacing:"var(--space-4)",children:[(0,r.BX)("div",{onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},"aria-label":i?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",className:o().dynamic([["b924c5ea7169ca0d",[k,k]]])+" "+((i?"update-icon":"add-icon")||""),children:[i?(0,r.BX)(r.HY,{children:[(0,r.tZ)(c.Z,{iconUrl:i,size:k,alt:"icon"}),w?(0,r.tZ)("div",{className:o().dynamic([["b924c5ea7169ca0d",[k,k]]])+" loading-state",children:(0,r.tZ)("div",{className:o().dynamic([["b924c5ea7169ca0d",[k,k]]])+" loading-icon",children:(0,r.tZ)(s.Z,{})})}):(0,r.tZ)("div",{className:o().dynamic([["b924c5ea7169ca0d",[k,k]]])+" hover-state",children:(0,r.tZ)(l.Z,{})})]}):(0,r.tZ)(f.Z,{}),(0,r.tZ)("input",{ref:t,accept:p.W9.join(","),type:"file",onChange:function(e){var t=e.target,n=t.validity,r=t.files;n.valid&&(null===r||void 0===r?void 0:r.length)&&(y(null),x.uploadImage(r[0],h.N.TemplateIcon))},className:o().dynamic([["b924c5ea7169ca0d",[k,k]]])})]}),g?(0,r.tZ)("div",{className:o().dynamic([["b924c5ea7169ca0d",[k,k]]])+" error",children:g}):null,(0,r.tZ)(o(),{id:"b924c5ea7169ca0d",dynamic:[k,k],children:".add-icon.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px dashed var(--foreground-dimmest);background-color:var(--background-root);width:".concat(k,"px;height:").concat(k,"px}.add-icon.__jsx-style-dynamic-selector:hover{color:var(--accent-primary-default);border-color:var(--accent-primary-default)}.add-icon.__jsx-style-dynamic-selector,.update-icon.__jsx-style-dynamic-selector{position:relative;cursor:pointer;background-color:var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:2px}.update-icon.__jsx-style-dynamic-selector:hover .hover-state.__jsx-style-dynamic-selector{opacity:.8}.hover-state.__jsx-style-dynamic-selector{opacity:0}.loading-state.__jsx-style-dynamic-selector{opacity:.8}.loading-icon.__jsx-style-dynamic-selector{-webkit-animation:rotate 1s linear infinite;-moz-animation:rotate 1s linear infinite;-o-animation:rotate 1s linear infinite;animation:rotate 1s linear infinite;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}@-webkit-keyframes rotate{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes rotate{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes rotate{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.hover-state.__jsx-style-dynamic-selector,.loading-state.__jsx-style-dynamic-selector{color:var(--accent-primary-default);position:absolute;top:0;left:0;width:100%;height:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);background-color:var(--background-root);overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}input.__jsx-style-dynamic-selector{opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1}.error.__jsx-style-dynamic-selector{font-size:var(--font-size-default);color:var(--accent-negative-default)}")})]})}},42122:function(e,t,n){var r=n(35944),i=n(79547),o=n.n(i);n(67294);t.Z=function(e){var t=e.maxLength,n=void 0===t?140:t,i=e.value,a=void 0===i?"":i,c=e.hideLabel,l=void 0!==c&&c;return(0,r.BX)("div",{className:"jsx-59d2089b8a0ab881",children:[a.length," / ",n," ",l?"":"characters",(0,r.tZ)(o(),{id:"59d2089b8a0ab881",children:"div.jsx-59d2089b8a0ab881{color:var(--foreground-dimmer);font-size:.75em;text-align:right;margin-top:var(--space-8)}"})]})}},70192:function(e,t,n){var r=n(35944),i=n(79547),o=n.n(i),a=n(67294);t.Z=function(){return(0,r.tZ)(a.Fragment,{children:(0,r.tZ)(o(),{id:"cf42b6e1693787e8",children:"body .Select{font-size:16px}body .Select-control{color:var(--foreground-default)!important;background-color:var(--background-default)!important;border:1px solid var(--foreground-dimmest)!important;-webkit-border-radius:var(--border-radius-4)!important;-moz-border-radius:var(--border-radius-4)!important;border-radius:var(--border-radius-4)!important;-webkit-transition:all.1s;-moz-transition:all.1s;-o-transition:all.1s;transition:all.1s}body .Select-control:hover{border-color:var(--foreground-default)!important}body .Select.is-focused .Select-control,body .Select.is-open .Select-control{border-color:var(--foreground-dimmer)!important}body .Select.is-focused.is-open .Select-control{-webkit-border-bottom-left-radius:0!important;-moz-border-radius-bottomleft:0!important;border-bottom-left-radius:0!important;-webkit-border-bottom-right-radius:0!important;-moz-border-radius-bottomright:0!important;border-bottom-right-radius:0!important}body .Select-control .Select-value{height:38px!important;background-color:var(--background-default)!important;color:var(--foreground-default)!important;cursor:pointer}body .Select.is-open .Select-value,body .Select.is-focused .Select-value{background-color:var(--background-default)!important}body .Select .Select-control .Select-placeholder{color:var(--foreground-dimmest)!important}body .Select-menu-outer{border:1px solid var(--foreground-dimmer)!important;border-top:0 none!important;-webkit-border-bottom-left-radius:var(--border-radius-4)!important;-moz-border-radius-bottomleft:var(--border-radius-4)!important;border-bottom-left-radius:var(--border-radius-4)!important;-webkit-border-bottom-right-radius:var(--border-radius-4)!important;-moz-border-radius-bottomright:var(--border-radius-4)!important;border-bottom-right-radius:var(--border-radius-4)!important;background-color:var(--background-root)!important}body .Select-value-label{color:var(--foreground-default)!important}body .Select-option{color:var(--foreground-default)!important;background-color:var(--background-default)!important}body .Select-option.is-disabled{color:var(--foreground-dimmest)!important}body .Select .Select-option.is-focused{background-color:var(--accent-primary-dimmest)!important;color:var(--foreground-default)!important}body .Select .Select-option.is-selected{background-color:var(--accent-primary-dimmer)!important}body .Select-input input{color:var(--foreground-default)!important}"})})}},95722:function(e,t,n){var r=n(34051),i=n.n(r),o=n(35944),a=n(79547),c=n.n(a),l=n(67294),s=n(30617),u=n(62774),d=n(37510),f=n(93770),p=n(27740),h=n.n(p),m=n(38880),b=n(56834),v=n(67289),g=n(36793),y=n(21130),x=n(22429),w=n(82053),k=n(1517),Z=n(3204),j=n(34699);function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){E(o,r,i,a,c,"next",e)}function c(e){E(o,r,i,a,c,"throw",e)}a(void 0)}))}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"===typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}var I=36,A=function(){return(0,o.BX)("div",{className:"jsx-3e741e4d889c73d "+c().dynamic([["37ffd3a19c5ebe03",[I]]])+" file-header-format-button",children:[(0,o.tZ)("div",{className:"jsx-3e741e4d889c73d "+c().dynamic([["37ffd3a19c5ebe03",[I]]])+" file-header-format-icon",children:(0,o.BX)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16.581 16.428",className:"jsx-3e741e4d889c73d "+c().dynamic([["37ffd3a19c5ebe03",[I]]]),children:[(0,o.tZ)("path",{d:"M13.26.747H3.323A2.569,2.569,0,0,0,.754,3.316h0v9.795a2.569,2.569,0,0,0,2.568,2.57h9.937a2.569,2.569,0,0,0,2.569-2.569h0V3.316A2.569,2.569,0,0,0,13.26.747Z",className:"jsx-3e741e4d889c73d "+c().dynamic([["37ffd3a19c5ebe03",[I]]])+" cls-1"}),(0,o.tZ)("path",{d:"M13.118,11.269a.759.759,0,0,1-.759.759H3.921a.759.759,0,0,1-.759-.759V11.23a.671.671,0,0,1,.689-.653l.07.006h8.438a.671.671,0,0,1,.753.578.7.7,0,0,1,.006.069ZM3.161,5.111V5.073a.759.759,0,0,1,.759-.759h8.439a.759.759,0,0,1,.759.759v.038a.759.759,0,0,1-.759.759H3.921a.759.759,0,0,1-.76-.758ZM3.148,8.2a.759.759,0,0,1,.758-.76H8.4a.759.759,0,0,1,.759.759v.038a.759.759,0,0,1-.759.759H3.907a.759.759,0,0,1-.759-.759Z",className:"jsx-3e741e4d889c73d "+c().dynamic([["37ffd3a19c5ebe03",[I]]])+" cls-2"})]})}),(0,o.tZ)(c(),{id:"3e741e4d889c73d",children:".file-header-format-button.jsx-3e741e4d889c73d .cls-1{fill:var(--foreground-default)}.file-header-format-button.jsx-3e741e4d889c73d .cls-2{fill:var(--background-default)}"}),(0,o.tZ)(c(),{id:"37ffd3a19c5ebe03",dynamic:[I],children:".file-header-format-button.__jsx-style-dynamic-selector{padding:0 10px;height:100%;width:".concat(I,"px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;opacity:.7}.file-header-format-button.__jsx-style-dynamic-selector:hover{opacity:1}.file-header-format-icon.__jsx-style-dynamic-selector{height:16px;width:16px;cursor:pointer}")})]})};function P(e){var t=e.filePath,n=e.replLanguage,r=(0,s.Z)(),o=r.fs,a=r.container,c=(0,u.Z)({container:a,service:"format",skip:!h().supportsFormatting(n)}).channel,p=_(l.useState(!1),2),b=p[0],v=p[1],g=(0,m.Z)().showError,y=function(){return v(!1)};return l.useEffect((function(){if(b&&c){var e=!1,n=[],r=o.watchOtFile(t,{onReady:function(e){!function(e,t){a.apply(this,arguments)}(e.initialContent,e.writeOps)},onChange:function(e){var t=e.ops;n=d.qC(t,n)},onError:function(){y()},onMoveOrDelete:function(){y()}});return function(){e=!0,r()}}function a(){return(a=C(i().mark((function r(o,a){var l,s,u,p;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e&&c){r.next=2;break}return r.abrupt("return");case 2:if(0!==o.length){r.next=5;break}return y(),r.abrupt("return");case 5:return r.next=7,c.request({file:{path:t,content:o.toBuffer()}});case 7:if(l=r.sent,!e){r.next=10;break}return r.abrupt("return");case 10:if(!l.error&&l.file){r.next=14;break}return g("Failed to format ".concat(t),1500),y(),r.abrupt("return");case 14:if(0!==(s=f.Z.from(l.file.content)).length){r.next=18;break}return y(),r.abrupt("return");case 18:if(0!==(u=d.sQ(o.toString(),s.toString())).length){r.next=22;break}return y(),r.abrupt("return");case 22:if(0!==(p=n.length>0?d.vs(u,n,"left"):u).length){r.next=26;break}return y(),r.abrupt("return");case 26:a(p),y();case 28:case"end":return r.stop()}}),r)})))).apply(this,arguments)}}),[c,t,o,b,g]),l.useEffect(y,[t]),h().supportsFormatting(n)?function(){return v(!0)}:null}function N(e){var t=e.formatWithLsp,n=e.formatWithService,r=e.replLanguage,i=e.filePath,o=(null===t||void 0===t?void 0:t.fn)||n;if(!o)throw new Error("Expected format function");(0,b.j)(b.U3.AUTO_FORMAT_USED,{language:r,extension:(0,v.r6)(i)}),o()}t.Z=function(e){var t=e.filePath,n=e.replLanguage,r=P({filePath:t,replLanguage:n}),a=function(e){var t,n=e.filePath,r=(0,g.Z)().preferences,o=(0,s.Z)().fs,a=(0,x.Z)(n),c=Boolean(null===(t=null===a||void 0===a?void 0:a.getServerCapabilities())||void 0===t?void 0:t.documentFormattingProvider),u=(0,l.useState)([]),f=u[0],p=u[1],h=(0,m.Z)(),b=h.showError,v=h.showConfirm;return c?{fn:function(){if(!f.includes(n)){p((function(e){return O(e).concat([n])}));var e=[],t=function(e){e?b("Sorry, formatting ".concat(n," failed"),1500):v("Formatted ".concat(n," successfully"),1500),c(),p((function(e){return e.filter((function(e){return e!==n}))}))},c=o.watchOtFile(n,{onReady:function(){var o=C(i().mark((function o(c){var l,s,u,f,p;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(l=c.initialContent,s=c.writeOps,a){i.next=3;break}throw new Error("LSP client not found");case 3:return i.next=5,a.request.format(n,{insertSpaces:r.indentIsSpaces,tabSize:r.indentSize});case 5:if(!("error"in(u=i.sent))){i.next=9;break}return t(!0),i.abrupt("return");case 9:if(!u.cancelled){i.next=12;break}return t(!0),i.abrupt("return");case 12:if(u.result){i.next=15;break}return t(!0),i.abrupt("return");case 15:if(f=(0,w.Z)(u.result,l.toString()),0!==(p=e.length>0?d.vs(f,e,"left"):f).length){i.next=20;break}return t(),i.abrupt("return");case 20:s(p),t();case 22:case"end":return i.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}(),onChange:function(t){var n=t.ops;e=d.qC(n,e)}})}},isFormatting:f.includes(n)}:null}({filePath:t});if((0,j.x)({cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"S"},{enabled:Boolean((0,v.Mb)(t)&&(a||r)),run:function(){N({formatWithLsp:a,formatWithService:r,replLanguage:n,filePath:t})}}),!(0,v.Mb)(t)||!a&&!r)return null;var c=(0,v.eb)(t);return(0,o.tZ)(y.Z,{css:[Z.l0.zIndex(1),{alignSelf:"center"}],alt:(null===a||void 0===a?void 0:a.isFormatting)?"Formatting ".concat(c,", please wait"):"Format ".concat(c," code"),tooltipPlacement:"left-end",onClick:function(){N({formatWithLsp:a,formatWithService:r,replLanguage:n,filePath:t})},children:(null===a||void 0===a?void 0:a.isFormatting)?(0,o.tZ)(k.Z,{}):(0,o.tZ)(A,{})})}},85264:function(e,t,n){n.d(t,{F:function(){return f},Y:function(){return d}});var r=n(35944),i=n(79547),o=n.n(i),a=n(67294),c=n(58458),l=n(40425),s=n(8996),u=n(56834);function d(){return a.useEffect((function(){(0,u.j)(u.U3.WS_REPLCO_UNREACHABLE)}),[]),(0,r.BX)("div",{className:"jsx-88c49dc4f1cb807b unreachable",children:[(0,r.BX)(s.gC,{align:"center",spacing:4,children:[(0,r.BX)(s.gC,{align:"center",children:[(0,r.tZ)(l.Z,{level:1,children:"\ud83d\ude48"}),(0,r.tZ)(l.Z,{level:4,children:"This Repl link isn\u2019t broken!"}),(0,r.tZ)(l.Z,{level:4,foreground:2,children:"It\u2019s just blocked."})]}),(0,r.BX)(s.gC,{spacing:2,className:"why",children:[(0,r.tZ)(c.Z,{foreground:2,children:"Why this might be happening:"}),(0,r.tZ)(c.Z,{foreground:2,children:(0,r.BX)("ul",{className:"jsx-88c49dc4f1cb807b",children:[(0,r.BX)("li",{className:"jsx-88c49dc4f1cb807b",children:["repl.co URLs could be"," ",(0,r.tZ)(c.Z,{fontWeight:"medium",foreground:1,children:"blocked by a firewall,"})," ","so contact your IT administrator"]}),(0,r.BX)("li",{className:"jsx-88c49dc4f1cb807b",children:["repl.co URLs could be"," ",(0,r.tZ)(c.Z,{fontWeight:"medium",foreground:1,children:"blocked by your ISP,"})," ","so try getting in touch with them"]})]})})]}),(0,r.BX)(c.Z,{foreground:2,align:"center",children:["If you have any other questions, please check out"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/teams-edu/it-administrators-toolkit",target:"_blank",rel:"noopener noreferrer",className:"jsx-88c49dc4f1cb807b",children:"our IT docs"})," ","or"," ",(0,r.tZ)("a",{href:"https://replit.com/support",target:"_blank",rel:"noopener noreferrer",className:"jsx-88c49dc4f1cb807b",children:"contact support"}),"."]})]}),(0,r.tZ)(o(),{id:"88c49dc4f1cb807b",children:".unreachable.jsx-88c49dc4f1cb807b{padding:var(--space-32)}.unreachable.jsx-88c49dc4f1cb807b ul.jsx-88c49dc4f1cb807b{list-style-position:inside}.unreachable.jsx-88c49dc4f1cb807b li.jsx-88c49dc4f1cb807b{padding-bottom:var(--space-16)}"})]})}var f=a.createContext(!1)},43303:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(35944),i=n(67294),o=n(23139),a=n(41058),c=n(47670),l=n(94590),s=n(35987),u=n(33891),d=n(8286),f=n(584);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e){var t=e.isOpen,n=e.canSpend,p=e.onRequestClose,m=e.onRequestBuyMore,b=e.onRequestPowerUp,v=e.powerUp,g=(0,s.Z)({forceFetch:!1}).formattedBalanceWithUnit,y=h(i.useState(!1),2),x=y[0],w=y[1],k=h(i.useState(!1),2),Z=k[0],j=k[1];return(0,r.BX)(o.u_,{isOpen:t,onRequestClose:function(){p(),w(!1)},centered:!0,maxWidth:400,children:[(0,r.BX)(o.G7,{css:[o.l0.rowWithGap(8),o.l0.pb(16)],children:[(0,r.tZ)(a.Z,{}),(0,r.tZ)(o.xv,{variant:"subheadDefault",children:"Power Up"})]}),(0,r.BX)(o.Tg,{css:[o.l0.p(16),o.l0.borderRadius(8),o.l0.align.center],background:"highest",children:[(0,r.tZ)(o.xv,{variant:"subheadBig",children:f.S[v].name}),(0,r.tZ)(o.G7,{css:[o.l0.p(8)],children:(0,r.tZ)(u.Z,{autoplay:!1,play:Z||x,path:f.S[v].animationPath,css:[o.l0.width(200),o.l0.height(200)],loop:!0})}),(0,r.tZ)(o.xv,{variant:"subheadDefault",children:f.S[v].description})]}),(0,r.BX)(o.G7,{css:[o.l0.flex.column,o.l0.colWithGap(16),o.l0.p(16),o.l0.align.center],children:[x?(0,r.BX)(o.xv,{variant:"subheadDefault",css:[o.l0.color.accentPositiveStronger,o.l0.rowWithGap(8),o.l0.px(16),o.l0.py(8)],children:[(0,r.tZ)(d.Z,{size:16}),"ACTIVATED"]}):(0,r.tZ)(o.G7,{onMouseOver:function(){return j(n)},onMouseLeave:function(){return j(!1)},children:(0,r.tZ)(o.zx,{text:"Use ".concat(f.S[v].perCost," Cycles/").concat(f.S[v].orderDuration),big:!0,disabled:!n,colorway:n?"primary":void 0,iconLeft:(0,r.tZ)(c.Z,{}),onClick:function(){j(n),b(),w(!0)},css:[o.l0.px(16)]})}),(0,r.tZ)(o.xv,{css:[o.l0.textAlign.center,o.l0.pt(8)],children:f.S[v].unlimited?"unlimited Repls":"per Repl"})]}),(0,r.tZ)(o.RX,{}),(0,r.BX)(o.G7,{css:[o.l0.align.center,o.l0.justify.center,o.l0.flex.row,o.l0.rowWithGap(8),o.l0.pt(16)],children:[(0,r.BX)(o.xv,{children:["You have ",g]}),(0,r.tZ)(o.zx,{text:"Buy More",small:!0,outlined:!!n,iconLeft:(0,r.tZ)(l.Z,{}),onClick:m,colorway:n?void 0:"primary"})]})]})}},64784:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(67294),i=n(79367),o=n.n(i);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(){var e=c(r.useState(null),2),t=e[0],n=e[1];return r.useLayoutEffect((function(){if(t)return o()(t),function(){o().destroy(t)}}),[t]),{ref:n,update:function(){t&&o().update(t)}}}},7208:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(91131),i=n(64824),o=n(88768),a=n(88215);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=new Date("2022-07-08"),u=(0,i.O4)("useCelebrateFirstReplPlay",!1);function d(){var e,t,n=(0,o.Nzm)(),i=(0,a.$0)().fireCircularBurstFrom,c=l((0,r.KO)(u),2),d=c[0],f=c[1],p=null!==(t=null===(e=n.data)||void 0===e?void 0:e.currentUser)&&void 0!==t?t:null,h=!d&&p&&p.hasNewCoderOnboardingFlag&&new Date(p.timeCreated)>=s;return{hasCelebrated:d,celebrate:function(e){h&&(i({element:e}),f(!0))}}}},49638:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(67294);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){var t=a(r.useState(e),2),n=t[0],i=t[1];return[n,i,function(e){var t=null;switch(e.currentTarget.type){case"checkbox":t=e.currentTarget.checked;break;case"number":case"range":t=Number(e.currentTarget.value);break;default:t=e.currentTarget.value}i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},n,o({},e.currentTarget.name,t)))}]}},12603:function(e,t,n){n.d(t,{f6:function(){return u},oj:function(){return s},xZ:function(){return f}});var r=n(67294),i=n(30617),o=n(93577);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){var t=c(r.useState(!1),2),n=t[0],o=t[1],a=(0,i.Z)().dotReplit;return r.useEffect((function(){var t=!1;return a.getConfig().then((function(n){t||n.error||n.config.language===e&&o(!0)})),function(){t=!0}}),[e,a]),n}function s(){return l("kaboom")}function u(){return l("kaboomdraw")}var d=/^draw.[tj]s$/;function f(){var e=(0,o.Z)();return u()&&Boolean(null===e||void 0===e?void 0:e.match(d))}},95343:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(67294);function i(e){var t=r.useRef(null),n=r.useRef(e);return r.useEffect((function(){n.current=e}),[e]),function(e){t.current&&t.current.disconnect(),e&&window.IntersectionObserver&&(t.current=new window.IntersectionObserver((function(e){e[0].isIntersecting&&n.current()})),t.current.observe(e))}}},91449:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(11163),i=n.n(r),o=n(30617),a=n(67294),c=n(46846),l=n(33605),s="You have unsaved changes";function u(){var e=(0,o.Z)().fs,t=(0,r.useRouter)(),n=(0,a.useState)(!1),u=n[0],d=n[1],f=(0,a.useRef)(!1),p=function(){if(!f.current&&!window.confirm(s))throw i().events.emit("routeChangeError"),i().replace(i(),i().asPath),new Error("Abort route change. Please ignore this error.")};return(0,a.useEffect)((function(){return d(e.getStatus()===c.kO.Syncing),e.onStatusChange((function(e){d(e===c.kO.Syncing)}))}),[e]),(0,a.useEffect)((function(){var e=function(e){if(!f.current)return e.preventDefault(),e.returnValue=s,s};if(u)return window.addEventListener("beforeunload",e),l.g||t.events.on("routeChangeStart",p),function(){window.removeEventListener("beforeunload",e),l.g||t.events.off("routeChangeStart",p)}}),[u,t.events]),function(e){return f.current=e}}},59936:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(67294),i=n(88768),o=n(98772),a=n(85133),c=n(30617);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(){var e=s((0,i.yuJ)(),1)[0],t=(0,c.Z)().fs,n=(0,a.Z)(),l=null===n||void 0===n?void 0:n.currentUserPermissions.containerWrite,u=null===n||void 0===n?void 0:n.id;(0,r.useEffect)((function(){if(l&&u){var n=(0,o.Z)((function(){return e({variables:{replId:u}})}),{wait:6e4,maxWait:6e5}),r=t.onStatusChange((function(){n()}));return function(){n.isScheduled()&&n.flush(),r()}}}),[t,u,l,e])}},73433:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(67294),i=n(63805);function o(){var e=(0,r.useRef)(0),t=(0,r.useState)(!1),n=t[0],o=t[1],a=window.visualViewport;return(0,r.useEffect)((function(){if(a&&(0,i.isMobile)({tablet:!1})){var t=function(){var t=a.height<.8*e.current;o(t)};return e.current=a.height,a.addEventListener("resize",t),function(){a.removeEventListener("resize",t)}}}),[a]),n}},32646:function(e,t,n){var r=n(67294),i=n(85106);t.Z=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).allowNoWid,t=r.useContext(i.Z);if(!t){if(e)return null;throw new Error("Expected wid to be in wid context")}return t}},84403:function(e,t,n){n.d(t,{V:function(){return f},Q:function(){return g}});var r=n(9571);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=.5*(Math.sqrt(3)-1),a=(3-Math.sqrt(3))/6,c=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random;i(this,e);var n="function"===typeof t?t:u(t);this.p=s(n),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var r=0;r<512;r++)this.perm[r]=this.p[255&r],this.permMod12[r]=this.perm[r]%12}return e.prototype.noise2D=function(e,t){var n,r,i=this.permMod12,l=this.perm,s=0,u=0,d=0,f=(e+t)*o,p=Math.floor(e+f),h=Math.floor(t+f),m=(p+h)*a,b=e-(p-m),v=t-(h-m);b>v?(n=1,r=0):(n=0,r=1);var g=b-n+a,y=v-r+a,x=b-1+2*a,w=v-1+2*a,k=255&p,Z=255&h,j=.5-b*b-v*v;if(j>=0){var S=3*i[k+l[Z]];s=(j*=j)*j*(c[S]*b+c[S+1]*v)}var E=.5-g*g-y*y;if(E>=0){var C=3*i[k+n+l[Z+r]];u=(E*=E)*E*(c[C]*g+c[C+1]*y)}var _=.5-x*x-w*w;if(_>=0){var O=3*i[k+1+l[Z+1]];d=(_*=_)*_*(c[O]*x+c[O+1]*w)}return 70*(s+u+d)},e}();function s(e){for(var t=new Uint8Array(256),n=0;n<256;n++)t[n]=n;for(var r=0;r<255;r++){var i=r+~~(e()*(256-r)),o=t[r];t[r]=t[i],t[i]=o}return t}function u(e){var t=0,n=0,r=0,i=1,o=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();return t=o(" "),n=o(" "),r=o(" "),(t-=o(e))<0&&(t+=1),(n-=o(e))<0&&(n+=1),(r-=o(e))<0&&(r+=1),function(){var e=2091639*t+2.3283064365386963e-10*i;return t=n,n=r,r=e-(i=0|e)}}var d=new l;function f(e){var t=!1,n=0,r=0,i=null,o=function(c){if(t){var l=c-n;r+=l,n=c,i=window.requestAnimationFrame(o),e({elapsedTime:r,deltaTime:l,stop:a})}},a=function(){t&&(t=!1,i&&window.cancelAnimationFrame(i))};return{start:function(){t||(r=0,n=performance.now(),t=!0,i=window.requestAnimationFrame(o))},stop:a}}var p=function(){return(0,r.hd)(600,1200)},h=function(){return(0,r.hd)(1,3)},m=function(){return{width:(0,r.hd)(5,20),height:(0,r.hd)(5,20)}},b=function(){return(0,r.vF)()};function v(e){return Array.isArray(e)?(0,r.DQ)(e):(t=e,(null!=(n=Function)&&"undefined"!==typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](t):t instanceof n)?e():e);var t,n}function g(){var e=!1,t=null,n=null,i=[],o=null;return{getIsInstalled:function(){return e},addParticles:function(e){for(var t=e.x,n=e.y,a=e.numParticles,c=void 0===a?150:a,l=e.spread,s=void 0===l?60:l,u=e.heading,d=void 0===u?90:u,f=e.airDrag,g=void 0===f?.9:f,y=e.color,x=void 0===y?b:y,w=e.gravity,k=void 0===w?800:w,Z=e.velocity,j=void 0===Z?p:Z,S=e.size,E=void 0===S?m:S,C=e.lifetime,_=void 0===C?h:C,O=v(s),T=v(d),I=(0,r.Id)(O),A=(0,r.Id)(-T),P=v(c),N=0;N<P;N++){var R=A+(0,r.hd)(-I/2,I/2),z=v(j),B=v(E),D=B.width,U=B.height,L=v(_),X=v(x),M=v(g);i.push({type:(0,r.DQ)(["rectangle","ellipse"]),seed:(0,r.hd)(0,1e5),x:t,y:n,gravity:k,airDrag:M,scaleX:1,scaleY:1,rotation:(0,r.hd)(0,(0,r.Id)(360)),velocityX:Math.cos(R)*z,velocityY:Math.sin(R)*z,angularVelocity:(0,r.hd)((0,r.Id)(-400),(0,r.Id)(400)),color:X,alpha:1,width:D,height:U,lifetime:L,lifetimeRemaining:L})}null===o||void 0===o||o.start()},clearParticles:function(){i=[]},uninstall:function(){e&&(t&&document.body.contains(t)&&document.body.removeChild(t),o&&o.stop(),t=null,n=null,e=!1)},install:function(){e||(t=function(){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex="999999",e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight,e.id="replit-particles-simulation",e.setAttribute("role","image"),e.ariaHidden="true",e}(),(n=t.getContext("2d"))&&(document.body.appendChild(t),o=f((function(e){var o=e.deltaTime,a=e.stop;if(t&&n){var c=n,l=window.scrollX,s=window.scrollY;t.width!==document.documentElement.clientWidth&&(t.width=document.documentElement.clientWidth),t.height!==document.documentElement.clientHeight&&(t.height=document.documentElement.clientHeight),n.clearRect(0,0,t.width,t.height),i.map((function(e){return function(e){var t=e.particle,n=e.deltaTime;t.velocityY+=t.gravity*n/1e3,t.x+=t.velocityX*n/1e3,t.y+=t.velocityY*n/1e3,t.rotation+=t.angularVelocity*n/1e3,t.velocityX*=t.airDrag,t.velocityY*=t.airDrag,t.scaleY=2*(0,r.WE)(t.lifetimeRemaining,.5);var i=(0,r.NC)(t.velocityX,t.velocityY),o=(0,r.$G)(t.velocityX,t.velocityY),a=i+.05*d.noise2D(t.seed,t.lifetimeRemaining);t.velocityX=Math.cos(a)*o,t.velocityY=Math.sin(a)*o,t.lifetimeRemaining-=n/1e3,t.lifetimeRemaining<=0?t.alpha=0:t.alpha=1-(t.lifetime-t.lifetimeRemaining)/t.lifetime}({particle:e,deltaTime:o})})),i.map((function(e){return function(e){var t=e.particle,n=e.ctx,r=e.scrollX,i=e.scrollY,o=t.width*t.scaleX,a=t.height*t.scaleY,c=t.x-r,l=t.y-i;n.save(),n.translate(c,l),n.rotate(t.rotation),n.globalAlpha=t.alpha,"image"===t.type?n.drawImage(t.image,-o/2,-a/2,o,a):"rectangle"===t.type?(n.fillStyle=t.color,n.fillRect(-o/2,-a/2,o,a)):"ellipse"===t.type&&(n.fillStyle=t.color,n.beginPath(),n.ellipse(0,0,o/2,a/2,0,0,2*Math.PI),n.fill()),n.restore()}({particle:e,ctx:c,scrollX:l,scrollY:s})})),0===(i=i.filter((function(e){return e.lifetimeRemaining>0}))).length&&a()}})),e=!0))}}}},88215:function(e,t,n){n.d(t,{su:function(){return p},hd:function(){return i.hd},$0:function(){return b}});var r=n(67294),i=n(9571),o=n(84403),a=n(91131),c=n(3846);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function d(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p,h=(0,o.Q)(),m=(0,a.cn)(h);function b(){var e=f((0,a.KO)(m),1)[0],t=(0,c.T)();r.useEffect((function(){return e.install(),function(){e.uninstall()}}),[e]);var n=function(n){t||e.addParticles(n)},o=function(n){t||e.addParticles(u({numParticles:125,spread:360,velocity:function(){return(0,i.hd)(400,900)},size:function(){return{width:(0,i.hd)(5,15),height:(0,i.hd)(5,25)}}},n))};return{fireBurst:n,fireBurstFrom:function(e){var r=e.element,o=d(e,["element"]);if(!t){var a=(0,i.tj)(r),c=a.x,l=a.y;n(u({x:c,y:l},o))}},fireCircularBurst:o,fireCircularBurstFrom:function(e){var n=e.element,r=d(e,["element"]);if(!t){var a=(0,i.tj)(n),c=a.x,l=a.y;o(u({x:c,y:l},r))}},fireDirectionalBurst:function(n){var r=n.direction,i=d(n,["direction"]);t||e.addParticles(u({heading:r},i))},fireDirectionalBurstFrom:function(n){var r=n.element,o=n.direction,a=d(n,["element","direction"]);if(!t){var c=(0,i.tj)(r),l=c.x,s=c.y;e.addParticles(u({x:l,y:s,numParticles:100,velocity:function(){return(0,i.hd)(400,1500)},spread:60,size:function(){return{width:(0,i.hd)(5,15),height:(0,i.hd)(5,25)}},heading:o},a))}}}}!function(e){e[e.East=0]="East",e[e.NorthEast=45]="NorthEast",e[e.North=90]="North",e[e.NorthWest=135]="NorthWest",e[e.West=180]="West",e[e.SouthWest=225]="SouthWest",e[e.South=270]="South"}(p||(p={}))},9571:function(e,t,n){n.d(t,{$G:function(){return d},DQ:function(){return a},Id:function(){return s},NC:function(){return u},WE:function(){return p},hd:function(){return c},tj:function(){return i},vF:function(){return l}});var r=n(80140);function i(e){var t=function(e){var t=e.getBoundingClientRect();return{x:t.left+t.width/2,y:t.top+t.height/2}}(e);return{x:t.x+window.scrollX,y:t.y+window.scrollY}}function o(e,t){return(0,r.Z)(e,t,!1)}function a(e){return e[o(0,e.length-1)]}function c(e,t){return(0,r.Z)(e,t,!0)}function l(){return"hsl(".concat(o(0,360),", 100%, 70%)")}function s(e){return e*Math.PI/180}function u(e,t){return Math.atan2(t,e)}function d(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function f(e,t){return(e%t+t)%t}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(f(e,2*t)-t)}},13649:function(e,t,n){function r(e){if(!e)return!1;try{var t=new URL(e);return Boolean(t)}catch(n){return!1}}n.d(t,{Z:function(){return r}})},76543:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(35944),i=n(79547),o=n.n(i),a=n(67294),c=n(56834),l=n(51281),s=n(58458),u=n(38880),d=n(88768),f=n(57541),p=n(8996),h=n(17632),m=n(35060),b=n(57170);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){var t,n,i,v=e.replId,y=(0,u.Z)(),x=y.showConfirm,w=y.showError,k=(0,d.hA$)({variables:{replId:v}}),Z=k.data,j=k.loading,S=k.error,E=g((0,d.QNZ)({variables:{replId:v},onError:function(e){return w(e.message)}}),2),C=E[0],_=E[1],O=g((0,d.ooK)({variables:{replId:v},optimisticResponse:{deleteMultiplayerInviteLink:{id:v,inviteUrl:null,__typename:"Repl"},__typename:"RootMutationType"},onError:function(e){return w(e.message)},onCompleted:function(e){"UserError"!==e.deleteMultiplayerInviteLink.__typename?"Repl"===e.deleteMultiplayerInviteLink.__typename&&x("Join link deleted"):w(e.deleteMultiplayerInviteLink.message)}}),2),T=O[0],I=O[1],A=_.loading||I.loading,P=a.useRef(null),N="Repl"===(null===Z||void 0===Z||null===(t=Z.repl)||void 0===t?void 0:t.__typename)&&"Team"===(null===(n=Z.repl.owner)||void 0===n?void 0:n.__typename),R="Repl"===(null===Z||void 0===Z||null===(i=Z.repl)||void 0===i?void 0:i.__typename)&&Z.repl.inviteUrl?window.location.origin+Z.repl.inviteUrl:null;a.useEffect((function(){_.error&&w(_.error.message),_.data&&(0,c.j)(c.U3.MP2_REFRESHED_LINK,{replId:v})}),[_.error,_.data,v,w]);var z=function(){P&&P.current&&P.current.select()},B=function(){return(0,r.BX)("div",{"aria-label":"Anyone on the internet with this link can join and edit this repl","data-microtip-position":"top","data-microtip-size":"medium",role:"tooltip","data-micro":!0,className:"jsx-e33ed68cec233d59 information-icon-container",children:[(0,r.tZ)(h.Z,{}),(0,r.tZ)(o(),{id:"e33ed68cec233d59",children:".information-icon-container.jsx-e33ed68cec233d59{margin-left:5px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;text-align:center}"})]})};return j?(0,r.tZ)(s.Z,{children:"loading..."}):S?(0,r.tZ)(s.Z,{children:"Error: please contact support"}):R?(0,r.BX)(p.gC,{align:"stretch",spacing:1,children:[(0,r.tZ)(s.Z,{foreground:2,size:"small",children:(0,r.BX)(p.Ug,{align:"center",children:["Invite ",N?"guests":"friends"," with a join link",B()]})}),(0,r.BX)(p.Ug,{wrap:"nowrap",align:"center",spacing:1,children:[(0,r.tZ)("div",{className:"jsx-1dd1818beded4b33 input-link",children:(0,r.tZ)(f.ZP,{ref:P,readOnly:!0,onChange:function(){return null},value:A?"loading...":R,onClick:z})}),(0,r.tZ)("div",{"aria-label":"Copy","data-microtip-position":"bottom",role:"tooltip",className:"jsx-1dd1818beded4b33",children:(0,r.tZ)(l.Z,{color:"primary",Icon:b.Z,onClick:function(){z(),document.execCommand("copy"),x("Link copied")}})}),(0,r.tZ)("div",{"aria-label":"Delete link","data-microtip-position":"bottom",role:"tooltip",className:"jsx-1dd1818beded4b33",children:(0,r.tZ)(l.Z,{color:"red",Icon:m.Z,onClick:function(e){e.preventDefault(),A||T()}})})]}),(0,r.BX)(s.Z,{size:"small",foreground:2,children:[(0,r.tZ)("a",{onClick:function(e){e.preventDefault(),A||C()},className:"jsx-1dd1818beded4b33",children:"Generate a new link"})," ","(The current one will stop working)"]}),(0,r.tZ)(o(),{id:"1dd1818beded4b33",children:".input-link.jsx-1dd1818beded4b33{-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.input-link.jsx-1dd1818beded4b33 input{cursor:text!important}"})]}):(0,r.tZ)("div",{style:{marginTop:"var(--space-8)"},children:(0,r.tZ)(l.Z,{fullWidth:!0,color:"default",onClick:function(){A||C()},children:(0,r.BX)(p.Ug,{align:"center",children:["Generate a join link",B()]})})})}},54970:function(e,t,n){n.d(t,{Z:function(){return C}});var r=n(34051),i=n.n(r),o=n(35944),a=n(67294),c=n(23139),l=n(37424),s=n(88768),u=n(33108),d=n(28614),f=n(1769);var p=n(94692),h=n(1517),m=n(55681),b=n(79399),v=n(67289);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var k=(0,c.KD)("form");function Z(e){if(0===e.length)return{message:"You cannot leave this empty."}}function j(e){var t,n,r=e.changeType;return r===s.J53.NewFile?(t=c.TV.accentPositiveStronger,n="Added"):r===s.J53.DeletedFile?(t=c.TV.accentNegativeStronger,n="Deleted"):(t=c.TV.foregroundDefault,n="Changed"),(0,o.tZ)(c.xv,{variant:"small",css:[{color:t}],children:n})}function S(e){var t=e.pendingChangesState;if(t.loading)return(0,o.tZ)(c.G7,{css:[c.l0.center],children:(0,o.tZ)(h.Z,{})});if(t.error)return(0,o.tZ)(c.E_,{icon:(0,o.tZ)(d.Z,{}),text:t.error.message||"Could not load modified files - please try again.",colorway:"negative"});if(!t.pendingChanges||0===t.pendingChanges.length)return(0,o.tZ)(c.xv,{multiline:!0,children:"No changes to publish. Come back when you have made changes to your Repl."});var n=t.pendingChanges,r=n.slice(0,15);return(0,o.BX)(c.G7,{css:[{display:"grid",gridTemplateColumns:"1fr 1fr",gap:c.TV.space8}],children:[r.map((function(e){return(0,o.BX)(a.Fragment,{children:[(0,o.BX)(c.G7,{css:[c.l0.rowWithGap(4),c.l0.align.center],children:[(0,o.tZ)(m.Z,{size:12,path:e.fileName}),(0,o.tZ)(c.xv,{children:e.fileName})]},e.fileName),(0,o.tZ)(j,{changeType:e.changeType})]},e.fileName)})),n.length>r.length&&(0,o.BX)(c.xv,{children:["And ",n.length-r.length," other files..."]})]})}function E(e){var t=function(e){var t,n,r=e.replId,i=(0,s.fNr)({variables:{replId:r},fetchPolicy:"cache-and-network"}),o=i.data,a=i.loading,c=i.error;if(a)return{loading:a,pendingChanges:null,error:null};if(c)return{loading:!1,pendingChanges:null,error:c};var l="Repl"===(null===o||void 0===o?void 0:o.repl.__typename)?o.repl:null;return l?{loading:!1,pendingChanges:(null===(t=l.deployment)||void 0===t||null===(n=t.activeRelease)||void 0===n?void 0:n.pendingChanges)||[],error:c}:{loading:!1,pendingChanges:null,error:new Error("Repl not found")}}({replId:e.replId}),n=a.useMemo((function(){return t.pendingChanges?t.pendingChanges.slice().sort((function(e,t){return e.fileName.localeCompare(t.fileName)})).map((function(e){return{file:e,pathDepth:(0,v.U$)(e.fileName)}})).sort((function(e,t){return e.pathDepth-t.pathDepth})).map((function(e){return e.file})):[]}),[t.pendingChanges]);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){x(e,t,n[t])}))}return e}({},t,{pendingChanges:n})}function C(e){var t,n,r=e.repl,s=(0,l.H)(),h=w(a.useState(!1),2),m=h[0],v=h[1],g=E({replId:r.id}),x=(0,p.r)(),j=(0,u.Y)("",Z),C=0!==(null===(t=g.pendingChanges)||void 0===t?void 0:t.length),_=Boolean(j.error||!C||x.loading),O="";return j.error?O="Please fill out the form":C||(O="No changes to publish in this release"),m?(0,o.tZ)(b.q,{repl:r,isUpdate:!0}):(0,o.BX)(k,{onSubmit:function(){var e,t=(e=i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!_&&!j.validate()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,x.createRelease({input:{replId:r.id,description:j.value}});case 5:if(!e.sent.error){e.next=8;break}return e.abrupt("return");case 8:v(!0);case 9:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){y(o,r,i,a,c,"next",e)}function c(e){y(o,r,i,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),css:[c.l0.p(16),c.l0.colWithGap(16)],children:[(0,o.tZ)(c.h4,{level:1,variant:"subheadBig",children:"Publish a new release"}),(0,o.BX)(c.G7,{css:[c.l0.colWithGap(8)],children:[(0,o.tZ)(c.h4,{level:2,variant:"subheadDefault",children:"Modified files"}),(0,o.tZ)(S,{pendingChangesState:g})]}),!g.loading&&g.pendingChanges.length>0&&(0,o.BX)(c.G7,{css:[c.l0.colWithGap(4)],children:[(0,o.tZ)("label",{htmlFor:s("description"),css:[c.l0.color.foregroundDimmer,{fontSize:c.TV.fontSizeSmall,lineHeight:c.TV.lineHeightSmall}],children:"Description"}),(0,o.tZ)(c.B,{id:s("description"),onChange:function(e){return j.setValue(e.target.value)},css:[c.l0.width("100%"),{minHeight:80,resize:"vertical"}],placeholder:"Explain what has changed about your template"}),j.error&&(0,o.tZ)(c.E_,{icon:(0,o.tZ)(d.Z,{}),text:null===(n=j.error)||void 0===n?void 0:n.message,colorway:"negative"})]}),(0,o.tZ)(c.G7,{children:x.error&&(0,o.tZ)(c.E_,{icon:(0,o.tZ)(d.Z,{}),text:x.error,colorway:"negative"})}),(0,o.tZ)(c.G7,{css:[c.l0.align.end],children:(0,o.tZ)(c.u,{tooltip:O,placement:"bottom",isDisabled:!O,children:(0,o.tZ)(c.zx,{text:"Publish",type:"submit",colorway:"primary",iconLeft:(0,o.tZ)(f.Z,{}),disabled:_})})})]})}},81605:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(36793),i=n(30617),o=n(67294);function a(){var e=(0,i.Z)(),t=e.lspnix,n=e.lsp,a=(0,r.Z)().preferences.codeIntelligence;(0,o.useEffect)((function(){if(!a)return n.stop(),void t.disable();n.start(),t.enable()}),[t,n,a])}},68906:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(70240),i=n(93577),o=n(5560),a=n(67294),c=n(67289),l=n(30617),s=n(32117);function u(e){var t=Boolean(window.performance.getEntriesByName(r.Iy.pageNavStart,"mark").length),n="time to code";window.performance.measure(n,t?r.Iy.pageNavStart:void 0);var i=window.performance.getEntriesByName(n,"measure")[0];if(i){var o="page invisible fetch connection metadata",a=i.duration;if(Boolean(window.performance.getEntriesByName(r.Iy.fetchConnectionMetadataPageInvisibleStart,"mark").length))window.performance.measure(o,r.Iy.fetchConnectionMetadataPageInvisibleStart,r.Iy.fetchConnectionMetadataPageInvisibleEnd),a-=window.performance.getEntriesByName(o,"measure")[0].duration,window.performance.clearMeasures(o),window.performance.clearMarks(r.Iy.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(r.Iy.fetchConnectionMetadataPageInvisibleEnd);r.kg.time("time to code minus page invisible",a,{ssr:!t,workspaceType:e}),r.kg.time("time to code with page invisible",i.duration,{ssr:!t,workspaceType:e}),window.performance.clearMeasures(n),s.v.addTiming("time_to_code_minus_page_invisible",a),s.v.addTiming("time_to_code_with_page_invisible",i.duration)}else r.kg.info("Could not obtain measure for time to code",{workspaceType:e})}var d=new Set;function f(e){var t=e.workspaceType,n=(0,o.Z)(),r=(0,i.Z)(),s=(0,l.Z)().fs;(0,a.useEffect)((function(){var e;if(r&&!d.has(n))return d.add(n),e=(0,c.Mb)(r)?s.watchOtFile(r,{onReady:function(){u(t),e()}}):s.watchFile(r,{onChange:function(){u(t),e()}})}),[r,n,t,s])}},34699:function(e,t,n){n.d(t,{F:function(){return d},x:function(){return u}});var r=n(67294),i=n(33539),o=n(90601),a=n(91131);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=(0,a.cn)([]);function u(e,t){var n=t.run,i=t.enabled,o=void 0===i||i,c=(0,a.b9)(s);(0,r.useEffect)((function(){if(o){var t={shortcut:e,run:n};return c((function(e){return l(e).concat([t])})),function(){c((function(e){return e.filter((function(e){return e!==t}))}))}}}),[e,n,c,o])}function d(){var e=(0,a.Dv)(s);(0,r.useEffect)((function(){var t=function(t){(0,i.b)(t);var n=!0,r=!1,a=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var s,u=c.value,d=u.shortcut,f=u.run;d.cmdOrCtrlKey===Boolean((0,o.j)(t))&&d.altKey===Boolean(t.altKey)&&d.shiftKey===Boolean(t.shiftKey)&&(null===(s=d.key)||void 0===s?void 0:s.toLowerCase())===t.key.toLowerCase()&&(t.preventDefault(),f())}}catch(p){r=!0,a=p}finally{try{n||null==l.return||l.return()}finally{if(r)throw a}}};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[e])}},84637:function(e,t,n){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function a(e){return function(e){if(Array.isArray(e))return e}(e)||o(e)||l(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return function(e){if(Array.isArray(e))return r(e)}(e)||o(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function s(e,t){var n=a(t),r=n[0],i=n.slice(1);if("floating"===r){if(e.floating)return null;var o=i[0];if("number"!==typeof o)throw new Error("Expected floatingIndex");var c=e.floating[o];if(c)throw new Error("Expected paneGroup");return c}if("tiling"!==r)throw new Error("Expected tiling path");var l=e.tiling;if(!l)return null;var s=l,u=i.length,d=0,f=!0,p=!1,h=void 0;try{for(var m,b=i[Symbol.iterator]();!(f=(m=b.next()).done);f=!0){var v=m.value;if("paneGroup"===s.type)break;if("number"!==typeof v)throw new Error("Expected number");d++,s=s.children[v]}}catch(g){p=!0,h=g}finally{try{f||null==b.return||b.return()}finally{if(p)throw h}}return u===d?s:null}function u(e,t){var n=e.floating.find((function(e){return e.panes.includes(t)}));if(n)return{index:n.panes.indexOf(t),paneGroup:n,paneGroupPath:["floating",e.floating.indexOf(n)],floating:!0};var r=e.tiling;if(!r)throw new Error("Invalid paneId");for(var i=[{paneGroupPath:["tiling"],parent:null,grandparent:null,node:r}];i.length;){var o=i.shift();if(!o)throw new Error("Expected item");if("split"===o.node.type){var a=!0,l=!1,s=void 0;try{for(var u,d=o.node.children[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value;i.push({grandparent:o.parent,parent:o.node,node:f,paneGroupPath:c(o.paneGroupPath).concat([o.node.children.indexOf(f)])})}}catch(p){l=!0,s=p}finally{try{a||null==d.return||d.return()}finally{if(l)throw s}}}else if(o.node.panes.includes(t))return{paneGroupPath:o.paneGroupPath,paneGroup:o.node,parent:o.parent,grandparent:o.grandparent,index:o.node.panes.indexOf(t),floating:!1}}throw new Error("Invalid paneId")}n.d(t,{K:function(){return s},R:function(){return u}})},23880:function(e,t,n){n.d(t,{Tu:function(){return l},mZ:function(){return o}});var r=n(84637),i=n(23608);function o(e,t){if(t.isFloating)e.floating.push({type:"floatingPaneGroup",panes:t.panes,activeIndex:t.activeIndex||0,rect:t.rect});else{var n=null;if(Array.isArray(t.relativeTo))n=t.relativeTo;else n=(0,r.R)(e,t.relativeTo).paneGroupPath;if(null===n)throw new Error("Expected relativeTo");if("tiling"!==n[0])throw new Error("Expected tiling path");var o=t.placement,c=t.panes,l=t.percent,s=t.activeIndex,u="above"===o||"below"===o,d="rightOf"===o||"below"===o;if(e.tiling||1!==n.length){if(!e.tiling)throw new Error("Expected tiling");var f=(0,r.K)(e,n);if(!f)throw new Error("Expected node");if(1!==n.length||"replace"!==o){if(1===n.length&&"paneGroup"===e.tiling.type){var p=[e.tiling];return e.tiling={type:"split",percent:100,stacked:u,children:p},void a({insertIndex:d?1:0,panes:c,children:p,percent:l})}if(1===n.length&&"split"===e.tiling.type){if(Boolean(e.tiling.stacked)===Boolean(u))return void a({panes:c,percent:l,insertIndex:d?e.tiling.children.length:0,children:e.tiling.children});var h={panes:c,type:"paneGroup",percent:void 0===l?50:l,activeIndex:void 0===s?0:s},m=d?[f,h]:[h,f];return f.percent=100-h.percent,void(e.tiling={type:"split",stacked:u,children:m,percent:100})}if(0===n.length)throw new Error("Expected relativeTo length");var b=(0,r.K)(e,(0,i.I)(n));if("split"!==(null===b||void 0===b?void 0:b.type))throw new Error("Expected split parent");if("replace"!==o)if(Boolean(b.stacked)!==Boolean(u))if(Boolean(b.stacked)===Boolean(u));else{var v={panes:c,type:"paneGroup",percent:void 0===l?50:l,activeIndex:void 0===s?0:s},g=d?[f,v]:[v,f],y=f.percent;f.percent=100-v.percent;var x=b.children.indexOf(f);b.children[x]={type:"split",stacked:u,children:g,percent:y}}else{var w=b.children.indexOf(f);a({panes:c,percent:l,insertIndex:d?w+1:w,children:b.children})}else{var k=b.children.indexOf(f);b.children.splice(k,1,{panes:c,percent:f.percent,type:"paneGroup",activeIndex:void 0===s?0:s})}}else e.tiling={type:"paneGroup",percent:100,panes:c,activeIndex:void 0===s?0:s}}else e.tiling={type:"paneGroup",percent:100,panes:c,activeIndex:0}}}function a(e){var t=e.percent,n=e.children,r=e.panes,i=e.insertIndex;if(void 0===t){var o=n.reduce((function(e,t){return e+t.percent}),0)/n.length,a=100/(100+o);n.forEach((function(e){e.percent=e.percent*a}));var c={panes:r,type:"paneGroup",percent:o*a,activeIndex:0};n.splice(i,0,c)}else{var l=(100-t)/100;n.forEach((function(e){e.percent=e.percent*l}));var s={panes:r,type:"paneGroup",percent:t,activeIndex:0};n.splice(i,0,s)}}function c(e,t){var n=t.index,r=t.paneId,i=t.activate,o=void 0===i||i;if(void 0!==n&&n>e.panes.length)throw new Error("Invalid index");var a=void 0===n?e.panes.length:n;e.panes.splice(a,0,r),o&&(e.activeIndex=a)}function l(e,t){if("floating"!==t.paneGroupPath[0]){var n=(0,r.K)(e,t.paneGroupPath);if("paneGroup"!==(null===n||void 0===n?void 0:n.type))throw new Error("Expected paneGroup");c(n,t)}else{var i=t.paneGroupPath[1];if("number"!==typeof i)throw new Error("Expected floatingIndex");var o=e.floating[i];if(!o)throw new Error("Expected paneGroup");c(o,t)}}},23608:function(e,t,n){function r(e){if(e.length<1)throw new Error("Expected a path with a parent");return e.slice(0,-1)}n.d(t,{I:function(){return r}})},79771:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(84637);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){e.panes.splice(t,1),0!==e.activeIndex&&(t>e.activeIndex||(e.activeIndex=e.activeIndex-1))}function c(e,t){var n=(0,r.R)(e,t);if(n.floating)if(1===n.paneGroup.panes.length){var i=n.paneGroupPath[1];if("number"!==typeof i)throw new Error("Expected floatingIndex");e.floating.splice(i,1)}else a(n.paneGroup,n.index);else{var c=n.paneGroup,l=n.parent,s=n.grandparent;if(!c)throw new Error("paneGroup eith paneId not found: "+t);var u=c.panes.indexOf(t);if(-1===u)throw new Error("Expected paneIndex");if(!l)return 1===c.panes.length?void(e.tiling=null):void a(c,u);var d=l.children.indexOf(c);if(-1===d)throw new Error("Expected paneGroupIndex");var f=l.children;if(c.panes.length>1)a(c,u);else if(f.splice(d,1),f.length>1){var p=100/f.reduce((function(e,t){return e+t.percent}),0);f.forEach((function(e){e.percent=e.percent*p}))}else{var h=o(f,1)[0];if(!s)return h.percent=100,void(e.tiling=h);var m=s.children.indexOf(l);if(-1===m)throw new Error("Expected parentIndex");h.percent=l.percent,s.children[m]=h}}}},56801:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(84637),i=n(23608);function o(e,t){var n=t.leftPath,o=t.percent,a=t.snapPercent,c=void 0===a?0:a,l=(0,r.K)(e,n);if(!l)throw new Error("Expected leftNode");var s=(0,i.I)(n),u=(0,r.K)(e,s);if("split"!==(null===u||void 0===u?void 0:u.type))throw new Error("Expected splitNode");var d=u.children.indexOf(l);if(-1===d)throw new Error("Expected leftNodeIndex");var f=d+1,p=u.children[f];if(!p)throw new Error("Expected rightNode");if(o<=c){if(l.percent=0,o<0&&d>0)for(var h=Math.abs(o),m=d-1;h>0;){var b=u.children[m];if(b.percent>h){b.percent-=h;break}if(h-=b.percent,b.percent=0,0===m)break;m--}var v=u.children.reduce((function(e,t){return t===p?e:e+t.percent}),0);p.percent=100-v}else{var g=l.percent+p.percent,y=u.children.slice(d).reduce((function(e,t){return e+t.percent}),0);if(o>g-c){if(l.percent=Math.min(y,Math.max(g,o)),p.percent=0,o>g&&f<u.children.length-1)for(var x=o-g,w=f+1;x>0;){var k=u.children[w];if(k.percent>x){k.percent-=x;break}if(x-=k.percent,k.percent=0,w===u.children.length-1)break;w++}}else{var Z=l.percent-o;p.percent=p.percent+Z,l.percent=o}}}},54372:function(e,t,n){n.d(t,{W1:function(){return ee},_E:function(){return z},CK:function(){return A},mx:function(){return R},SG:function(){return I},g3:function(){return L},J9:function(){return O},sq:function(){return J},ZP:function(){return q},V1:function(){return Y},g4:function(){return B},nJ:function(){return te},uc:function(){return P},gg:function(){return F},Eh:function(){return V},z:function(){return H},pc:function(){return T},vv:function(){return K},rR:function(){return N},YF:function(){return M},tt:function(){return Q}});var r=n(91131),i=n(64824),o=n(62991),a=n.n(o),c=n(84637),l=n(23608);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){var n=t.size,r=t.gap,i=t.headerHeight,o=t.inset,a=void 0===o?0:o,s=[],d=[],f=[],p=[],h=null;function m(t,n,o,a){var s=n.children.indexOf(t),b=n.children.length,v=n.stacked?o.height:o.width;var g=function(){var e=o.width,a=o.height,c=t.percent/100;return n.stacked?a=(v-(r*(b-1)+i*b))*c+i:e=(v-r*(b-1))*c,{width:e,height:a}}(),y=g.width,x=g.height,w=function(){var e=o.x,t=o.y;if(0===s)return{x:e,y:t};if(!h)throw new Error("Expected previousRect");return n.stacked?t=h.y+h.height+r:e=h.x+h.width+r,{x:e,y:t}}(),k={x:w.x,y:w.y,height:x,width:y};if(h=k,"paneGroup"===t.type){var Z,j={x:k.x,y:k.y+i,width:k.width,height:k.height-i},S={x:j.x,y:j.y-i,width:j.width,height:i};p.push({rect:S,panes:t.panes,activeIndex:t.activeIndex,path:a}),(Z=d).push.apply(Z,u(t.panes.map((function(e,n){return{paneId:e,rect:j,active:n===t.activeIndex}}))))}else t.children.forEach((function(e,n){return m(e,t,k,u(a).concat([n]))}));if(0!==s){var E={x:k.x-(n.stacked?0:r),y:k.y-(n.stacked?r:0),width:n.stacked?k.width:r,height:n.stacked?r:k.height},C=(0,l.I)(a),_=u(C).concat([s-1]),O=(0,c.K)(e,_);if(!O)throw new Error("Expected leftNode");var T=void 0;0===O.percent?T="left":0===t.percent&&(T="right"),f.push({parentPath:C,leftPath:_,rightPath:a,stacked:n.stacked,rect:E,snapped:T})}}var b={x:a,y:a,width:n.width-2*a,height:n.height-2*a},v=e.tiling;if("paneGroup"===(null===v||void 0===v?void 0:v.type)){var g,y={x:b.x,y:b.y+i,width:b.width,height:b.height-i},x={x:y.x,y:y.y-i,width:y.width,height:i};p.push({rect:x,panes:v.panes,activeIndex:v.activeIndex,path:["tiling"]}),(g=d).push.apply(g,u(v.panes.map((function(e,t){return{paneId:e,rect:y,active:t===v.activeIndex}}))))}else v&&v.children.forEach((function(e,t){return m(e,v,b,["tiling",t])}));return e.floating.forEach((function(e,t){var n,r=e.rect,o={height:i,width:r.width,x:r.x,y:r.y},a={x:r.x,y:r.y+i,width:r.width,height:Math.max(r.height-i,0)};p.push({rect:o,panes:e.panes,activeIndex:e.activeIndex,path:["floating",t]}),(n=s).push.apply(n,u(e.panes.map((function(t,n){return{paneId:t,rect:a,active:n===e.activeIndex}}))))})),{tiles:d,gutters:f,headers:p,floating:s}}var f=n(83964),p=n(18172),h=n(79771),m=n(23880);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=(0,r.cn)(null),g=((0,r.cn)(null,(function(e,t,n){switch(n.type){case"start":t(g,n);break;case"update":t(y,n);break;case"end":t(x,n)}})),(0,r.cn)(null,(function(e,t,n){var r=e(V).find((function(e){return e.paneId===n.paneId}));if(!r)throw new Error("Expected pane");var i="tile"===r.type&&n.shiftKey||"floating"===r.type&&!n.shiftKey;t(ee,{paneId:n.paneId}),t(v,{fromRect:r.rect,toRect:r.rect,dropBehavior:i?"float":"tile",paneId:r.paneId,active:!1})}))),y=(0,r.cn)(null,(function(e,t,n){var r=e(A),i=e(B),o=e(V),a=o.find((function(e){return e.paneId===n.paneId}));if(!a)throw new Error("Expected pane");var c=e(v);if(c){var l=c.fromRect,s=c.toRect,u=.05*l.width,d=.05*l.height,p=n.shiftKey,h=Math.abs(s.x-l.x)>u||Math.abs(s.y-l.y)>d,m=null,g=H(a.paneId);if(h&&"tile"===c.dropBehavior){var y={x:n.mouse.x-r.x,y:n.mouse.y-r.y},x=!0,w=!1,k=void 0;try{for(var Z,j=o[Symbol.iterator]();!(x=(Z=j.next()).done);x=!0){var S=Z.value;if("tile"===S.type&&S.paneId!==c.paneId){var E=S.paneId===a.paneId?c.fromRect:S.rect;if((0,f.V0)(y,E)){var C=e(H(S.paneId));if("commands"===e(C.data).type&&S.paneId!==a.paneId){m={rect:S.rect,placement:"replace",over:S.paneId};break}var _=(0,f.QN)(y,E);if(_){m={rect:_.rect,placement:_.placement,over:S.paneId};break}}}}}catch(I){w=!0,k=I}finally{try{x||null==j.return||j.return()}finally{if(w)throw k}}var O={x:0,y:0,width:r.width,height:r.height};null===i.tiling&&(0,f.V0)(y,O)&&(m={rect:O,over:null,placement:"replace"})}var T={x:l.x+n.delta.x,y:l.y+n.delta.y,width:l.width,height:l.height};t(g,(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}({},e,{rect:T,isBeingDragged:!0,isDialog:!1,dropBehavior:p?"float":"tile"})})),t(v,{fromRect:c.fromRect,toRect:T,dropBehavior:p?"float":"tile",paneId:a.paneId,dropPreview:m,active:!0})}})),x=(0,r.cn)(null,(function(e,t,n){var r=function(e){return Math.max(-8,e)},i=e(V).find((function(e){return e.paneId===n.paneId}));if(!i)throw new Error("Expected pane");var o=e(B),a=e(v);if(a){var c=a.dropBehavior,l=a.dropPreview,s=(0,p.ZP)(o,(function(e){if("tile"===c&&"tile"===i.type&&(null===l||void 0===l?void 0:l.over)){var t=a.paneId,n=l.placement,o=l.over;if(t===o)return;!function(e,t){var n=t.from,r=t.to,i=t.placement;(0,h.Z)(e,n),(0,m.mZ)(e,{relativeTo:r,panes:[n],placement:i})}(e,{from:t,to:o,placement:n})}else if("float"!==c||"floating"!==i.type)if("float"!==c||"tile"!==i.type){if(l&&"tile"===c&&"floating"===i.type)return null===e.tiling?void(e.tiling={panes:[i.paneId],type:"paneGroup",percent:100,activeIndex:0}):void function(e,t){var n=t.paneId,r=t.placement,i=t.to;(0,h.Z)(e,n),null!==i?(0,m.mZ)(e,{relativeTo:i,panes:[n],placement:r}):e.tiling={panes:[n],percent:100,type:"paneGroup",activeIndex:0}}(e,{paneId:i.paneId,placement:l.placement,to:l.over})}else{var s=a.toRect;!function(e,t){var n=t.paneId,r=t.rect;(0,h.Z)(e,n),(0,m.mZ)(e,{isFloating:!0,panes:[n],rect:r,activeIndex:0})}(e,{paneId:a.paneId,rect:{x:s.x,y:r(s.y),width:s.width,height:s.height}})}else{var u=e.floating.find((function(e){return e.panes.includes(i.paneId)}));if(!u)throw new Error("Expected floating");var d=a.toRect;u.rect={x:d.x,y:r(d.y),width:d.width,height:d.height}}}));t(v,null),t(M,s)}})),w=n(17982),k=n(78977);function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){j(e,t,n[t])}))}return e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e){return function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"===typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}var O=0,T=30,I=8,A=(0,r.cn)({x:0,y:0,width:0,height:0}),P=(0,r.cn)((function(e){var t=e(A),n=t.x-8;return{x:-n,y:0,width:t.width+n,height:t.height}})),N=(0,r.cn)(null,(function(e,t,n){t(A,n),t(M,e(B))})),R=(0,r.cn)((function(e){var t;return null===(t=e(v))||void 0===t?void 0:t.dropPreview})),z=(0,r.cn)(!0),B=((0,r.cn)(null,(function(e,t,n){var r=H(n),i=e(r);e(i.isMaximizedAtom)?t(i.isMaximizedAtom,!1):(e(V).forEach((function(n){e(n.isMaximizedAtom)&&t(n.isMaximizedAtom,!1)})),t(ee,{paneId:n}),t(i.isMaximizedAtom,!0))})),(0,r.cn)({tiling:null,floating:[]})),D=(0,r.cn)([]),U=(0,r.cn)([]),L=(0,r.cn)([]),X=(0,r.cn)([]),M=(0,r.cn)(null,(function(e,t,n){var r=function(n){var r=n.paneId,i=n.rect,c=n.type,l=n.isHidden;o.delete(r);var s=H(r),u=e(s),d=(0,p.ZP)(u,(function(e){e.paneId=r,e.rect=i,e.type=c,e.isDialog=!1,e.dropBehavior=null,e.isHidden=l}));a()(u,d)||t(s,d)},i=e(A),o=new Set(e(F)),c=new Set(e(L)),l=new Set(e(L)),s=d(n,{gap:I,size:{width:i.width,height:i.height},headerHeight:O}),u=s.tiles,h=s.floating,m=s.gutters,b=s.headers,v=m.map(f.xH);t(L,v);var g=u.map((function(e){return e.paneId}));t(D,g);var y=h.map((function(e){return e.paneId}));t(U,y);var x=[];b.forEach((function(n){var r={headerId:(0,f.T6)(n),rect:n.rect,panes:n.panes,activeIndex:n.activeIndex,path:n.path};l.delete(r.headerId);var i=$(r.headerId),o=e(i);x.push(r.headerId),a()(o,r)||t(i,r)})),t(X,x),u.forEach((function(e){var t=e.paneId,n=e.rect,i=e.active;r({paneId:t,rect:n,isHidden:!i,type:"tile"})})),h.forEach((function(e){var t=e.paneId,n=e.rect,i=e.active;r({paneId:t,rect:n,isHidden:!i,type:"floating"})})),m.forEach((function(n){var r={handleId:(0,f.xH)(n),rect:n.rect,parentPath:n.parentPath,leftPath:n.leftPath,rightPath:n.rightPath,stacked:n.stacked,snapped:n.snapped};c.delete(r.handleId);var i=K(r.handleId),o=e(i);a()(o,r)||t(i,r)})),o.forEach(H.remove),c.forEach(K.remove),l.forEach($.remove),t(B,n)})),F=(0,r.cn)((function(e){var t=C(e(D)),n=C(e(U));return C(t).concat(C(n))})),G={x:0,y:0,width:0,height:0},W={type:"commands",data:{autoFocus:!1}};var H=(0,i.xu)((function(e){return(0,r.cn)(function(e){return{paneId:e,type:"tile",rect:G,data:(0,r.cn)(S({},W)),isActiveAtom:(0,r.cn)(!1),isHidden:!1,isHighlightedAtom:(0,r.cn)(!1),isMaximizedAtom:(0,r.cn)(!1),isDialog:!1,dropBehavior:null}}(e))})),V=(0,r.cn)((function(e){return e(F).map((function(t){return e(H(t))}))})),K=(0,i.xu)((function(e){return(0,r.cn)(function(e){return{handleId:e,rect:G,stacked:!1,parentPath:["tiling"],leftPath:["tiling"],rightPath:["tiling"]}}(e))})),$=(0,i.xu)((function(e){return(0,r.cn)(function(e){return{headerId:e,rect:G,panes:[],path:["tiling"],activeIndex:0}}(e))})),q=(0,r.cn)((function(e){return null!==e(w.v)||null!==e(k.o)})),Y=(0,r.cn)({}),Q=(0,r.cn)(null),J=(0,r.cn)(null,(function(e,t,n){t(M,n.layout),Object.entries(n.data).forEach((function(n){var r=E(n,2),i=r[0],o=r[1],a=e(H(i));t(a.data,o)}))})),ee=(0,r.cn)(null,(function(e,t,n){var r=e(Y),i=H(n.paneId);t(Y,S({},r,j({},n.paneId,Date.now())));var o=e(V).find((function(t){return e(t.isActiveAtom)}));o&&t(o.isActiveAtom,!1),t(e(i).isActiveAtom,!0)})),te=(0,r.cn)((function(e){var t=e(A);return t.width&&t.height}));(0,r.cn)((function(e){return e(V).find((function(t){return e(t.isActiveAtom)}))||null})),(0,r.cn)((function(e){return e(V).map((function(t){return{isActive:e(t.isActiveAtom),data:e(t.data)}}))}))},17982:function(e,t,n){n.d(t,{H:function(){return l},v:function(){return c}});var r=n(91131),i=n(18172),o=n(54372),a=n(83964),c=(0,r.cn)(null),l=(0,r.cn)(null,(function(e,t,n){var r=e(o.g4);if("end"===n.type)return t(c,null),void t(o.YF,r);if("update"!==n.type){var l=e(o.Eh).find((function(e){return e.paneId===n.paneId}));if(!l)throw new Error("Expected pane");t(o.W1,{paneId:n.paneId}),t(c,{paneId:n.paneId,side:n.side,rectStart:l.rect})}else{var s=e(c);if(!s)throw new Error("Expected floatingResizeState");var u=(0,a.XR)(s.rectStart,{delta:n.moveDelta,side:s.side}),d=s.paneId,f=(0,i.ZP)(r,(function(e){var t=e.floating.find((function(e){return e.panes.includes(d)}));if(!t)throw new Error("Expected floating");var n=t.rect;n.x=u.x,n.y=u.y,n.width=u.width,n.height=u.height}));t(o.YF,f)}}))},78977:function(e,t,n){n.d(t,{N:function(){return u},o:function(){return s}});var r=n(91131),i=n(18172),o=n(54372),a=n(84637),c=n(56801),l=n(23608);var s=(0,r.cn)(null),u=(0,r.cn)(null,(function(e,t,n){if("end"!==n.type)if("update"!==n.type){var r=e(o.g4),u=n.stacked?window.innerHeight:window.innerWidth,d=(0,a.K)(r,n.leftPath);if(!d)throw new Error("Expected left node");var f=(0,l.I)(n.leftPath),p=d.percent,h=function(e,t){var n=t.splitPath,r=(0,a.K)(e,n);if(!r||"split"!==r.type)throw new Error("Expected split node");for(var i=100,o=(0,l.I)(n);o.length;){var c=(0,a.K)(e,o);if(!c)break;o=(0,l.I)(o),"split"===c.type&&c.stacked===r.stacked&&(i*=c.percent/100)}return i}(r,{splitPath:f}),m=e(o.CK),b=o.pc/u*100,v=(0,a.K)(r,f);if("split"!==(null===v||void 0===v?void 0:v.type))throw new Error("Expected parent split node");var g=v.children.length,y=n.stacked?o.SG*(g-1)+o.J9*g:o.SG*(g-1),x=((n.stacked?m.height:m.width)-y)*(h/100);t(s,{stacked:n.stacked,leftPath:n.leftPath,startPercent:p,resizeDistance:x,snapPercent:b,initialLayout:r})}else{var w=e(s);if(!w)throw new Error("Expected tilingResize");var k=w.stacked,Z=w.leftPath,j=w.startPercent,S=w.resizeDistance,E=w.initialLayout,C=w.snapPercent,_=j+(k?n.moveDelta.y:n.moveDelta.x)/S*100,O=(0,i.ZP)(E,(function(e){(0,c.Z)(e,{leftPath:Z,percent:_,snapPercent:C})}));t(o.YF,O)}else t(s,null)}))},83964:function(e,t,n){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var n=e.x,r=e.y;return n>t.x&&n<t.x+t.width&&r>t.y&&r<t.y+t.height}function c(e,t){var n=function(e){var t=e.rect,n=e.point,r=t.height>t.width?t.width/t.height:1,i=t.width>t.height?t.height/t.width:1,o=(n.x-t.x)*i,a=(t.x+t.width-n.x)*i,c=(n.y-t.y)*r,l=(t.y+t.height-n.y)*r,s=Math.min(o,a,c,l);return s===o?"left":s===a?"right":s===c?"top":"bottom"}({point:e,rect:t}),r={x:t.x,y:t.y,width:t.width,height:t.height},i="below";return"top"===n?(r.height=t.height/2,i="above"):"bottom"===n?(r.height=t.height/2,r.y=t.y+t.height/2,i="below"):"left"===n?(r.width=t.width/2,r.x=t.x,i="leftOf"):"right"===n&&(r.width=t.width/2,r.x=t.x+t.width/2,i="rightOf"),{placement:i,rect:r}}function l(e){var t="touches"in e?e.touches[0]:e;return{pageX:t.pageX,pageY:t.pageY}}function s(e,t){var n=t.side,r=t.delta,o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}({},e);return n.startsWith("n")?(o.height=e.height-r.y,o.y=e.y+r.y):n.startsWith("s")&&(o.height=e.height+r.y),n.includes("e")?o.width=e.width+r.x:n.includes("w")&&(o.width=e.width-r.x,o.x=e.x+r.x),o}function u(e){return"handle:"+e.leftPath.join(":")}function d(e){return"header:"+e.path.join(":")}function f(e,t){var n=o(function(e,t){var n=e.paneData,r=[];return Object.entries(n).forEach((function(e){var n=o(e,2),i=n[0],a=n[1];t({paneId:i,data:a})&&r.push({paneId:i,data:a})})),r}(e,t),1);return n[0]||null}n.d(t,{QN:function(){return c},T6:function(){return d},V0:function(){return a},XR:function(){return s},kA:function(){return f},uJ:function(){return l},xH:function(){return u}})},38657:function(e,t,n){n.d(t,{p:function(){return r}});var r=1e3},50348:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(67294),i=n(30617);function o(){var e=(0,i.Z)().container,t=(0,r.useState)(e.getConnectionState()),n=t[0],o=t[1];return(0,r.useEffect)((function(){return e.onConnectionStateChanged(o)}),[e]),n}},85133:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(67294),i=n(30617),o=n(27754);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(){var e,t,n=(0,i.Z)().container,a=c(r.useState(null!==(t=null===(e=n.getContext())||void 0===e?void 0:e.repl)&&void 0!==t?t:null),2),l=a[0],s=a[1];return r.useEffect((function(){return n.onConnectionStateChanged((function(e){var t,r;e===o.e.CONNECTED&&s(null!==(r=null===(t=n.getContext())||void 0===t?void 0:t.repl)&&void 0!==r?r:null)}))}),[s,n]),l}},21644:function(e,t,n){n.d(t,{D3:function(){return o},If:function(){return i},KQ:function(){return r},cU:function(){return a},xz:function(){return c}});var r=function(e){return{op:"add",path:"run",value:JSON.stringify(e)}},i=function(e){return{op:"add",path:"entrypoint",value:JSON.stringify(e)}},o=function(e){return{op:"add",path:"compile",value:JSON.stringify(e)}},a=function(e){return{op:"add",path:"nix/channel",value:JSON.stringify(e)}},c=function(e){return{op:"remove",path:e,value:""}}},36377:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(67294),i=n(57923),o=n(62776),a=n(41045);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){var t=e.path,n=e.initialExpanded,c=e.fs,s=l(r.useState(null),2),u=s[0],d=s[1],f=l(r.useState(null),2),p=f[0],h=f[1],m=l(r.useState(Boolean(n)),2),b=m[0],v=m[1],g=(0,i.Z)();r.useEffect((function(){if(b){var e=c.watchDir(t,{onChange:function(e){d(e.filter((function(e){return!(0,o.isHiddenFile)(t===a.Q?e.filename:t+"/"+e.filename)})))},onError:function(e){h(e)}});return function(){g.current&&d(null),e()}}}),[c,t,b,d,h]);var y=r.useCallback((function(){v(!0)}),[]),x=r.useCallback((function(){v(!1)}),[]);return b?p?{collapse:x,expand:y,children:null,expanded:b,loading:!1,error:p}:u?{collapse:x,expand:y,children:u,loading:!1,error:p,expanded:b}:{collapse:x,expand:y,children:u,loading:!0,error:p,expanded:b}:{collapse:x,expand:y,children:null,loading:!1,error:null,expanded:b}}},82053:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(78120),i=n(39453),o=n(37510);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var n=[];if(!e.length)return n;var a=r.xv.of(t.split("\n"));if(1===e.length){var l=c(e,1)[0],s=l.range,u=s.start,d=s.end,f=l.newText;if(0===(0,i.R)(a,u))if((0,i.R)(a,d)===a.length)return(0,o.sQ)(t,f)}var p=!0,h=!1,m=void 0;try{for(var b,v=e[Symbol.iterator]();!(p=(b=v.next()).done);p=!0){var g=b.value,y=g.range,x=g.newText,w=[],k=(0,i.R)(a,y.start);k>0&&w.push(k);var Z=(0,i.R)(a,y.end);Z>k&&w.push({d:Z-k}),x.length>0&&w.push(x),n=(0,o.qC)(n,(0,o.vs)(w,n,"right"))}}catch(j){h=!0,m=j}finally{try{p||null==v.return||v.return()}finally{if(h)throw m}}return n}},22429:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(67294),i=n(30617),o=n(85133),a=n(54245),c=n(70240),l=n(31470);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function d(e){return Math.floor(performance.now()-e.startTime)}var f=new WeakSet;function p(e){var t=e.client,n=e.replId,r=e.language;if(!f.has(t)){f.add(t);var i=new Map,o=function(e){return{method:e.method,replId:n,language:r,startTime:Math.floor(e.startTime)}},s=(0,a.Z)((function(e,t){var n=d(t);n>1e4&&c.kg.time("LSP unresponsive request",n,o(t))})),p=setInterval((function(){i.forEach((function(e){s(e.id,e)}))}),2e3);return(0,l.uf)([t.onRequest((function(e){var t=e.id,n=e.data;Math.random()<.01&&i.set(t,{id:t,method:n.method,startTime:performance.now()})})),t.onResponse((function(e){var t=e.id,n=e.error,r=i.get(t);null!=r&&(i.delete(t),c.kg.time("LSP request",d(r),u({},o(r),{result:null==n?"ok":"error"})))})),t.onCancelRequest((function(e){var t=i.get(e);null!=t&&(i.delete(e),c.kg.time("LSP request",d(t),u({},o(t),{result:"cancelled"})))})),function(){return clearInterval(p)},function(){return f.delete(t)}])}}var h=n(15111);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){var t=(0,o.Z)(),n=(0,i.Z)(),a=n.lsp,c=n.lspnix,l=b(r.useState(null),2),s=l[0],u=l[1];return r.useEffect((function(){if(null===t||void 0===t?void 0:t.language){var n,r;if(t.language.startsWith("nix")||t.language.startsWith("html"))n=c.onClient(e,u);else(null===(r=a.getClient())||void 0===r?void 0:r.isSupportedFile(e))?u(a.getClient()):u(null),n=a.onClient((function(t){(null===t||void 0===t?void 0:t.isSupportedFile(e))?u(t):u(null)}));return function(){n(),u(null)}}}),[a,c,e,null===t||void 0===t?void 0:t.language]),r.useEffect((function(){if(s&&t)return p({client:s,replId:t.id,language:(0,h.D)(e)})}),[s,t,e]),s}},49337:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(67294);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){var t=e.presence,n=o(r.useState(t.getActiveUsers()),2),i=n[0],a=n[1];return r.useEffect((function(){return a(t.getActiveUsers()),t.onActiveUsersChange((function(e){return a(e)}))}),[t]),i}},39550:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(67294),i=n(30617);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(){var e=(0,i.Z)().presence,t=a(r.useState(e.getFollowedUser()),2),n=t[0],o=t[1];return r.useEffect((function(){return o(e.getFollowedUser()),e.onFollowedUserChanged(o)}),[e]),n}},90039:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(39550);function i(){var e=(0,r.Z)();return e?e.color:null}},60818:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(30617),i=n(67294),o=n(67289);function a(e){var t=(0,r.Z)(),n=t.session,a=t.fs,c=(0,i.useCallback)((function(t){var r=t.code,i=t.insertAt,c=t.newLine,l=void 0===c||c;if(!e||(0,o.T3)(e)||(0,o.sL)(e)||(0,o.IQ)(e))throw new Error("Invalid file, this should never happen");if(0!==r.length)var s=a.watchOtFile(e,{onReady:function(e){var t,o=e.initialContent,c=e.writeOps,u=o.toString(),d=n.getCursorPosition().offset;t="end"===i?u.length:"number"===typeof i?i:d;var f=r;l&&(0!==t&&t!==u.length&&-1===(t=u.indexOf("\n",t))&&(t=u.length),0!==t&&"\n"!==u[t-1]&&(f="\n"+f),"\n"!==u[t]&&(f+="\n"));var p=[f];t>0&&p.unshift(t),c(p),a.flush().finally((function(){s()}))}})}),[e,n,a]);return!e||(0,o.T3)(e)||(0,o.sL)(e)?null:c}},92594:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(67294),i=n(30617);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(){var e=(0,i.Z)().session,t=a(r.useState(e.getPreviewedFile()),2),n=t[0],o=t[1];return r.useEffect((function(){return o(e.getPreviewedFile()),e.onPreviewedFileChanged(o)}),[e]),n}},77847:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(35944),i=n(79547),o=n.n(i),a=(n(67294),n(58458));function c(e){var t=e.label;return(0,r.BX)(a.Z,{size:"xsmall",children:[(0,r.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":t,className:"jsx-b2b24242521d2288 help",children:"?"}),(0,r.tZ)(o(),{id:"b2b24242521d2288",children:".help.jsx-b2b24242521d2288{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px solid var(--background-higher);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;width:var(--space-16);height:var(--space-16);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}"})]})}},56718:function(e,t,n){var r;n.d(t,{z:function(){return r}}),function(e){e.FileNode="FILE_NODE",e.FileHeaderTab="FILE_HEADER_TAB",e.Code="CODE"}(r||(r={}))},57541:function(e,t,n){n.d(t,{P3:function(){return Z},QE:function(){return S}});var r=n(35944),i=n(79547),o=n.n(i),a=n(67294),c=n(94184),l=n.n(c),s=n(86677),u=n(8286),d=n(28614),f=n(58458),p=n(8996),h=n(11542),m=n(28593),b=n(17632),v=n(37424);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){y(e,t,n[t])}))}return e}function w(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Z={default:"default",loading:"default",error:"negative",success:"positive",warning:"default"},j=a.forwardRef((function(e,t){var n,i,c,s=e.label,g=e.description,y=e.icon,j=e.id,E=e.onChange,C=e.large,_=e.placeholder,O=void 0===_?"":_,T=e.validationResults,I=e.onValidationError,A=w(e,["label","description","icon","id","onChange","large","placeholder","validationResults","onValidationError"]),P=(0,v.H)(),N=j||P("input"),R=g?P("input-description"):void 0,z=k(a.useState(!1),2),B=z[0],D=z[1];(null===T||void 0===T?void 0:T.some((function(e){return"loading"===e.state})))?(n="loading",i=(0,r.tZ)(m.Z,{style:{width:"24px",height:"24px"}})):(null===T||void 0===T?void 0:T.some((function(e){return"error"===e.state})))?(n="error",c="var(--accent-negative-default)",i=(0,r.tZ)(d.Z,{}),B&&(null===I||void 0===I||I())):(null===T||void 0===T?void 0:T.some((function(e){return"warning"===e.state})))?(n="warning",c="var(--foreground-dimmest)",i=(0,r.tZ)(b.Z,{})):(null===T||void 0===T?void 0:T.every((function(e){return"success"===e.state})))?(n="success",c="var(--accent-positive-default)",i=(0,r.tZ)(u.Z,{})):n="default";var U=Z[n],L=C?"var(--font-size-subhead-default)":"var(--font-size-default)";return(0,r.BX)("div",{className:o().dynamic([["8596e7f04cb3da62",[c,L,A.monospace?"var(--font-family-code)":"var(--font-family-default)",L,y?"var(--space-24)":"auto"]]])+" container",children:[s&&(0,r.BX)(r.HY,{children:[A.required?(0,r.BX)(p.Ug,{spacing:"2px",children:[(0,r.tZ)(f.Z,{tag:"label",foreground:B?1:2,size:C?"small":"xsmall",htmlFor:N,children:s}),(0,r.tZ)("span",{className:o().dynamic([["8596e7f04cb3da62",[c,L,A.monospace?"var(--font-family-code)":"var(--font-family-default)",L,y?"var(--space-24)":"auto"]]])+" required",children:"*"})]}):(0,r.tZ)(f.Z,{tag:"label",foreground:B?1:2,size:C?"small":"xsmall",htmlFor:N,children:s}),(0,r.tZ)(h.Z,{height:"4px"})]}),(0,r.BX)("div",{className:o().dynamic([["8596e7f04cb3da62",[c,L,A.monospace?"var(--font-family-code)":"var(--font-family-default)",L,y?"var(--space-24)":"auto"]]])+" input-container",children:[y&&(0,r.tZ)("div",{className:o().dynamic([["8596e7f04cb3da62",[c,L,A.monospace?"var(--font-family-code)":"var(--font-family-default)",L,y?"var(--space-24)":"auto"]]])+" icon-container left",children:y}),(0,r.tZ)("input",x({id:N,ref:t,required:A.required||!1,onChange:E,placeholder:O,"aria-busy":"loading"===n,"aria-invalid":"error"===n,"aria-describedby":R},A,{onFocus:function(e){D(!0),A.onFocus&&A.onFocus(e)},onBlur:function(e){D(!1),A.onBlur&&A.onBlur(e)},className:o().dynamic([["8596e7f04cb3da62",[c,L,A.monospace?"var(--font-family-code)":"var(--font-family-default)",L,y?"var(--space-24)":"auto"]]])+" "+(l()(U,A.className)||"")})),i&&(0,r.tZ)("div",{onMouseEnter:function(){return D(!0)},onMouseLeave:function(){return D(!1)},className:o().dynamic([["8596e7f04cb3da62",[c,L,A.monospace?"var(--font-family-code)":"var(--font-family-default)",L,y?"var(--space-24)":"auto"]]])+" icon-container right",children:i})]}),g&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(h.Z,{height:"4px"}),(0,r.tZ)(f.Z,{id:R,tag:"span",foreground:3,size:C?"medium":"small",children:g})]}),(null===T||void 0===T?void 0:T.some((function(e){return!!e.message})))&&B&&(0,r.tZ)(S,{validationResults:T}),(0,r.tZ)(o(),{id:"8596e7f04cb3da62",dynamic:[c,L,A.monospace?"var(--font-family-code)":"var(--font-family-default)",L,y?"var(--space-24)":"auto"],children:".container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;position:relative;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%}.required.__jsx-style-dynamic-selector{color:var(--accent-negative-default);font-size:var(--font-size-small)}.spacer.row.__jsx-style-dynamic-selector{width:var(--space-4)}.spacer.col.__jsx-style-dynamic-selector{height:var(--space-4)}.input-container.__jsx-style-dynamic-selector{position:relative}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);-o-transform:translateY(-50%);transform:translateY(-50%);background-color:var(--background-default);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;padding:var(--space-4)}.icon-container.right.__jsx-style-dynamic-selector{right:var(--space-8);color:".concat(c,"}.icon-container.left.__jsx-style-dynamic-selector{left:var(--space-4);background-color:transparent;color:var(--foreground-dimmest)}input.__jsx-style-dynamic-selector{font-size:").concat(L,";font-family:").concat(A.monospace?"var(--font-family-code)":"var(--font-family-default)",";line-height:").concat(L,";background-color:var(--background-default);color:var(--foreground-default);padding:var(--space-8);padding-left:").concat(y?"var(--space-24)":"auto",";border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);outline:none;width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-transition:color.1s,background-color.1s;-moz-transition:color.1s,background-color.1s;-o-transition:color.1s,background-color.1s;transition:color.1s,background-color.1s}input.__jsx-style-dynamic-selector:disabled{opacity:.5}input.default.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}input.success.__jsx-style-dynamic-selector{border-color:var(--accent-positive-stronger)}input.success.__jsx-style-dynamic-selector:hover{border-color:var(--accent-positive-dimmer)}input.negative.__jsx-style-dynamic-selector{border-color:var(--accent-negative-default)}input.negative.__jsx-style-dynamic-selector:hover{border-color:var(--accent-negative-dimmer)}input.__jsx-style-dynamic-selector:active,input.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}")})]})})),S=function(e){var t=e.validationResults;return(0,r.BX)("div",{"aria-live":"polite",className:"jsx-717f837fe0108fc4 container",children:[t.map((function(e,t){var n;switch(e.state){case"success":n=(0,r.tZ)(u.Z,{color:"var(--accent-positive-default)"});break;case"error":n=(0,r.tZ)(d.Z,{color:"var(--accent-negative-default)"});break;case"warning":n=(0,r.tZ)(b.Z,{color:"var(--foreground-dimmest)"});break;default:n=(0,r.tZ)(s.Z,{color:"var(--foreground-dimmest)"})}return(0,r.BX)("div",{className:"jsx-717f837fe0108fc4 validation-row",children:[(0,r.tZ)("div",{className:"jsx-717f837fe0108fc4 validation-icon-container",children:n}),(0,r.tZ)(h.Z,{width:"4px"}),(0,r.tZ)(f.Z,{foreground:2,size:"small",children:e.message})]},e.state+t.toString())})),(0,r.tZ)(o(),{id:"717f837fe0108fc4",children:".container.jsx-717f837fe0108fc4{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;position:absolute;top:-webkit-calc(100% + var(--space-4));top:-moz-calc(100% + var(--space-4));top:calc(100% + var(--space-4));background-color:var(--background-default);padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);z-index:9999;-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2)}.validation-row.jsx-717f837fe0108fc4{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;width:100%;padding-bottom:var(--space-4)}.validation-icon-container.jsx-717f837fe0108fc4{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;padding-right:var(--space-4)}"})]})};t.ZP=j},86923:function(e,t,n){var r=n(35944),i=n(79547),o=n.n(i),a=n(67294),c=n(64784),l=n(28614),s=n(8286),u=n(58458),d=n(8996),f=n(11542),p=n(57541),h=n(18055),m=n(37424);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){v(e,t,n[t])}))}return e}function y(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w=a.forwardRef((function(e,t){var n,i,b,v=e.label,w=e.id,k=e.description,Z=e.onChange,j=e.fontFamily,S=void 0===j?"sans-serif":j,E=e.fontSize,C=void 0===E?"medium":E,_=e.fontWeight,O=void 0===_?"regular":_,T=e.foreground,I=void 0===T?1:T,A=e.placeholder,P=void 0===A?"":A,N=e.validationResults,R=e.value,z=y(e,["label","id","description","onChange","fontFamily","fontSize","fontWeight","foreground","placeholder","validationResults","value"]),B=(0,c.Z)().ref,D=(0,m.H)(),U=w||D("input"),L=k?D("input-description"):void 0,X=x(a.useState(!1),2),M=X[0],F=X[1];(null===N||void 0===N?void 0:N.some((function(e){return"loading"===e.state})))?n="loading":(null===N||void 0===N?void 0:N.some((function(e){return"error"===e.state})))?(n="error",b="var(--accent-negative-default)",i=(0,r.tZ)(l.Z,{})):(null===N||void 0===N?void 0:N.every((function(e){return"success"===e.state})))?(n="success",b="var(--accent-positive-default)",i=(0,r.tZ)(s.Z,{})):n="default";var G=p.P3[n],W=(z.className?z.className+" ":"")+G;return(0,r.BX)("div",{className:o().dynamic([["759177b91500d369",[b,h.Z.fontSize[C],h.Z.fontFamily[S],h.Z.fontWeight[O],h.Z.foreground[I],h.Z.lineHeight[C]]]])+" container",children:[v&&(0,r.BX)(r.HY,{children:[z.required?(0,r.BX)(d.Ug,{spacing:"2px",children:[(0,r.tZ)(u.Z,{tag:"label",foreground:M?1:2,size:"large"===C?"small":"xsmall",htmlFor:U,children:v}),(0,r.tZ)("span",{className:o().dynamic([["759177b91500d369",[b,h.Z.fontSize[C],h.Z.fontFamily[S],h.Z.fontWeight[O],h.Z.foreground[I],h.Z.lineHeight[C]]]])+" required",children:"*"})]}):(0,r.tZ)(u.Z,{tag:"label",foreground:M?1:2,size:"large"===C?"small":"xsmall",htmlFor:U,children:v}),(0,r.tZ)(f.Z,{height:"4px"})]}),(0,r.BX)("div",{className:o().dynamic([["759177b91500d369",[b,h.Z.fontSize[C],h.Z.fontFamily[S],h.Z.fontWeight[O],h.Z.foreground[I],h.Z.lineHeight[C]]]])+" textarea-container",children:[(0,r.tZ)("textarea",g({id:U,placeholder:P,value:R,onChange:Z,"aria-busy":"loading"===n,"aria-invalid":"error"===n,"aria-describedby":L},z,{ref:function(e){B(e),t&&("function"!==typeof t?t.current=e:t(e))},onFocus:function(e){F(!0),z.onFocus&&z.onFocus(e)},onBlur:function(e){F(!1),z.onBlur&&z.onBlur(e)},className:o().dynamic([["759177b91500d369",[b,h.Z.fontSize[C],h.Z.fontFamily[S],h.Z.fontWeight[O],h.Z.foreground[I],h.Z.lineHeight[C]]]])+" "+(W||"")})),i&&(0,r.tZ)("div",{onMouseEnter:function(){return F(!0)},onMouseLeave:function(){return F(!1)},className:o().dynamic([["759177b91500d369",[b,h.Z.fontSize[C],h.Z.fontFamily[S],h.Z.fontWeight[O],h.Z.foreground[I],h.Z.lineHeight[C]]]])+" icon-container right",children:i})]}),k&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(f.Z,{height:"4px"}),(0,r.tZ)(u.Z,{id:L,tag:"span",foreground:3,size:C,children:k})]}),N&&M&&(0,r.tZ)(p.QE,{validationResults:N}),(0,r.tZ)(o(),{id:"759177b91500d369",dynamic:[b,h.Z.fontSize[C],h.Z.fontFamily[S],h.Z.fontWeight[O],h.Z.foreground[I],h.Z.lineHeight[C]],children:".container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;position:relative;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%}.textarea-container.__jsx-style-dynamic-selector{position:relative}.required.__jsx-style-dynamic-selector{color:var(--accent-negative-default);font-size:var(--font-size-small)}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:var(--space-8);right:var(--space-8);background-color:var(--background-default);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;padding:var(--space-4)}.icon-container.right.__jsx-style-dynamic-selector{right:var(--space-8);color:".concat(b,"}textarea.__jsx-style-dynamic-selector{resize:none;font-size:").concat(h.Z.fontSize[C],";font-family:").concat(h.Z.fontFamily[S],";font-weight:").concat(h.Z.fontWeight[O],";color:").concat(h.Z.foreground[I],";line-height:").concat(h.Z.lineHeight[C],";background-color:transparent;padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);outline:none;width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-transition:.1s;-moz-transition:.1s;-o-transition:.1s;transition:.1s;line-height:1.4}textarea.__jsx-style-dynamic-selector:disabled{opacity:.5}textarea.default.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}textarea.success.__jsx-style-dynamic-selector{border-color:var(--accent-positive-default)}textarea.success.__jsx-style-dynamic-selector:hover{border-color:var(--accent-positive-dimmer)}textarea.negative.__jsx-style-dynamic-selector{border-color:var(--accent-negative-default)}textarea.negative.__jsx-style-dynamic-selector:hover{border-color:var(--accent-negative-dimmer)}textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}")})]})}));t.Z=w},79806:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(35944),i=(n(67294),n(47240));function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return(0,r.tZ)(i.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},e,{children:(0,r.tZ)("path",{d:"M22.0005 12.4999V8.50012H20.001V6.49987H18V5.50012H20.001V2.50012H17.001V4.49962H15V6.49987H9V4.49962H7.0005V2.50012H4.0005V5.50012H6V6.49987H4.0005V8.50012H2.001V12.4999H0V19.4996H3V15.4999H4.0005V19.4996H6V21.4999H11.001V18.4999H7.0005V17.5001H17.001V18.4999H13.0005V21.4999H18V19.4996H20.001V15.4999H21V19.4996H24V12.4999H22.0005ZM9 11.5001H6V8.50012H9V11.5001ZM18 11.5001H15V8.50012H18V11.5001Z",fill:"currentColor",stroke:"none"})}))}},85106:function(e,t,n){var r=n(67294).createContext(null);t.Z=r},42723:function(e,t,n){n.d(t,{Dq:function(){return d},En:function(){return y},FG:function(){return o},H2:function(){return x},Rl:function(){return b},aY:function(){return v},aq:function(){return s},eJ:function(){return c},fc:function(){return g},fv:function(){return l},hq:function(){return a},mT:function(){return m},qg:function(){return f},sC:function(){return p},tK:function(){return r},wP:function(){return i},yY:function(){return h},zT:function(){return u}});var r="OPEN_SIDEPANE_BY_TYPE",i="NEW_CONSOLE_MESSAGE",o="LOADING_ENGINE_COMPLETE",a="LOADING_EXECUTION_ENGINE_STARTED",c="RESIZE_TERMINAL",l="CLEAR_CONSOLE",s="STOP_EVAL",u="WORKSPACE_WILL_UNMOUNT",d="UPDATE_WORKSPACE_PREFERENCES",f="@@INIT",p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;return{data:e,type:t,raw:!!n}};function h(e){var t=e.wid,n=e.message,r=e.type,o=void 0===r?"":r,a=e.raw;return{wid:t,type:i,message:p(n,o,!!a)}}function m(e){return{type:"RUN_REPL",wid:e.wid}}function b(e){var t=e.wid;return{type:s,wid:t}}function v(e){return{type:"EVAL_CODE",wid:e.wid,code:e.code,clean:e.clean}}function g(e){return{type:"UPDATE_LAYOUT",wid:e.wid,path:e.path,to:e.to,property:e.property}}function y(e){var t=e.wid,n=e.pud;return{type:l,wid:t,pud:n}}function x(e){var t=e.wid,n=e.cols,r=e.rows;return{type:c,wid:t,cols:n,rows:r}}},20730:function(e,t,n){n.d(t,{jz:function(){return Z},yC:function(){return w}});var r=n(34051),i=n.n(r),o=n(35944),a=(n(67294),n(50658)),c=n(88503),l=n(56834),s=n(18690),u=n(10611),d=n(66754),f=n(8996),p=n(80796),h=n(48015),m=n(17877);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){v(o,r,i,a,c,"next",e)}function c(e){v(o,r,i,a,c,"throw",e)}a(void 0)}))}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=100;function w(e){return k.apply(this,arguments)}function k(){return(k=g(i().mark((function e(t){var n,r,o,c,s,u,d,f,p,h,m,b,v,g,w,k,Z,j,S,E,C,_,O,T;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,r=t.container,o=window.performance.now(),e.next=4,r.exec("ag","--noaffinity","--context=0","--workers=1","--literal","--ackmate","--pager","head -".concat(300),"--",n);case 4:if(c=e.sent,s=c.output,u=c.error,(0,l.j)(l.U3.COMMAND_BAR_SEARCH,{duration:window.performance.now()-o,failed:Boolean(u)&&"exit status 1"!==u}),!u){e.next=11;break}return"exit status 1"!==u&&a.Tb(new Error("Search command failed with error: ".concat(u))),e.abrupt("return","exit status 1"!==u?{error:u}:{});case 11:if(s){e.next=13;break}return e.abrupt("return",{});case 13:d=s.split("\n"),f={},p="",h=0,m=!0,b=!1,v=void 0,e.prev=18,g=d[Symbol.iterator]();case 20:if(m=(w=g.next()).done){e.next=43;break}if(k=w.value){e.next=24;break}return e.abrupt("continue",40);case 24:if(!k.startsWith(":")){e.next=28;break}return p=k.slice(1),f[p]=[],e.abrupt("continue",40);case 28:if(!(h>=x)){e.next=30;break}return e.abrupt("break",43);case 30:Z=k.indexOf(";"),j=parseInt(k.slice(0,Z),10),S=k.slice(Z+1),E=S.indexOf(":"),C=S.slice(0,E).split(","),_=C.map((function(e){var t=y(e.split(" "),2),n=t[0],r=t[1];return{column:parseInt(n,10),length:parseInt(r,10)}})),O=S.slice(E+1),T=O.length>151?O.substring(0,149)+"\u2026":O,h++,f[p].push({content:T,lineNumber:j,matches:_});case 40:m=!0,e.next=20;break;case 43:e.next=49;break;case 45:e.prev=45,e.t0=e.catch(18),b=!0,v=e.t0;case 49:e.prev=49,e.prev=50,m||null==g.return||g.return();case 52:if(e.prev=52,!b){e.next=55;break}throw v;case 55:return e.finish(52);case 56:return e.finish(49);case 57:return e.abrupt("return",{error:u,results:f});case 58:case"end":return e.stop()}}),e,null,[[18,45,49,57],[50,,52,56]])})))).apply(this,arguments)}function Z(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).keyboardShortcut;return function(t){var n,r=t.container,a=t.onSelect,l=(0,p.Z)((function(e,t,n){w(e).then(t).catch(n)}),200);return{data:{type:"basic",label:"Search",icon:(0,o.tZ)(c.Z,{}),description:"Search through your files",keyboardShortcut:e},config:{callOnLeave:!0},commands:function(){var e=g(i().mark((function e(t){var c,p,b,v,g,x,w,k,Z,j,S,E,C;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p={},!(0,m.sA)(t)){e.next=4;break}return e.abrupt("return",p);case 4:if(!(0!==t.relativeSearchDepth&&t.searchValue.length<4)){e.next=6;break}return e.abrupt("return",p);case 6:if(b=t.searchPath?t.searchPath.join(" "):null){e.next=9;break}return e.abrupt("return",p);case 9:if(1!==(null===(c=t.searchPath)||void 0===c?void 0:c.length)||"files"!==t.searchPath[0]&&"search"!==t.searchPath[0]){e.next=11;break}return e.abrupt("return",p);case 11:return v=Math.random(),n=v,e.next=15,new Promise((function(e,t){l({query:b,container:r},e,t)}));case 15:if(g=e.sent,x=g.results,!(w=g.error)){e.next=20;break}return e.abrupt("return",{Error:{data:{type:"error",label:w}}});case 20:if(v===n){e.next=22;break}return e.abrupt("return",p);case 22:if(x){e.next=24;break}return e.abrupt("return",p);case 24:for(k=!0,Z=!1,j=void 0,e.prev=25,S=function(e,t){var n=y(t.value,2),r=n[0];n[1].forEach((function(e){p["".concat(r,":").concat(e.lineNumber)]={config:{match:function(){var t;return{score:(null===(t=h.Z.match(b,e.content))||void 0===t?void 0:t.score)||1,render:function(t){var n=t.isActive,i=(0,o.tZ)(s.JI,{path:r,isActive:n});return(0,o.BX)(f.gC,{spacing:"4px",wrap:"nowrap",children:[(0,o.BX)(u.W,{isActive:n,icon:i,children:[r,":",e.lineNumber]}),(0,o.tZ)(d.xK,{source:e.content,matches:e.matches})]})}}}},data:{label:r,description:"".concat(r,":").concat(e.lineNumber),icon:(0,o.tZ)(s.JI,{path:r}),type:"action",run:function(){a(r,e.lineNumber,e.matches[0].column)}}}}))},E=Object.entries(x)[Symbol.iterator]();!(k=(C=E.next()).done);k=!0)S(0,C);e.next=34;break;case 30:e.prev=30,e.t0=e.catch(25),Z=!0,j=e.t0;case 34:e.prev=34,e.prev=35,k||null==E.return||E.return();case 37:if(e.prev=37,!Z){e.next=40;break}throw j;case 40:return e.finish(37);case 41:return e.finish(34);case 42:return e.abrupt("return",p);case 43:case"end":return e.stop()}}),e,null,[[25,30,34,42],[35,,37,41]])})));return function(t){return e.apply(this,arguments)}}()}}}var j=Z({keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"F"}});t.ZP=j},18690:function(e,t,n){n.d(t,{JI:function(){return h},a2:function(){return m}});var r=n(34051),i=n.n(r),o=n(35944),a=n(67294),c=n(48015),l=n(94157),s=n(55681),u=n(10611),d=n(17877);function f(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){f(o,r,i,a,c,"next",e)}function c(e){f(o,r,i,a,c,"throw",e)}a(void 0)}))}}function h(e){var t=e.path,n=e.isActive;return(0,o.tZ)(s.Z,{path:t,fill:n?"var(--white)":void 0,fillDefaultFileIcon:n})}function m(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).keyboardShortcut;return function(t){var n=t.fs,r=t.onSelect,s=t.onCreateNewFile,f=t.session;return{data:{type:"basic",label:"Files",icon:(0,o.tZ)(l.Z,{}),description:"Find a file",keyboardShortcut:e},config:{callOnLeave:!0},commands:function(){var e=p(i().mark((function e(t){var l,p,m,b,v,g,y,x,w,k,Z,j,S,E;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p={},!(0,d.sA)(t)){e.next=4;break}return e.abrupt("return",p);case 4:if(m=t.searchPath?t.searchPath.join(" ").toLowerCase():void 0,0===t.relativeSearchDepth||m&&!(m.length<2)){e.next=7;break}return e.abrupt("return",p);case 7:if(t.callStage!==d.xS.Leave||0!==t.relativeSearchDepth&&!t.getCurrentOptions().some((function(e){return e.token.value===m}))){e.next=9;break}return e.abrupt("return",p);case 9:return e.next=11,n.listFiles();case 11:if(!(b=e.sent).error||!(null===(l=t.searchPath)||void 0===l?void 0:l.length)){e.next=15;break}return v=t.searchPath.join(" "),e.abrupt("return",{newFile:{data:{label:v,description:"Create a new file",icon:(0,o.tZ)(h,{path:v}),type:"action",run:function(){return s(v)}},config:{match:function(){return{score:1}}}}});case 15:if("exit status 1"!==b.error){e.next=17;break}return e.abrupt("return",p);case 17:if(g=b.files){e.next=20;break}throw new Error("Expected files");case 20:for(y=f.getRecentFiles(),x=!0,w=!1,k=void 0,e.prev=22,Z=function(e,t){var n=t.value,i=!m||c.Z.match(m,n);if(!i)return"continue";var l=y.includes(n);p[n]={config:{match:function(){return!0===i?{score:l?2:1}:{score:l?2*i.score:i.score,render:function(e){var t=e.isActive,r=(0,o.tZ)(h,{path:n,isActive:t});return(0,o.tZ)(u.W,{isActive:t,icon:r,children:(0,o.tZ)(o.HY,{children:a.Children.map(i.elements,(function(e,t){return(0,o.tZ)(a.Fragment,{children:e},t)}))})})}}}},data:{label:n,description:"",icon:(0,o.tZ)(h,{path:n}),type:"action",run:function(){return r(n)}}}},j=g[Symbol.iterator]();!(x=(S=j.next()).done);x=!0)Z(0,S);e.next=31;break;case 27:e.prev=27,e.t0=e.catch(22),w=!0,k=e.t0;case 31:e.prev=31,e.prev=32,x||null==j.return||j.return();case 34:if(e.prev=34,!w){e.next=37;break}throw k;case 37:return e.finish(34);case 38:return e.finish(31);case 39:return t.searchPath&&(E=t.searchPath.join(" "),Object.values(p).some((function(e){var t;return(null===(t=e.data)||void 0===t?void 0:t.label)===E}))||(p.newFile={data:{label:E,description:"Create a new file",icon:(0,o.tZ)(h,{path:E}),type:"action",run:function(){return s(E)}},config:{match:function(){return{score:1}}}})),e.abrupt("return",p);case 41:case"end":return e.stop()}}),e,null,[[22,27,31,39],[32,,34,38]])})));return function(t){return e.apply(this,arguments)}}()}}}var b=m({keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"P"}});t.ZP=b},33531:function(e,t,n){n.d(t,{IH:function(){return x},ZP:function(){return y},f9:function(){return k},x$:function(){return w}});var r=n(35944),i=n(79547),o=n.n(i),a=n(67294),c=n(23139),l=n(31705),s=n(91131),u=n(30617);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}var v=(0,s.cn)([]),g=(0,s.cn)({regexp:null,direction:"",highlightOnly:!0});function y(){var e=h((0,l.Z)(!1),2),t=e[0],n=e[1],i=h((0,l.Z)(!1),2),o=i[0],d=i[1],f=(0,a.useState)(null),b=f[0],y=f[1],Z=(0,u.Z)().container,j=h((0,s.KO)(v),2),S=j[0],E=j[1],C=h((0,s.KO)(g),2),_=C[0],O=C[1];return(0,a.useEffect)((function(){if(o)return Z.client().onDebugLog((function(e){"log"===e.type&&E((function(t){return m(t).concat([{index:t.length+1,dir:e.log.direction,cmd:e.log.cmd,timestamp:window.performance.now()}])}))}))}),[o]),o?(0,r.BX)(c.G7,{css:[c.l0.colWithGap(8),c.l0.height("100%")],children:[(0,r.BX)(c.G7,{css:[c.l0.rowWithGap(4),c.l0.justify.spaceBetween],children:[(0,r.tZ)(c.zx,{onClick:n,text:t?"Hide filters":"Show filters"}),b&&(0,r.tZ)(c.zx,{onClick:function(){return y(null)},text:"Reset Time Ref"}),(0,r.tZ)(c.zx,{colorway:"negative",onClick:function(){E([])},text:"Clear logs"})]}),t?(0,r.tZ)(w,{filters:_,updateFilters:function(e){O(p({},_,e))}}):null,(0,r.tZ)(c.G7,{css:[c.l0.flex.growAndShrink(1),c.l0.overflow("auto"),c.l0.height("100%")],children:(0,r.tZ)(x,{logs:k(S,_),timeRef:b,setTimeRef:y})})]}):(0,r.tZ)(c.zx,{colorway:"positive",onClick:function(){d()},text:"Start logging goval"})}var x=function(e){var t=e.logs,n=e.timeRef,i=e.setTimeRef;return(0,r.BX)("div",{className:"jsx-20359c57abb6776a log-list",children:[t.map((function(e){var t=JSON.stringify(e.cmd,null,2),o=n?e.timestamp-n:e.timestamp;return(0,r.BX)("div",{className:"jsx-20359c57abb6776a "+("log "+(e.highlighted?"highlighted ":"")+("in"===e.dir?"in":"")||0),children:[(0,r.BX)("div",{className:"jsx-20359c57abb6776a direction",children:[(0,r.tZ)("div",{className:"jsx-20359c57abb6776a",children:e.dir}),(0,r.tZ)("div",{className:"jsx-20359c57abb6776a",children:"in"===e.dir?"\u25b6\ufe0f":"\u2b05\ufe0f"}),(0,r.tZ)("div",{className:"jsx-20359c57abb6776a",children:(0,r.tZ)(c.zx,{small:!0,colorway:"positive",onClick:function(){return i(e.timestamp)},text:o.toFixed(0)+"ms"})})]}),(0,r.tZ)("pre",{className:"jsx-20359c57abb6776a",children:t})]},e.index)})),(0,r.tZ)("div",{className:"jsx-20359c57abb6776a bottom-anchor"}),(0,r.tZ)(o(),{id:"20359c57abb6776a",children:".log-list.jsx-20359c57abb6776a{overflow:auto;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.log-list.jsx-20359c57abb6776a *.jsx-20359c57abb6776a{overflow-anchor:none}.bottom-anchor.jsx-20359c57abb6776a{overflow-anchor:auto!important;min-height:1px}.log.jsx-20359c57abb6776a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:deepskyblue;border:1px solid;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.in.jsx-20359c57abb6776a{color:red}.highlighted.jsx-20359c57abb6776a{background:yellow}.direction.jsx-20359c57abb6776a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-moz-box-pack:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;text-align:center;min-width:30px;border-right:1px solid}.direction.jsx-20359c57abb6776a>div.jsx-20359c57abb6776a:not(:last-child){border-bottom:1px solid;width:100%}"})]})};var w=function(e){var t=e.filters,n=e.updateFilters;return(0,r.BX)(c.G7,{css:c.l0.colWithGap(4),children:[(0,r.tZ)(c.xv,{variant:"subheadDefault",children:"Regex (regex,flags):"}),(0,r.tZ)(c.II,{id:"regex",onChange:function(e){var t=null;if(e.currentTarget.value){var r=h(e.currentTarget.value.split(","),2),i=r[0],o=r[1];try{t=new RegExp(i,o)}catch(a){}}n({regexp:t})},placeholder:"\\w+,gi"}),(0,r.tZ)(c.xv,{variant:"subheadDefault",children:"Directions:"}),(0,r.tZ)(c.Ee,{css:c.l0.rowWithGap(16),name:"direction",value:t.direction,onChange:function(e){var t,r=e.target.value;n({direction:(t=r,"in"===t||"out"===t||""===t?r:"")})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map((function(e){return(0,r.BX)(c.G7,{css:[c.l0.rowWithGap(8)],children:[(0,r.tZ)(c.Y8,{id:e.val,value:e.val}),(0,r.tZ)("label",{htmlFor:e.val,children:e.text})]})}))}),(0,r.tZ)(c.xv,{variant:"subheadDefault",children:"Filter style:"}),(0,r.tZ)(c.Ee,{css:c.l0.rowWithGap(16),name:"filter-style",value:t.highlightOnly?"highlight":"filter",onChange:function(e){return n({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map((function(e){return(0,r.BX)(c.G7,{css:[c.l0.rowWithGap(8)],children:[(0,r.tZ)(c.Y8,{id:e.val,value:e.val}),(0,r.tZ)("label",{htmlFor:e.val,children:e.text})]})}))})]})},k=function(e,t){if(!t.regexp&&!t.direction)return e.map((function(e){return p({},e,{highlighted:!1})}));var n=function(e){var n=e.dir,r=e.cmd;return(!t.direction||n===t.direction)&&!(t.regexp&&t.regexp.test&&!t.regexp.test(JSON.stringify(r)))};return t.highlightOnly?e.map((function(e){return n(e)?p({},e,{highlighted:!0}):e})):e.filter(n)}},67642:function(e,t,n){n.d(t,{L:function(){return j}});var r=n(35944),i=n(5152),o=n.n(i),a=n(67294),c=n(37424),l=n(93577),s=n(22429),u=n(23139),d=n(16911),f=n(6529),p=n(1517),h=n(73216),m=n(69271),b=n(31705),v=n(31470),g=n(25108);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){x(e,t,n[t])}))}return e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Z=o()((function(){return n.e(367).then(n.t.bind(n,55171,23))}),{loadableGenerated:{webpack:function(){return[55171]}}}),j=function(){var e,t=(0,l.Z)(),n=(0,s.Z)(t||""),i=(0,c.H)(),o=(0,a.useState)((function(){return[]})),p=o[0],m=o[1],g=k((0,b.Z)(!0),2),y=g[0],x=g[1],Z=k((0,b.Z)(!0),2),j=Z[0],E=Z[1],_=(0,a.useCallback)((function(e){m((function(t){return[e].concat(t)}))}),[]),O=(0,a.useCallback)((function(e,t){m((function(n){return n.map((function(n){return n.id===e?t(n):n}))}))}),[]),T=(0,a.useCallback)((function(){m([])}),[]),I=(0,a.useMemo)((function(){var e=p;return y||(e=e.filter((function(e){return null==e.notification}))),j||(e=e.filter((function(e){return null==e.request}))),e}),[p,y,j]);return(0,a.useEffect)((function(){return(0,v.uf)([null===n||void 0===n?void 0:n.onRequest((function(e){_({id:e.id,canceled:!1,request:e.data,requestTime:new Date})})),null===n||void 0===n?void 0:n.onResponse((function(e){O(e.id,(function(t){return w({},t,{responseTime:new Date},void 0!==e.result?{response:e.result}:{error:e.error})}))})),null===n||void 0===n?void 0:n.onCancelRequest((function(e){O(e,(function(e){return w({},e,{canceled:!0})}))})),null===n||void 0===n?void 0:n.onSendNotification((function(e){_({canceled:!1,notification:e,requestTime:new Date})}))])}),[n,_,O]),(0,r.BX)(u.G7,{css:[u.l0.flex.column],children:[(0,r.BX)(u.G7,{css:[u.l0.flex.row,u.l0.align.center,u.l0.m(4),u.l0.position.sticky,u.l0.top(0),u.l0.backgroundColor.backgroundDefault,u.l0.zIndex(1)],children:[(0,r.tZ)(u.xv,{css:u.l0.flex.grow(1),children:n?(0,r.BX)(r.HY,{children:[(0,r.tZ)(C,{})," logs for ",(0,r.tZ)("code",{children:t})]}):"No LSP"}),(0,r.tZ)(d.Z,{onClick:T})]}),(0,r.BX)(u.G7,{css:[u.l0.rowWithGap(8),u.l0.m(4),u.l0.mb(8)],children:[(0,r.BX)(u.G7,{css:u.l0.rowWithGap(4),children:[(0,r.tZ)(h.Filter,{}),(0,r.tZ)(u.xv,{children:"Show"})]}),(0,r.BX)(u.G7,{css:u.l0.rowWithGap(4),children:[(0,r.tZ)(f.Z,{id:i("showNotifications"),checked:y,onChange:x}),(0,r.tZ)("label",{htmlFor:i("showNotifications"),children:" Notifications"})]}),(0,r.BX)(u.G7,{css:u.l0.rowWithGap(4),children:[(0,r.tZ)(f.Z,{id:i("showRequests"),checked:j,onChange:E}),(0,r.tZ)("label",{htmlFor:i("showRequests"),children:" Requests"})]})]}),(0,r.BX)(u.G7,{css:[u.l0.flex.grow(1),u.l0.flex.column,u.l0.overflow("auto")],children:[I.map((function(t){return(0,r.tZ)(S,{log:t},null!==(e=t.id)&&void 0!==e?e:t.requestTime.valueOf())})),!I.length&&(0,r.tZ)(u.G7,{css:u.l0.m(4),children:"\ud83d\ude14 No logs yet..."})]})]})};function S(e){var t,n=e.log,i=n.requestTime,o=n.responseTime,a=n.request,c=n.response,l=n.notification,s=n.id,d=k((0,b.Z)(!0),2),f=d[0],p=d[1];return(0,r.BX)(u.G7,{css:[u.l0.my(4),u.l0.mx(4)],children:[(0,r.BX)(u.G7,{role:"button",onClick:p,onKeyDown:p,tabIndex:0,css:[u.l0.flex.row,u.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,r.BX)(u.G7,{css:[u.l0.flex.grow(1),u.l0.rowWithGap(2)],children:[(0,r.tZ)(u.xv,{className:"lspLog-emoji",children:_(n)}),(0,r.BX)(u.xv,{className:"lspLog-requestMethod",children:[(0,r.tZ)("code",{children:null===(t=a||l)||void 0===t?void 0:t.method}),null!=s&&(0,r.BX)("code",{className:"lspLog-logId",css:{opacity:.5},children:["#",s]})]})]}),(0,r.tZ)(u.G7,{css:{opacity:.5},children:null!=o&&(0,r.BX)(u.xv,{css:u.l0.fontSize(13),children:[o.valueOf()-i.valueOf()," ms"]})})]}),!f&&(0,r.BX)(r.HY,{children:[void 0!==a&&(0,r.tZ)(E,{name:"request.params",src:a.params}),void 0!==l&&(0,r.tZ)(E,{name:"notification.params",src:l.params}),void 0!==c&&(0,r.tZ)(E,{name:"response",src:c})]})]})}function E(e){var t=e.name,n=e.src,i=(0,m.Z)();return(0,r.tZ)(u.G7,{css:{marginTop:5,".node-ellipsis":{letterSpacing:-2},".object-key span":{letterSpacing:0},".object-key-val":{paddingBottom:"0 !important"},'.object-key + span[style*="margin"], .array-key + span[style*="margin"]':{marginLeft:"0 !important"},".variable-row, .pushed-content .object-key-val":{paddingLeft:"10px !important",paddingBottom:"0 !important"}},children:(0,r.tZ)(Z,{iconStyle:"triangle",style:{backgroundColor:"transparent"},displayDataTypes:!1,theme:i,collapseStringsAfterLength:40,collapsed:1,displayObjectSize:!1,name:t,enableClipboard:function(e){var t=w({},e.src);Object.assign(globalThis,{$msg:t}),g.log("$msg"),g.log(t),navigator.clipboard.writeText(JSON.stringify(t,null,2)).finally((function(){}))},src:"object"===typeof n&&null!==n?n:{value:n}})})}var C=function(){return(0,r.tZ)(u.xv,{css:{display:"inline",fontStyle:"italic",fontWeight:600,textShadow:"".concat(u.TV.redDimmer," 2px 2px")},children:"LSP"})};function _(e){var t=e.canceled,n=e.response,i=e.notification;return t?(0,r.tZ)(h.Close,{}):i?(0,r.tZ)(h.Info,{}):void 0!==n?(0,r.tZ)(h.Check,{}):(0,r.tZ)(p.Z,{})}},52855:function(e,t,n){n.d(t,{S:function(){return b}});var r=n(35944),i=n(79547),o=n.n(i),a=(n(67294),n(98647)),c=n(3204),l=n(54929),s=n(67938),u=n(21130),d=n(77287),f=n(428),p=n(67003),h=n(30617),m=n(50348),b=function(){var e=(0,h.Z)().container;(0,m.Z)();var t=e.getConnectionMetadata();if(!t)return(0,r.tZ)("div",{children:"no token yet, wait for connection"});var n=t.token,i=new URL(t.conmanURL).host,b='./conman-repl -t "'.concat(n,'" -u ').concat(i);return(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317 token-viewer",children:[(0,r.BX)(l.Z,{css:c.l0.rowWithGap(2),children:[(0,r.BX)(s.x,{css:c.l0.flex.shrink(1),children:["conman Repl command: ",(0,r.tZ)(d.Z,{children:b})]}),(0,r.tZ)(u.Z,{alt:"Copy to clipboard",onClick:function(){return(0,a.Z)(b)},children:(0,r.tZ)(f.Z,{})})]}),(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["metadata:",(0,r.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify(t,null,2)})]}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["parsed token:",(0,r.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify((0,p.h)(t.token),null,2)})]}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)(o(),{id:"2e9ac5ab034fc317",children:".token-viewer.jsx-2e9ac5ab034fc317{height:100%;overflow:auto;padding:10px}pre.jsx-2e9ac5ab034fc317{white-space:pre-wrap;word-wrap:break-word}"})]})}},54683:function(e,t,n){n.d(t,{V:function(){return d}});var r=n(35944),i=n(44894),o=n(67294),a=n(57541),c=n(51281),l=n(87449);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d=function(){var e=u(o.useState(i.Z.get("gurl","string")||""),2),t=e[0],n=e[1];return(0,r.BX)("div",{style:{height:"100%",overflow:"auto"},children:[(0,r.tZ)(a.ZP,{label:"Custom gurl",placeholder:"ws://localhost:8080",value:t,onChange:function(e){return n(e.currentTarget.value)}}),(0,r.BX)("pre",{children:["metadata override preview:",JSON.stringify((0,l.t)(t),null,2)]}),(0,r.tZ)("br",{}),(0,r.BX)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.tZ)(c.Z,{color:"positive",onClick:function(){i.Z.set("gurl",t),window.location.reload()},children:"Set gurl and reload"}),(0,r.tZ)(c.Z,{color:"orange",onClick:function(){i.Z.remove("gurl"),window.location.reload()},children:"Unset gurl and reload"})]}),(0,r.tZ)("br",{}),(0,r.tZ)("br",{}),(0,r.tZ)("div",{children:i.Z.get("gurl","string")?"currently in localStorage: ".concat(i.Z.get("gurl","string")):'No gurl set in local storage, using default gurl for this user, check "Token" tab for details'}),(0,r.tZ)("br",{}),(0,r.tZ)("br",{}),"Gurl order of precedence:",(0,r.BX)("ol",{style:{margin:20},children:[(0,r.tZ)("li",{children:"\u2018gurl\u2019 in localStorage (set above)"}),(0,r.BX)("li",{children:["If in development webapp and a there\u2019s a response from",(0,r.tZ)("code",{children:"https://currenthost:4563"})," or",(0,r.tZ)("code",{children:"http://currenthost:4560"}),", then it will use that."]}),(0,r.BX)("li",{children:["default is ",(0,r.tZ)("code",{children:"wss://eval.<usercluster>.replit.com"})]})]})]})}},67936:function(e,t,n){n.d(t,{_:function(){return y}});var r=n(35944),i=n(79547),o=n.n(i),a=n(5560),c=n(98647),l=n(88768),s=n(5152),u=n.n(s),d=n(3204),f=n(54929),p=n(67938),h=n(77287),m=n(21130),b=n(428),v=n(69271),g=u()((function(){return n.e(367).then(n.t.bind(n,55171,23))}),{loadableGenerated:{webpack:function(){return[55171]}}}),y=function(){var e,t,n=(0,a.Z)(),i=(0,l.bPN)({variables:{replId:n}}).data,s=(0,v.Z)(),u="Repl"===(null===i||void 0===i?void 0:i.repl.__typename)?JSON.parse(JSON.stringify(i.repl)):void 0;u&&(delete u.__typename,null===(e=u.user)||void 0===e||delete e.__typename,null===(t=u.origin)||void 0===t||delete t.__typename,delete u.config.__typename);return(0,r.BX)(f.Z,{css:[d.l0.colWithGap(16),d.l0.p(4)],children:[(0,r.BX)(f.Z,{css:d.l0.rowWithGap(2),children:[(0,r.BX)(p.x,{children:["Repl ID: ",(0,r.tZ)(h.Z,{children:n})]}),(0,r.tZ)(m.Z,{alt:"Copy to clipboard",onClick:function(){return(0,c.Z)(n)},children:(0,r.tZ)(b.Z,{})})]}),(0,r.tZ)("div",{className:"jsx-3187c500f6b377b0",children:u&&(0,r.tZ)(g,{iconStyle:"circle",style:{backgroundColor:"transparent"},displayDataTypes:!1,theme:s,src:u,collapseStringsAfterLength:40})}),(0,r.tZ)(o(),{id:"3187c500f6b377b0",children:"pre.jsx-3187c500f6b377b0{white-space:pre-wrap;word-wrap:break-word}"})]})}},69271:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(88457);function i(){return"replitDark"===(0,r.Fg)()?"bright":"bright:inverted"}},31705:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(67294);function i(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,r.useState)(e),n=t[0],i=t[1],o=(0,r.useCallback)((function(){return i((function(e){return!e}))}),[]);return[n,o]}},96641:function(e,t,n){n.d(t,{Z:function(){return Ee}});var r=n(35944),i=n(79547),o=n.n(i),a=n(67294),c=n(94184),l=n.n(c),s=n(88768),u=n(5560),d=n(40425),f=n(58458),p=n(8996),h=n(28593),m=n(57885),b=n(51281),v=n(38880),g=n(16108),y=n(94590),x=n(98620),w=n(57541),k=n(50553),Z=n(86923),j=n(45193),S=n(34051),E=n.n(S),C=n(50658);function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){O(o,r,i,a,c,"next",e)}function c(e){O(o,r,i,a,c,"throw",e)}a(void 0)}))}}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function P(e,t,n){return(P=A()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&z(i,n.prototype),i}).apply(null,arguments)}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return!t||"object"!==D(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var D=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function U(e){var t="function"===typeof Map?new Map:void 0;return U=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return P(e,arguments,N(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),z(r,e)},U(e)}function L(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N(e);if(t){var i=N(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R(this,n)}}function X(e){switch(e){case s.Flv.Match:return"The test passes if the expected output is in the actual output.";case s.Flv.Exact:return"The test passes if the expected output is equal to the actual output.";case s.Flv.Regex:return"The test passes if the actual output matches the regex expression for the expected output.";case s.Flv.Compatibility:return"The test passes if the expected output is in the actual output; some characters are removed for backwards compatibility."}}var M=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(n,e);var t=L(n);function n(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o;return I(this,n),(o=t.call.apply(t,[this].concat(B(r)))).name=o.constructor.name,o}return n}(U(Error));function F(e){var t={id:e.id},n={id:-e.id,input:{input:e.input?e.input+"\n":""}};switch(e.type){case"compatibility":t.output={compatibility:{expected:e.output}};break;case"match":t.output={match:{expected:e.output,ignoreTrailingWhitespace:!0}};break;case"exact":t.output={exact:{expected:e.output,allowTrailingNewline:!0}};break;case"regex":t.output={regex:{expression:e.output}}}return{id:e.id,instructions:[n,t]}}function G(e){var t=e.args,n=e.env,r=t.indexOf("--ps1"),i=t.indexOf("--ps2"),o=t.indexOf("-i");return-1!==r&&null!=t[r+1]&&(t[r+1]=""),-1!==i&&null!=t[i+1]&&(t[i+1]=""),-1!==o&&t.splice(o,1),t.includes("-q")||t.unshift(t.shift(),"-q"),n.PS1="",n.PS2="",{args:t,env:n}}function W(e){return H.apply(this,arguments)}function H(){return(H=T(E().mark((function e(t){var n,r,i,o,a,c,l,s,u,d;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.getRunConfig();case 3:if(r=e.sent){e.next=6;break}throw new M("unable to fetch dotreplit run config");case 6:if(!r.interp){e.next=17;break}if("stderred"===(null===(o=null===(i=r.interp)||void 0===i?void 0:i.command)||void 0===o?void 0:o.args[0])&&("--"===o.args[1]?o.args.splice(0,2):o.args.shift()),o&&!(o.args.length<1)){e.next=14;break}throw a=new M("received interp without command"),C.Tb(a,(function(e){return e.setExtra("runInfo",d)})),a;case 14:if(!o.args[0].match(/(^|\/)prybar/i)){e.next=16;break}return e.abrupt("return",{execCommand:G(o)});case 16:return e.abrupt("return",{execCommand:{args:o.args,env:o.env}});case 17:if(null===(n=r.run)||void 0===n?void 0:n.run){e.next=21;break}throw c=new M("Bad repl run config received"),C.Tb(c,(function(e){return e.setExtra("runConfig",r)})),c;case 21:return l=r.run,s=l.run,u=l.compile,s.env.PS1="",s.env.PS2="",d={execCommand:{args:s.args,env:s.env}},u&&(u.env.PS1="",u.env.PS2="",d.buildCommand={args:u.args,env:u.env}),e.abrupt("return",d);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){K(e,t,n[t])}))}return e}function q(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Q=function(e){var t=e.test,n=e.onSubmit,i=e.onCancel,c=e.isOpen,l=e.onRequestClose,u=Y(a.useState({}),2),p=u[0],h=u[1],m=function(e){return{name:(null===e||void 0===e?void 0:e.name)||"",type:(null===e||void 0===e?void 0:e.type)||s.Flv.Match,input:(null===e||void 0===e?void 0:e.input)||"",output:(null===e||void 0===e?void 0:e.output)||""}},g=(0,v.Z)().showError,y=Y(a.useState(m(t)),2),S=y[0],E=y[1];a.useEffect((function(){E(m(t)),h({})}),[t,E]);var C=function(e,t){h((function(n){return $({},n,K({},e,t?void 0:[{message:e+" expected but not provided.",state:"error"}]))}))};return(0,r.tZ)(j.Z,{isOpen:c,onRequestClose:l,children:(0,r.BX)("div",{className:o().dynamic([["d333e3fa403aca0c",[""===S.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-tests-view",children:[(0,r.tZ)("div",{className:o().dynamic([["d333e3fa403aca0c",[""===S.type?"--foreground-dimmer":"--foreground-default"]]])+" header-row",children:(0,r.tZ)(d.Z,{level:4,align:"center",children:t?"Edit test: ":"Create test"})}),(0,r.tZ)("div",{className:o().dynamic([["d333e3fa403aca0c",[""===S.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,r.tZ)(w.ZP,{label:"Test name",placeholder:"The name of the test",value:(null===S||void 0===S?void 0:S.name)||"",validationResults:p.name,onChange:function(e){var t;e.persist(),E((function(t){var n;return $({},t,{name:(null===(n=e.target)||void 0===n?void 0:n.value)||""})})),C("name",null===(t=e.target)||void 0===t?void 0:t.value)},maxLength:20})}),(0,r.tZ)("div",{className:o().dynamic([["d333e3fa403aca0c",[""===S.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,r.tZ)(Z.Z,{style:{height:"150px"},label:"Input (standard in)",placeholder:"The input for the test",value:S.input,fontFamily:"monospace",translate:"no",onChange:function(e){e.persist(),E((function(t){return $({},t,{input:e.target.value})}))}})}),(0,r.tZ)("div",{className:o().dynamic([["d333e3fa403aca0c",[""===S.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,r.tZ)(Z.Z,{style:{height:"150px"},label:"Expected output",validationResults:p.output,placeholder:"The expected output for the test",value:S.output,fontFamily:"monospace",translate:"no",onChange:function(e){var t;e.persist(),E((function(t){return $({},t,{output:e.target.value})})),C("output",null===(t=e.target)||void 0===t?void 0:t.value)}})}),(0,r.tZ)("div",{className:o().dynamic([["d333e3fa403aca0c",[""===S.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,r.tZ)("div",{className:o().dynamic([["d333e3fa403aca0c",[""===S.type?"--foreground-dimmer":"--foreground-default"]]])+" dropdown-container",children:(0,r.tZ)(x.Z,{items:[s.Flv.Match,s.Flv.Exact,s.Flv.Regex,s.Flv.Compatibility],renderItemChildComponent:function(e){return(0,r.BX)("a",{className:o().dynamic([["d333e3fa403aca0c",[""===S.type?"--foreground-dimmer":"--foreground-default"]]]),children:[e,(0,r.tZ)("br",{className:o().dynamic([["d333e3fa403aca0c",[""===S.type?"--foreground-dimmer":"--foreground-default"]]])}),(0,r.tZ)(f.Z,{size:"xsmall",children:X(e)})]})},renderAnchorComponent:function(e){var t=e.innerRef,n=q(e,["innerRef"]);return(0,r.BX)("a",$({ref:t},n,{className:o().dynamic([["d333e3fa403aca0c",[""===S.type?"--foreground-dimmer":"--foreground-default"]]])+" dropdown-view dropdown-anchor",children:[(0,r.tZ)(f.Z,{children:S.type}),(0,r.tZ)(f.Z,{children:(0,r.tZ)(k.Z,{})})]}))},onClick:function(e){E((function(t){return $({},t,{type:e})}))}})})}),(0,r.BX)("div",{className:o().dynamic([["d333e3fa403aca0c",[""===S.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row align-end",children:[(0,r.tZ)(b.Z,{onClick:i,children:"Cancel"}),(0,r.tZ)(b.Z,{color:"primary",filled:!0,onClick:function(){if(!S.name||!S.output)return g("Test name and expected output must be provided."),S.name||C("name"),void(S.output||C("output"));S.type?(n({testId:null===t||void 0===t?void 0:t.id,name:S.name,input:S.input||"",type:S.type,output:S.output}),E(m(void 0))):g("A test type must be provided")},children:"Save"})]}),(0,r.tZ)(o(),{id:"d333e3fa403aca0c",dynamic:[""===S.type?"--foreground-dimmer":"--foreground-default"],children:".dropdown-container.__jsx-style-dynamic-selector{border:1px solid var(--outline-dimmest);width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.dropdown-anchor.__jsx-style-dynamic-selector{padding:var(--space-8)}.dropdown-container.__jsx-style-dynamic-selector .anchor{z-index:1}.dropdown-container.__jsx-style-dynamic-selector .dropdown-view{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;text-align:right}.dropdown-container.__jsx-style-dynamic-selector .dropdown-view .text{color:var(".concat(""===S.type?"--foreground-dimmer":"--foreground-default",")}.manage-tests-view.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:var(--space-16)}.manage-test-row.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding-top:var(--space-16)}.align-end.__jsx-style-dynamic-selector{-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.manage-test-row.__jsx-style-dynamic-selector>button{margin-left:var(--space-8)}.manage-test-row-section.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin:0 var(--space-16);width:100%}")})]})})},J=n(11542),ee=n(29698),te=n(58375),ne=function(e){var t=e.test,n=e.onEdit,i=e.onDelete,a=e.onView,c=e.isTeacherView,s=e.status,u=e.isRunning,d=e.onShowFailed,p=e.disableButtons,h="";return s?h=s:u&&(h="Running"),(0,r.BX)("div",{onClick:function(){return a()},className:"jsx-d0055d2df6a917c5 test",children:[(0,r.BX)("div",{className:"jsx-d0055d2df6a917c5 test-row",children:[(0,r.tZ)("div",{className:"jsx-d0055d2df6a917c5 test-text",children:(0,r.tZ)(f.Z,{size:"large",children:t.name})}),c&&(0,r.tZ)("div",{onClick:function(e){return e.stopPropagation()},className:"jsx-d0055d2df6a917c5 test-row",children:(0,r.BX)(r.HY,{children:[(0,r.tZ)(b.Z,{color:"primary",onClick:n,Icon:ee.Z,disabled:p}),(0,r.tZ)(J.Z,{width:"var(--space-4)"}),(0,r.tZ)(b.Z,{onClick:i,color:"negative",Icon:te.Z,disabled:p})]})})]}),(s||u)&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(J.Z,{height:2}),(0,r.BX)("div",{className:"jsx-d0055d2df6a917c5 test-row",children:[(0,r.tZ)("div",{className:"jsx-d0055d2df6a917c5 test-text",children:(0,r.tZ)(f.Z,{className:l()([{"status-passed":"Passed"===s},{"status-failed":"Failed"===s}]),children:h})}),(0,r.tZ)(b.Z,{onClick:function(e){return e.stopPropagation(),d(e)},disabled:u,children:"Results"})]})]}),(0,r.tZ)(o(),{id:"d0055d2df6a917c5",children:".test.jsx-d0055d2df6a917c5{background-color:var(--background-higher);margin-top:var(--space-8);padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);cursor:pointer}.test-row.jsx-d0055d2df6a917c5 .status-passed{color:var(--accent-positive-default)}.test-row.jsx-d0055d2df6a917c5 .status-failed{color:var(--accent-negative-default)}.test-text.jsx-d0055d2df6a917c5{width:100%;padding:var(--space-4)0;padding-right:var(--space-8);word-break:break-all}.test.jsx-d0055d2df6a917c5:hover{background-color:var(--background-higher)}.test-row.jsx-d0055d2df6a917c5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start}"})]})};function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var oe=function(e){var t=e.text;if(!t)return null;var n=t.split("\n").map((function(e,t){return[e,"".concat(t+1)]}));return""===n[n.length-1][0]&&n.pop(),(0,r.BX)(p.Ug,{children:[(0,r.tZ)("code",{className:"jsx-6ac664c130469a42 gutter",children:(0,r.tZ)("pre",{className:"jsx-6ac664c130469a42",children:n.map((function(e){var t=ie(e,2);t[0];return t[1]})).join("\n")})}),(0,r.tZ)("code",{className:"jsx-6ac664c130469a42 text",children:(0,r.tZ)("pre",{className:"jsx-6ac664c130469a42",children:t})}),(0,r.tZ)(o(),{id:"6ac664c130469a42",children:".gutter.jsx-6ac664c130469a42,.text.jsx-6ac664c130469a42{color:var(--foreground-default)}.gutter.jsx-6ac664c130469a42{min-width:1.5em}.text.jsx-6ac664c130469a42{max-width:80%}"})]})},ae=n(37529),ce=n.n(ae);function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ue=function(e){var t=e.expected,n=e.actual;if(!t||!n)return null;var i=n.split("\n"),a=t.split("\n"),c=a.length>i.length?a:i,l=c.map((function(e,t){return[e,"".concat(t+1)]})),s=c.map((function(e,t){var n=t<i.length?i[t]:"",o=t<a.length?a[t]:"";return(0,r.BX)(r.HY,{children:[ce()(n,o).map((function(e,t){var n;return-1===e[0]&&(n={backgroundColor:"var(--accent-negative-dimmer)",textDecoration:"line-through"}),1===e[0]&&(n={backgroundColor:"var(--accent-positive-dimmer)",textDecoration:"underline"}),(0,r.tZ)("span",{style:n,children:e[1]},t)})),(0,r.tZ)("br",{})]})}));return(0,r.BX)(p.Ug,{children:[(0,r.tZ)("code",{className:"jsx-6ac664c130469a42 gutter",children:(0,r.tZ)("pre",{className:"jsx-6ac664c130469a42",children:l.map((function(e){var t=se(e,2);t[0];return t[1]})).join("\n")})}),(0,r.tZ)("code",{className:"jsx-6ac664c130469a42 text",children:(0,r.tZ)("pre",{className:"jsx-6ac664c130469a42",children:s})}),(0,r.tZ)(o(),{id:"6ac664c130469a42",children:".gutter.jsx-6ac664c130469a42,.text.jsx-6ac664c130469a42{color:var(--foreground-default)}.gutter.jsx-6ac664c130469a42{min-width:1.5em}.text.jsx-6ac664c130469a42{max-width:80%}"})]})},de=function(e){var t=e.test,n=e.actualOutput,i=e.isOpen,a=e.isResults,c=e.onRequestClose,l=e.didFail,u=e.error,h=t?X(t.type):"",m=null===n||void 0===n?void 0:n.split("\n"),b=null===t||void 0===t?void 0:t.output.split("\n"),v=null===t||void 0===t?void 0:t.output;return l=null!==l&&void 0!==l?l:"Failed"===(null===t||void 0===t?void 0:t.status),(0,r.BX)(j.Z,{onRequestClose:c,isOpen:i&&void 0!==t,children:[(0,r.BX)("div",{className:"jsx-c7ed87540f6ec33d test-info",children:[(0,r.BX)(p.gC,{align:"center",spacing:1,children:[(0,r.BX)(d.Z,{level:4,children:[a&&"Test results: ",null===t||void 0===t?void 0:t.name]}),(0,r.BX)(p.Ug,{spacing:1,children:[(0,r.tZ)("div",{role:"tooltip","data-microtip-position":"top","aria-label":h,className:"jsx-c7ed87540f6ec33d test-type",children:(0,r.tZ)(f.Z,{align:"center",size:"small",children:null===t||void 0===t?void 0:t.type})}),a&&(null===t||void 0===t?void 0:t.status)&&(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d "+"test-status ".concat(null===t||void 0===t?void 0:t.status),children:(0,r.tZ)(f.Z,{align:"center",size:"small",children:null===t||void 0===t?void 0:t.status})})]})]}),(0,r.tZ)(J.Z,{height:6}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,r.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:a?(0,r.BX)(p.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(f.Z,{size:"medium",children:"Expected output"}),(0,r.tZ)(f.Z,{size:"xsmall",children:(0,r.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Your program is expected to print this output.",className:"jsx-c7ed87540f6ec33d help",children:"?"})})]}):(0,r.tZ)(f.Z,{size:"medium",children:"Output"})}),(0,r.tZ)(J.Z,{height:"var(--space-8)"}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,r.tZ)(oe,{text:null===t||void 0===t?void 0:t.output})})]})}),(0,r.tZ)(J.Z,{height:2}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,r.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:a?(0,r.BX)(p.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(f.Z,{size:"medium",children:"Actual output"}),(0,r.tZ)(f.Z,{size:"xsmall",children:(0,r.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Your program actually printed this output.",className:"jsx-c7ed87540f6ec33d help",children:"?"})})]}):(0,r.tZ)(f.Z,{size:"medium",children:"Input"})}),(0,r.tZ)(J.Z,{height:"var(--space-8)"}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,r.tZ)(oe,{text:a?n:null===t||void 0===t?void 0:t.input})})]})}),a&&l&&(0,r.tZ)(r.HY,{children:u?(0,r.BX)(r.HY,{children:[(0,r.tZ)(J.Z,{height:2}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,r.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:(0,r.tZ)(f.Z,{size:"medium",children:"Error(s)"})}),(0,r.tZ)(J.Z,{height:"var(--space-8)"}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,r.tZ)(oe,{text:u.stderr||u.message})})]})})]}):(null===t||void 0===t?void 0:t.type)!==s.Flv.Regex&&b&&m&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(J.Z,{height:2}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,r.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:(0,r.BX)(p.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(f.Z,{size:"medium",children:"Difference"}),(0,r.tZ)(f.Z,{size:"xsmall",children:(0,r.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Modify your output to match the expected output.",className:"jsx-c7ed87540f6ec33d help",children:"?"})})]})}),(0,r.tZ)(J.Z,{height:"var(--space-8)"}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,r.tZ)(ue,{expected:v,actual:n})})]})})]})})]}),(0,r.tZ)(o(),{id:"c7ed87540f6ec33d",children:".test-info.jsx-c7ed87540f6ec33d{padding:var(--space-24);display:relative}.test-io-line-spacing.jsx-c7ed87540f6ec33d{width:var(--space-8);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.test-io-row.jsx-c7ed87540f6ec33d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.test-io-line-number.jsx-c7ed87540f6ec33d{display:inline-block;min-width:1.5em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.test-io-line.jsx-c7ed87540f6ec33d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;font-family:var(--font-family-code)}.test-io-line-content.jsx-c7ed87540f6ec33d{display:inline-block}.test-io-label.jsx-c7ed87540f6ec33d{padding-bottom:var(--space-8);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.test-io-label.jsx-c7ed87540f6ec33d .text{color:var(--foreground-dimmer)}.test-io-section.jsx-c7ed87540f6ec33d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;width:100%}.test-io-box.jsx-c7ed87540f6ec33d{height:100%;border:1px solid var(--outline-dimmest);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow-x:auto}.test-io-box.jsx-c7ed87540f6ec33d .text{white-space:nowrap}.test-type.jsx-c7ed87540f6ec33d,.test-status.jsx-c7ed87540f6ec33d{background-color:var(--background-highest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8);display:inline-block;spacing:1;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.test-status.jsx-c7ed87540f6ec33d .text{color:var(--white)}.test-status.Passed.jsx-c7ed87540f6ec33d{background-color:var(--accent-positive-default)}.test-status.Failed.jsx-c7ed87540f6ec33d{background-color:var(--accent-negative-default)}.help.jsx-c7ed87540f6ec33d{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px solid var(--background-higher);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;width:var(--space-16);height:var(--space-16);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}"})]})},fe=n(30617),pe=n(923),he=n(46829),me=n(27754),be=n(56834);function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ge(e,t,n[t])}))}return e}function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var we,ke=function(){var e,t,n,i,c,l,p,m,x=(0,fe.Z)(),w=x.iotester,k=x.dotReplit,Z=x.container,j=(0,v.Z)(),S=j.showError,E=j.showConfirm,_=xe(a.useState([]),2),O=_[0],T=_[1],I=xe(a.useState(),2),A=I[0],P=I[1],N=xe(a.useState(Z.getConnectionState()),2),R=N[0],z=N[1],B=xe(a.useState(w.state),2),D=B[0],U=B[1],L=xe(a.useState(),2),X=L[0],M=L[1],G=(0,he.useApolloClient)();a.useEffect((function(){return Z.onConnectionStateChanged(z)}),[z,Z]);var H=(0,u.Z)(),V=(0,s.CHr)({variables:{replId:H}}),K="Repl"===(null===(e=V.data)||void 0===e||null===(t=e.repl)||void 0===t?void 0:t.__typename)?V.data.repl:null,$="Team"===(null===K||void 0===K||null===(n=K.owner)||void 0===n?void 0:n.__typename)&&K.owner.id||null,q=xe((0,s.vkX)({onCompleted:function(e){e&&e.saveIOTestResults&&S(e.saveIOTestResults.message)}}),1)[0];a.useEffect((function(){var e=[w.onStateChanged((function(e){U(e),$&&e===pe.Z.Idle&&T((function(e){var t;return q({variables:{replId:H,results:Object.values(e).map((function(e){var n;return ye({},e,{output:(null===(n=e.error)||void 0===n?void 0:n.stderr)?(null!==(t=e.output)&&void 0!==t?t:"")+e.error:e.output})})),teamId:$}}).catch((function(t){C.Tb(t,(function(t){return t.setExtras({results:e,payload:X})}))})),e}))})),w.onError((function(e){S(e.message)})),w.onTestResult((function(e){T((function(t){var n=ye({},t[e.testId],{testId:e.testId,status:"passed"===e.body?s.kQ0.Passed:s.kQ0.Failed});return"error"===e.body&&(n.error=e.error),ye({},t,ge({},e.testId,n))}))})),w.onInstructionResult((function(e){T((function(t){var n,r,i=Math.abs(e.instructionId),o="";switch(e.body){case"passed":var a;o+=null!==(a=e.passed.output)&&void 0!==a?a:"";break;case"failed":var c;o+=null!==(c=e.failed.output)&&void 0!==c?c:"";break;case"timeout":var l;o+=null!==(l=e.timeout.output)&&void 0!==l?l:"";break;case"error":o+=e.error.message}return ye({},t,ge({},i,ye({},t[i],{testId:i,output:(null!==(r=null===(n=O[i])||void 0===n?void 0:n.output)&&void 0!==r?r:"")+o})))}))}))];return function(){return e.forEach((function(e){return e()}))}}),[O,S,U,w,H,$,X,q]),a.useEffect((function(){var e=function(e){var t,n;t=e,(null!=(n=Error)&&"undefined"!==typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](t):t instanceof n)&&S(e.message),C.Tb(e)};return W(k).then(P).catch(e),k.watch((function(){return W(k).then(P).catch(e)}))}),[k,P,S]);var Y=null===K||void 0===K?void 0:K.ioTests,J=xe((0,s.Nej)({onError:function(e){return S(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.deleteTemplateTest)||void 0===t?void 0:t.__typename)?S(e.deleteTemplateTest.message):(E("Test deleted!"),V.refetch())}}),2),ee=J[0],te=J[1],re=xe((0,s.AAz)({onError:function(e){return S(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.updateTemplateTest)||void 0===t?void 0:t.__typename)?S(e.updateTemplateTest.message):"ReplTemplateTest"===e.updateTemplateTest.__typename&&(E("Test updated!"),G.writeFragment({fragment:s.GgA,data:e.updateTemplateTest}))}}),2),ie=re[0],oe=re[1],ae=xe((0,s.pVf)({onError:function(e){return S(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.createTemplateTest)||void 0===t?void 0:t.__typename)?S(e.createTemplateTest.message):(E("Test created!"),V.refetch())}}),2),ce=ae[0],le=ae[1],se=V.loading||te.called&&te.loading||oe.called&&oe.loading||le.called&&le.loading;a.useEffect((function(){se||M(A&&Y&&Y.length>0?{runInfo:A,tests:Y.map(F)}:void 0)}),[Y,A,M,se]);var ue=xe(a.useState(!1),2),ve=ue[0],we=ue[1],ke=xe(a.useState(!1),2),Ze=ke[0],je=ke[1],Se=xe(a.useState(!1),2),Ee=Se[0],Ce=Se[1],_e=xe(a.useState(),2),Oe=_e[0],Te=_e[1],Ie="undefined"!==typeof Oe&&"Repl"===(null===(i=V.data)||void 0===i?void 0:i.repl.__typename)&&V.data.repl.ioTests[Oe]||void 0,Ae="Repl"===(null===(c=V.data)||void 0===c?void 0:c.repl.__typename)&&V.data.repl.isProject;if(V.error)return(0,r.BX)("div",{className:"jsx-fb1466c53ace89ca wrapper",children:[(0,r.tZ)(f.Z,{align:"center",children:"Unable to fetch tests"}),(0,r.tZ)(o(),{id:"fb1466c53ace89ca",children:".wrapper.jsx-fb1466c53ace89ca{padding:var(--deprecated-spacing-2);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]});var Pe=function(e){var t;if(void 0!==(null===(t=O[e])||void 0===t?void 0:t.status))return O[e].status===s.kQ0.Passed?"Passed":"Failed"};return(0,r.BX)("div",{className:"jsx-69bed4444090144f tests-panel",children:[(0,r.tZ)("div",{className:"jsx-69bed4444090144f tests-header",children:(0,r.tZ)(d.Z,{level:4,children:"Input/Output Tests"})}),V.loading?(0,r.tZ)("div",{className:"jsx-69bed4444090144f spinner",children:(0,r.tZ)(h.Z,{})}):(0,r.BX)("div",{className:"jsx-69bed4444090144f tests",children:[(0,r.BX)("div",{className:"jsx-69bed4444090144f button-bar",children:[Ae&&(0,r.tZ)(b.Z,{color:"green",Icon:y.Z,className:"create-test-button",disabled:se||D!==pe.Z.Idle,onClick:function(){Te(void 0),we(!0)},children:"Create test"}),!Ae&&Y&&0===Y.length?(0,r.tZ)(f.Z,{children:"This project has no tests "}):(0,r.tZ)(b.Z,{color:"positive",Icon:g.Z,onClick:function(){var e;if(!X||"Repl"!==(null===K||void 0===K?void 0:K.__typename)||"Team"!==(null===(e=K.owner)||void 0===e?void 0:e.__typename)||w.state!==pe.Z.Idle){var t=new Error("no tests or run info");throw C.Tb(t,(function(e){return e.setExtra("payload",X)})),t}T({}),(0,be.j)(be.U3.AUTOGRADER_STARTED),w.run(X).catch((function(e){C.Tb(e,(function(e){return e.setExtra("payload",X)})),S(e.message)}))},disabled:se||D!==pe.Z.Idle||!X||R!==me.e.CONNECTED,children:"Run tests"})]}),null===Y||void 0===Y?void 0:Y.map((function(e,t){return(0,r.tZ)(ne,{test:e,onEdit:function(){Te(t),we(!0)},onDelete:function(){ee({variables:{testId:e.id}})},onView:function(){Te(t),je(!0),Ce(!1)},onShowFailed:function(){Te(t),je(!0),Ce(!0)},isRunning:D!==pe.Z.Idle&&void 0!==O[e.id]&&void 0===O[e.id].status,isTeacherView:Ae,status:Pe(e.id),disableButtons:se||D!==pe.Z.Idle},e.id)})),(0,r.tZ)(Q,{test:Ie,isOpen:ve,readOnly:!Ae,onRequestClose:function(){we(!1),Te(void 0)},onCancel:function(){we(!1),Te(void 0)},onSubmit:function(e){var t,n,r,i;void 0!==e.testId?(ie({variables:{input:e}}),Te(void 0)):"Repl"===(null===(t=V.data)||void 0===t||null===(n=t.repl)||void 0===n?void 0:n.__typename)&&(null===(r=V.data)||void 0===r||null===(i=r.repl)||void 0===i?void 0:i.template)&&ce({variables:{input:ye({},e,{templateId:V.data.repl.template.id})}}),we(!1)}}),(0,r.tZ)(de,{test:Ie,isOpen:Ze,actualOutput:"undefined"!==typeof Ie?null===(l=O[Ie.id])||void 0===l?void 0:l.output:void 0,error:Ie&&(null===(p=O[Ie.id])||void 0===p?void 0:p.error),didFail:Ie&&(null===(m=O[Ie.id])||void 0===m?void 0:m.status)===s.kQ0.Failed,isResults:Ee,onRequestClose:function(){je(!1),Te(void 0)}})]}),(0,r.tZ)(o(),{id:"69bed4444090144f",children:".flex-grow.jsx-69bed4444090144f{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.spacer-1.jsx-69bed4444090144f{padding:var(--space-4)}.tests-header.jsx-69bed4444090144f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;position:relative;padding:var(--space-4)0 var(--space-8)0;margin-bottom:var(--space-8);color:var(--foreground-default);width:100%;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.button-bar.jsx-69bed4444090144f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:var(--space-8)}.button-bar.jsx-69bed4444090144f>button{margin-right:var(--space-8);margin-bottom:var(--space-8)}.spinner.jsx-69bed4444090144f{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);-o-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.tests-panel.jsx-69bed4444090144f{min-width:200px;background-color:var(--background-default);color:var(--foreground-default);overflow:hidden auto}.section.jsx-69bed4444090144f{height:-webkit-calc(100% - 50px);height:-moz-calc(100% - 50px);height:calc(100% - 50px)}"})]})},Ze=n(45620);function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(){var e=Se(a.useState(null),2),t=e[0],n=e[1],i=a.useRef(we.None),c=(0,u.Z)(),b=(0,Ze.Z)(),v=b.language,g=b.isLoading,y=(0,s.CHr)({variables:{replId:c}}),x=y.loading;return a.useEffect((function(){var e,t,r=null===(e=y.data)||void 0===e?void 0:e.repl;if("Repl"===(null===r||void 0===r?void 0:r.__typename)){var o=r.unitTests,a=r.ioTests,c=we.Choose;c=a.length>0?we.IO:(null===o||void 0===o?void 0:o.tests)&&(null===(t=o.tests)||void 0===t?void 0:t.length)>0||(null===o||void 0===o?void 0:o.meta)?we.Unit:r.currentUserPermissions.writeTests?i.current!==we.None?i.current:we.Choose:we.None,n(c)}}),[y.data]),x||g?(0,r.BX)("div",{className:"jsx-1652fb32f8a812d3",children:[(0,r.tZ)(h.Z,{}),(0,r.tZ)(o(),{id:"1652fb32f8a812d3",children:"div.jsx-1652fb32f8a812d3{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]}):(0,r.BX)("div",{className:"jsx-ba2c7540ad19d138 testing-controller",children:[t===we.None&&(0,r.tZ)("div",{className:"jsx-ba2c7540ad19d138 empty",children:(0,r.tZ)(f.Z,{children:"No tests found"})}),t===we.Choose&&(0,r.BX)(p.gC,{align:"center",spacing:2,children:[(0,r.tZ)(d.Z,{align:"center",level:3,children:"Choose a testing method"}),(0,r.BX)("div",{onClick:function(){n(we.Unit),i.current=we.Unit},className:"jsx-ba2c7540ad19d138 "+(l()("panel",{"is-disabled":!v})||""),children:[(0,r.tZ)(d.Z,{level:4,children:"Unit tests"}),(0,r.tZ)(f.Z,{align:"center",children:v?"A language specific framework that tests individual functions":"Unit tests are not currently supported for this language"})]}),(0,r.tZ)("div",{onClick:function(){n(we.IO),i.current=we.IO},className:"jsx-ba2c7540ad19d138 panel",children:(0,r.BX)(p.gC,{spacing:1,align:"center",children:[(0,r.tZ)(d.Z,{level:4,children:"Input output tests"}),(0,r.tZ)(f.Z,{align:"center",children:"Test your program via standard in, and assert based on the result of standard out"})]})})]}),t===we.IO&&(0,r.tZ)(ke,{}),t===we.Unit&&(0,r.tZ)(m.Z,{onBack:function(){return n(we.Choose)}}),(0,r.tZ)(o(),{id:"ba2c7540ad19d138",children:".empty.jsx-ba2c7540ad19d138{padding:var(--space-16);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.testing-controller.jsx-ba2c7540ad19d138{overflow-y:auto;padding:var(--space-8);height:100%;width:100%;background-color:var(--background-default);-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1)}.panel.jsx-ba2c7540ad19d138{width:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:1px solid var(--background-higher);max-width:200px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;padding:var(--space-8)}.panel.jsx-ba2c7540ad19d138:hover{background-color:var(--background-root)}.panel.is-disabled.jsx-ba2c7540ad19d138{opacity:.5;pointer-events:none}"})]})}!function(e){e[e.None=0]="None",e[e.Choose=1]="Choose",e[e.Unit=2]="Unit",e[e.IO=3]="IO"}(we||(we={}))},57941:function(e,t,n){n.d(t,{Z:function(){return tu}});var r=n(35944),i=n(79547),o=n.n(i),a=n(67294),c=n(24039),l=n(30617),s=n(90039),u=n(34051),d=n.n(u),f=n(24865),p=n(22429);function h(e){var t,n=e.getServerCapabilities();return{isAutoCompleteSupported:Boolean(null===n||void 0===n?void 0:n.completionProvider),isCompletionItemResolveSupported:Boolean(null===n||void 0===n||null===(t=n.completionProvider)||void 0===t?void 0:t.resolveProvider),isDocumentSymbolSupported:Boolean(null===n||void 0===n?void 0:n.documentSymbolProvider),isFindReferencesSupported:Boolean(null===n||void 0===n?void 0:n.referencesProvider),isFindDefinitionSupported:Boolean(null===n||void 0===n?void 0:n.definitionProvider),isFindTypeDefinitionSupported:Boolean(null===n||void 0===n?void 0:n.typeDefinitionProvider),isFindImplementationSupported:Boolean(null===n||void 0===n?void 0:n.implementationProvider),isTextDocumentSyncSupported:Boolean(null===n||void 0===n?void 0:n.textDocumentSync),isHoverSupported:Boolean(null===n||void 0===n?void 0:n.hoverProvider),isRenameSupported:Boolean(null===n||void 0===n?void 0:n.renameProvider),isCodeActionsSupported:Boolean(null===n||void 0===n?void 0:n.codeActionProvider),isSignatureHelpSupported:Boolean(null===n||void 0===n?void 0:n.signatureHelpProvider)}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){var t=b(a.useState(null),2),n=t[0],r=t[1];return a.useEffect((function(){if(e)return r(h(e)),e.onServerCapabilitiesChange((function(){r(h(e))}));r(null)}),[e]),n}var g=n(36793),y=n(89431),x=n(63805),w=n(73935),k=n(80796),Z=n(78120),j=n(34790),S=n(47421),E=n(39453);function C(e){if(!e)return"";if(Array.isArray(e)){var t="",n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){t+=C(o.value)+"\n\n"}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}return"string"===typeof e?e:"language"in e?"```"+e.language+"\n"+e.value+"\n```":e.value}var _=n(3204),O=n(88534);function T(e,t,n){if("effects"in e){var r=!0,i=!1,o=void 0;try{for(var a,c=e.effects[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var l=a.value;l.is(t)&&n(l)}}catch(h){i=!0,o=h}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}}else{var s=!0,u=!1,d=void 0;try{for(var f,p=e.transactions[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){T(f.value,t,n)}}catch(h){u=!0,d=h}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}}}var I=n(54929);function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){P(o,r,i,a,c,"next",e)}function c(e){P(o,r,i,a,c,"throw",e)}a(void 0)}))}}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){R(e,t,n[t])}))}return e}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Z.Py.define(),r=Z.QQ.define({create:function(){return t},update:function(t,r){return T(r,n,(function(n){t=e(n.value,t)})),t}});return{effect:n,state:r}}(),U=Z.Py.define(),L=Z.QQ.define({create:function(){return null},update:function(e,t){if(!t.isUserEvent("input.type"))return null;if(t.changes.empty)return e;var n="";return t.changes.iterChanges((function(e,t,r,i,o){n=o.sliceString(0,1)})),n||null}});function X(e){var t=e.lspClient,n=e.path,i=e.setDecoration,o=function(e){return w.createPortal((0,r.tZ)(M,z({},e)),a)},a=document.createElement("div"),c={};function l(e,t){return s.apply(this,arguments)}function s(){return s=N(d().mark((function e(r,i){var o,a,c,l,s,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=(null===(o=t.getServerCapabilities())||void 0===o||null===(a=o.signatureHelpProvider)||void 0===a?void 0:a.triggerCharacters)||[]){e.next=4;break}return e.abrupt("return",null);case 4:if(l=r.field(u,!1),s=r.field(L,!1),l||null!=s&&c.includes(s)){e.next=8;break}return e.abrupt("return",null);case 8:return e.next=10,G(r,i,t,n);case 10:if((f=e.sent)&&f.signatures.length){e.next=13;break}return e.abrupt("return",null);case 13:return e.abrupt("return",f);case 14:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}var u=Z.QQ.define({create:function(){return null},update:function(e,t){return t.isUserEvent("select.pointer")?null:(e&&t.newSelection.main.from!==e.pos&&(e=z({},e,{pos:t.newSelection.main.from})),T(t,D.effect,(function(n){var l=n.value;e=l?{pos:t.newSelection.main.from,create:function(){return function(e){var t=0,n=function(n){i((0,r.tZ)(o,{help:e,index:t,onLayout:n}))};return n(),c.dom=a,c.update=function(r){T(r,U,(function(i){t=(t+i.value+e.signatures.length)%e.signatures.length,n((function(){(0,S.E2)(r.view)}))}))},c}(l)},above:!0}:null})),e)},provide:function(e){return S.hJ.from(e)}}),f=S.lg.define((function(){var e=(0,k.Z)(function(){var e=N(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.state.selection.main).empty){e.next=7;break}return e.next=4,l(t.state,n.from);case 4:(r=e.sent)&&(0,j._B)(t),t.dispatch({effects:D.effect.of(r)});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),0);return{update:function(t){t.transactions.some((function(e){return e.selection}))&&t.state.selection.main.empty&&e(t.view)}}})),p=function(e){return function(t){return!!function(e){var t=e.state.field(D.state,!1);return null!=t&&t.signatures.length>1}(t)&&(t.dispatch({effects:U.of(e)}),!0)}},h=[{key:"ArrowDown",run:p(1)},{key:"ArrowUp",run:p(-1)},{key:"Escape",run:function(e){return!!e.state.field(D.state,!1)&&(e.dispatch({effects:D.effect.of(null)}),!0)}}];return[u,D.state,L,f,Z.Wl.high(S.$f.of(h))]}var M=function(e){var t,n,i=e.help,o=e.index,c=e.onLayout,l="1px solid ".concat(_.TV.outlineDimmest),s="min(425px, 80vw)";a.useLayoutEffect((function(){return null===c||void 0===c?void 0:c()}),[c]);var u=i.signatures[o],d=i.signatures.length>1;if(!u)return null;var f=u.documentation,p=null!=i.activeParameter&&(null===(t=u.parameters)||void 0===t||null===(n=t[i.activeParameter])||void 0===n?void 0:n.documentation);return(0,r.BX)(I.Z,{css:[_.l0.flex.row,{width:"max-content"}],children:[d&&(0,r.tZ)(I.Z,{css:[_.l0.flex.row,_.l0.pl(4),{borderRight:l,paddingBottom:5}],children:(0,r.BX)("span",{css:[{alignSelf:"flex-end"},_.l0.p(4)],children:[o+1,"/",i.signatures.length]})}),(0,r.BX)(I.Z,{children:[(0,r.tZ)(I.Z,{css:[_.l0.py(4),_.l0.pl(d?4:8),_.l0.pr(8),_.l0.maxHeight(100),_.l0.overflowY("scroll"),_.l0.font.code,{lineHeight:_.TV.lineHeightSmall,maxWidth:s}],children:(0,r.tZ)(F,{signature:u,activeParameter:i.activeParameter})}),Boolean(f||p)&&(0,r.BX)(I.Z,{css:[_.l0.px(d?4:8),_.l0.py(2),_.l0.maxHeight(200),_.l0.overflow("scroll"),{borderTop:l,maxWidth:s}],children:[p?(0,r.tZ)(I.Z,{children:(0,r.tZ)(O.Z,{children:C(p)})}):null,f?(0,r.tZ)(I.Z,{children:(0,r.tZ)(O.Z,{children:C(f)})}):null]})]})]})};function F(e){var t,n=e.signature,i=n.label,o=n.parameters,a=e.activeParameter;if(null==a||!o)return(0,r.tZ)("span",{children:i});var c=null===(t=o[a])||void 0===t?void 0:t.label;if(!c)return(0,r.tZ)("span",{children:i});var l=B("string"===typeof c?[i.indexOf(c),i.indexOf(c)+c.length]:c,2),s=l[0],u=l[1];return(0,r.BX)("div",{children:[(0,r.tZ)("span",{children:i.slice(0,s)}),(0,r.tZ)("strong",{children:c}),(0,r.tZ)("span",{children:i.slice(u)})]})}function G(e,t,n,r){return W.apply(this,arguments)}function W(){return W=N(d().mark((function e(t,n,r,i){var o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.request.signatureHelp(i,(0,E.s)(t.doc,n));case 2:if(!("error"in(o=e.sent))){e.next=5;break}throw new Error("Something went wrong fetching signature help results: ".concat(o.error.message));case 5:return e.abrupt("return",o.result);case 6:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}var H=n(28468);function V(e){var t=e.lspClient,n=e.path;return S.tk.updateListener.of((function(e){var r;if(e.docChanged){var i=null===(r=t.getServerCapabilities())||void 0===r?void 0:r.textDocumentSync;if(i!==H.TextDocumentSyncKind.None&&t.isOpen(n))if(i!==H.TextDocumentSyncKind.Full)t.notify.didChange(n,function(e,t){var n=[],r=t;return e.iterChanges((function(e,t,i,o,a){var c=a.sliceString(0),l=t-e,s=l+i;n.push({range:{start:(0,E.s)(r,i),end:(0,E.s)(r,s)},rangeLength:l,text:c}),r=r.replace(i,s,a)})),n}(e.changes,e.startState.doc));else{var o=e.view.state.doc.toString();t.notify.didChange(n,[{text:o}])}}}))}var K=n(91674),$=n(28519);function q(e){var t=e.lspClient,n=e.path;return S.lg.define((function(e){var r=t.onDiagnostics((function(t){if(t.path===n){var r=function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var l=a.value,s=(0,E.R)(t.doc,l.range.start),u=(0,E.R)(t.doc,l.range.end);if(s===u){var d=t.wordAt(u);if(d)s=d.from,u=d.to;else{if(!(u<t.doc.length))continue;u+=1}}var f="info";switch(l.severity){case K.DiagnosticSeverity.Error:f="error";break;case K.DiagnosticSeverity.Warning:f="warning";break;case K.DiagnosticSeverity.Hint:case K.DiagnosticSeverity.Information:f="info"}n.push({from:s,to:u,severity:f,message:l.message,source:l.source})}}catch(p){i=!0,o=p}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(t.diagnostics,e.state);e.dispatch((0,$.p0)(e.state,r))}}));return{destroy:function(){r()}}}))}var Y=n(1864),Q=n(59119);function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t,n){return t&&te(e.prototype,t),n&&te(e,n),e}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e,t,n){return(ie="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oe(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}function ce(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function le(e,t){return!t||"object"!==he(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||me(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||me(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var fe,pe,he=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function me(e,t){if(e){if("string"===typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}function be(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oe(e);if(t){var i=oe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return le(this,n)}}!function(e){e[e.Dollar=0]="Dollar",e[e.Colon=1]="Colon",e[e.Comma=2]="Comma",e[e.CurlyOpen=3]="CurlyOpen",e[e.CurlyClose=4]="CurlyClose",e[e.Backslash=5]="Backslash",e[e.Forwardslash=6]="Forwardslash",e[e.Pipe=7]="Pipe",e[e.Int=8]="Int",e[e.VariableName=9]="VariableName",e[e.Format=10]="Format",e[e.Plus=11]="Plus",e[e.Dash=12]="Dash",e[e.QuestionMark=13]="QuestionMark",e[e.EOF=14]="EOF"}(fe||(fe={})),function(e){e[e.DollarSign=36]="DollarSign",e[e.Plus=43]="Plus",e[e.Comma=44]="Comma",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Digit0=48]="Digit0",e[e.Digit9=57]="Digit9",e[e.Colon=58]="Colon",e[e.QuestionMark=63]="QuestionMark",e[e.A=65]="A",e[e.Z=90]="Z",e[e.Backslash=92]="Backslash",e[e.Underline=95]="Underline",e[e.a=97]="a",e[e.z=122]="z",e[e.OpenCurlyBrace=123]="OpenCurlyBrace",e[e.Pipe=124]="Pipe",e[e.CloseCurlyBrace=125]="CloseCurlyBrace"}(pe||(pe={}));var ve,ge=function(){function e(){ee(this,e),this.value="",this.pos=0}var t=e.prototype;return t.text=function(e){this.value=e,this.pos=0},t.tokenText=function(e){return this.value.substr(e.pos,e.len)},t.next=function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var t,n=this.pos,r=0,i=this.value.charCodeAt(n);if("number"===typeof(t=e._table[i]))return this.pos+=1,{type:t,pos:n,len:1};if(e.isDigitCharacter(i)){t=8;do{r+=1,i=this.value.charCodeAt(n+r)}while(e.isDigitCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}}if(e.isVariableCharacter(i)){t=9;do{i=this.value.charCodeAt(n+ ++r)}while(e.isVariableCharacter(i)||e.isDigitCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}}t=10;do{r+=1,i=this.value.charCodeAt(n+r)}while(!isNaN(i)&&"undefined"===typeof e._table[i]&&!e.isDigitCharacter(i)&&!e.isVariableCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}},e.isDigitCharacter=function(e){return e>=48&&e<=57},e.isVariableCharacter=function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90},e}();ge._table=(re(ve={},36,0),re(ve,58,1),re(ve,44,2),re(ve,123,3),re(ve,125,4),re(ve,92,5),re(ve,47,6),re(ve,124,7),re(ve,43,11),re(ve,45,12),re(ve,63,13),ve);var ye=function(){function e(){var t;ee(this,e),this._children=[],t=this,["parent"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,writable:!0})}))}var t=e.prototype;return t.appendChild=function(e){return ce(e,xe)&&ce(this._children[this._children.length-1],xe)?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this},t.replace=function(e,t){var n,r=e.parent,i=r.children.indexOf(e),o=r.children.slice(0);(n=o).splice.apply(n,[i,1].concat(de(t))),r._children=o,function e(t,n){var r=!0,i=!1,o=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var l=a.value;l.parent=n,e(l.children,l)}}catch(s){i=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}}(t,r)},t.toString=function(){return this.children.reduce((function(e,t){return e+t.toString()}),"")},t.len=function(){return 0},t.match=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=Object.entries(Te)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=ue(i.value,2),c=a[0];if(ce(this,a[1])&&c in e)return e[c](this)}}catch(l){n=!0,r=l}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}},ne(e,[{key:"children",get:function(){return this._children}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if(ce(e,_e))return e;e=e.parent}}}]),e}(),xe=function(e){ae(n,e);var t=be(n);function n(e){var r;return ee(this,n),(r=t.call(this)).value=e,r}var r=n.prototype;return r.toString=function(){return this.value},r.toTextmateString=function(){return n.escape(this.value)},r.len=function(){return this.value.length},r.clone=function(){return new n(this.value)},n.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},n}(ye),we=function(e){ae(n,e);var t=be(n);function n(){return ee(this,n),t.apply(this,arguments)}return n}(ye),ke=function(e){ae(n,e);var t=be(n);function n(e){var r;return ee(this,n),(r=t.call(this)).index=e,r}var r=n.prototype;return r.toTextmateString=function(){var e="";return this.transform&&(e=this.transform.toTextmateString()),0!==this.children.length||this.transform?0===this.children.length?"${".concat(this.index).concat(e,"}"):this.choice?"${".concat(this.index,"|").concat(this.choice.toTextmateString(),"|").concat(e,"}"):"${".concat(this.index,":").concat(this.children.map((function(e){return e.toTextmateString()})).join("")).concat(e,"}"):"$".concat(this.index)},r.clone=function(){var e=new n(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e},n.compareByIndex=function(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0},ne(n,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&ce(this._children[0],Ze)?this._children[0]:void 0}}]),n}(we),Ze=function(e){ae(n,e);var t=be(n);function n(){var e;return ee(this,n),(e=t.apply(this,arguments)).options=[],e}var r=n.prototype;return r.appendChild=function(e){return ce(e,xe)&&(e.parent=this,this.options.push(e)),this},r.toString=function(){return this.options[0].value},r.toTextmateString=function(){return this.options.map((function(e){return e.value.replace(/\||,/g,"\\$&")})).join(",")},r.len=function(){return this.options[0].len()},r.clone=function(){var e=new n;return this.options.forEach(e.appendChild,e),e},n}(ye),je=function(e){ae(n,e);var t=be(n);function n(){var e;return ee(this,n),(e=t.apply(this,arguments)).regexp=new RegExp(""),e}var r=n.prototype;return r.resolve=function(e){var t=this,n=!1,r=e.replace(this.regexp,(function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=!0,t._replace(r.slice(0,-2))}));return!n&&this._children.some((function(e){return ce(e,Se)&&Boolean(e.elseValue)}))&&(r=this._replace([])),r},r._replace=function(e){var t="",n=!0,r=!1,i=void 0;try{for(var o,a=this._children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var c=o.value;if(ce(c,Se)){var l=e[c.index]||"";t+=l=c.resolve(l)}else t+=c.toString()}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t},r.toString=function(){return""},r.toTextmateString=function(){return"/".concat(this.regexp.source,"/").concat(this.children.map((function(e){return e.toTextmateString()})),"/").concat((this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":""))},r.clone=function(){var e=new n;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map((function(e){return e.clone()})),e},n}(ye),Se=function(e){ae(n,e);var t=be(n);function n(e,r,i,o){var a;return ee(this,n),(a=t.call(this)).index=e,a.shorthandName=r,a.ifValue=i,a.elseValue=o,a}var r=n.prototype;return r.resolve=function(e){return"upcase"===this.shorthandName?e?e.toLocaleUpperCase():"":"downcase"===this.shorthandName?e?e.toLocaleLowerCase():"":"capitalize"===this.shorthandName?e?e[0].toLocaleUpperCase()+e.substr(1):"":"pascalcase"===this.shorthandName?e?this._toPascalCase(e):"":"camelcase"===this.shorthandName?e?this._toCamelCase(e):"":Boolean(e)&&"string"===typeof this.ifValue?this.ifValue:e||"string"!==typeof this.elseValue?e||"":this.elseValue},r._toPascalCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map((function(e){return e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e},r._toCamelCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map((function(e,t){return 0===t?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e},r.toTextmateString=function(){var e="${";return e+=this.index,this.shorthandName?e+=":/".concat(this.shorthandName):this.ifValue&&this.elseValue?e+=":?".concat(this.ifValue,":").concat(this.elseValue):this.ifValue?e+=":+".concat(this.ifValue):this.elseValue&&(e+=":-".concat(this.elseValue)),e+="}"},r.clone=function(){return new n(this.index,this.shorthandName,this.ifValue,this.elseValue)},n}(ye),Ee=function(e){ae(n,e);var t=be(n);function n(e){var r;return ee(this,n),(r=t.call(this)).name=e,r}var r=n.prototype;return r.resolve=function(e){var t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),void 0!==t&&(this._children=[new xe(t)],!0)},r.toTextmateString=function(){var e="";return this.transform&&(e=this.transform.toTextmateString()),0===this.children.length?"${".concat(this.name).concat(e,"}"):"${".concat(this.name,":").concat(this.children.map((function(e){return e.toTextmateString()})).join("")).concat(e,"}")},r.clone=function(){var e=new n(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e},n}(we);function Ce(e,t){for(var n=de(e);n.length>0;){var r,i=n.shift();if(!t(i))break;(r=n).unshift.apply(r,de(i.children))}}var _e=function(e){ae(n,e);var t=be(n);function n(){return ee(this,n),t.apply(this,arguments)}var r=n.prototype;return r.offset=function(e){var t=0,n=!1;return this.walk((function(r){return r===e?(n=!0,!1):(t+=r.len(),!0)})),n?t:-1},r.fullLen=function(e){var t=0;return Ce([e],(function(e){return t+=e.len(),!0})),t},r.enclosingPlaceholders=function(e){for(var t=[],n=e.parent;n;)ce(n,ke)&&t.push(n),n=n.parent;return t},r.resolveVariables=function(e){var t=this;return this.walk((function(n){return ce(n,Ee)&&n.resolve(e)&&delete t._placeholders,!0})),this},r.appendChild=function(e){return delete this._placeholders,ie(oe(n.prototype),"appendChild",this).call(this,e)},r.replace=function(e,t){return delete this._placeholders,ie(oe(n.prototype),"replace",this).call(this,e,t)},r.toTextmateString=function(){return this.children.reduce((function(e,t){return e+t.toTextmateString()}),"")},r.clone=function(){var e=new n;return this._children=this.children.map((function(e){return e.clone()})),e},r.walk=function(e){Ce(this.children,e)},ne(n,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,t=[];this.walk((function(n){return ce(n,ke)&&(t.push(n),e=!e||e.index<n.index?n:e),!0})),this._placeholders={all:t,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}}]),n}(ye),Oe=function(){function e(){ee(this,e),this._scanner=new ge,this._token={type:14,pos:0,len:0}}var t=e.prototype;return t.text=function(e){return this.parse(e).toString()},t.parse=function(e,t,n){this._scanner.text(e),this._token=this._scanner.next();for(var r=new _e;this._parse(r););var i=new Map,o=[],a=0;r.walk((function(e){return ce(e,ke)&&(a+=1,e.isFinalTabstop?i.set(0,void 0):!i.has(e.index)&&e.children.length>0?i.set(e.index,e.children):o.push(e)),!0}));var c=!0,l=!1,s=void 0;try{for(var u,d=o[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){var f=u.value,p=i.get(f.index);if(p){var h=new ke(f.index);h.transform=f.transform;var m=!0,b=!1,v=void 0;try{for(var g,y=p[Symbol.iterator]();!(m=(g=y.next()).done);m=!0){var x=g.value;h.appendChild(x.clone())}}catch(w){b=!0,v=w}finally{try{m||null==y.return||y.return()}finally{if(b)throw v}}r.replace(f,[h])}}}catch(w){l=!0,s=w}finally{try{c||null==d.return||d.return()}finally{if(l)throw s}}return n||(n=a>0&&t),!i.has(0)&&n&&r.appendChild(new ke(0)),r},t._accept=function(e,t){if(void 0===e||this._token.type===e){var n=!t||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),n}return!1},t._backTo=function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1},t._until=function(e){for(var t=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var n=this._scanner.next();if(0!==n.type&&4!==n.type&&5!==n.type)return!1}this._token=this._scanner.next()}var r=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),r},t._parse=function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)},t._parseEscaped=function(e){var t;return!!(t=this._accept(5,!0))&&(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new xe(t)),!0)},t._parseTabstopOrVariableName=function(e){var t,n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new ke(Number(t)):new Ee(t)),!0):this._backTo(n)},t._parseComplexPlaceholder=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);var r=new ke(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new xe("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else{if(!(r.index>0&&this._accept(7)))return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(n);for(var i=new Ze;;){if(this._parseChoiceElement(i)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(i),this._accept(4)))return e.appendChild(r),!0}return this._backTo(n),!1}}},t._parseChoiceElement=function(e){for(var t=this._token,n=[];2!==this._token.type&&7!==this._token.type;){var r=void 0;if(!(r=(r=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:this._accept(void 0,!0)))return this._backTo(t),!1;n.push(r)}return 0===n.length?(this._backTo(t),!1):(e.appendChild(new xe(n.join(""))),!0)},t._parseComplexVariable=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);var r=new Ee(t);if(!this._accept(1))return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(n);for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new xe("${"+t+":")),r.children.forEach(e.appendChild,e),!0}},t._parseTransform=function(e){for(var t=new je,n="",r="";!this._accept(6);){var i=void 0;if(i=this._accept(5,!0))n+=i=this._accept(6,!0)||i;else{if(14===this._token.type)return!1;n+=this._accept(void 0,!0)}}for(;!this._accept(6);){var o=void 0;if(o=this._accept(5,!0))o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new xe(o));else if(!this._parseFormatString(t)&&!this._parseAnything(t))return!1}for(;!this._accept(4);){if(14===this._token.type)return!1;r+=this._accept(void 0,!0)}try{t.regexp=new RegExp(n,r)}catch(a){return!1}return e.transform=t,!0},t._parseFormatString=function(e){var t=this._token;if(!this._accept(0))return!1;var n=!1;this._accept(3)&&(n=!0);var r=this._accept(8,!0);if(!r)return this._backTo(t),!1;if(!n)return e.appendChild(new Se(Number(r))),!0;if(this._accept(4))return e.appendChild(new Se(Number(r))),!0;if(!this._accept(1))return this._backTo(t),!1;if(this._accept(6)){var i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new Se(Number(r),i)),!0):(this._backTo(t),!1)}if(this._accept(11)){var o=this._until(4);if(o)return e.appendChild(new Se(Number(r),void 0,o,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new Se(Number(r),void 0,void 0,a)),!0}else if(this._accept(13)){var c=this._until(1);if(c){var l=this._until(4);if(l)return e.appendChild(new Se(Number(r),void 0,c,l)),!0}}else{var s=this._until(4);if(s)return e.appendChild(new Se(Number(r),void 0,void 0,s)),!0}return this._backTo(t),!1},t._parseAnything=function(e){return 14!==this._token.type&&(e.appendChild(new xe(this._scanner.tokenText(this._token))),this._accept(void 0),!0)},e.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},e.guessNeedsClipboard=function(e){return/\${?CLIPBOARD/.test(e)},e}(),Te={Text:xe,Placeholder:ke,Variable:Ee,FormatString:Se,Choice:Ze};function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ze(e,t){return!t||"object"!==Ue(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function De(e){return function(e){if(Array.isArray(e))return Ie(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ie(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ue=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Le(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ne(e);if(t){var i=Ne(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ze(this,n)}}function Xe(e,t){var n=t.mapPos(e.from,-1,Z.gc.TrackDel),r=t.mapPos(e.to,1,Z.gc.TrackDel);return null==n||null==r?null:{field:e.field,from:n,to:r}}var Me=function(){function e(t){Ae(this,e),this.lines=t.split(/\r\n?|\n/).map((function(e){return(new Oe).parse(e).children}))}return e.prototype.apply=function(t){var n=t.view,r=t.from,i=t.to,o=e.instantiate(this.lines,t),a=o.text,c=o.ranges,l={from:r,to:i,insert:Z.xv.of(a)},s={changes:l,scrollIntoView:!0};if(c.length&&(s.selection=$e(c,0)),c.length>1){var u=new We(c,0),d=s.effects=[He.of(u)];void 0===n.state.field(Ke,!1)&&d.push(Z.Py.appendConfig.of([Ke,Ye,Qe]))}if(r===i&&!c.length){var f=Z.as.of(l,n.state.doc.length),p=n.state.selection.ranges.map((function(e){return e.map(f,0)}));s.selection=Z.jT.create(p,n.state.selection.mainIndex)}return s},e.resolveVariable=function(e,t){var n=t.view,r=t.from,i=t.path;switch(e){case"TM_FILENAME":return(0,Y.basename)(i);case"TM_FILENAME_BASE":return(0,Y.basename)(i,(0,Y.extname)(i));case"TM_DIRECTORY":return(0,Y.dirname)(i);case"TM_FILEPATH":return i;case"TM_LINE_INDEX":return(n.state.doc.lineAt(r).number-1).toString();case"TM_LINE_NUMBER":return n.state.doc.lineAt(r).number.toString();default:return e}},e.instantiate=function(t,n){var r,i=n.view,o=n.from,a=i.state,c=[],l=[],s=a.doc.lineAt(o),u=/^\s*/.exec(s.text)[0],d=a.facet(Q.c),f=!0,p=!1,h=void 0;try{for(var m,b=t[Symbol.iterator]();!(f=(m=b.next()).done);f=!0){var v=m.value,g=0,y="",x=function(e){var t=0,n=g;if(0===g&&(t=/^\t*/.exec(e)[0].length)){var r=u+d.repeat(t);e=r+e.slice(t),n+=r.length}return y+=e,g+=e.length,{line:c.length,from:n,to:g}},w=function(t){var r=!0,i=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){s.value.match({Text:function(e){x(e.value)},Variable:function(t){var r=t.name,i=t.transform,o=e.resolveVariable(r,n);i&&(o=o.replace(i.regexp,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.children.map((function(e){return e.match({Text:function(e){return e.value},FormatString:function(e){return e.resolve(t[e.index])}})})).filter(Boolean).join("")}))),x(o)},Choice:function(e){x(e.options[0].value)},Placeholder:function(e){var t,n=c.length?o+c.map((function(e){return e.length})).reduce((function(e,t){return e+t})):o;if(null===(t=e.children)||void 0===t?void 0:t.length){var r={field:e.index,from:n+g,to:null};l.push(r),w(e.children),r.to=n+g}else{x("");var i=n+g;l.push({field:e.index,from:i,to:i})}}})}}catch(d){i=!0,a=d}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}};w(v),c.push(y)}}catch(Z){p=!0,h=Z}finally{try{f||null==b.return||b.return()}finally{if(p)throw h}}var k=(r=Math).max.apply(r,De(l.map((function(e){return e.field}))));return{text:c,ranges:l.map((function(e){var t=e.field;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Pe(e,t,n[t])}))}return e}({},Re(e,["field"]),{field:0===t?k:t-1})}))}},e}(),Fe=S.p.widget({widget:new(function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(n,e);var t=Le(n);function n(){return Ae(this,n),t.apply(this,arguments)}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e},r.ignoreEvent=function(){return!1},n}(S.l9))}),Ge=S.p.mark({class:"cm-snippetField"}),We=function(){function e(t,n){Ae(this,e),this.ranges=t,this.active=n,this.deco=S.p.set(t.map((function(e){return(e.from===e.to?Fe:Ge).range(e.from,e.to)})))}var t=e.prototype;return t.map=function(t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=this.ranges[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var l=Xe(a.value,t);if(!l)return null;n.push(l)}}catch(s){i=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return new e(n,this.active)},t.isSelectionInsideField=function(e){var t=this;return e.ranges.every((function(e){return t.ranges.some((function(n){return n.field===t.active&&n.from<=e.from&&n.to>=e.to}))}))},e}(),He=Z.Py.define({map:function(e,t){return null===e||void 0===e?void 0:e.map(t)}}),Ve=Z.Py.define(),Ke=Z.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var c=o.value;if(c.is(He))return c.value;if(c.is(Ve)&&e)return new We(e.ranges,c.value)}}catch(l){r=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.isSelectionInsideField(t.selection)&&(e=null),e},provide:function(e){return S.tk.decorations.from(e,(function(e){return e?e.deco:S.p.none}))}});function $e(e,t){return Z.jT.create(e.filter((function(e){return e.field===t})).map((function(e){return Z.jT.range(e.from,e.to)})))}function qe(e){return function(t){var n,r=t.state,i=t.dispatch,o=r.field(Ke,!1);if(!o||e<0&&0===o.active)return!1;var a=o.active+e,c=(n=Math).max.apply(n,De(o.ranges.map((function(e){return e.field})))),l=e>0&&o.active>=c;return i(r.update({selection:$e(o.ranges,a),effects:He.of(l?null:new We(o.ranges,a))})),!0}}var Ye=Z.Wl.highest(S.$f.of([{key:"Tab",run:qe(1),shift:qe(-1)},{key:"Escape",run:function(e){var t=e.state,n=e.dispatch;return!!t.field(Ke,!1)&&(n(t.update({effects:He.of(null)})),!0)}}])),Qe=S.tk.domEventHandlers({mousedown:function(e,t){var n,r=t.state.field(Ke,!1);if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var i=r.ranges.find((function(e){return e.from<=n&&e.to>=n}));return!(!i||i.field===r.active)&&(t.dispatch({selection:$e(r.ranges,i.field),effects:He.of(r.ranges.some((function(e){return e.field>i.field}))?new We(r.ranges,i.field):null)}),!0)}});function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function et(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function tt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){et(o,r,i,a,c,"next",e)}function c(e){et(o,r,i,a,c,"throw",e)}a(void 0)}))}}function nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){nt(e,t,n[t])}))}return e}function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||at(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e){return function(e){if(Array.isArray(e))return Je(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||at(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){if(e){if("string"===typeof e)return Je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Je(e,t):void 0}}function ct(e){var t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(/[^\w\s]/g,"\\$&"),"]")}function lt(e,t){var n=e.state,r=e.pos;if(e.explicit)return{triggerKind:H.CompletionTriggerKind.Invoked};var i=n.doc.lineAt(r),o=i.text[r-i.from-1],a=i.text.substring(0,r-i.from);if(null===t||void 0===t?void 0:t.includes(o)){var c=o;return{triggerKind:H.CompletionTriggerKind.TriggerCharacter,triggerCharacter:c}}return a.match(/\w$/)?{triggerKind:H.CompletionTriggerKind.Invoked}:null}function st(e){var t=e.content,n=e.dom;return w.createPortal("string"===typeof t?(0,r.tZ)(I.Z,{css:_.l0.font.code,children:t}):(0,r.tZ)(O.Z,{children:C(t)}),n)}var ut=Object.entries(K.CompletionItemKind).reduce((function(e,t){var n=it(t,2),r=n[0];return rt(nt({},n[1],r.toLowerCase()),e)}),{});function dt(e,t){var n=(0,E.R)(e.state.doc,t.range.start),r=(0,E.R)(e.state.doc,t.range.end);if(null!==n&&null!==r)return{from:n,to:r,insert:t.newText}}function ft(e){var t=e.context,n=e.items,i=e.client,o=e.path,a=e.setDecoration,c=n.map((function(e){var t,n=e.additionalTextEdits,c={label:e.label,detail:e.detail,apply:function(t,r,i,a){if(e.insertTextFormat!==K.InsertTextFormat.Snippet){var c=function(e){var t,n=e.view,r=e.item,i=e.from,o=e.to,a=n.state,c=a.doc,l=a.selection,s=[];if(r.textEdit){var u=r.textEdit,d=u.range,f=u.newText,p=(0,E.R)(c,d.start),h=(0,E.R)(c,d.end);if(null===p||null===h)return;s.push({from:p,insert:f,to:Math.max(h,l.main.to)})}else{var m=r.insertText||r.label;s.push({from:i,to:o,insert:m})}var b=it(s,1)[0],v="";null===(t=r.additionalTextEdits)||void 0===t||t.forEach((function(e){var t=dt(n,e);t&&("from"in b&&t.from===b.from&&(v=t.insert),s.push(t))}));var g=o-i;l.ranges.forEach((function(e){if(e!==l.main){if(!("insert"in b)||!b.insert)throw new Error("Expected insert in mainChange");var t=e.from-g,n=v+b.insert;s.push({from:t,to:e.to,insert:n})}}));var y=Z.as.of(s,c.length),x=l.ranges.map((function(e){return e.map(y,0)}));return{changes:y,selection:Z.jT.create(x,l.mainIndex)}}({view:t,item:rt({},e,{additionalTextEdits:n}),to:a,from:i});c&&t.dispatch({changes:c.changes,selection:c.selection,annotations:j.Jv.of(r)})}else{var l,s,u,d,f=[];n&&f.push({changes:n.map((function(e){return dt(t,e)}))});var p=null!==(d=null!==(u=null===(s=e.textEdit)||void 0===s?void 0:s.newText)&&void 0!==u?u:e.insertText)&&void 0!==d?d:e.label,h=new Me(p).apply({view:t,from:i,to:a,path:o});(l=t).dispatch.apply(l,ot(f).concat([h]))}},type:e.kind&&ut[e.kind],filterText:(null!==(t=e.filterText)&&void 0!==t?t:e.label).toLowerCase(),sortText:e.sortText||e.label},l=h(i).isCompletionItemResolveSupported;return i&&l?c.info=tt(d().mark((function t(){var o,c,l,s,u;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.request.resolveCompletionItem(e);case 2:if(o=t.sent,c="cancelled"in o&&o.cancelled,l="result"in o?o.result:null,!c&&l){t.next=7;break}return t.abrupt("return",null);case 7:if(l.additionalTextEdits&&(n=l.additionalTextEdits),s=[],l.detail&&l.detail!==e.detail&&l.detail!==e.label&&s.push(l.detail),l.documentation&&s.push(l.documentation),s.length){t.next=13;break}return t.abrupt("return",null);case 13:return u=document.createElement("div"),a((0,r.tZ)(st,{content:s,dom:u})),t.abrupt("return",u);case 16:case"end":return t.stop()}}),t)}))):e.documentation&&(c.info=function(){if(!e.documentation)return null;var t=document.createElement("div");return a((0,r.tZ)(st,{content:e.documentation,dom:t})),t}),c})),l=it(function(e){var t=Object.create(null),n=Object.create(null),r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var l=a.value.label;t[l[0]]=!0;for(var s=1;s<l.length;s++)n[l[s]]=!0}}catch(d){i=!0,o=d}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}var u=ct(t)+ct(n)+"*$";return[new RegExp("^"+u),new RegExp(u)]}(c),2),s=l[0],u=l[1],f=t.matchBefore(u),p=t.pos;if(f){p=f.from;var m=f.text.toLowerCase();/^\w+$/.test(m)&&(c=c.filter((function(e){return e.filterText.startsWith(m)})).sort((function(e,t){var n=e.sortText,r=t.sortText;return n.startsWith(f.text)&&!r.startsWith(f.text)?-1:!n.startsWith(f.text)&&r.startsWith(f.text)?1:0})))}return{from:p,options:c,validFor:s}}var pt=n(23139),ht=n(52295);function mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){mt(e,t,n[t])}))}return e}function vt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function gt(e){var t=e.dom,n=vt(e,["dom"]);return w.createPortal((0,r.tZ)(yt,bt({},n)),t)}function yt(e){var t=e.className,n=e.content;return(0,r.tZ)(I.Z,{css:[_.l0.maxWidth(400),_.l0.maxHeight(190),_.l0.minHeight(33),_.l0.overflowY("auto"),_.l0.borderRadius(4),_.l0.backgroundColor.backgroundDefault],children:(0,r.tZ)(O.Z,{className:t,components:{code:function(e){return(0,r.tZ)(ht.Z,bt({minimal:!0,disableCopy:!0},e))}},children:n})})}function xt(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kt="hover-tooltip-content",Zt=".rendered-markdown .".concat(kt);function jt(e){var t,n,i=e.hover,o=e.doc,a=e.offset,c=e.setDecoration;return!Array.isArray(i.contents)&&"string"!==typeof i.contents||0!==i.contents.length?(i.range?(t=(0,E.R)(o,i.range.start),n=(0,E.R)(o,i.range.end)):(t=a,n=a+1),{pos:t,end:n,create:function(){var e=document.createElement("div");e.classList.add("hover-tooltip"),e.style.padding="0";var t=C(i.contents);return setTimeout((function(){c((0,r.tZ)(gt,{dom:e,content:t,className:kt}))})),{dom:e,mount:function(e){var t;t=function(){(0,S.E2)(e)},[0,50,200,1e3].forEach((function(e){return setTimeout(t,e)}))}}},above:!0}):(c(null),null)}function St(e){var t,n=e.lspClient,r=e.path,i=e.setDecoration,o=(0,S.bF)(function(){var e,t=(e=d().mark((function e(t,o){var a,c,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,E.s)(t.state.doc,o),e.next=3,n.request.hover(r,a);case 3:if(!("error"in(c=e.sent))){e.next=7;break}throw i(null),new Error("Something went wrong fetching hover results: ".concat(c.error.message));case 7:if(null!==(l=c.result)){e.next=11;break}return i(null),e.abrupt("return",null);case 11:return e.abrupt("return",jt({hover:l,offset:o,doc:t.state.doc,setDecoration:i}));case 12:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){xt(o,r,i,a,c,"next",e)}function c(e){xt(o,r,i,a,c,"throw",e)}a(void 0)}))});return function(e,n){return t.apply(this,arguments)}}());return[o,S.tk.theme((wt(t={},"".concat(Zt," p"),{fontSize:"calc(".concat(pt.TV.fontSizeDefault," + 1px)"),padding:"".concat(pt.TV.space2," ").concat(pt.TV.space8),lineHeight:1.4,marginBottom:0}),wt(t,"".concat(Zt," p:last-child"),{marginBottom:"".concat(pt.TV.space4," !important")}),wt(t,"".concat(Zt," pre"),{margin:"".concat(pt.TV.space2," ").concat(pt.TV.space8," ").concat(pt.TV.space2," ").concat(pt.TV.space4)}),wt(t,"".concat(Zt," pre + p"),{borderTop:"1px solid ".concat(pt.TV.outlineDimmest),paddingTop:pt.TV.space4}),t))]}var Et,Ct=n(51281),_t=n(35060),Ot=n(28593),Tt=n(32378),It=n(35864),At=n(67938),Pt=n(13475);function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rt(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function zt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Rt(o,r,i,a,c,"next",e)}function c(e){Rt(o,r,i,a,c,"throw",e)}a(void 0)}))}}function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Bt(e,t,n[t])}))}return e}function Ut(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||Mt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(e){return function(e){if(Array.isArray(e))return Nt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Mt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(e,t){if(e){if("string"===typeof e)return Nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nt(e,t):void 0}}function Ft(e){var t=e.dom,n=Ut(e,["dom"]);return w.createPortal((0,r.tZ)(Wt,Dt({},n)),t)}function Gt(e){var t=e.matchesMap,n=e.fileToContents,i=e.type,o=e.onClose,a=Object.keys(t),c=(0,l.Z)().session;if(0===a.length){var s=i===Et.REFERENCES?"No references found":"No definitions found";return(0,r.tZ)(At.x,{color:"dimmer",css:[_.l0.pl(4),_.l0.py(8)],children:s})}return(0,r.tZ)(I.Z,{children:a.map((function(e){var i=t[e],l=n[e],s=(0,It.Z)(i,l);return(0,r.tZ)(I.Z,{css:[_.l0.p(4)],children:(0,r.tZ)(Tt.Vw,{path:e,extensions:[s],doc:l,numMatches:i.length,initiallyExpanded:1===a.length,onNavigateToCode:function(t){if(null!==t)c.updateDeeplink({path:e,line:t.line+1,col:t.character});else{var n=Lt(i,1)[0],r=l.lineAt(n.from),a=n.from-r.from;c.updateDeeplink({path:e,line:r.number,col:a})}o()}})},e)}))})}function Wt(e){var t=e.files,n=e.onClose,i=e.references,o=e.definitions,c=e.currentFile,s=e.currentFileContents,u=function(e,t){if(!h)throw new Error("Expected LSP Client");var n=h.documentUriToPath(e.uri),r=e.range,i=r.start,o=r.end;n in t||(t[n]=[]);var a=v[n],c=a.line(i.line+1),l=a.line(o.line+1);t[n].push({from:c.from+i.character,to:l.from+o.character})},f=(0,l.Z)().fs,h=(0,p.Z)(c),m=(0,Pt.Z)(n,[]),b=Lt(a.useState(Bt({},c,Z.xv.of(s.split("\n")))),2),v=b[0],g=b[1];a.useEffect((function(){if(t.length){var e=!1;return function(){n.apply(this,arguments)}(),function(){e=!0}}function n(){return n=zt(d().mark((function n(){var r;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={},n.next=3,Promise.all(t.map(function(){var e=zt(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.readFile(t);case 2:if(!(n=e.sent).error){e.next=5;break}throw new Error("Something went wrong reading file with path ".concat(t,". Received error: ").concat(n.error));case 5:r[t]=Z.xv.of(n.content.toString().split("\n"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:if(!e){n.next=5;break}return n.abrupt("return");case 5:g((function(e){return Dt({},e,r)}));case 6:case"end":return n.stop()}}),n)}))),n.apply(this,arguments)}}),[f,t]);var y=Xt(i).concat(Xt(o));if(!h||y.some((function(e){return!(h.documentUriToPath(e.uri)in v)})))return(0,r.tZ)(I.Z,{style:{width:_.TV.space128,height:_.TV.space128,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.tZ)(Ot.Z,{style:{padding:"10px auto",width:"35px",height:"35px"}})});var x={},w={};return i.forEach((function(e){u(e,x)})),o.forEach((function(e){u(e,w)})),(0,r.BX)(I.Z,{innerRef:m,css:[_.l0.minWidth("375px"),_.l0.maxWidth("500px"),_.l0.pt(4)],children:[(0,r.tZ)(I.Z,{css:{borderBottom:"1px solid var(--background-highest)"},children:(0,r.BX)(I.Z,{css:[_.l0.p(4)],children:[(0,r.BX)(I.Z,{css:[_.l0.flex.row,_.l0.justify.spaceBetween,_.l0.align.center,_.l0.pr(4)],children:[(0,r.tZ)(At.h,{level:2,variant:"subheadDefault",css:[_.l0.p(4),_.l0.pl(8)],children:"Definitions"}),(0,r.tZ)(Ct.Z,{filled:!1,border:!1,onClick:n,children:(0,r.tZ)(_t.Z,{})})]}),(0,r.tZ)(Gt,{matchesMap:w,fileToContents:v,type:Et.DEFINITION,onClose:n})]})}),(0,r.tZ)(I.Z,{children:(0,r.BX)(I.Z,{css:[_.l0.p(4)],children:[(0,r.tZ)(At.h,{level:2,variant:"subheadDefault",css:[_.l0.p(4),_.l0.pl(8)],children:"References"}),(0,r.tZ)(Gt,{matchesMap:x,fileToContents:v,type:Et.REFERENCES,onClose:n})]})})]})}function Ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vt(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function Kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $t(e){return function(e){if(Array.isArray(e))return Ht(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ht(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e.DEFINITION="DEFINITION",e.REFERENCES="REFERENCES"}(Et||(Et={}));var qt=Z.Py.define();function Yt(e){var t=e.setDecoration,n=e.lspClient,i=e.path,o=Z.Py.define(),a=Z.Py.define(),c=S.tk.updateListener.of(function(){var e,t=(e=d().mark((function e(t){var r,c,l,s,u,f,p,m,b,v,g,y,x,w,k,Z,j,S,C,_,O,T,I,A,P,N,R,z,B,D;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w=function(){t.view.dispatch({effects:a.of(null)})},r=null,c=!0,l=!1,s=void 0,e.prev=3,u=t.transactions[Symbol.iterator]();case 5:if(c=(f=u.next()).done){e.next=27;break}for(p=f.value,m=!0,b=!1,v=void 0,e.prev=8,g=p.effects[Symbol.iterator]();!(m=(y=g.next()).done);m=!0)(x=y.value).is(qt)&&(r=x.value);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),b=!0,v=e.t0;case 16:e.prev=16,e.prev=17,m||null==g.return||g.return();case 19:if(e.prev=19,!b){e.next=22;break}throw v;case 22:return e.finish(19);case 23:return e.finish(16);case 24:c=!0,e.next=5;break;case 27:e.next=33;break;case 29:e.prev=29,e.t1=e.catch(3),l=!0,s=e.t1;case 33:e.prev=33,e.prev=34,c||null==u.return||u.return();case 36:if(e.prev=36,!l){e.next=39;break}throw s;case 39:return e.finish(36);case 40:return e.finish(33);case 41:if(r){e.next=43;break}return e.abrupt("return");case 43:if(k=h(n),Z=t.state.doc,j=(0,E.s)(Z,r),!k.isFindReferencesSupported){e.next=53;break}return e.next=50,n.request.findReferences(i,j,{includeDeclaration:!1});case 50:e.t2=e.sent,e.next=54;break;case 53:e.t2={result:null};case 54:if(S=e.t2,!k.isFindDefinitionSupported){e.next=61;break}return e.next=58,n.request.findDefinitions(i,j);case 58:e.t3=e.sent,e.next=62;break;case 61:e.t3={result:null};case 62:if(C=e.t3,!("error"in S)){e.next=65;break}throw new Error("Something went wrong fetching references: ".concat(S.error.message));case 65:if(!("error"in C)){e.next=67;break}throw new Error("Something went wrong fetching definition: ".concat(C.error.message));case 67:if(_=S.result,O=C.result,T=_&&_.length>0,I=O&&O.length>0,T||I){e.next=74;break}return w(),e.abrupt("return");case 74:A=[],P=[],_&&_.length>0&&(N=A).push.apply(N,$t(_)),O&&O.length>0&&(R=P).push.apply(R,$t(O)),z=$t(A).concat($t(P)).map((function(e){return n.documentUriToPath(e.uri)})).filter((function(e){return e!==i})),B=$t(new Set(z)),D=Z.toJSON().join("\n"),t.view.dispatch({effects:o.of({references:A,definitions:P,currentFile:i,currentFileContents:D,files:B})});case 82:case"end":return e.stop()}}),e,null,[[3,29,33,41],[8,12,16,24],[17,,19,23],[34,,36,40]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Vt(o,r,i,a,c,"next",e)}function c(e){Vt(o,r,i,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()),l=Z.QQ.define({create:function(){return null},update:function(e,t){var n=e,r=!0,i=!1,c=void 0;try{for(var l,s=t.effects[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var u=l.value;u.is(o)&&(n=u.value),u.is(a)&&(n=null)}}catch(d){i=!0,c=d}finally{try{r||null==s.return||s.return()}finally{if(i)throw c}}return n},provide:function(e){return S.hJ.compute([e],(function(n){var i=n.field(e);if(!i)return t(null),null;var o=n.selection.asSingle().main;return{pos:o.from,end:o.to,create:function(e){var n=document.createElement("div");return n.classList.add("cm-lsp-tooltip"),n.classList.add("replit-tooltip"),n.style.padding="0",t((0,r.tZ)(Ft,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Kt(e,t,n[t])}))}return e}({},i,{onClose:function(){e.dispatch({effects:a.of(null)})},dom:n}))),{dom:n}}}}))}});return[c,l]}var Qt=n(57541),Jt=n(33108),en=n(92704),tn=n(21130),nn=n(8286);function rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function on(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function an(e){var t=e.dom,n=on(e,["dom"]);return w.createPortal((0,r.tZ)(cn,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){rn(e,t,n[t])}))}return e}({},n)),t)}function cn(e){var t=e.onRename,n=e.closeInput,i=e.variable,o=(0,Pt.Z)(n,[]),c=a.useRef(null),l=(0,Jt.Y)(i,(function(e){return e?e===i?{message:"Must pick a new name"}:void 0:{message:"New name can't be empty"}}));return a.useEffect((function(){var e=function(e){"Escape"===e.key&&n()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[n]),a.useEffect((function(){setTimeout((function(){c.current&&c.current.focus()}))}),[l]),(0,r.tZ)(I.Z,{innerRef:o,css:[_.l0.backgroundColor.backgroundDefault,_.l0.flex.column,_.l0.justify.center,_.l0.borderRadius(4),_.l0.shadow(2),_.l0.width(200)],children:(0,r.tZ)("form",{onSubmit:function(e){e.preventDefault(),l.error||(n(),t(l.value))},children:(0,r.BX)(I.Z,{css:[_.l0.justify.center],children:[(0,r.BX)(I.Z,{css:[_.l0.flex.row,_.l0.align.center,_.l0.pr(4)],children:[(0,r.tZ)(At.h,{level:2,variant:"subheadDefault",css:[_.l0.p(4),_.l0.pl(8)],children:"Rename"}),(0,r.tZ)(At.h,{level:2,variant:"subheadDefault",color:"dimmer",css:[_.l0.maxWidth(100),_.l0.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}],children:i}),(0,r.tZ)(tn.Z,{alt:"Close rename input",tooltipHidden:!0,onClick:n,css:[_.l0.position.absolute,_.l0.top(4),_.l0.right(4)],children:(0,r.tZ)(_t.Z,{})})]}),(0,r.tZ)(I.Z,{css:[_.l0.justify.center,_.l0.align.center,_.l0.p(8),_.l0.pt(4)],children:(0,r.tZ)(Qt.ZP,{name:"rename",ref:c,onBlur:l.handleBlur,onChange:function(e){return l.setValue(e.target.value)},value:l.value,placeholder:"New name",autoFocus:!0,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off",validationResults:l.error?[{message:l.error.message,state:"error"}]:void 0,style:{padding:_.TV.space4,borderRadius:_.TV.borderRadius4}})}),(0,r.tZ)(I.Z,{css:[_.l0.flex.rowReverse,_.l0.p(8),_.l0.pt(0)],children:(0,r.tZ)(en.ZP,{type:"submit",text:"Rename",colorway:"primary",iconLeft:(0,r.tZ)(nn.Z,{}),disabled:Boolean(l.error)||!l.value})})]})})})}var ln=Z.Py.define();var sn=n(98772),un=n(69987),dn=n(70917),fn=n(63051),pn=n(56834),hn=n(55681),mn=n(22307);function bn(e,t,n){var r=n.find((function(n){var r=n.range;return(0,E.R)(e,r.end)>=t&&(0,E.R)(e,r.start)<=t}));return null==r?[]:r.children?[r].concat(bn(e,t,r.children)):[r]}var vn=n(69219);function gn(e){var t=e.currentSymbol,n=e.value;return(0,r.BX)(pt.G7,{css:pt.l0.rowWithGap(2),children:[(0,r.tZ)(vn.u,{kind:n.kind}),(0,r.tZ)(pt.xv,{css:[pt.l0.fontSize(14),pt.l0.maxWidth(175),n===t&&{fontWeight:pt.TV.fontWeightMedium}],children:n.name})]})}var yn=(0,dn.iv)([pt.l0.flex.row,pt.l0.align.center]),xn=[pt.l0.backgroundColor.backgroundDefault,pt.l0.height(20),pt.l0.p(2),{span:[pt.l0.mr(0),pt.l0.maxWidth(175)],svg:pt.l0.mr(4)}],wn=[pt.l0.color.foregroundDefault,pt.l0.maxHeight("40vh"),pt.l0.overflowY("auto"),{"&::-webkit-scrollbar":{width:0},scrollbarWidth:"none"}];function kn(e){var t,n;return(null!==(n=null===e||void 0===e||null===(t=e.children)||void 0===t?void 0:t.length)&&void 0!==n?n:0)>0}function Zn(e){return e.sort((function(e,t){return e.range.start.line-t.range.start.line||e.range.start.character-t.range.start.character}))}function jn(){(0,pn.j)(pn.U3.CODE_NAVIGATION_USED,{action:"opened"})}function Sn(e){var t=e.values,n=void 0===t?[]:t,i=e.symbol,o=e.getKey,c=e.onClick,l=a.useMemo((function(){return Zn(n)}),[n]);return(0,r.tZ)(pt.ZE,{cssProps:[xn,!l.length&&{pointerEvents:"none"}],icon:(0,r.tZ)(vn.u,{kind:i.kind}),label:i.name,onAction:c,menuCssProps:wn,onOpen:jn,items:l,children:function(e){return(0,r.tZ)(mn.ck,{textValue:e.name,children:(0,r.tZ)(gn,{currentSymbol:i,value:e})},o(e))}})}var En=function(){return(0,r.tZ)(pt.G7,{css:{marginLeft:-4,marginRight:-4},children:(0,r.tZ)(fn.Z,{})})};function Cn(e){var t=e.doc,n=e.dom,i=e.filePath,o=e.symbols,a=e.cursor,c=e.moveCursor,l=function(e){var t=e.items;return(0,r.tZ)(pt.G7,{css:yn,children:(0,r.tZ)(pt.ZE,{icon:(0,r.tZ)("span",{}),onAction:h,cssProps:xn,label:"...",menuCssProps:wn,onOpen:jn,items:Zn(t),children:function(e){return(0,r.tZ)(mn.ck,{textValue:e.name,children:(0,r.tZ)(gn,{value:e})},p(e))}})})},s=bn(t,a,o),u=s.length-1,d=s[u],f=[],p=function(e){return f.push(e)-1},h=function(e){c(f[e].selectionRange.start),(0,pn.j)(pn.U3.CODE_NAVIGATION_USED,{action:"jumped"})},m=null;return kn(d)?m=(0,r.tZ)(l,{items:d.children}):!s.length&&o.length&&(m=(0,r.tZ)(l,{items:o})),w.createPortal((0,r.BX)(pt.G7,{css:[pt.l0.flex.row,pt.l0.color.foregroundDimmer,pt.l0.px(4),pt.l0.py(4),pt.l0.maxWidth("100%"),pt.l0.overflowX("auto"),{"&::-webkit-scrollbar":{height:0},scrollbarWidth:"none"}],children:[(0,r.tZ)(_n,{path:i}),s.map((function(e,t){return(0,r.BX)(pt.G7,{css:yn,children:[(0,r.tZ)(Sn,{getKey:p,onClick:h,symbol:e,values:0===t?o:s[t-1].children}),(t!==u||kn(e))&&(0,r.tZ)(En,{})]},t)})),m]}),n)}function _n(e){var t=e.path;return(0,r.BX)(pt.G7,{css:yn,children:[(0,r.tZ)(pt.ZE,{cssProps:[xn,{pointerEvents:"none"}],icon:(0,r.tZ)(hn.Z,{path:t}),label:"",children:[]}),(0,r.tZ)(En,{})]})}var On=n(31284);function Tn(e){var t=e.path,n=e.setDecoration,i=e.documentSymbols;return[S.mH.of((function(e){var o=document.createElement("div"),a=(0,un.u)(e.state.doc),c=(0,un.u)(e.state.selection.main.head);function l(t){e.dispatch({scrollIntoView:!0,selection:Z.jT.cursor((0,E.R)(e.state.doc,t))}),e.focus()}function s(){var e=(0,On.Z)(i),n=(0,On.Z)(a),s=(0,On.Z)(c);return e?(0,r.tZ)(Cn,{filePath:t,moveCursor:l,dom:o,symbols:e,cursor:s,doc:n}):null}return{dom:o,top:!0,mount:function(){n((0,r.tZ)(s,{}))},update:function(e){e.selectionSet&&(a.current=e.view.state.doc,c.current=e.state.selection.main.head)}}})),S.tk.baseTheme({".cm-panels":{border:"none",zIndex:"1 !important"},".cm-panel:not(:empty)":{background:pt.TV.backgroundDefault}})]}function In(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function An(e){var t,n=e.lspClient,r=e.path,i=e.setDecoration,o=(0,un.u)(null),a=(0,sn.Z)((t=d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.request.documentSymbol(r);case 2:(t=e.sent)&&"result"in t&&t.result.length&&"range"in t.result[0]?o.current=t.result:o.current=null;case 4:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){In(o,r,i,a,c,"next",e)}function c(e){In(o,r,i,a,c,"throw",e)}a(void 0)}))}),{wait:200}),c=S.lg.define((function(){return a(),{update:function(e){e.docChanged&&a()}}}));return[Tn({path:r,setDecoration:i,documentSymbols:o}),c]}var Pn=n(12220),Nn=n(82053),Rn=n(46846),zn=n(93770);function Bn(e){var t=e.path,n=e.fs,r=e.edits,i=!1,o=n.watchOtFile(t,{onReady:function(e){var t=e.writeOps,n=e.initialContent;t((0,Nn.Z)(r,n.toString())),i=!0},onStatusChange:function(e){e===Rn.KF.Clean&&i&&o()}})}function Dn(e){var t=e.edit,n=e.fs,r=e.client,i=t.documentChanges,o=t.changes;if(i&&i.forEach((function(e){if("textDocument"in e){var t=e.edits,i=e.textDocument;Bn({path:r.documentUriToPath(i.uri),fs:n,edits:t})}else switch(e.kind){case"create":var o=r.documentUriToPath(e.uri),a=e.options,c=Boolean((null===a||void 0===a?void 0:a.overwrite)||!(null===a||void 0===a?void 0:a.ignoreIfExists)),l=function(){n.writeFile(o,zn.Z.from("")).then((function(e){if(e.error)throw new Error("Something went wrong writing to a file")}))};if(c){l();break}n.stat(o).then((function(e){e.exists||l()}));break;case"delete":var s=r.documentUriToPath(e.uri),u=e.options,d=Boolean(null===u||void 0===u?void 0:u.recursive),f=Boolean(null===u||void 0===u?void 0:u.ignoreIfNotExists);n.stat(s).then((function(e){if(!e.exists)throw new Error("Expected file to exist");if(e.type===Rn.Tv.Directory&&!d)throw new Error("Trying to delete a directory without recursive option enabled");n.deleteFile(s).then((function(e){var t=e.error;if((t!==Rn.Df.NotFound||!f)&&t)throw new Error("Something went wrong deleting the file")}))}));break;case"rename":var p=r.documentUriToPath(e.oldUri),h=r.documentUriToPath(e.newUri),m=e.options,b=Boolean((null===m||void 0===m?void 0:m.overwrite)||!(null===m||void 0===m?void 0:m.ignoreIfExists)),v=function(){n.moveFile(p,h).then((function(e){if(e.error)throw new Error("Something went wrong moving the file")}))};if(b){v();break}n.stat(h).then((function(e){e.exists||v()}))}})),o)for(var a in o){var c=r.documentUriToPath(a),l=o[a];Bn({path:c,fs:n,edits:l})}}var Un=n(27651),Ln=n(88503),Xn=n(29698),Mn=n(57170),Fn=n(34996),Gn=n(46253),Wn=n(12741),Hn=n(71841),Vn=n(428),Kn=n(34860),$n=n(66552),qn=n(85567),Yn=n(19826),Qn=n(44262),Jn=n(16733),er=n(50658),tr=n(24506),nr=n(1517),rr=n(16108),ir=n(93577),or=n(38880),ar=n(15682);function cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return cr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var sr=(0,pt.KD)("button");var ur=function(e){var t=e.onClick,n=e.children,i=a.useRef(null),o=lr((0,ar.XZ)(i,!1),4),c=o[0],l=o[1],s=o[2],u=o[3];return(0,ar.Ym)(l,i),(0,r.tZ)(sr,{ref:i,role:"menuitem",css:[pt.d$,pt.gU.listItem],onClick:function(e){u(),t(e)},onKeyDown:s,tabIndex:c,children:n})},dr=n(37424);function fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return fr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hr(e){var t=e.view,n=e.metadata,i=e.closeMenu,o=n.text,c=n.icon,s=(0,or.Z)().showError,u=a.useRef(!1),d=pr(a.useState(!1),2),f=d[0],h=d[1],m=pr(a.useState(null),2),b=m[0],v=m[1],g=(0,l.Z)().fs,y=(0,ir.Z)(),x=(0,p.Z)(y||""),w=(0,dr.H)(),k=w("label"),Z=w("menu"),j=a.useRef(null),S=pr((0,ar.XZ)(j,!1),4),C=(S[0],S[1]),O=S[2],T=S[3];return(0,ar.Ym)(C,j),a.useEffect((function(){if(x&&y&&f&&!u.current){var e=t.state,n=e.selection.main,r={start:(0,E.s)(e.doc,n.from),end:(0,E.s)(e.doc,n.to)};u.current=!0,x.request.codeActions(y,r).then((function(e){if((0,pn.j)(pn.U3.EDITOR_CONTEXT_MENU_CODE_ACTIONS_REQUESTED,{success:!("error"in e),numActions:"result"in e&&e.result?e.result.length:null}),"error"in e)return u.current=!1,v([]),s("Something went wrong fetching code actions"),void er.Tb(new Error(e.error.message));null!==e.result&&0!==e.result.length?v(e.result):v([])}))}}),[x,f,y,b,t,s]),(0,r.BX)(I.Z,{tag:"li",onClick:function(e){e.stopPropagation(),h((function(e){return!e}))},children:[(0,r.BX)(I.Z,{css:[tr.gU.listItem,_.l0.p(8),_.l0.flex.row,_.l0.align.center],children:[c,(0,r.tZ)(I.Z,{css:[_.l0.pl(8)],children:(0,r.tZ)(At.x,{id:k,children:o})}),(0,r.tZ)(I.Z,{css:[_.l0.position.absolute,_.l0.right(4)],children:(0,r.tZ)(tn.Z,{alt:"Toggle Code Actions",tooltipHidden:!0,"aria-expanded":f,"aria-controls":Z,onClick:function(){T(),h((function(e){return!e}))},innerRef:j,onKeyDown:O,children:(0,r.tZ)(fn.Z,{rotate:f?90:0,style:{transition:"200ms ease"}})})})]}),f&&!b?(0,r.BX)(I.Z,{css:[_.l0.p(8),_.l0.flex.row,_.l0.align.center],children:[(0,r.tZ)(At.x,{color:"dimmer",children:"Loading actions..."}),(0,r.tZ)(I.Z,{css:[_.l0.align.center,_.l0.justify.center,_.l0.position.absolute,_.l0.right(4),_.l0.width(24),_.l0.height(24)],children:(0,r.tZ)(nr.Z,{})})]}):null,f&&b&&x?(0,r.BX)(I.Z,{tag:"ul",role:"menubar","aria-orientation":"vertical","aria-labelledby":k,id:Z,children:[b.map((function(e,t){return(0,r.tZ)(ur,{onClick:function(){if(K.Command.is(e))return x.request.executeCommand(e.command,e.arguments),void i();var t=e.edit,n=e.command;t&&Dn({edit:t,fs:g,client:x}),n&&x.request.executeCommand(n.command,n.arguments),i()},children:(0,r.tZ)(I.Z,{css:[tr.gU.listItem,_.l0.p(8),_.l0.flex.row,_.l0.align.center],children:(0,r.BX)(I.Z,{css:[_.l0.flex.row,_.l0.justify.spaceBetween,_.l0.width("100%")],children:[(0,r.tZ)(At.x,{css:[_.l0.maxWidth("90%")],children:e.title}),(0,r.tZ)(I.Z,{tag:"span",children:(0,r.tZ)(rr.Z,{size:12})})]})})},t)})),0===b.length?(0,r.tZ)(I.Z,{css:[_.l0.p(8),_.l0.flex.row,_.l0.align.center],children:(0,r.tZ)(At.x,{color:"dimmer",children:"No actions available"})}):null]}):null]})}var mr=n(28614),br=n(86072),vr=n(56443);function gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return gr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var wr,kr,Zr="Divider";!function(e){e.Cut="Cut",e.Copy="Copy",e.Paste="Paste",e.JumpToDefinition="JumpToDefinition",e.JumpToTypeDefinition="JumpToTypeDefinition",e.JumpToImplementation="JumpToImplementation",e.FindReferences="FindReferences",e.Rename="Rename",e.SelectAllOccurrences="SelectAllOccurrences",e.CodeActions="CodeActions",e.CopyLinkToPos="CopyLinkToPos",e.ToggleBreakpoint="ToggleBreakpoint",e.StartThread="StartThread",e.ExplainCode="ExplainCode",e.LookForErrors="LookForErrors",e.GenerateCode="GenerateCode"}(wr||(wr={}));var jr=(yr(kr={},wr.Cut,{text:"Cut",icon:(0,r.tZ)(Wn.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"X"}}),yr(kr,wr.Copy,{text:"Copy",icon:(0,r.tZ)(Hn.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"C"}}),yr(kr,wr.Paste,{text:"Paste",icon:(0,r.tZ)(Vn.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"V"}}),yr(kr,wr.JumpToDefinition,{text:"Jump to definition",icon:(0,r.tZ)(Kn.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"F12"}}),yr(kr,wr.JumpToTypeDefinition,{text:"Jump to type definition",icon:(0,r.tZ)(Qn.Z,{})}),yr(kr,wr.JumpToImplementation,{text:"Jump to implementation",icon:(0,r.tZ)(Jn.Z,{})}),yr(kr,wr.FindReferences,{text:"Find references",icon:(0,r.tZ)(Ln.Z,{}),keyboardShortcut:{shiftKey:!0,key:"F12"}}),yr(kr,wr.Rename,{text:"Rename all occurrences",icon:(0,r.tZ)(Xn.Z,{}),keyboardShortcut:{key:"F2"}}),yr(kr,wr.SelectAllOccurrences,{text:"Select all occurrences",icon:(0,r.tZ)(Un.Z,{}),keyboardShortcut:{key:"F2",cmdOrCtrlKey:!0}}),yr(kr,wr.CodeActions,{text:"Code actions",icon:(0,r.tZ)(Pn.Z,{})}),yr(kr,wr.CopyLinkToPos,{text:"Copy link to position",icon:(0,r.tZ)(Mn.Z,{})}),yr(kr,wr.ToggleBreakpoint,{text:"Toggle breakpoint",icon:(0,r.tZ)(Fn.Z,{})}),yr(kr,wr.StartThread,{text:"Start thread",icon:(0,r.tZ)(Gn.Z,{}),keyboardShortcut:{key:"/",altKey:!0}}),yr(kr,wr.LookForErrors,{text:"Look for errors",icon:(0,r.tZ)(mr.Z,{})}),yr(kr,wr.ExplainCode,{text:"Explain code",icon:(0,r.tZ)(Yn.Z,{})}),yr(kr,wr.GenerateCode,{text:"Generate code",icon:(0,r.tZ)(br.Z,{}),keyboardShortcut:{key:"g",altKey:!0}}),kr);function Sr(e){return e===Zr}function Er(e){var t=e.dom,n=e.verticalOffset,r=e.coords,i=r.x,o=r.y,a=t.getBoundingClientRect().bottom,c=document.documentElement.clientWidth;if(i+275>c&&(i=c-275-5),o+n>a){var l=o-n;return l<0?{x:i+5,y:0}:{x:i,y:l}}return{x:i,y:o}}function Cr(e){var t=e.view,n=e.coords,i=e.closeMenu,o=e.verticalOffset,c=e.children,l=e.width,s=void 0===l?275:l,u=t.dom,d=(0,Pt.Z)(i,[]),f=xr(a.useState((function(){return Er({dom:u,verticalOffset:o,coords:n})})),2),p=f[0],h=p.x,m=p.y,b=f[1];return a.useEffect((function(){b(Er({dom:u,verticalOffset:o,coords:n}))}),[n,o,u]),(0,r.tZ)($n.Z,{innerRef:d,background:"higher",className:"cm-custom-context-menu",css:[_.l0.position.fixed,_.l0.flex.column,_.l0.justify.center,_.l0.borderRadius(8),_.l0.shadow(1),_.l0.width(s),_.l0.zIndex(101),{border:"1px solid ".concat(_.TV.outlineDimmest)},{left:h,top:m}],children:(0,r.tZ)(vr.ZP,{children:(0,r.tZ)(ar.uP,{options:{direction:"vertical"},children:(0,r.tZ)(I.Z,{tag:"ul",role:"menubar","aria-orientation":"vertical","aria-label":"Context",children:c})})})})}function _r(e){var t=e.view,n=e.closeMenu,i=e.actions,o=e.onAction,a=i.map((function(e){return Sr(e)?1:35})).reduce((function(e,t){return e+t}),0);return(0,r.tZ)(Cr,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){yr(e,t,n[t])}))}return e}({verticalOffset:a},e,{children:i.map((function(e,a){return Sr(e)?(0,r.tZ)(I.Z,{css:[{borderBottom:"1px solid var(--background-highest)"}]},a):e===wr.CodeActions?(0,r.tZ)(hr,{view:t,closeMenu:n,metadata:jr[e]},e):(0,r.tZ)(ur,{onClick:function(){o(e),n()},children:(0,r.tZ)(Tr,{item:e,isFirst:0===a,isLast:a===i.length-1})},e)}))}))}function Or(e){var t=e.children,n=e.isFirst,i=e.isLast;return(0,r.tZ)(I.Z,{css:[_.l0.p(8),_.l0.flex.row,_.l0.align.center,n&&{borderTopLeftRadius:4,borderTopRightRadius:4},i&&{borderBottomLeftRadius:4,borderBottomRightRadius:4}],children:t})}function Tr(e){var t=e.item,n=e.isFirst,i=e.isLast,o=jr[t],a=o.text,c=o.icon,l=o.keyboardShortcut;return(0,r.BX)(Or,{isFirst:n,isLast:i,children:[c,(0,r.tZ)(I.Z,{css:[_.l0.px(8)],children:(0,r.tZ)(At.x,{children:a})}),l?(0,r.tZ)(I.Z,{css:[_.l0.position.absolute,_.l0.right(4)],children:(0,r.tZ)(qn.Z,{shortcut:l,small:!0,hideBorder:!0})}):null]})}function Ir(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ar(e){var t=e.containerProps,n=e.codeActions,i=e.onExecuted,o=(0,l.Z)().fs,a=(0,ir.Z)(),c=(0,p.Z)(a||"");return n.length&&c?(0,r.tZ)(Cr,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ir(e,t,n[t])}))}return e}({},t,{children:n.map((function(e,t){return(0,r.tZ)(ur,{onClick:function(t){if(t.stopPropagation(),K.Command.is(e))return c.request.executeCommand(e.command,e.arguments),void i();var n=e.edit,r=e.command;n&&Dn({edit:n,fs:o,client:c}),r&&c.request.executeCommand(r.command,r.arguments),i()},children:(0,r.tZ)(Or,{isFirst:0===t,isLast:t===n.length-1,children:(0,r.tZ)(At.x,{children:e.title})})},t)}))})):null}function Pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nr(e){return function(e){if(Array.isArray(e))return Pr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Pr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Rr=new Map;var zr="undefined"===typeof WeakRef?function(e){return{deref:function(){return e}}}:WeakRef;function Br(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dr(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function Ur(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Br(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Br(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lr(e){var t=e.path,n=e.range,r=e.lspClient;n=function(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify)(e),r=null===(t=Rr.get(n))||void 0===t?void 0:t.deref();return null!=r?r:(Rr.set(n,new zr(e)),e)}(n);var i,o=Ur(function(e,t){var n=a.useRef(),r=a.useMemo((function(){return(0,k.Z)((function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];e.apply(void 0,Nr(r)).then((function(e){var t;null===(t=n.current)||void 0===t||t.call(n,e)}))}),t)}),[e,t]);return[r,a.useCallback((function(e){n.current=e}),[])]}(r.request.codeActions,1e3),2),c=o[0],l=o[1],s=Ur(a.useState([]),2),u=s[0],f=s[1],p=a.useCallback((i=d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&t){e.next=2;break}return e.abrupt("return");case 2:l((function(e){(0,pn.j)(pn.U3.EDITOR_CONTEXT_MENU_CODE_ACTIONS_REQUESTED,{success:!("error"in e),numActions:"result"in e&&e.result?e.result.length:null}),"error"in e?(f([]),er.Tb(new Error(e.error.message))):null===e.result||0===e.result.length?f([]):f(e.result)})),c(t,n);case 4:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){Dr(o,n,r,a,c,"next",e)}function c(e){Dr(o,n,r,a,c,"throw",e)}a(void 0)}))}),[r,t,c,n,l]);return a.useEffect((function(){return p(),function(){c.cancel()}}),[p,c]),[u,p]}function Xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gr(e){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Fr(e,t,n[t])}))}return e}function Hr(e,t){return!t||"object"!==qr(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vr(e,t){return(Vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Xr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var $r,qr=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Yr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gr(e);if(t){var i=Gr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Hr(this,n)}}function Qr(e){var t=e.state,n=t.doc,r=t.selection.main,i=r.from,o=r.to;return{start:(0,E.s)(n,i),end:(0,E.s)(n,o)}}var Jr=function(e){var t=e.view,n=e.path,i=e.lspClient,o=e.visible,c=Kr(a.useState({x:0,y:0}),2),l=c[0],s=c[1],u=Kr(Lr({path:n,lspClient:i,range:Qr(t)}),2),d=u[0],f=u[1],p=(0,On.Z)(o),h=a.useCallback((function(){o.current=!1}),[o]);if(!d.length)return null;var m=d.some((function(e){return"kind"in e&&"quickfix"===e.kind}))?"#75bdff":"#ffcc00";return(0,r.BX)("div",{role:"presentation",onMouseDown:function(e){p||(e.stopPropagation(),e.preventDefault(),s({x:e.nativeEvent.pageX,y:e.nativeEvent.pageY}),o.current=!p)},children:[(0,r.tZ)(Pn.Z,{css:{fill:m,color:m},className:"lightbulb"}),p&&(0,r.tZ)(Ar,{containerProps:{view:t,verticalOffset:35*d.length,closeMenu:h,width:"auto",coords:l},onExecuted:function(){h(),f()},codeActions:d})]})},ei=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vr(e,t)}(n,e);var t=Yr(n);function n(){var e;return Mr(this,n),(e=t.apply(this,arguments)).visible=(0,un.u)(!1),e.container=a.createRef(),e}var i=n.prototype;return i.toDOM=function(e){var t=document.createElement("div");return t.setAttribute("aria-hidden","true"),t.className="cm-code-action",this.visible.current=!1,this.props.setDecoration(w.createPortal((0,r.tZ)("span",{ref:this.container,children:(0,r.tZ)(Jr,Wr({},this.props,{view:e,visible:this.visible}))}),t)),t},i.contains=function(e){var t;return(null===(t=this.container.current)||void 0===t?void 0:t.contains(e))||!1},i.ignoreEvent=function(){return!1},n}(S.l9);var ti=function(e){return S.lg.fromClass(function(){function t(e){Mr(this,t),this.updateDecorations(e)}var n=t.prototype;return n.update=function(e){(e.docChanged||e.viewportChanged||e.focusChanged||e.selectionSet)&&this.updateDecorations(e.view)},n.updateDecorations=function(t){var n,r,i=t.state,o=i.doc,a=i.selection,c=o.lineAt(a.main.from);n=function(e){return/^( {2}|\u3000|\t){2}/.test(e)}(c.text)||1===c.number&&1===o.lines?c.from:1===c.number?Math.min(o.length-1,c.to+1):o.lineAt(c.from-1).from,null!==(r=($r=this).widget)&&void 0!==r||($r.widget=new ei),this.widget.props=e;var l=S.p.widget({widget:this.widget,side:0});this.decorations=S.p.set([l.range(n)])},t}(),{decorations:function(e){return e.decorations},eventHandlers:{mousedown:function(e){this.widget.visible.current&&this.widget.contains(e.target)&&(e.stopPropagation(),e.preventDefault())},keyup:function(e){"Escape"===e.key&&(this.widget.visible.current=!1)},scroll:function(){this.widget.visible.current=!1}}})},ni=S.tk.baseTheme({".cm-code-action":{background:"transparent",fontFamily:pt.TV.fontFamilyDefault,position:"absolute",cursor:"pointer",zIndex:101,top:0}});function ri(e){var t,n=e.lspClient,i=e.path,o=e.decorations,a=e.rename,c=e.flagBreadcrumb,l=h(n),s=function(e){return function(t){return o.update((function(n){return n.set(e,t)}))}},u=[V({lspClient:n,path:i}),q({lspClient:n,path:i})];return l.isAutoCompleteSupported&&u.push(function(e){var t=e.lspClient,n=e.path,r=e.setDecoration;function i(){return(i=tt(d().mark((function e(i){var o,a,c,l,s,u,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getServerCapabilities()){e.next=4;break}return e.abrupt("return",null);case 4:if(c=(null===a||void 0===a||null===(o=a.completionProvider)||void 0===o?void 0:o.triggerCharacters)||[],l=lt(i,c)){e.next=8;break}return e.abrupt("return",null);case 8:return e.next=10,t.request.completion(n,(0,E.s)(i.state.doc,i.pos),l);case 10:if(!("error"in(s=e.sent))){e.next=13;break}throw new Error("Something went wrong fetching autocompletion results: ".concat(s.error.message));case 13:if(u=s.result,!i.aborted){e.next=16;break}return e.abrupt("return",null);case 16:if(u){e.next=18;break}return e.abrupt("return",null);case 18:return f=Array.isArray(u)?u:u.items,e.abrupt("return",ft({context:i,items:f,client:t,path:n,setDecoration:r}));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,j.ys)({defaultKeymap:!1,override:[(0,j.eC)(["LineComment","BlockComment","String"],(function(e){return i.apply(this,arguments)}))]})}({setDecoration:s("autocomplete"),lspClient:n,path:i})),l.isSignatureHelpSupported&&u.push(X({setDecoration:s("signatureSuggestion"),lspClient:n,path:i})),l.isHoverSupported&&!(0,x.isMobile)()&&u.push(St({setDecoration:s("hoverTooltip"),lspClient:n,path:i})),l.isDocumentSymbolSupported&&c&&u.push(An({setDecoration:s("codeNavigation"),lspClient:n,path:i})),l.isCodeActionsSupported&&u.push((t={setDecoration:s("codeActions"),lspClient:n,path:i},[ni,ti(t)])),(l.isFindDefinitionSupported||l.isFindReferencesSupported)&&u.push(Yt({setDecoration:s("tooltip"),lspClient:n,path:i})),l.isRenameSupported&&u.push(function(e){var t=e.setDecoration,n=e.hook;return Z.QQ.define({create:function(){return null},update:function(e,t){var n=e,r=!0,i=!1,o=void 0;try{for(var a,c=t.effects[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var l=a.value;l.is(ln)&&(n=l.value)}}catch(s){i=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n},provide:function(e){return S.hJ.compute([e],(function(i){var o=i.field(e);if(null===o)return t(null),null;var a=i.wordAt(o);return a?{pos:o,create:function(){var e=document.createElement("div");e.classList.add("cm-lsp-rename-tooltip"),e.classList.add("replit-tooltip"),e.style.padding="0";var c=i.sliceDoc(a.from,a.to);return t((0,r.tZ)(an,{variable:c,dom:e,onRename:function(e){return n.onRename(e,o)},closeInput:n.closeRenameInput})),{dom:e}}}:null}))}})}({setDecoration:s("renameInput"),hook:a})),u}var ii=n(90601),oi=n(32181),ai=n(53451);function ci(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function li(e){var t=e.view,n=e.filePath,r=a.useRef(null),i=(0,l.Z)().fs,o=(0,p.Z)(n),c=a.useCallback(function(){var e,a=(e=d().mark((function e(a,c){var l,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Expected view");case 2:if(o){e.next=4;break}throw new Error("Expected client");case 4:if(n){e.next=6;break}throw new Error("Expected non-null file path");case 6:if(null!=c){e.next=8;break}throw new Error("Expected rename input params");case 8:return r.current&&o.notify.cancelRequest(r.current),l=o.generateId(),r.current=l,e.next=13,o.request.rename(n,(0,E.s)(t.state.doc,c),a,{id:l,tap:(0,ai.M)(t)});case 13:if(s=e.sent,r.current=null,!("error"in s)){e.next=17;break}throw new Error("Something went wrong renaming ".concat(s.error.message));case 17:if(!s.cancelled){e.next=19;break}return e.abrupt("return");case 19:if(u=s.result){e.next=22;break}return e.abrupt("return");case 22:Dn({edit:u,fs:i,client:o}),t.dispatch({effects:[ln.of(null)]});case 24:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ci(o,r,i,a,c,"next",e)}function c(e){ci(o,r,i,a,c,"throw",e)}a(void 0)}))});return function(e,t){return a.apply(this,arguments)}}(),[o,t,n,i]),s=a.useCallback((function(){if(!t)throw new Error("Expected view");t.dispatch({effects:[ln.of(null)]}),t.focus()}),[t]);return a.useMemo((function(){return{onRename:c,closeRenameInput:s}}),[c,s])}function si(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ui(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function di(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ui(o,r,i,a,c,"next",e)}function c(e){ui(o,r,i,a,c,"throw",e)}a(void 0)}))}}function fi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return si(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return si(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pi(){return(pi=di(d().mark((function e(t){var n,r,i,o,a,c,l,s,u,f,p,m,b,v,g,y,x,w;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.event,r=t.view,i=t.client,o=t.session,a=t.filePath,c=t.requestIdRef,(0,ii.j)(n)){e.next=3;break}return e.abrupt("return");case 3:if(r){e.next=5;break}throw new Error("Expected view");case 5:if(l=n.clientX,s=n.clientY,null!==(u=r.posAtCoords({x:l,y:s}))){e.next=9;break}return e.abrupt("return");case 9:if(i){e.next=11;break}throw new Error("Expected LSP Client");case 11:if(a){e.next=13;break}throw new Error("Expected filePath");case 13:if(h(i).isFindDefinitionSupported){e.next=16;break}return e.abrupt("return");case 16:return c.current&&i.notify.cancelRequest(c.current),c.current=i.generateId(),f=(0,E.s)(r.state.doc,u),e.next=21,i.request.findDefinitions(a,f,{id:c.current,tap:(0,ai.M)(r)});case 21:if(p=e.sent,c.current=null,!("error"in p)){e.next=25;break}throw new Error("Something went wrong fetching definition location: ".concat(p.error.message));case 25:if(m=p.result,!p.cancelled&&m&&0!==m.length){e.next=28;break}return e.abrupt("return");case 28:b=fi(m,1),v=b[0],g=v.uri,y=v.range,x=y.start,w=i.documentUriToPath(g),o.updateDeeplink({path:w,line:x.line+1,col:x.character});case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hi(e){var t=e.view,n=e.filePath,r=e.isLoading,i=e.decorations,o=(0,g.Z)().preferences.codeIntelligence,c=(0,l.Z)().session,s=(0,p.Z)(n),u=v(s),d=(0,y.Z)("flag-code-navigation");!function(e){var t=e.filePath,n=(0,l.Z)().fs,r=(0,p.Z)(t);a.useEffect((function(){if(r)return r.onWorkspaceEdit((function(e){return Dn({edit:e.edit,fs:n,client:r}),{applied:!0}}))}),[n,r])}({filePath:n}),function(e){var t=e.filePath,n=(0,l.Z)().fs,r=(0,p.Z)(t);a.useEffect((function(){if(r&&h(r).isTextDocumentSyncSupported)return n.watchOtFile(t,{onFlush:function(){r.isOpen(t)&&r.notify.didSave(t)}})}),[n,t,r])}({filePath:n});var m=li({view:t,filePath:n}),b=(0,oi.Z)({view:t});a.useEffect((function(){if(!r&&o&&t&&s&&u&&s.isSupportedFile(n)){s.notify.didOpen(n,t.state.doc.toString());var e=u.isFindDefinitionSupported,a={current:null};return t.dispatch({effects:b.reconfigure([ri({lspClient:s,path:n,decorations:i,rename:m,flagBreadcrumb:d}),e?S.tk.domEventHandlers({click:function(e){return function(e){pi.apply(this,arguments)}({event:e,view:t,filePath:n,client:s,session:c,requestIdRef:a}),!1}}):[]])}),function(){s.getServerState()===f.a.INITIALIZED&&s.isOpen(n)&&s.notify.didClose(n),t.dispatch({effects:b.reconfigure([])}),i.unmount()}}}),[s,t,u,b,n,r,c,o,i,m,d])}var mi=n(6763);function bi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vi(e){return(vi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gi(e,t){return!t||"object"!==xi(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yi(e,t){return(yi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xi=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function wi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vi(e);if(t){var i=vi(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return gi(this,n)}}var ki=new(function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yi(e,t)}(n,e);var t=wi(n);function n(){return bi(this,n),t.apply(this,arguments)}return n.prototype.toDOM=function(){return document.createTextNode("\u25cf")},n}(S.SJ)),Zi=Z.Py.define({}),ji=Z.Py.define({}),Si=S.p.line({attributes:{class:"cm-debuggerLine"}}),Ei=Z.Py.define({}),Ci=Z.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var c=o.value;if(c.is(Ei))return c.value}}catch(l){r=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}});function _i(e){var t=new Z.f_,n=e.state.field(Ci);if(null!==n){var r=e.state.doc.line(n);t.add(r.from,r.from,Si)}return t.finish()}var Oi=S.lg.fromClass(function(){function e(t){bi(this,e),this.decorations=_i(t)}return e.prototype.update=function(e){this.decorations=_i(e.view)},e}(),{decorations:function(e){return e.decorations}});function Ti(e,t){e.dispatch({effects:ji.of({pos:t})})}var Ii=Z.QQ.define({create:function(){return Z.Xs.empty},update:function(e,t){e=e.map(t.changes);var n=!0,r=!1,i=void 0;try{for(var o,a=function(n,r){var i=r.value;if(i.is(ji)){var o=!1;e.between(i.value.pos,i.value.pos+1,(function(){o=!0})),e=o?e.update({filter:function(e){return e!==i.value.pos}}):e.update({add:[ki.range(i.value.pos)]})}i.is(Zi)&&(e=Z.Xs.of(i.value.lines.map((function(e){return ki.range(t.state.doc.line(e).from)})),!0))},c=t.effects[Symbol.iterator]();!(n=(o=c.next()).done);n=!0)a(0,o)}catch(l){r=!0,i=l}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}return e}});function Ai(e,t){var n;return e&&0!==e.length?null===t||(null===(n=e[0].source)||void 0===n?void 0:n.path)!==t?null:e[0].line:null}var Pi=n(85133);function Ni(e){var t=e.view,n=e.debuggest,r=e.filePath,i=e.isLoading,o=(0,l.Z)().fs,c=(0,Pi.Z)(),s=(0,On.Z)(n.mainClient),u=(0,oi.Z)({view:t});a.useEffect((function(){if(!i&&c&&s&&t){var e=(0,mi.ZF)("/home/runner/".concat(c.slug,"/").concat(r)),n=function(e,t,n,r){var i,o=[];o.push(t.breakpoints.subscribe((function(t){var r=t.get(n);r&&e.dispatch({effects:Zi.of({lines:r.map((function(e){return e.line}))})})})));var a=S.tk.updateListener.of((function(i){i.transactions.forEach((function(i){i.effects.forEach((function(i){if(i.is(ji)){var o=(0,mi.om)(n);if(!o)throw new Error("Expected relative path");t.toggleBreakpoint(n,{line:e.state.doc.lineAt(i.value.pos).number,otVersion:r.getOTVersion(o),otIndex:i.value.pos})}}))}))}));o.push(t.stackFrames.subscribe((function(t){var r=Ai(t,n);e.dispatch({effects:Ei.of(r)})})));var c=(0,S.v5)({class:"cm-breakpoint-gutter",markers:function(e){return e.state.field(Ii)},initialSpacer:function(){return ki},domEventHandlers:{mousedown:function(e,t){return Ti(e,t.from),!0}}}),l=(null===(i=t.breakpoints.current.get(n))||void 0===i?void 0:i.map((function(e){return e.line})))||[],s=[Z.Wl.highest(c),Ii.init((function(e){return Z.Xs.of(l.filter((function(t){return t<=e.doc.lines})).map((function(t){return ki.range(e.doc.line(t).from)})),!0)})),a,S.tk.baseTheme({".cm-breakpoint-gutter .cm-gutterElement":{color:_.TV.accentPrimaryDefault,paddingLeft:_.TV.space4,paddingRight:_.TV.space2,cursor:"default"}}),Ci.init((function(){return Ai(t.stackFrames.current,n)})),Oi,S.tk.baseTheme({".cm-debuggerLine":{backgroundColor:_.TV.accentPrimaryDimmest,borderRadius:_.TV.borderRadius4,marginRight:_.TV.space4}})];return{extensions:s,dispose:function(){return o.forEach((function(e){return e()}))}}}(t,s,e,o),a=n.extensions,l=n.dispose;return t.dispatch({effects:u.reconfigure(a)}),function(){t.dispatch({effects:u.reconfigure([])}),l()}}}),[s,t,c,r,i,o,u])}var Ri=n(27740),zi=n.n(Ri),Bi=n(7177),Di=n(60818),Ui=n(88768),Li=n(44054),Xi=n(5426);function Mi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fi(e){var t=e.name,n=e.children,i=e.onClick;return(0,r.BX)(pt.G7,{onClick:function(){return i()},css:[pt.gU.nofill,pt.l0.p(8)],children:[(0,r.tZ)(pt.xv,{variant:"subheadDefault",css:pt.l0.pb(16),children:t}),(0,r.tZ)(pt.G7,{css:[pt.l0.backgroundColor.backgroundDefault,pt.l0.p(8),pt.l0.borderRadius(8)],children:n})]})}var Gi="@media (min-width: ".concat(Li.j.tabletMax,"px)"),Wi=(0,dn.iv)([pt.l0.colWithGap(16),Mi({},Gi,{width:"calc(50%  - 8px)",flex:"0 0 auto",gap:"16px"})]);function Hi(e){var t=e.children;return(0,r.tZ)(pt.G7,{css:[Mi({},Gi,[pt.l0.rowWithGap(16)])],children:t})}function Vi(e){var t=e.mainFile,n=e.examples,i=e.onSelect;return(0,r.BX)(pt.G7,{css:[pt.l0.colWithGap(24)],children:[(0,r.tZ)(pt.h4,{level:1,variant:"headerDefault",children:"Code examples"}),(0,r.tZ)(pt.xv,{multiline:!0,children:"Get started with some program examples."}),(0,r.BX)(Hi,{css:[pt.l0.colWithGap(16)],children:[(0,r.tZ)(pt.G7,{css:Wi,children:n.slice(0,(n.length+1)/2).map((function(e){return(0,r.tZ)(Fi,{name:e.name,onClick:function(){return i(e)},children:(0,r.tZ)(Xi.Z,{hideGutter:!0,filePath:t,code:e.code,fontSize:12})},e.name)}))}),(0,r.tZ)(pt.G7,{css:Wi,children:n.slice((n.length+1)/2).map((function(e){return(0,r.tZ)(Fi,{name:e.name,onClick:function(){return i(e)},children:(0,r.tZ)(Xi.Z,{hideGutter:!0,filePath:t,code:e.code,fontSize:12})},e.name)}))})]})]})}function Ki(e){var t=e.replId,n=e.onSelect,i=(0,Ui.h6q)({variables:{replId:t}}),o=i.data,a=i.loading,c=i.error;if(a)return(0,r.tZ)(pt.G7,{css:[pt.l0.colWithGap(0),pt.l0.justify.center,pt.l0.align.center,pt.l0.pt(32),pt.l0.pb(32)],children:(0,r.tZ)(nr.Z,{})});if(c)return(0,r.tZ)(pt.G7,{css:[pt.l0.colWithGap(0),pt.l0.justify.center,pt.l0.align.center,pt.l0.pt(32),pt.l0.pb(32)],children:c.message});var l="Repl"===(null===o||void 0===o?void 0:o.repl.__typename)?o.repl:null;if(!l)return null;var s=l.deprecatedLanguageConfig,u=s.mainFile,d=s.examples;return(null===d||void 0===d?void 0:d.length)?(0,r.tZ)(Vi,{mainFile:u,examples:d,onSelect:n}):(0,r.tZ)(pt.G7,{css:[pt.l0.colWithGap(0),pt.l0.justify.center,pt.l0.align.center,pt.l0.pt(32),pt.l0.pb(32)],children:(0,r.BX)(pt.xv,{multiline:!0,children:["Sorry, this language doesn\u2019t have any examples. Want to add some? Contact us at ",(0,r.tZ)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"!"]})})}var $i=n(5560),qi=n(61069),Yi=n(44660);function Qi(){var e=(0,$i.Z)(),t=(0,Ui.AIW)({variables:{replId:e}}).data;return"Repl"===(null===t||void 0===t?void 0:t.repl.__typename)&&t.repl.hasGenerateCode}function Ji(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function to(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ji(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ji(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function no(e){var t=e.onRequestClose,n=(0,qi.e)(Yi.H.Examples),i=(0,qi.e)(Yi.H.Editor),o=to(a.useState(!1),2),c=o[0],l=o[1],s=(0,ir.Z)(),u=(0,Di.Z)(s),d=(0,$i.Z)(),f=a.useRef(null===n||void 0===n?void 0:n.isActive),p=a.useRef();p.current=null===n||void 0===n?void 0:n.isActive;var h=a.useRef(null===n||void 0===n?void 0:n.goto);return h.current=null===n||void 0===n?void 0:n.goto,a.useEffect((function(){return function(){var e;p.current&&(null===(e=h.current)||void 0===e||e.call(h,Yi.H.Editor))}}),[]),a.useEffect((function(){(null===i||void 0===i?void 0:i.isActive)&&!f.current&&(c?i.goto(Yi.H.Examples):l(!0))}),[i,t,c]),a.useEffect((function(){(null===n||void 0===n?void 0:n.isActive)?f.current=!0:f.current&&t(null)}),[null===n||void 0===n?void 0:n.isActive]),u?(0,r.tZ)("div",{ref:null===n||void 0===n?void 0:n.delegateTooltip,children:(0,r.tZ)(Ki,{replId:d,onSelect:function(e){u({code:e.code,insertAt:0}),t({exampleName:e.name})}})}):(0,r.tZ)("div",{children:"Please make sure you have a file open"})}var ro=function(e){var t=e.onShowGenerateCodeModal,n=(0,Pi.Z)(),i=to(a.useState(!1),2),c=i[0],l=i[1],s=Qi(),u=(null===n||void 0===n?void 0:n.language)||"",d=zi().getDocs(u),f=a.useCallback((function(e){(0,pn.j)(pn.U3.LANGUAGE_EXAMPLES_VIEWED,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){eo(e,t,n[t])}))}return e}({language:null===n||void 0===n?void 0:n.language,replId:null===n||void 0===n?void 0:n.id},e)),l(!1)}),[n]);return(0,r.BX)("div",{className:"jsx-761223062c9d62b5 placeholder",children:[(0,r.tZ)(Bi.Z,{isOpen:c,onRequestClose:function(){return f(null)},children:(0,r.tZ)(no,{onRequestClose:f})}),"Not sure what to do? Run some"," ",(0,r.tZ)("a",{"data-cy":"ws-editor-examples",onClick:function(){l(!0)},onKeyDown:function(){l(!0)},role:"button",tabIndex:0,className:"jsx-761223062c9d62b5 link",children:"examples"}),s&&!(0,x.isMobile)()?(0,r.BX)(r.HY,{children:[d?", ":" or ",(0,r.tZ)("a",{onClick:t,onKeyDown:t,role:"button",tabIndex:0,className:"jsx-761223062c9d62b5 link",children:"generate code"})]}):null,d&&(0,r.BX)(r.HY,{children:[", or view"," ",(0,r.tZ)("a",{target:"_blank",href:d,className:"jsx-761223062c9d62b5 link",children:"documentation"})]})," ","(start typing to dismiss)",(0,r.tZ)(o(),{id:"761223062c9d62b5",children:".placeholder.jsx-761223062c9d62b5{font-family:var(--font-family-code);color:var(--foreground-dimmest)}.link.jsx-761223062c9d62b5{cursor:pointer;pointer-events:all;color:var(--accent-primary-default);text-decoration:none}.link.jsx-761223062c9d62b5:hover{text-decoration:underline}"})]})};function io(e){var t=e.dom,n=e.onShowGenerateCodeModal;return w.createPortal((0,r.tZ)(ro,{onShowGenerateCodeModal:n}),t)}var oo=n(73433),ao=n(47547),co=n(30555),lo=n(45383),so=n(33605);function uo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||ho(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function po(e){return function(e){if(Array.isArray(e))return uo(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ho(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ho(e,t){if(e){if("string"===typeof e)return uo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uo(e,t):void 0}}var mo=function(e){var t=e.buttons,n=e.onClick,i=e.onUndo,a=e.onRedo,c=(0,y.Z)("flag-mobile-undo");return(0,r.BX)("nav",{className:"jsx-43582faf24448cbd",children:[t.map((function(e){return(0,r.tZ)("button",{onClick:function(t){t.stopPropagation(),t.preventDefault(),n(e)},className:"jsx-43582faf24448cbd",children:void 0!==e.label?e.label:e.value},e.value)})),c&&(0,r.BX)(r.HY,{children:[(0,r.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),i()},className:"jsx-43582faf24448cbd",children:(0,r.tZ)(ao.Z,{})}),(0,r.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),a()},className:"jsx-43582faf24448cbd",children:(0,r.tZ)(co.Z,{})})]}),(0,r.tZ)(o(),{id:"43582faf24448cbd",children:'nav.jsx-43582faf24448cbd{font-family:Monaco,Menlo,"Ubuntu Mono",Consolas,source-code-pro,monospace;height:48px;background-color:var(--background-root);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}button.jsx-43582faf24448cbd{color:var(--foreground-default);padding:10px;font-family:inherit;font-size:16px;background-color:transparent;border:0 none;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}'})]})},bo=[{value:"{}",cursorOffset:1},{value:"()",cursorOffset:1},{value:'""',cursorOffset:1}],vo=function(e){var t=e.path,n=po(bo).concat([{value:"= ",cursorOffset:2}]);return t.endsWith(".html")&&(n.unshift({value:"<>",cursorOffset:1}),n.unshift({label:"div",value:"<div></div>",cursorOffset:5})),n},go="visualViewport"in window;function yo(e){var t=e.view,n=e.filePath,i=e.isLoading,o=(0,oo.Z)();a.useEffect((function(){o&&t&&t.requestMeasure({read:function(){return{cursor:t.coordsAtPos(t.state.selection.main.head),scroller:t.scrollDOM.getBoundingClientRect()}},write:function(e){var n=e.cursor,r=e.scroller;if(n){var i=(n.top+n.bottom)/2,o=(r.top+r.bottom)/2;Math.abs(i-o)>5&&(t.scrollDOM.scrollTop+=i-o+(so.g?50:0))}}})}),[o,t]);var c=fo(a.useState(0),2),l=c[0],s=c[1];if(a.useEffect((function(){if(so.g&&go){var e=(0,k.Z)((function(){s(window.innerHeight-window.visualViewport.height-window.visualViewport.offsetTop)}),100);return window.visualViewport.addEventListener("scroll",e),window.visualViewport.addEventListener("resize",e),function(){window.visualViewport.removeEventListener("scroll",e),window.visualViewport.removeEventListener("resize",e)}}}),[]),!o||i)return null;if(!(0,x.isMobile)({tablet:!1}))return null;var u=(0,r.tZ)(mo,{onUndo:function(){t&&((0,lo.Yw)(t),t.focus())},onRedo:function(){t&&((0,lo.KX)(t),t.focus())},onClick:function(e){if(t){var n,r=null!==(n=t.state.selection.ranges[0].from)&&void 0!==n?n:0;t.dispatch({changes:{from:r,insert:e.value},selection:{anchor:r+e.cursorOffset}}),t.focus()}},buttons:vo({path:n})});return!so.g||go?(0,r.tZ)(I.Z,{css:[_.l0.position.fixed,_.l0.width("100%"),_.l0.zIndex(100),_.l0.bottom(l),_.l0.left(0)],children:u}):u}var xo=n(49892);function wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ko(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return wo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Zo=Z.Py.define();var jo=n(89957),So=n(6529),Eo=n(85252);function Co(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!e.valid)return[];for(var r=[],i=e.getCursor(t),o=i.next();!o.done&&r.length<n;)r.push(o.value),o=i.next();return r}function _o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function To(e){return e>500?"large":e>350?"medium":"small"}var Io=(0,I.K)("div");function Ao(e){var t=e.view,n=function(){if(!t)throw new Error("Expected view");(0,xo.g)(t),R<=1||A((function(e){if(null===e){var n=t.state.selection.main,r=E.findIndex((function(e){return e.from===n.from&&e.to===n.to}));return-1===r?1:r+1}return e>=R?1:e+1}))},i=function(){if(!t)throw new Error("Expected view");(0,xo.a7)(t),R<=1||A((function(e){if(null===e){var n=t.state.selection.main,r=E.findIndex((function(e){return e.from===n.from&&e.to===n.to}));return-1===r?1:r+1}return e<=1?R||1:e-1}))},o=function(e){var n=e;return!!t&&(0,S.$1)(t,n,"search-panel")},c=Oo(a.useState(!1),2),l=c[0],s=c[1],u=Oo(a.useState(!1),2),d=u[0],f=u[1],p=Oo(a.useState(!1),2),h=p[0],m=p[1],b=Oo(a.useState(""),2),v=b[0],g=b[1],y=Oo(a.useState(""),2),x=y[0],w=y[1],j=Oo(a.useState([]),2),E=j[0],C=j[1],O=Oo(a.useState(null),2),T=O[0],A=O[1],P=a.useRef(new xo.Jb({search:""})),N=(0,ir.Z)(),R=E.length,z=a.useCallback((function(e){e.eq(P.current)||(g(e.search),w(e.replace),f(e.caseSensitive),m(e.regexp),P.current=e)}),[]),B=a.useCallback((function(){s(!0)}),[]),D=a.useCallback((0,k.Z)((function(e){C(Co(P.current,e)),A(null)}),250),[]);a.useEffect((function(){return function(){return D.cancel()}}),[]),function(e){var t=e.view,n=e.onDocChanged,r=e.onSearchQuery,i=e.onExpandSearchPanel;a.useEffect((function(){t&&t.dispatch({effects:Z.Py.appendConfig.of([S.tk.updateListener.of((function(e){e.transactions.forEach((function(e){e.effects.forEach((function(e){e.is(xo.ql)&&r(e.value),e.is(Zo)&&i()}))}))})),S.tk.updateListener.of((function(e){e.docChanged&&n(e.view.state.doc)}))])})}),[t,r,i])}({view:t,onSearchQuery:z,onExpandSearchPanel:B,onDocChanged:D}),a.useEffect((function(){if(t){var e=(0,xo.uP)(t.state);g(e.search),w(e.replace),f(e.caseSensitive),m(e.regexp),P.current=e}}),[t]),a.useEffect((function(){if(t){var e=new xo.Jb({search:v,replace:x,caseSensitive:d,regexp:h}),n=P.current;e.eq(n)||(P.current=e,t.dispatch({effects:xo.ql.of(e)}),C(Co(e,t.state.doc)),A(null))}}),[t,v,x,d,h]),a.useEffect((function(){t&&N&&D(t.state.doc)}),[t,N,D]);var U=Oo(a.useState(To(0)),2),L=U[0],X=U[1],M=(0,Eo.Z)((function(e){e.width&&X(To(e.width))}));if(!t)return null;var F=R>0,G=F?"".concat(T||1," / ").concat(R):null,W=G?8*G.length:null,H=(0,r.BX)(I.Z,{css:[_.l0.flex.row,_.l0.align.center,_.l0.rowWithGap(8)],children:[(0,r.tZ)(So.Z,{id:"Match case",name:"case",checked:d,onChange:function(){f((function(e){return!e}))}}),(0,r.tZ)(At.x,{variant:"small",color:d?"default":"dimmer",children:"Match case"}),(0,r.tZ)(So.Z,{id:"Regexp",name:"re",checked:h,onChange:function(){m((function(e){return!e}))}}),(0,r.tZ)(At.x,{variant:"small",color:h?"default":"dimmer",children:"Regexp"})]});return(0,r.tZ)(Io,{ref:M,onKeyDown:function(e){o(e)&&e.preventDefault()},children:(0,r.BX)($n.Z,{elevated:!0,css:[_.l0.rowWithGap(8),_.l0.px(4),_.l0.py(8),{borderBottom:"1px solid",borderColor:_.TV.outlineDimmest}],children:[(0,r.tZ)(I.Z,{css:[_.l0.center,_.l0.height(28)],children:(0,r.tZ)(tn.Z,{alt:l?"Close replace panel":"Show replace panel",onClick:function(){s((function(e){return!e}))},children:(0,r.tZ)(fn.Z,{rotate:l?90:0,style:{transition:"200ms ease"}})})}),(0,r.BX)(I.Z,{css:[_.l0.flex.growAndShrink(1),_.l0.colWithGap(16)],children:[(0,r.BX)(I.Z,{css:["large"===L?_.l0.rowWithGap(16):_.l0.colWithGap(8)],children:[(0,r.BX)(I.Z,{css:[_.l0.flex.growAndShrink(1),"small"===L?_.l0.colWithGap(8):[_.l0.rowWithGap(8),_.l0.align.center]],children:[(0,r.BX)(I.Z,{css:[_.l0.flex.growAndShrink(1),_.l0.position.relative],children:[(0,r.tZ)(jo.ZP,{css:[_.l0.p(4),W&&{paddingRight:W}],placeholder:"Find",value:v,name:"search","main-field":"true",onKeyDown:function(e){e.metaKey&&"f"===e.key?e.currentTarget.select():"enter"===e.key.toLowerCase()&&(o(e)||(e.preventDefault(),e.shiftKey?i():n()))},onChange:function(e){g(e.target.value)}}),F?(0,r.tZ)(I.Z,{css:[_.l0.position.absolute,_.l0.top(0),_.l0.right(0),_.l0.height("100%"),_.l0.center,_.l0.pr(4)],children:(0,r.tZ)(At.x,{variant:"small",color:"dimmest",children:G})}):null]}),(0,r.BX)(I.Z,{css:[_.l0.rowWithGap(4),_.l0.align.center],children:[(0,r.tZ)(tn.Z,{alt:"Previous",onClick:function(){i()},children:(0,r.tZ)(fn.Z,{rotate:-90})}),(0,r.tZ)(tn.Z,{alt:"Next",onClick:function(){n()},children:(0,r.tZ)(fn.Z,{rotate:90})}),(0,r.tZ)(en.ZP,{small:!0,text:"Select all",onClick:function(){(0,xo.i3)(t),t.focus()}})]})]}),H]}),l?(0,r.BX)(I.Z,{css:["small"===L?_.l0.colWithGap(8):[_.l0.rowWithGap(8),_.l0.align.center,{marginRight:"large"===L?162:-19}]],children:[(0,r.tZ)(I.Z,{css:[_.l0.flex.growAndShrink(1)],children:(0,r.tZ)(jo.ZP,{css:[_.l0.p(4)],placeholder:"Replace",name:"replace",value:x,onKeyDown:function(e){"enter"===e.key.toLowerCase()&&(o(e)||(e.preventDefault(),(0,xo.K9)(t)))},onChange:function(e){w(e.target.value)}})}),(0,r.BX)(I.Z,{css:[_.l0.rowWithGap(4),_.l0.align.center],children:[(0,r.tZ)(en.ZP,{small:!0,text:"Replace",onClick:function(){(0,xo.K9)(t)}}),(0,r.tZ)(en.ZP,{small:!0,text:"Replace all",onClick:function(){(0,xo.ko)(t)}})]})]}):null]}),(0,r.tZ)(I.Z,{css:[_.l0.center,_.l0.height(28)],children:(0,r.tZ)(tn.Z,{alt:"Close Search Panel",tooltipHidden:!0,onClick:function(){(0,xo.N$)(t)},children:(0,r.tZ)(_t.Z,{})})})]})})}function Po(e){var t=e.dom,n=e.view;return w.createPortal((0,r.tZ)(Ao,{view:n}),t)}var No=n(67289),Ro=n(98647),zo=n(70240),Bo=n(87152),Do="import tokenize\nimport io\nimport re\nimport sys\nimport json\n\ndef get_ranges(code_snippet):\n    \"\"\"\n\n    Wrapper function that takes a code_snippet, and checks for\n    - The first instance of a variable name (we keep track of this in already_seen)\n    - The first instance of a function name (we keep track of this in already_seen)\n    - The first instance of a builtins (we keep track of this in already_seen)\n    - Every instance of strings, comments, and whitespace\n\n    It first tries to use python's \"tokenize\" module on the entire code snippet, which hilariously fails if there's a missing parens. If that fails, then it falls back to running \"tokenize\" line-by-line. If that fails, regexes.\n\n    Inputs:\n        - code_snippet, a string\n\n    Outputs:\n        - character_ranges_to_suppress, a list of tuples\n    \n    \"\"\"\n\n    ranges_to_suppress = {}\n    tokens_to_suppress = []\n    already_seen = [\n        'False', 'def', 'if', 'raise', 'None', 'del', 'import', 'return',\n        'True', 'elif', 'in', 'try', 'and', 'else', 'is', 'while', 'as',\n        'except', 'lambda', 'with', 'assert', 'finally', 'nonlocal', 'yield',\n        'break', 'for', 'not', 'class', 'from', 'or', 'continue', 'global',\n        'pass'\n    ]\n\n    try:\n        ranges_to_add, _, tokens_to_suppress = get_line_and_character_ranges_to_suppress(code_snippet, already_seen)\n        ranges_to_suppress = add_ranges_to_line_and_character_ranges_to_suppress(ranges_to_suppress, ranges_to_add, code_snippet)\n\n    except:\n         ranges_to_suppress, tokens_to_suppress = get_ranges_line_by_line(code_snippet, ranges_to_suppress, tokens_to_suppress)\n\n    line_number2character_offset_at_start = get_line_number2character_offset_at_start(code_snippet)\n    character_ranges_to_suppress = get_character_ranges_to_suppress(ranges_to_suppress, line_number2character_offset_at_start)\n\n    return character_ranges_to_suppress\n\ndef add_ranges_to_line_and_character_ranges_to_suppress(line_and_character_ranges_to_suppress, ranges_to_add, code_snippet):\n    \n    for (start_line, start_char), (end_line, end_char) in ranges_to_add:\n\n        # Python's tokenizer lines are 1-indexed \n        start_line = start_line - 1\n        end_line = end_line - 1\n        \n        if start_line not in line_and_character_ranges_to_suppress:\n            line_and_character_ranges_to_suppress[start_line] = []\n\n        if start_line == end_line:\n            line_and_character_ranges_to_suppress[start_line].append((start_char, end_char))\n        else: # If the starting and ending lines are different\n            line_and_character_ranges_to_suppress[start_line].append((start_char, len(code_snippet.split('\\n')[start_line]) + 1))\n            line_and_character_ranges_to_suppress[end_line].append((0, end_char))\n\n    return line_and_character_ranges_to_suppress\n    \n\n# def test(line_number2character_offset_at_start, code_snippet, character_ranges_to_suppress, tokens_to_suppress):\n# assert max(line_number2character_offset_at_start.values()) == len(code_snippet) - len(code_snippet.split('\\n')[-1])\n# for idx, range in enumerate(character_ranges_to_suppress):\n# try:\n# assert code_snippet[range[0]:range[1]] == tokens_to_suppress[idx]\n# except:\n# print(code_snippet[range[0]:range[1]], tokens_to_suppress[idx])\n\ndef get_ranges_line_by_line(code_snippet, ranges_to_suppress, tokens_to_suppress):\n\n    \"\"\"\n    This is a fallback function that will be used if the python tokenizer throws an \"EOF Multiline Error\"\n    And gets the ranges of the code to suppress line by line\n\n    Inputs\n        - code_snippet, a string\n        - ranges_to_suppress, a dict\n        - tokens_to_suppress, a list of strings\n\n    Outputs:\n        - ranges_to_suppress, a dict\n        - tokens_to_suppress, a list of strings\n    \n    \"\"\"\n    \n    already_seen = ['False', 'def', 'if', 'raise', 'None', 'del', 'import', 'return', 'True',\n                    'elif', 'in', 'try', 'and', 'else', 'is', 'while', 'as', 'except', 'lambda',\n                    'with', 'assert', 'finally', 'nonlocal', 'yield', 'break', 'for', 'not',\n                    'class', 'from', 'or', 'continue', 'global', 'pass']\n\n\n    for line_number, line in enumerate(code_snippet.split('\\n')):\n        line = line + '\\n'\n        try:\n            ranges_to_add, already_seen, _tokens = get_line_and_character_ranges_to_suppress(line, already_seen)\n            ranges_to_suppress[line_number] = [(start[1], end[1]) for start, end in ranges_to_add]\n            tokens_to_suppress.extend(_tokens)\n        except:\n            # The fallback is to use some regexps\n            ranges_to_suppress[line_number], already_seen, _tokens = get_fallback_ranges_to_suppress(line, already_seen)\n            tokens_to_suppress.extend(_tokens)\n\n    return ranges_to_suppress, tokens_to_suppress\n\n\ndef get_line_and_character_ranges_to_suppress(\n        code_snippet, variable_and_function_names_already_seen):\n    \"\"\"\n    Takes a line of code and checks to see if there are any\n    - Variable names that haven't been seen before\n    - Functions that haven't been seen before\n    - Strings\n    - Comments\n    - Indents\n\n    As all of these are frequent contributors of false positives.\n\n    A future version would be less \"greedy\" in checking, because this means we don't catch (1) typos (though a linter should call this) and (2) when the wrong function is called.\n\n    Inputs:\n        - line, string\n        - variable_and_function_names_already_seen, a list of strings\n\n    Outputs:\n        - ranges_to_suppress, a list of tuples\n        - variable_and_function_names_already_seen, a list of strings\n        - _tokens, a list of tokens for testing\n    \n    \"\"\"\n\n    ranges_to_suppress = []\n    _tokens = []\n    # This will throw an \"Token error: EOF in multi-line statement\" if there are unbalanced\n    # strings or parentheses!\n    for toktuple in tokenize.generate_tokens(io.StringIO(code_snippet).readline):\n        # From the documentation: The *numbers* of different types might change from version to version, but the names themselves shouldn't\n        # https://docs.python.org/3/library/token.html#token.OP\n        # https://github.com/python/cpython/blob/3.10/Lib/token.py\n\n        # type \"NAME\": functions and variables\n        if toktuple.type == tokenize.NAME and toktuple.string not in variable_and_function_names_already_seen:\n            ranges_to_suppress.append((toktuple.start, toktuple.end))\n            variable_and_function_names_already_seen.append(toktuple.string)\n            _tokens.append(toktuple.string)\n        # type INDENT, STRING, COMMENT (local python version), COMMENT (python version on replit)\n        elif toktuple.type in [\n                tokenize.INDENT, tokenize.STRING, tokenize.COMMENT\n        ]:\n            _tokens.append(toktuple.string)\n            ranges_to_suppress.append((toktuple.start, toktuple.end))\n\n    return ranges_to_suppress, variable_and_function_names_already_seen, _tokens\n\n\ndef get_fallback_ranges_to_suppress(line,\n                                    variables_and_function_names_already_seen):\n    # Some of these patterns are kind of greedy\n    # But the risk is limited to a single line\n    # Because this only runs as a fallback if the python tokenizer throws an \"EOF Multiline Error\"\n\n    func_pattern = re.compile('def .*\\(')\n    var_pattern = re.compile('^(.*?)=')\n    multi_space_pattern = re.compile('\\s\\s\\s*')\n    double_quote_pattern = re.compile('\".*\"')\n    single_quote_pattern = re.compile(\"'.*'\")\n    comment_pattern = re.compile(\"#.*\\n\")\n\n    spans = []\n    _tokens = []\n    for pattern in [\n            func_pattern, var_pattern, multi_space_pattern,\n            double_quote_pattern, single_quote_pattern, comment_pattern\n    ]:\n        for m in pattern.finditer(line):\n            if m.group() not in variables_and_function_names_already_seen:\n                spans.append(m.span())\n                _tokens.append(m.group())\n\n                if pattern in [func_pattern, var_pattern]:\n                    variables_and_function_names_already_seen.append(m.group())\n\n    return spans, variables_and_function_names_already_seen, _tokens\n\n\ndef get_line_number2character_offset_at_start(code_snippet):\n    \"\"\"\n    Takes a code snippet and returns the character offset for the start of each line.\n\n    Inputs:\n        - code_snippet, a string\n\n    Outputs:\n        - line_number2character_offset_at_start, a dictionary of {line number : character offset to start the line}\n    \n    \"\"\"\n\n    line_number2character_offset_at_start = {0: 0}\n    previous_line_length = len(code_snippet.split(\n        '\\n')[0]) + 1  # Have to add a char because of the newline\n    for idx, line_text in enumerate(code_snippet.split('\\n')):\n        if idx == 0:\n            continue\n        line_number2character_offset_at_start[\n            idx] = line_number2character_offset_at_start[\n                idx - 1] + previous_line_length\n        previous_line_length = len(\n            line_text) + 1  # Have to add a char because of the newline\n\n    return line_number2character_offset_at_start\n\n\ndef get_character_ranges_to_suppress(line_and_character_ranges_to_suppress,\n                                     line_number2character_offset_at_start):\n    \"\"\"\n    Gets the character ranges to suppress by adding the character ranges from each tokenizer/regex pattern match to the character offset to start each line\n    \n    Input:\n        - line_and_character_ranges_to_suppress, a list of tuples\n        - line_number2character_offset_at_start, a dictionary of {line number : character offset to start the line}\n\n    Outputs:\n        - character_ranges_to_suppress, a list of tuples\n    \n    \n    \"\"\"\n    character_ranges_to_suppress = []\n    for line_number, ranges in line_and_character_ranges_to_suppress.items():\n        for range in ranges:\n            character_ranges_to_suppress.append(\n                (line_number2character_offset_at_start[line_number] + range[0],\n                 line_number2character_offset_at_start[line_number] +\n                 range[1]))\n\n    return character_ranges_to_suppress\n\n\n\nprint(json.dumps(get_ranges(sys.argv[1])))",Uo=n(42650),Lo=n(17632),Xo=n(47845);function Mo(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function Fo(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Mo(o,r,i,a,c,"next",e)}function c(e){Mo(o,r,i,a,c,"throw",e)}a(void 0)}))}}function Go(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wo(e){return(Wo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ho(e,t){return!t||"object"!==Ko(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vo(e,t){return(Vo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ko=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function $o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wo(e);if(t){var i=Wo(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ho(this,n)}}var qo=Z.Py.define({map:function(e,t){return e.map(t)}});function Yo(e){var t=e.isLoading,n=e.close,i=(0,a.useState)(!1),o=i[0],c=i[1],l=a.useCallback(function(){var e=Fo(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:c(!0),(0,pn.j)(pn.U3.CODEX_FEEDBACK_SUBMITTED,{language:"python",feedback:t,feature:"look-for-errors"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o]);return(0,r.BX)(pt.Tg,{background:"higher",css:[pt.l0.height(50),pt.l0.px(4),pt.l0.rowWithGap(0),pt.l0.justify.spaceBetween,pt.l0.align.center,{borderTop:"1px solid",borderBottom:"1px solid",borderColor:pt.TV.outlineDimmer}],children:[(0,r.BX)(pt.G7,{css:[pt.l0.rowWithGap(16),pt.l0.align.center],children:[(0,r.tZ)(Uo.Z,{}),(0,r.tZ)(pt.h4,{level:3,children:"Look for Errors"}),t?(0,r.tZ)(nr.Z,{}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(pt.xv,{variant:"small",children:"Is this guess useful?"}),o?(0,r.tZ)(pt.zx,{disabled:!0,iconLeft:(0,r.tZ)(Xo.Z,{}),onClick:function(){},small:!0,text:"Thanks!"}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(pt.zx,{iconLeft:(0,r.tZ)(_t.Z,{}),text:"No",onClick:function(){return l(Ui.TYv.No)}}),(0,r.tZ)(pt.zx,{iconLeft:(0,r.tZ)(nn.Z,{}),text:"Yes",colorway:"positive",onClick:function(){return l(Ui.TYv.Yes)}})]})]})]}),(0,r.BX)(pt.G7,{css:[pt.l0.rowWithGap(16),pt.l0.align.center],children:[(0,r.tZ)("a",{href:"https://blog.replit.com/codex",target:"_blank",css:pt.l0.color.foregroundDefault,children:(0,r.tZ)(pt.hU,{alt:"Learn more",tooltipDelay:0,tooltipText:"This beta feature uses Codex by OpenAI. Click to learn more.",type:"button",children:(0,r.tZ)(Lo.Z,{color:pt.TV.foregroundDefault})})}),(0,r.tZ)(pt.hU,{alt:"Close",onClick:function(){n()},children:(0,r.tZ)(_t.Z,{})})]})]})}var Qo=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vo(e,t)}(n,e);var t=$o(n);function n(e){var r,i=e.close,o=e.isLoading;return Go(this,n),(r=t.call(this)).isLoading=o,r.close=i,r}return n.prototype.toDOM=function(){var e=document.createElement("div");return w.render((0,r.tZ)(Yo,{isLoading:this.isLoading,close:this.close}),e),e},n}(S.l9),Jo=Z.Py.define({map:function(e,t){return e.map(t)}}),ea=Z.QQ.define({create:function(){return S.p.none},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var c=o.value;if(c.is(Jo))return c.value}}catch(l){r=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t.docChanged?e.map(t.changes):e},provide:function(e){return S.tk.decorations.from(e)}});function ta(e){function t(e){return n.apply(this,arguments)}function n(){return(n=Fo(d().mark((function t(n){var r,i;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.exec("python","-c",Do,n);case 2:if(!(r=t.sent).error){t.next=5;break}throw new Error("Error getting suppressed ranges: ".concat(r.error));case 5:if(r.output){t.next=7;break}return t.abrupt("return",[]);case 7:if(t.prev=7,i=JSON.parse(r.output),Array.isArray(i)){t.next=11;break}throw new Error("Expected array of ranges");case 11:return t.abrupt("return",i);case 14:return t.prev=14,t.t0=t.catch(7),t.abrupt("return",[]);case 17:case"end":return t.stop()}}),t,null,[[7,14]])})))).apply(this,arguments)}return S.lg.fromClass(function(){function e(t){Go(this,e),this.view=t,this.lastRequestRef=null,this.missedChanges=null}var n=e.prototype;return n.update=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,c=!0,l=!1,s=void 0;try{for(var u,d=a.effects[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){var f=u.value;if(f.is(qo))return void this.onLookupRange(f.value,e.state.doc)}}catch(p){l=!0,s=p}finally{try{c||null==d.return||d.return()}finally{if(l)throw s}}}}catch(p){n=!0,r=p}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}e.docChanged&&this.missedChanges&&(this.missedChanges=this.missedChanges.compose(e.changes))},n.onLookupRange=function(e,n){var r=this;return Fo(d().mark((function i(){var o,a,c,l,s,u,f,p,h,m,b,v,g,y,x,w,k,j,E,C,_,O,T,I,A,P,N,R,z;return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:for(c=new Z.f_,l=e.from;l<=e.to;)s=n.lineAt(l),l===e.from&&c.add(s.from,s.from,S.p.widget({widget:new Qo({isLoading:!0,close:function(){r.lastRequestRef=null,r.missedChanges=null,r.view.dispatch({effects:Jo.of(S.p.none)})}}),block:!0})),c.add(s.from,s.from,S.p.line({attributes:{style:"background: "+pt.TV.backgroundHigher+";"}})),l=s.to+1;return u=Jo.of(c.finish()),setTimeout((function(){r.view.dispatch({effects:u})})),r.missedChanges=Z.as.empty(n.length),f={},r.lastRequestRef=f,i.next=10,t(r.view.state.doc.sliceString(e.from,e.to));case 10:return p=i.sent,i.next=13,null===Bo.l||void 0===Bo.l?void 0:Bo.l.query({query:Ui.BR,variables:{code:r.view.state.doc.sliceString(e.from,e.to),language:"python",rangesToSuppress:p}});case 13:if(h=i.sent,m="LookForErrorsResult"===(null===h||void 0===h||null===(o=h.data)||void 0===o||null===(a=o.lookForErrors)||void 0===a?void 0:a.__typename)?h.data.lookForErrors.highlights:null,f===r.lastRequestRef){i.next=17;break}return i.abrupt("return");case 17:if(b=r.missedChanges,r.lastRequestRef=null,r.missedChanges=null,null===m||void 0===m?void 0:m.length){i.next=23;break}return r.view.dispatch({effects:Jo.of(S.p.none)}),i.abrupt("return");case 23:for(v=[],g=e.map(b),v.push(S.p.widget({widget:new Qo({isLoading:!1,close:function(){r.lastRequestRef=null,r.missedChanges=null,r.view.dispatch({effects:Jo.of(S.p.none)})}}),block:!0}).range(r.view.state.doc.lineAt(g.from).from)),y=g.from;y<=g.to;)x=r.view.state.doc.lineAt(y),v.push(S.p.line({attributes:{style:"background: "+pt.TV.backgroundHigher+";"}}).range(x.from)),y=x.to+1;w=n.lineAt(e.from),k=w.number,j=w.from,E=!0,C=!1,_=void 0,i.prev=29,O=m[Symbol.iterator]();case 31:if(E=(T=O.next()).done){i.next=44;break}if(0!==(I=T.value).weight){i.next=35;break}return i.abrupt("continue",41);case 35:A=1===I.start.line?e.from-j:0,P=n.line(k+I.start.line-1),N=b.mapPos(P.from+I.start.character-1+A),R=n.line(k+I.end.line-1),z=b.mapPos(R.from+I.end.character-1+A),v.push(S.p.mark({attributes:{title:"".concat(Math.floor(I.weight),"% chance of inaccuracy"),style:"background: green; background: hsl(0, 100%, ".concat(Math.max(100-I.weight,20),"%);")}}).range(N,z));case 41:E=!0,i.next=31;break;case 44:i.next=50;break;case 46:i.prev=46,i.t0=i.catch(29),C=!0,_=i.t0;case 50:i.prev=50,i.prev=51,E||null==O.return||O.return();case 53:if(i.prev=53,!C){i.next=56;break}throw _;case 56:return i.finish(53);case 57:return i.finish(50);case 58:r.view.dispatch({effects:Jo.of(Z.Xs.of(v,!0))});case 59:case"end":return i.stop()}}),i,null,[[29,46,50,58],[51,,53,57]])})))()},e}())}function na(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ra(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function ia(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ra(o,r,i,a,c,"next",e)}function c(e){ra(o,r,i,a,c,"throw",e)}a(void 0)}))}}function oa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return na(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return na(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var aa=function(){var e=ia(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.code,r=t.language,e.next=3,null===Bo.l||void 0===Bo.l?void 0:Bo.l.query({query:Ui.nFn,variables:{code:n,language:r}});case 3:if("ExplainCodeResult"!==(null===(i=e.sent)||void 0===i?void 0:i.data.explainCode.__typename)){e.next=6;break}return e.abrupt("return",i.data.explainCode.explanation);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var ca={js:"javascript",jsx:"javascript",ts:"javascript",tsx:"javascript",py:"python",java:"java"},la={rs:"rust",lsp:"lisp",sh:"bash",cpp:"c++"};function sa(e){var t=e.filePath,n=e.replId,r=(0,Ui.gs8)({variables:{replId:n}}).data,i=function(e,t){if(!e)return!1;var n=(0,No.r6)(e);return!(!t&&"java"===n)&&Boolean(ca[n])}(t,(0,y.Z)("flag-codex-java"));return"Repl"===(null===r||void 0===r?void 0:r.repl.__typename)&&r.repl.hasExplainCode&&i}var ua=n(64758);var da=function(e){var t=e.children,n=e.title,i=e.newInferenceAlt,o=e.learnMoreLink,a=e.width,c=e.onRequestClose,l=e.onRequestNewInference;return(0,r.BX)($n.Z,{background:"higher",css:[_.l0.borderRadius(8),_.l0.width(a||320),{background:_.TV.backgroundHigher,boxShadow:_.TV.shadow1,borderWidth:1,borderColor:_.TV.backgroundHighest,borderStyle:"solid"}],children:[(0,r.BX)("div",{css:[_.l0.display.flex,_.l0.justify.spaceBetween,_.l0.flex.row,_.l0.rowWithGap(2),_.l0.p(8),{borderBottom:"1px solid",borderBottomColor:_.TV.backgroundHighest}],children:[(0,r.BX)("div",{css:[_.l0.display.grid,_.l0.align.center,{gridAutoFlow:"column",gridGap:_.TV.space8}],children:[(0,r.tZ)(Uo.Z,{}),(0,r.tZ)("div",{css:[{color:_.TV.foregroundDefault}],children:n}),o?(0,r.tZ)("a",{href:o,target:"_blank",css:_.l0.color.foregroundDefault,children:(0,r.tZ)(tn.Z,{alt:"Learn more",tooltipDelay:0,tooltipText:"This feature is powered by artificial intelligence. Click to learn more.",type:"button",children:(0,r.tZ)(Lo.Z,{color:_.TV.foregroundDefault})})}):null,l?(0,r.tZ)(tn.Z,{alt:i||"Try again",onClick:l,type:"button",children:(0,r.tZ)(ua.Z,{})}):null]}),(0,r.tZ)("div",{className:"right",children:(0,r.tZ)(tn.Z,{alt:"Close",tooltipHidden:!0,onClick:c,type:"button",children:(0,r.tZ)(_t.Z,{})})})]}),t]})},fa=n(24561);var pa=function(){return(0,r.tZ)("div",{css:[_.l0.p(16)],children:(0,r.BX)(fa.ZP,{viewBox:"0 0 100 10",primaryColor:"var(--background-higher)",secondaryColor:"var(--background-highest)",speed:1.5,children:[(0,r.tZ)("rect",{x:"0",y:"0",rx:"2",ry:"2",width:"100",height:"4"}),(0,r.tZ)("rect",{x:"0",y:"6",rx:"2",ry:"2",width:"33",height:"4"})]})})};var ha=function(e){var t=e.explanation,n=e.errorMessage,i=e.loading,o=e.codexFeedback,a=e.onRequestClose,c=e.onRequestExplainAgain,l=e.onExplainFail,s=e.onExplainSuccess,u=null;return i?u=(0,r.tZ)(pa,{}):t?u=(0,r.BX)("div",{css:[_.l0.p(8),_.l0.display.grid,{gridGap:_.TV.space8}],children:[(0,r.tZ)("pre",{css:{fontFamily:_.TV.fontFamilyCode,whiteSpace:"pre-wrap",lineHeight:_.TV.lineHeightDefault,fontSize:_.TV.fontSizeDefault,color:_.TV.foregroundDefault,backgroundColor:_.TV.backgroundHighest,padding:_.TV.space8,borderRadius:_.TV.borderRadius8},children:t}),(0,r.tZ)("div",{css:[{color:_.TV.foregroundDefault}],children:"Is this a good explanation?"}),i?null:(0,r.BX)(I.Z,{css:[_.l0.rowWithGap(8),_.l0.justify.start,_.l0.align.center],children:[o?(0,r.tZ)(en.ZP,{disabled:!0,iconLeft:(0,r.tZ)(Xo.Z,{}),onClick:function(){},small:!0,text:"Thanks!"}):(0,r.BX)(I.Z,{css:[_.l0.rowWithGap(8),_.l0.justify.start,_.l0.align.center],children:[(0,r.tZ)(en.ZP,{text:"No",colorway:"negative",outlined:"no"!==o,onClick:l,small:!0,iconLeft:(0,r.tZ)(_t.Z,{})}),(0,r.tZ)(en.ZP,{text:"Yes",colorway:"positive",onClick:s,small:!0,outlined:"yes"!==o,iconLeft:(0,r.tZ)(nn.Z,{})})]}),(0,r.tZ)("a",{href:"https://replit.com/support",target:"_blank",rel:"noopener noreferrer",css:[_.l0.color.foregroundDimmest,{fontSize:_.TV.fontSizeSmall,"&:hover":{color:_.TV.foregroundDefault}}],children:"Send Feedback"})]})]}):n&&(u=(0,r.tZ)("div",{css:[_.l0.p(8),_.l0.display.grid,{gridGap:_.TV.space8}],children:n})),(0,r.tZ)(da,{title:"Explain Code",newInferenceAlt:"Generate new explanation",learnMoreLink:"https://blog.replit.com/codex",onRequestNewInference:c,onRequestClose:a,children:u})};function ma(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ba(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function va(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ba(e,t,n[t])}))}return e}function ga(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ma(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ma(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ya=Z.Py.define({map:function(e,t){if(e)return e.map(t)}}),xa=S.tk.baseTheme({".explain-code-decoration":{background:pt.TV.purpleDimmest}});function wa(e){var t=e.filePath,n=e.setExplainCodeParams,i=e.view,o=function(e){var n=e.getSelection,i=e.requestClose,o=e.onLayout;a.useLayoutEffect((function(){null===o||void 0===o||o()}),[o]);var l=function(e){var t,n,r,i,o,c,l,s,u,f,p,h=e.language,m=e.code,b=(0,$i.Z)(),v=(0,Ui.LxS)({fetchPolicy:"no-cache",variables:{code:m,language:h,replId:b},skip:!h||!m,notifyOnNetworkStatusChange:!0});a.useEffect((function(){(0,pn.j)(pn.U3.CODEX_FEATURE_USED,{feature:"explanation",isRetry:!1,language:h})}),[]);var g=oa((0,Ui.fvV)(),2),y=g[0],x=g[1],w=function(){var e=ia(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ExplainCodeResult"===(null===(n=v.data)||void 0===n?void 0:n.explainCode.__typename)&&!v.loading&&!x.loading){e.next=3;break}return e.abrupt("return");case 3:y({variables:{input:{feedback:t,inferenceClass:Ui.SgB.Explanation,inferenceId:null===(r=v.data)||void 0===r?void 0:r.explainCode.id}}}),(0,pn.j)(pn.U3.CODEX_FEEDBACK_SUBMITTED,{language:h,feedback:t,feature:"explanation"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k="ExplainCodeResult"===(null===(t=v.data)||void 0===t||null===(n=t.explainCode)||void 0===n?void 0:n.__typename)?v.data.explainCode.explanation:void 0,Z="UserError"===(null===(r=v.data)||void 0===r||null===(i=r.explainCode)||void 0===i?void 0:i.__typename)||"UnauthorizedError"===(null===(o=v.data)||void 0===o||null===(c=o.explainCode)||void 0===c?void 0:c.__typename)?v.data.explainCode.message:null,j="ExplainCodeResult"===(null===(l=v.data)||void 0===l||null===(s=l.explainCode)||void 0===s?void 0:s.__typename)&&"CodexFeedback2"===(null===(u=x.data)||void 0===u||null===(f=u.giveCodexFeedback2)||void 0===f?void 0:f.__typename)&&v.data.explainCode.id===(null===(p=x.data.giveCodexFeedback2)||void 0===p?void 0:p.id)?x.data.giveCodexFeedback2.feedback:null;return{getCodeExplanation:aa,loading:v.loading,explanation:k,errorMessage:Z,refetchExplanation:ia(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,pn.j)(pn.U3.CODEX_FEATURE_USED,{feature:"explanation",isRetry:!0,language:h}),e.abrupt("return",v.refetch());case 2:case"end":return e.stop()}}),e)}))),giveCodexFeedback:w,codexFeedback:j}}({code:n(),language:function(e){var t=(0,No.r6)(e);return ca[t]?ca[t]:"unknown"}(t)}),s=l.explanation,u=l.errorMessage,f=l.loading,p=l.refetchExplanation,h=l.codexFeedback,m=l.giveCodexFeedback,b={explanation:s,errorMessage:u,loading:f,onRequestClose:i,onRequestExplainAgain:p,codexFeedback:h,onExplainFail:function(){return m(Ui.TYv.No)},onExplainSuccess:function(){return m(Ui.TYv.Yes)}};return w.createPortal((0,r.tZ)("div",{css:{left:"2em",position:"fixed"},children:(0,r.tZ)(ha,va({},b))}),c)},c=document.createElement("div");c.className="cm-explain-code-tooltip";var l={},s=Z.QQ.define({create:function(){return null},update:function(e,t){var n=e;return T(t,ya,(function(e){n=e.value})),n&&!t.changes.empty&&(n=n.map(t.changes)),n},provide:function(e){return[S.hJ.compute([e],(function(t){var a=t.field(e);return a?{pos:a.from,end:a.to,create:function(){return function(e,t){var a=function(a){n({node:(0,r.tZ)(o,{getSelection:function(){return e.doc.sliceString(t.from,t.to)},requestClose:function(){i.dispatch({effects:[ya.of(null)]}),n(null)},onLayout:a})})};return a(),l.dom=c,l.update=function(e){a((function(){(0,S.E2)(e.view)}))},l}(t,a)}}:null})),S.tk.decorations.compute([e],(function(t){var n=t.field(e);return n?S.p.set(S.p.mark({class:"explain-code-decoration"}).range(n.from,n.to)):S.p.none}))]}});return[s,xa]}var ka=n(13649);function Za(e){var t=e.activeFile,n=e.view,r=e.event,i=e.clipboardText,o=n.state.selection,a=function(){r||(o.main.empty?n.dispatch({changes:[{from:o.main.from,insert:i}]}):n.dispatch(n.state.replaceSelection(i||"")))};if(t&&"md"===(0,No.r6)(t))if(o.ranges.length>1)a();else if(o.main.from!==o.main.to)if(i&&(0,ka.Z)(i)){r&&r.preventDefault();var c=n.state.sliceDoc(o.main.from,o.main.to),l="[".concat(c,"](").concat(i,")");n.dispatch({changes:{from:o.main.from,to:o.main.to,insert:l}})}else a();else a();else a()}var ja=Z.Py.define(),Sa=S.tk.baseTheme({".cm-tooltip.cm-generate-code-tooltip":{backgroundColor:"transparent",boxShadow:"none",border:"0 none",padding:"0px"},"& .cm-generate-code-tooltip .cm-content":{paddingBottom:"0px"}});function Ea(e){var t=e.view,n=e.setGenerateCodePortalProps,r=Z.QQ.define({create:function(){return null},update:function(e,r){return T(r,ja,(function(i){e=i.value?function(e){return{pos:e.selection.main.head,above:!1,create:function(){var r=document.createElement("div");return r.className="cm-generate-code-tooltip",n({dom:r,onRequestClose:function(){t.dispatch({effects:ja.of(!1)})},selectedCode:e.doc.sliceString(e.selection.main.from,e.selection.main.to),contextCode:e.doc.sliceString(0,e.doc.length),cursorPosition:e.selection.main.from}),{dom:r,offset:{x:-14,y:5}}}}}(r.state):null})),null==e||r.changes.empty||(e.pos=r.changes.mapPos(e.pos)),e},provide:function(e){return S.hJ.compute([e],(function(t){return t.field(e)}))}});return[r,Sa]}var Ca=n(55877),_a=n.n(Ca);function Oa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ta(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Oa(e,t,n[t])}))}return e}var Ia=Z.Py.define(),Aa=Z.Py.define(),Pa=Z.Py.define(),Na=Z.Py.define(),Ra=S.tk.baseTheme({".replit-thread-highlight":{background:pt.TV.purpleDimmest}}),za=Z.QQ.define({create:function(){return{}},update:function(e,t){var n=e;return T(t,Ia,(function(e){n=e.value})),t.changes.empty?n:n=Object.values(n).map((function(e){return Ta({},e,{indexStart:t.changes.mapPos(e.indexStart),indexEnd:t.changes.mapPos(e.indexEnd)})})).reduce((function(e,t){return e[t.id]=t,e}),{})}}),Ba=Z.QQ.define({create:function(){return null},update:function(e,t){var n=e;return T(t,Aa,(function(){var e=t.state,r=e.selection.main;n={id:_a().v4(),indexStart:r.from,indexEnd:r.empty?Math.min(r.to+1,e.doc.length):r.to}})),T(t,Pa,(function(){n=null})),null!==n&&T(t,Ia,(function(e){if(!n)throw new Error("expected newPlaceholder");e.value[n.id]&&(n=null)})),!t.changes.empty&&n&&(n=Ta({},n,{indexStart:t.changes.mapPos(n.indexStart),indexEnd:t.changes.mapPos(n.indexEnd)})),n}});function Da(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ua(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function La(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Ua(o,r,i,a,c,"next",e)}function c(e){Ua(o,r,i,a,c,"throw",e)}a(void 0)}))}}function Xa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Da(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Da(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ma(e){var t=e.view,n=e.filePath,r=(0,p.Z)(n),i=a.useRef(null),o=a.useRef(0),c=(0,l.Z)(),s=c.anchorer,u=c.session,f=c.fs,h=Xa(a.useState(null),2),m=h[0],b=h[1],g=(0,$i.Z)(),y=sa({filePath:n,replId:g}),w=function(e){var t,n=e.filePath,r=e.replId,i=(0,Ui.$sK)({variables:{replId:r},skip:!n.endsWith(".py")}).data;return"Repl"===(null===i||void 0===i?void 0:i.repl.__typename)&&i.repl.hasExplainCode&&(null===(t=i.currentUser)||void 0===t?void 0:t.hasLookForErrors)&&n.endsWith(".py")}({filePath:n,replId:g}),k=Qi(),j=(0,ir.Z)(),C=a.useCallback((function(){b(null)}),[]);a.useEffect((function(){var e=function(e){"Escape"===e.key&&b(null)};if(m)return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[m]),a.useEffect((function(){if(t&&m)return t.scrollDOM.addEventListener("scroll",C),function(){t.scrollDOM.removeEventListener("scroll",C)}}),[t,m,C]);var _=(0,Eo.Z)((function(){if(t&&m){var e=t.coordsAtPos(o.current);b((function(t){return e?{x:e.left,y:e.top}:t}))}}),{type:"throttle",wait:25}),O=a.useCallback(function(){var e=La(d().mark((function e(o){var a,c,l,p,h,m,b,v,g,y,x,w,k,Z,S,C,_;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h=function(e){return m.apply(this,arguments)},m=function(){return(m=La(d().mark((function e(o){var c,s,f,p,h,m,b,v,g;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&t){e.next=2;break}throw new Error("Expected client");case 2:return i.current&&r.notify.cancelRequest(i.current),i.current=r.generateId(),c=(0,E.s)(a.doc,l),e.next=7,o(n,c,{id:i.current,tap:(0,ai.M)(t)});case 7:if(s=e.sent,i.current=null,!("error"in s)){e.next=11;break}throw new Error("Something went wrong fetching location: ".concat(s.error.message));case 11:if(f=s.result,!s.cancelled&&f&&0!==f.length){e.next=14;break}return e.abrupt("return");case 14:p=Xa(f,1),h=p[0],m=h.uri,b=h.range,v=b.start,g=r.documentUriToPath(m),u.updateDeeplink({path:g,line:v.line+1,col:v.character});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)},t){e.next=4;break}throw new Error("Expected view");case 4:a=t.state,c=a.selection.main,l=c.head,p=function(){return{path:n,indexStart:c.from,indexEnd:c.empty?Math.min(c.to+1,a.doc.length):c.to,otVersion:f.getOTVersion(n)}},(0,pn.j)(pn.U3.EDITOR_CONTEXT_MENU_ACTION_RAN,{action:o}),e.t0=o,e.next=e.t0===wr.Cut?14:e.t0===wr.Copy?18:e.t0===wr.Paste?21:e.t0===wr.JumpToDefinition?34:e.t0===wr.JumpToTypeDefinition?39:e.t0===wr.JumpToImplementation?44:e.t0===wr.FindReferences?49:e.t0===wr.Rename?51:e.t0===wr.SelectAllOccurrences?53:e.t0===wr.CodeActions?61:e.t0===wr.ToggleBreakpoint?62:e.t0===wr.StartThread?65:e.t0===wr.ExplainCode?68:e.t0===wr.GenerateCode?70:e.t0===wr.LookForErrors?72:e.t0===wr.CopyLinkToPos?75:81;break;case 14:return b=a.doc.sliceString(c.from,c.to),(0,Ro.Z)(b),t.dispatch(a.replaceSelection("")),e.abrupt("break",82);case 18:return v=a.doc.sliceString(c.from,c.to),(0,Ro.Z)(v),e.abrupt("break",82);case 21:return g="",e.prev=22,e.next=25,window.navigator.clipboard.readText();case 25:g=e.sent,e.next=32;break;case 28:return e.prev=28,e.t1=e.catch(22),zo.kg.error("CodeMirror context menu paste failed",{message:e.t1.message}),e.abrupt("break",82);case 32:return Za({activeFile:j,view:t,clipboardText:g}),e.abrupt("break",82);case 34:if(r){e.next=36;break}throw new Error("Expected client");case 36:return e.next=38,h(r.request.findDefinitions);case 38:return e.abrupt("break",82);case 39:if(r){e.next=41;break}throw new Error("Expected client");case 41:return e.next=43,h(r.request.findTypeDefinitions);case 43:return e.abrupt("break",82);case 44:if(r){e.next=46;break}throw new Error("Expected client");case 46:return e.next=48,h(r.request.findImplementations);case 48:return e.abrupt("break",82);case 49:return t.dispatch({effects:[qt.of(l)]}),e.abrupt("break",82);case 51:return t.dispatch({effects:[ln.of(l)]}),e.abrupt("break",82);case 53:if(!a.selection.main.empty){e.next=58;break}if(y=a.wordAt(l)){e.next=57;break}return e.abrupt("return");case 57:t.dispatch({selection:y});case 58:return(0,xo.tm)(t),t.focus(),e.abrupt("break",82);case 61:return e.abrupt("break",82);case 62:return x=a.doc.lineAt(l),Ti(t,x.from),e.abrupt("break",82);case 65:return s.createThread(p()),t.dispatch({effects:[Aa.of(null)]}),e.abrupt("break",82);case 68:return t.dispatch({effects:ya.of(t.state.selection.main)}),e.abrupt("break",82);case 70:return t.dispatch({effects:ja.of(!0)}),e.abrupt("break",82);case 72:return(0,pn.j)(pn.U3.CODEX_FEATURE_USED,{feature:"look-for-errors",language:"python"}),t.dispatch({effects:qo.of(t.state.selection.main)}),e.abrupt("break",82);case 75:w=(0,E.s)(a.doc,l),k=w.line,Z=w.character,S=window.location.href,C=S.includes("#")?S.indexOf("#"):S.length,_="".concat(S.slice(0,C),"#").concat(n,":").concat(k+1,":").concat(Z);try{(0,Ro.Z)(window.encodeURI(_))}catch(O){(0,Ro.Z)(_)}return e.abrupt("break",82);case 81:throw new Error("Unexpected action: ".concat(o));case 82:case"end":return e.stop()}}),e,null,[[22,28]])})));return function(t){return e.apply(this,arguments)}}(),[t,r,n,u,s,f,j]),T=Xa(a.useState(!1),2),I=T[0],A=T[1];(0,oi.Z)({view:t,initialExtension:S.tk.updateListener.of((function(e){e.transactions.some((function(e){return e.reconfigured}))&&A("undefined"!==typeof e.view.state.field(Ii,!1))}))});var P=v(r),N=a.useMemo((function(){if(!t)return[];var e=[];return P&&(P.isFindDefinitionSupported&&e.push(wr.JumpToDefinition),P.isFindTypeDefinitionSupported&&e.push(wr.JumpToTypeDefinition),P.isFindImplementationSupported&&e.push(wr.JumpToImplementation),(P.isFindDefinitionSupported||P.isFindReferencesSupported)&&e.push(wr.FindReferences),P.isRenameSupported&&e.push(wr.Rename),P.isCodeActionsSupported&&e.push(wr.CodeActions)),e.push(wr.SelectAllOccurrences),e.push(Zr),e.push(wr.CopyLinkToPos),I&&e.push(wr.ToggleBreakpoint),e.push(wr.StartThread),w&&e.push(wr.LookForErrors),y&&e.push(wr.ExplainCode),k&&e.push(wr.GenerateCode),e.push(Zr),e.push(wr.Cut),e.push(wr.Copy),window.navigator.clipboard&&"readText"in window.navigator.clipboard&&e.push(wr.Paste),e}),[t,P,I,y,w,k]),R=(0,oi.Z)({view:t});return a.useEffect((function(){if(t){var e=N.filter((function(e){return!Sr(e)})).filter((function(e){return"keyboardShortcut"in jr[e]})).filter((function(e){return e!==wr.Cut&&e!==wr.Copy&&e!==wr.Paste})).map((function(e){var t=jr[e].keyboardShortcut,n={key:t.key,preventDefault:!0,run:function(){return O(e),!0}};return t.altKey&&(n.key="Alt-".concat(n.key)),t.shiftKey&&(n.key="Shift-".concat(n.key)),t.cmdOrCtrlKey&&(n.key="Mod-".concat(n.key)),n}));return t.dispatch({effects:R.reconfigure(S.$f.of(e))}),function(){t.dispatch({effects:R.reconfigure([])})}}}),[t,O,N,R]),{onAction:O,actions:N,contextMenuCoords:m,onContextMenu:function(e){if(!(0,x.isMobile)({tablet:!1})&&t){e.preventDefault();var r=e.clientX,i=e.clientY,a=t.state.selection.main,c=t.posAtCoords({x:r,y:i}),l=t.state.doc.length,s=null===c?l:c;if(o.current=s,s<a.from||s>a.to){var u=Z.jT.cursor(s);t.dispatch({selection:u})}var d=(0,No.r6)(n);(0,pn.j)(pn.U3.EDITOR_CONTEXT_MENU_OPENED,{ext:d}),b({x:r,y:i})}},closeMenu:C,resizeRef:_}}function Fa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ga(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Fa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wa(e){var t=e.view,n=e.filePath,r=e.isLoading,i=function(e){var t=e.replId,n=(0,Ui._Lw)({variables:{replId:t}}).data;return"Repl"===(null===n||void 0===n?void 0:n.repl.__typename)?n.repl.deprecatedLanguageConfig:null}({replId:(0,$i.Z)()}),o=Ga(a.useState(null),2),c=o[0],l=o[1],s=(0,oi.Z)({view:t});return a.useEffect((function(){if(t&&i&&!r&&n===i.mainFile){var e=document.createElement("div");return l(e),t.dispatch({effects:s.reconfigure((0,S.W$)(e))}),function(){t.dispatch({effects:s.reconfigure([])}),l(null)}}}),[t,i,n,r,s]),c}function Ha(e){var t=e.view,n=e.line,r=e.col,i=t.state.doc,o=Math.min(n,i.lines),a=i.line(o),c=a.to,l=a.from,s=r||0,u=Math.min(l+s,c),d=Z.jT.cursor(u);t.dispatch({selection:d,scrollIntoView:!0}),t.focus()}var Va=n(6119),Ka=n(91131),$a=n(33379);function qa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ya(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qa(e){return function(e){if(Array.isArray(e))return qa(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return qa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qa(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ja=S.tk.baseTheme({".replit-code-anchor":{background:"var(--accent-purple-dimmest)"}}),ec=Z.Py.define(),tc=Z.Py.define(),nc=Z.Py.define(),rc=Z.Py.define(),ic=function(e){var t={};return Z.QQ.define({create:function(){return[]},update:function(e,t){t.changes.empty||(e=e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ya(e,t,n[t])}))}return e}({},e,{indexStart:t.changes.mapPos(e.indexStart),indexEnd:t.changes.mapPos(e.indexEnd)})})));var n=!0,r=!1,i=void 0;try{for(var o,a=function(t,n){var r=n.value;if(r.is(ec))e=r.value;else if(r.is(tc))e=Qa(e).concat(Qa(r.value.filter((function(t){return!e.find((function(e){return e.id===t.id}))}))));else if(r.is(nc)){var i=r.value.map((function(e){return e.id}));e=e.filter((function(e){return!i.includes(e.id)}))}else r.is(Va.R)&&(e=Qa(e))},c=t.effects[Symbol.iterator]();!(n=(o=c.next()).done);n=!0)a(0,o)}catch(l){r=!0,i=l}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}return e},provide:function(n){return[S.tk.decorations.compute([n],(function(e){var t=e.field(n);return S.p.set(t.map((function(e){return t=e.id,n=e.indexStart,r=e.indexEnd,n===r?null:S.p.mark({class:"replit-code-anchor ".concat(t),id:t}).range(n,r);var t,n,r})).filter((function(t){return null!==t&&t.from!==t.to&&t.from<=e.doc.length&&t.to<=e.doc.length})),!0)})),S.hJ.computeN([n],(function(r){return r.field(n).map((function(n){var r,i,o=n.id;return{pos:Math.min(n.indexStart,n.indexEnd),above:!0,create:(r=o,i=function(t){var r=document.createElement("div");r.classList.add("cm-anchor","cm-anchor-".concat(o));var i=document.createElement("div");i.classList.add("cm-anchor-portal"),i.style.position="absolute",r.appendChild(i);var a={id:o,dom:i,getEditorRight:function(){return t.dom.getBoundingClientRect().right},getContent:function(){return t.state.doc.sliceString(n.indexStart,n.indexEnd)}};return e.setAnchorPortal(a),{dom:r,update:function(){e.setAnchorPortal(a)}}},t[r]||(t[r]=i),t[r])}}))}))]}})};var oc=n(38098),ac=n(91898);function cc(e){var t=e.view,n=e.filePath,r=e.isLoading,i=function(){var e=(0,a.useContext)(ac.Z);if(!e)throw new Error("Expected codemirror state to be in codemirror state context");return e}(),o=(0,oi.Z)({view:t});(0,a.useEffect)((function(){if(t&&!r){var e,a=i.current.fileMap.get(n);if(a&&t.state.doc.eq(a.doc)){if(t.state.field(lo.cE,!1))throw new Error("History was preconfigured on this view, if you want to use state cache, please make sure history is not already configured for this view");var c=[];a.foldedRanges.between(0,t.state.doc.length,(function(e,t){c.push(Q.SW.of({from:e,to:t}))})),t.dispatch({effects:c,selection:a.selection}),t.scrollDOM.scrollTop=a.scrollTop,e=[lo.cE.init((function(){return a.history})),(0,lo.m8)()]}else e=(0,lo.m8)();t.dispatch({effects:o.reconfigure([e,S.tk.updateListener.of((function(e){i.current.fileMap.set(n,{history:e.state.field(lo.cE,!1),foldedRanges:(0,Q.q2)(e.state),scrollTop:t.scrollDOM.scrollTop,selection:e.state.selection,doc:e.state.doc})}))])});var l=i.current.fileMap.get(n);return function(){l&&(l.scrollTop=t.scrollDOM.scrollTop),t.dispatch({effects:o.reconfigure([])})}}}),[t,n,i,r,o])}var lc=n(37510),sc=/\r\n?|\n/;function uc(e){return e.replace(new RegExp(sc,"g"),"\n")}function dc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;return e.slice(t,n+1).split(/\r\n/g).length-1}function fc(e,t){var n=t,r=0,i=0;do{i=dc(e,r,n),r=n,n+=i}while(i);return n}function pc(e,t){var n=[],r=t;return e.iterChanges((function(e,i,o,a,c){var l=[];o>0&&l.push(fc(r,o)),e<i&&l.push({d:fc(t,i)-fc(t,e)}),c.length&&l.push(c.sliceString(0)),r=(0,lc.nn)(r,l),n=(0,lc.qC)(n,l)})),n}function hc(e,t){var n=[],r=0,i=0,o=!0,a=!0,c=!1,l=void 0;try{for(var s,u=e[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;if("string"===typeof d){var f=d;if(d.endsWith("\r")&&"\n"===t.slice(r,r+1)&&0===(f=d.slice(0,-1)).length)continue;if(f=uc(f),o)n.push({from:i,insert:f});else{var p=n[n.length-1];p.insert=p.insert?p.insert+f:f}o=!1}else if("number"===typeof d){var h=dc(t,r,r+d);r+=d,i+=d-h,o=!0}else if("object"===typeof d&&"number"===typeof d.d){var m=d.d;if("\r\n"===t.slice(r-1,r+1)&&(i+=1,m-=1),(m-=dc(t,r,r+d.d))>0)if(o)n.push({from:i,to:i+m});else{var b=n[n.length-1];b.insert&&!b.to?b.to=i+m:b.to&&(b.to+=m)}r+=d.d,i+=m,o=!1}}}catch(v){c=!0,l=v}finally{try{a||null==u.return||u.return()}finally{if(c)throw l}}return n}var mc=Z.q6.define();function bc(e,t){var n=t;return S.tk.updateListener.of((function(t){if(t.docChanged){var r=[],i=!0,o=!1,a=void 0;try{for(var c,l=t.transactions[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var s=c.value,u=pc(s.changes,n);n=(0,lc.nn)(n,u),s.annotation(Z.YW.remote)||s.annotation(mc)||(r=(0,lc.qC)(r,u))}}catch(d){o=!0,a=d}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}r.length&&e(r,n)}}))}var vc=Z.QQ.define({create:function(){return 0},update:function(e,t){var n=t.annotation(mc);return n?n.version:e}}),gc=n(57923),yc=n(45525);function xc(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function wc(e){var t=e.view,n=e.fs,r=e.filePath,i=function(e,n){if(!f.current.has(r)&&t){var i=t.state.doc.toString();e===i||(f.current.add(r),zo.kg.error("Mismatch between otClient and codemirror",{otcrlf:e.indexOf("\r")>-1,ot:e,cm:i,path:r,changeSource:n}))}},o=(0,a.useState)(null),c=o[0],l=o[1],s=(0,gc.Z)(),u=(0,oi.Z)({view:t}),f=(0,a.useRef)(new Set),p=(0,yc.Z)().trackTimeToLoadFileEnd,h=(0,a.useRef)("");return(0,a.useEffect)((function(){if(t&&n&&r){var e=n.watchOtFile(r,{onChange:function(){var e,t=(e=d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.latestContent,h.current=n;case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){xc(o,r,i,a,c,"next",e)}function c(e){xc(o,r,i,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()});return e}}),[t,r,n]),(0,a.useEffect)((function(){if(t){var e="",o=n.watchOtFile(r,{onReady:function(n){var o=n.initialContent,a=n.writeOps,c=n.version;p(r),t.dispatch({changes:{from:0,to:t.state.doc.length,insert:uc(o.toString())},annotations:[Z.YW.addToHistory.of(!1),Z.YW.remote.of(!0)]}),t.dispatch({effects:u.reconfigure([vc.init((function(){return c})),bc((function(t,n){e=n,a(t),i(h.current,"CODEMIRROR")}),o.toString())])}),e=o.toString(),l(r)},onChange:function(n){var r=n.ops,o=n.changeSource,a=n.version,c=n.latestContent;t.dispatch(function(e){var t=e.ops,n=e.version,r=e.changeSource;return{changes:hc(t,e.replitDoc),annotations:[Z.YW.remote.of(r===Rn.Fl.Container),Z.YW.addToHistory.of(r===Rn.Fl.Local),mc.of({ops:t,version:n,changeSource:r})]}}({ops:r,changeSource:o,version:a,replitDoc:e})),e=c,i(c,o)},onError:function(){t.dispatch({effects:u.reconfigure([])})},onMoveOrDelete:function(){t.dispatch({effects:u.reconfigure([])})}});return function(){o(),t.dispatch({effects:[u.reconfigure([])]}),s.current&&l(null)}}}),[t,r,n,s,u]),{loadedFile:c}}var kc=n(49337);function Zc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){jc(e,t,n[t])}))}return e}function Ec(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Zc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Cc={"#1BC47D":"rgba(27, 196, 125, 0.2)","#EF5533":"rgba(239, 85, 51, 0.2)","#18A0FB":"rgba(24, 160, 251, 0.2)","#FFC700":"rgba(255, 199, 0, 1)","#907CFF":"rgba(144, 124, 255, 0.2)","#00B5CE":"rgba(0, 181, 206, 0.2)","#EE46D3":"rgba(238, 70, 211, 0.2)"};var _c=Z.Py.define(),Oc=Z.Py.define(),Tc=Z.Py.define();function Ic(e){return{pos:e.position,strictSide:!0,above:!0,create:e.createCursorTooltipFunction}}var Ac=Z.QQ.define({create:function(){return{}},update:function(e,t){if(!t.changes.empty){var n={},r=!0,i=!1,o=void 0;try{for(var a,c=Object.values(e)[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var l=a.value;n[l.id]=Sc({},l,{position:t.changes.mapPos(l.position),selectionStart:t.changes.mapPos(l.selectionStart),selectionEnd:t.changes.mapPos(l.selectionEnd)})}}catch(m){i=!0,o=m}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}e=n}var s=!0,u=!1,d=void 0;try{for(var f,p=function(n,r){var i=r.value;if(i.is(Va.R)&&(e=Sc({},e)),i.is(_c)&&i.value.position<=t.newDoc.length&&((e=Sc({},e))[i.value.id]=Sc({},i.value,{createCursorTooltipFunction:function(e){var t=i.value,n=document.createElement("div");n.textContent=t.username,n.style.backgroundColor=t.color.cursor,n.style.color="white",n.classList.add("multiplayer-label");var r=document.createElement("div");r.style.backgroundColor=t.color.cursor,r.classList.add("multiplayer-cursor");var o=document.createElement("div");return o.classList.add("multiplayer-tooltip"),o.appendChild(r),o.appendChild(n),{dom:o,overlap:!0,positioned:function(){r.style.height=e.defaultLineHeight+"px"}}}})),i.is(Oc)&&(e=Sc({},e),i.is(Oc)&&delete e[i.value]),i.is(Tc)){e=Sc({},e);var o=!0,a=!1,c=void 0;try{for(var l,s=Object.entries(e)[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=Ec(l.value,2),d=u[0];u[1].username===i.value&&delete e[d]}}catch(m){a=!0,c=m}finally{try{o||null==s.return||s.return()}finally{if(a)throw c}}}},h=t.effects[Symbol.iterator]();!(s=(f=h.next()).done);s=!0)p(0,f)}catch(m){u=!0,d=m}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}return e},provide:function(e){return[S.hJ.computeN([e],(function(t){return Object.values(t.field(e)).map(Ic)})),S.tk.decorations.computeN([e],(function(t){var n=t.field(e);return Object.values(n).map((function(e){var t=e.selectionStart<e.selectionEnd?e.selectionStart:e.selectionEnd,n=e.selectionStart>e.selectionEnd?e.selectionStart:e.selectionEnd;return t===n?null:S.p.set(S.p.mark({attributes:{style:"background-color: ".concat(e.color.selection,"; display: inline-block;")},cursor:e}).range(t,n))})).filter((function(e){return null!==e}))}))]}});function Pc(e){return S.tk.updateListener.of((function(t){var n=t.state.selection;n!==t.startState.selection&&(t.transactions.every((function(e){return e.annotation(Z.YW.remote)}))||e(n.ranges.map((function(e){var n=t.state.doc.lineAt(e.head);return{position:e.head,line:n.number,column:e.head-n.from+1,selectionStart:e.from,selectionEnd:e.to}})),n.mainIndex))}))}function Nc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rc(e){var t=e.view,n=e.presence,r=e.session,i=e.fs,o=e.filePath,c=(0,a.useState)(null),l=c[0],s=c[1],u=(0,kc.Z)({presence:n}),d=(0,a.useRef)({}),f=(0,gc.Z)();(0,a.useEffect)((function(){var e=u.reduce((function(e,t){return t.username&&t.color?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Nc(e,t,n[t])}))}return e}({},e,Nc({},t.username,t.color)):e}),{});d.current=e}),[u]);var p=(0,oi.Z)({view:t});return(0,a.useEffect)((function(){if(t){var e=n.onUserLeave((function(e){t.dispatch({effects:Tc.of(e.username)})})),a=i.watchOtFile(o,{onReady:function(e){var n=e.updateSelections;t.dispatch({effects:p.reconfigure([Ac,Pc((function(e,t){n(e);var i=e[t];i&&r.setCursorPosition({column:i.column,lineNumber:i.line,offset:i.position})}))])}),s(o)},onCursor:function(e){var n=function(e){var t,n=e.cursor,r=e.usernameColorsMap,i=null===(t=n.user)||void 0===t?void 0:t.name;if(i){var o,a=n.id,c=n.position,l=n.selectionStart,s=n.selectionEnd,u=r[i];if(u&&a&&"number"===typeof c&&"number"===typeof l&&"number"===typeof s)return _c.of({id:a,username:i,position:c,color:{cursor:u,selection:(o=u,Cc[o]||"")},selectionStart:l,selectionEnd:s})}}({cursor:e,usernameColorsMap:d.current});n&&t.dispatch({effects:n})},onRemoveCursor:function(e){t.dispatch({effects:Oc.of(e)})},onError:function(){t.dispatch({effects:p.reconfigure([])})},onMoveOrDelete:function(){t.dispatch({effects:p.reconfigure([])})}});return function(){e(),a(),t.dispatch({effects:p.reconfigure([])}),f.current&&s(null)}}}),[t,o,i,n,r,p]),{loadedFile:l}}var zc=n(39550);function Bc(e){var t=e.view,n=e.presence,r=e.session,i=e.fs,o=e.filePath,c=wc({view:t,fs:i,filePath:o}).loadedFile,s=Rc({view:t,fs:i,filePath:o,presence:n,session:r}).loadedFile;!function(e){var t=e.view,n=(0,l.Z)().presence,r=(0,zc.Z)(),i=(0,oi.Z)({view:t});a.useEffect((function(){if(r&&t){var e=function(){n.getFollowedUser()&&n.unfollowUser()};return t.dispatch({effects:i.reconfigure(S.tk.domEventHandlers({wheel:e,keydown:function(t){"Control"!==t.key&&"Meta"!==t.key&&e()},click:e}))}),function(){t.dispatch({effects:i.reconfigure([])})}}}),[r,t,n,i]);var o=(0,oi.Z)({view:t});a.useEffect((function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(t){var n=Z.jT.cursor(e);t.dispatch({effects:[S.tk.scrollIntoView(n,{x:"center",y:"center"})]})}};if(t&&r){var n=t.state.field(Ac,!1);if(n){var i=Object.values(n).find((function(e){return e.username===r.username}));i&&e(i.position)}return t.dispatch({effects:o.reconfigure(S.tk.updateListener.of((function(t){var n,i=!0,o=!1,a=void 0;try{for(var c,l=t.transactions[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var s=c.value,u=!0,d=!1,f=void 0;try{for(var p,h=s.effects[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var m=p.value;m.is(_c)&&m.value.username===r.username&&(n=m.value)}}catch(b){d=!0,f=b}finally{try{u||null==h.return||h.return()}finally{if(d)throw f}}}}catch(b){o=!0,a=b}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}n&&e(n.position)})))}),function(){t.dispatch({effects:o.reconfigure([])})}}}),[t,r,o])}({view:t});var u=o!==c||o!==s,d=(0,oi.Z)({view:t});return(0,a.useEffect)((function(){t&&t.dispatch({effects:d.reconfigure([S.tk.editable.of(!u),Z.yy.readOnly.of(u)])})}),[t,u,d]),{isLoading:u}}var Dc=n(12603),Uc=n(43421),Lc=n(56718);function Xc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Xc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Gc=[{img:"/public/images/kaboomdraw/rect.png",code:"\ndrawRect({\n\tpos: vec2(80, 80),\n\twidth: 120,\n\theight: 80,\n\tcolor: rgb(250, 242, 164),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/triangle.png",code:"\ndrawTriangle({\n\tpos: vec2(100, 100),\n\tp1: vec2(0, -48),\n\tp2: vec2(-60, 48),\n\tp3: vec2(60, 48),\n\tcolor: rgb(164, 250, 204),\n})\n  ".trim()},{img:"/public/images/kaboomdraw/circle.png",code:"\ndrawCircle({\n\tpos: vec2(100, 100),\n\tradius: 48,\n\tcolor: rgb(181, 164, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/ellipse.png",code:"\ndrawEllipse({\n\tpos: vec2(120, 100),\n\tradiusX: 64,\n\tradiusY: 40,\n\tcolor: rgb(164, 209, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/polygon.png",code:"\ndrawPolygon({\n\tpos: vec2(100, 100),\n\tpts: [\n\t\tvec2(0, -48),\n\t\tvec2(-64, 0),\n\t\tvec2(-32, 64),\n\t\tvec2(32, 64),\n\t\tvec2(64, 0),\n\t],\n\tcolor: rgb(250, 164, 226),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/text.png",code:'\ndrawText({\n\ttext: "hi",\n\tpos: vec2(60, 60),\n})\n    '.trim()}],Wc=function(e){var t=e.img,n=e.code,i=Fc((0,Uc.c)({item:{type:Lc.z.Code,code:n},type:Lc.z.Code}),2)[1];return(0,r.tZ)("img",{ref:i,src:t,css:[_.l0.p(12),{userDrag:"none",height:"100%",cursor:"pointer",transition:"0.1s transform",":hover":{transform:"scale(1.2)"}}]})},Hc=function(){return(0,r.tZ)(I.Z,{css:[_.l0.flex.row,_.l0.justify.spaceEvenly,_.l0.backgroundColor.backgroundHigher,_.l0.borderRadius(8),_.l0.width("calc(100% - 32px)"),_.l0.height("64px"),_.l0.position.absolute,_.l0.overflow("scroll"),{zIndex:5,left:16,bottom:16,border:"solid 1px var(--outline-dimmest)"}],children:Gc.map((function(e){return(0,r.tZ)(Wc,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Mc(e,t,n[t])}))}return e}({},e),e.img)}))})};var Vc=n(62808);function Kc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Kc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var qc=RegExp("vec2\\((?<x>-?\\b\\d+\\.?\\d*\\b)\\s*(,\\s*(?<y>-?\\b\\d+\\.?\\d*\\b))?\\)"),Yc=RegExp("rgb\\((?<r>\\d+)\\s*,\\s*(?<g>\\d+)\\s*,\\s*(?<b>\\d+)\\)"),Qc={regexp:/-?\b\d+\.?\d*\b/g,cursor:"ew-resize",onDrag:function(e,t,n){var r=Number(e)+n.movementX;isNaN(r)||t(r.toString())}},Jc={regexp:/true|false/g,cursor:"pointer",onClick:function(e,t){switch(e){case"true":return t("false");case"false":return t("true")}}},el={regexp:/vec2\(-?\b\d+\.?\d*\b\s*(,\s*-?\b\d+\.?\d*\b)?\)/g,cursor:"move",onDrag:function(e,t,n){var r,i,o=qc.exec(e),a=Number(null===o||void 0===o||null===(r=o.groups)||void 0===r?void 0:r.x),c=Number(null===o||void 0===o||null===(i=o.groups)||void 0===i?void 0:i.y);isNaN(a)||(isNaN(c)&&(c=a),t("vec2(".concat(a+n.movementX,", ").concat(c+n.movementY,")")))}},tl={regexp:/rgb\(.*\)/g,cursor:"pointer",onClick:function(e,t){var n,r,i,o=Yc.exec(e),a=Number(null===o||void 0===o||null===(n=o.groups)||void 0===n?void 0:n.r),c=Number(null===o||void 0===o||null===(r=o.groups)||void 0===r?void 0:r.g),l=Number(null===o||void 0===o||null===(i=o.groups)||void 0===i?void 0:i.b),s=document.createElement("input");s.type="color",isNaN(a+c+l)||(s.value=function(e,t,n){return"#"+e.toString(16)+t.toString(16)+n.toString(16)}(a,c,l)),s.addEventListener("input",(function(e){var n=e.target;if(n.value){var r=$c(function(e){var t=parseInt(e.substring(1),16);return[t>>16&255,t>>8&255,255&t]}(n.value),3),i=r[0],o=r[1],a=r[2];t("rgb(".concat(i,", ").concat(o,", ").concat(a,")"))}})),s.click()}},nl={regexp:/https?:\/\/[^\s)"]+/g,cursor:"pointer",onClick:function(e){(0,ka.Z)(e)&&window.open(e,"_blank")}};var rl=n(51739),il=n(42166),ol=n(96076);function al(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function cl(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){al(o,r,i,a,c,"next",e)}function c(e){al(o,r,i,a,c,"throw",e)}a(void 0)}))}}var ll=RegExp("_(?<num>\\d+)$");function sl(e,t){return ul.apply(this,arguments)}function ul(){return(ul=cl(d().mark((function e(t,n){var r,i,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,No.Il)(n),e.next=3,t.readDir(r||".");case 3:if(!(i=e.sent).error){e.next=6;break}return e.abrupt("return",n);case 6:return a=(o=function(e){if(i.children.find((function(t){return"FILE"===t.type&&t.filename===e}))){var t,n=(0,No.eb)(e),r=(0,No.r6)(e),a=n.match(ll);if(null===a||void 0===a||null===(t=a.groups)||void 0===t?void 0:t.num){var c=Number(a.groups.num);return o("".concat(n.replace(ll,""),"_").concat(c+1,".").concat(r))}return o("".concat(n,"_2.").concat(r))}return e})((0,No.UO)(n)),e.abrupt("return",r?r+"/"+a:a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dl(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}var fl=function(){var e,t=(e=d().mark((function e(t,n,r){var i,o,a,c,l,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=encodeURI(t.name),o=(0,No.Il)(r),e.next=4,sl(n,o?o+"/"+i:i);case 4:return a=e.sent,e.next=7,(0,ol.pV)(t);case 7:return c=e.sent,e.next=10,n.writeFile(a,zn.Z.from(c));case 10:return l=(0,No.eb)(t.name),s=(0,No.UO)(a),e.abrupt("return","![".concat(l,"](").concat(s,")"));case 13:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){dl(o,r,i,a,c,"next",e)}function c(e){dl(o,r,i,a,c,"throw",e)}a(void 0)}))});return function(e,n,r){return t.apply(this,arguments)}}();function pl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return pl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ml(e){return(ml=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bl(e,t){return!t||"object"!==gl(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vl(e,t){return(vl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var gl=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function yl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ml(e);if(t){var i=ml(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bl(this,n)}}var xl=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vl(e,t)}(n,e);var t=yl(n);function n(e,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this)).src=e,i.pos=r,i}var r=n.prototype;return r.eq=function(e){return this.src===e.src&&this.pos===e.pos},r.toDOM=function(){var e=document.createElement("img");return e.src=this.src,e.dataset.pos=this.pos.toString(),e.style.maxHeight="64px",e.style.maxWidth="256px",e},r.ignoreEvent=function(){return!1},n}(S.l9),wl=/"data:image\/\w+;base64,[^"\s]+"/g,kl=Number.MAX_VALUE,Zl=S.lg.define((function(e){var t=new S.Y1({regexp:wl,decoration:function(e,t,n){if(void 0===e[0])throw new Error("Failed to match image");var r=e[0].substring(1,e[0].length-1);return S.p.replace({widget:new xl(r,n)})},maxLength:kl});return{matcher:t,deco:t.createDeco(e),update:function(e){e.docChanged&&(this.deco=t.updateDeco(e,this.deco))}}}),{decorations:function(e){return e.deco},provide:function(e){return S.tk.atomicRanges.of((function(t){var n=t.plugin(e);return n?n.deco:S.p.none}))}});var jl=n(35932);function Sl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function El(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Sl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Cl=n(19689);function _l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ol(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tl(e){var t=e.generationId,n=e.language,i=Ol((0,Ui.jFA)(),2),o=i[0],a=i[1],c=a.data,l=a.error,s=a.called,u=function(e){(0,pn.j)(pn.U3.CODEX_FEEDBACK_SUBMITTED,{feedback:e,language:n,feature:"generation"}),o({variables:{input:{feedback:e,inferenceClass:Ui.SgB.Generation,inferenceId:t}}})};return(0,r.tZ)(pt.G7,{css:[pt.l0.rowWithGap(16),pt.l0.justify.start,pt.l0.align.center,pt.l0.pt(12)],children:s&&"NotFoundError"!==(null===c||void 0===c?void 0:c.giveCodexFeedback2.__typename)&&"UnauthorizedError"!==(null===c||void 0===c?void 0:c.giveCodexFeedback2.__typename)&&!l?(0,r.tZ)(pt.zx,{disabled:!0,iconLeft:(0,r.tZ)(Xo.Z,{}),onClick:function(){},small:!0,text:"Thanks!"}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(pt.xv,{variant:"small",children:"Is this code valuable?"}),(0,r.BX)(pt.G7,{css:[pt.l0.rowWithGap(8),pt.l0.justify.start,pt.l0.align.center],children:[(0,r.tZ)(pt.zx,{text:"Yes",colorway:"positive",outlined:!0,onClick:function(){return u(Ui.TYv.Yes)},small:!0,iconLeft:(0,r.tZ)(nn.Z,{})}),(0,r.tZ)(pt.zx,{text:"No",colorway:"negative",outlined:!0,onClick:function(){return u(Ui.TYv.No)},small:!0,iconLeft:(0,r.tZ)(_t.Z,{})})]}),(0,r.tZ)(pt.xv,{variant:"small",children:(0,r.tZ)("a",{href:"https://replit.com/support",target:"_blank",children:"Send Feedback"})})]})})}function Il(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Al(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pl(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Nl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Il(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Il(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rl(e){var t=e.filePath,n=e.selectedCode,i=e.onRequestClose,o=e.contextCode,c=e.cursorPosition,l=(0,$i.Z)(),s=(0,or.Z)().showError,u=(0,Di.Z)(t),d=Nl(a.useState(n),2),f=d[0],p=d[1],h=Nl(a.useState(""),2),m=h[0],b=h[1],v=Nl(a.useState(!1),2),g=v[0],y=v[1],x=a.useRef(null),w=Nl((0,Ui.wBH)({fetchPolicy:"no-cache",onError:function(e){return s(e.message)}}),2),k=w[0],Z=w[1],j=Z.called,S=Z.data,E=Z.error,C=Z.loading;a.useEffect((function(){setTimeout((function(){x.current&&x.current.focus()}))}),[x]);var _=function(e){var t=(0,No.r6)(e);return ca[t]?ca[t]:la[t]?la[t]:t}(t),O=function(){if(!C&&""!==f){var e=f===m;(0,pn.j)(pn.U3.CODEX_FEATURE_USED,{feature:"generation",isRetry:e,language:_}),e?(0,pn.j)(pn.U3.CODE_GENERATION_USED,{action:"refresh",language:_}):(0,pn.j)(pn.U3.CODE_GENERATION_USED,{action:"text-submitted",language:_}),b(f),k({variables:{input:{contextCode:o,cursorPosition:c,language:_,prompt:f,replId:l}}})}},T=null,I=null===S||void 0===S?void 0:S.generateCode.__typename;if(C)T=(0,r.tZ)(pa,{});else if(E||"UserError"===I||"UnauthorizedError"===I){var A,P;T=(0,r.tZ)(pt.G7,{css:[pt.l0.textAlign.center,pt.l0.py(32)],children:(0,r.tZ)(pt.xv,{color:"dimmer",children:null!==(P=("UserError"===I||"UnauthorizedError"===I)&&(null===S||void 0===S||null===(A=S.generateCode)||void 0===A?void 0:A.message))&&void 0!==P?P:"An unexpected error occurred. Please try again."})})}else if("GenerateCodeResult"===I&&null!=(null===S||void 0===S?void 0:S.generateCode)){var N,R=S.generateCode,z=R.code,B=R.id;if(null==z||""===z)T=(0,r.tZ)(pt.G7,{css:[pt.l0.textAlign.center,pt.l0.py(32)],children:(0,r.tZ)(pt.xv,{color:"dimmest",children:"We did not manage to generate code for this prompt. Please try another one!"})});else T=(0,r.BX)(pt.G7,{children:[(0,r.BX)(pt.Tg,{background:"default",css:[pt.l0.py(8),pt.l0.px(4),pt.l0.borderRadius(8)],children:[(0,r.tZ)(pt.G7,{css:[pt.l0.maxHeight(300),pt.l0.overflowY("auto")],children:(0,r.tZ)(Xi.Z,{code:z,filePath:t,hasExtraPadding:!1,hideGutter:!0})}),(0,r.BX)(pt.G7,{css:[pt.l0.flex.row,pt.l0.justify.spaceBetween,pt.l0.align.center,pt.l0.pt(8),pt.l0.px(4)],children:[(0,r.BX)(pt.G7,{css:[pt.l0.rowWithGap(8),pt.l0.align.center],children:[(0,r.tZ)(hn.Z,{path:t,size:16}),(0,r.tZ)(pt.xv,{color:"dimmer",css:{textTransform:"capitalize"},children:_})]}),(0,r.BX)(pt.G7,{css:pt.l0.rowWithGap(8),children:[(0,r.tZ)(pt.zx,{iconLeft:(0,r.tZ)(Vn.Z,{}),text:"Copy to clipboard",onClick:function(){(0,Ro.Z)(z),(0,pn.j)(pn.U3.CODE_GENERATION_USED,{action:"copied-to-clipboard",language:_})}}),"function"===typeof u?(0,r.tZ)(pt.zx,{iconLeft:(0,r.tZ)(Cl.Z,{}),text:"Insert in editor",onClick:function(){u({code:z}),(0,pn.j)(pn.U3.CODE_GENERATION_USED,{action:"inserted-in-editor",language:_}),i()}}):null]})]})]}),(0,r.BX)(pt.G7,{css:[pt.l0.flex.row,pt.l0.align.baseline,pt.l0.justify.spaceBetween],children:[(0,r.tZ)(Tl,{generationId:B,language:_}),(null===S||void 0===S||null===(N=S.currentUser)||void 0===N?void 0:N.isAdmin)?(0,r.tZ)(pt.u,{tooltip:(0,r.tZ)(pt.G7,{children:(0,r.tZ)("pre",{css:[{whiteSpace:"pre-wrap"}],children:JSON.stringify(JSON.parse(S.generateCode.metadata),null," ")})}),placement:"bottom",children:(0,r.tZ)(Fn.Z,{})}):null]})]})}else C||E||(T=(0,r.tZ)(pt.G7,{css:[pt.l0.textAlign.center,pt.l0.py(32)],children:(0,r.tZ)(pt.xv,{color:"dimmest",children:"Generated code will appear here."})}));return(0,r.tZ)(da,{title:"Generate Code",newInferenceAlt:"Generate new code",onRequestClose:i,width:500,learnMoreLink:"https://blog.replit.com/generate-code",onRequestNewInference:!C&&j?O:void 0,children:(0,r.BX)(pt.G7,{css:[pt.l0.p(8),pt.l0.colWithGap(8)],children:[(0,r.BX)(pt.G7,{tag:"form",onSubmit:function(e){e.preventDefault(),O()},css:[pt.l0.rowWithGap(8)],children:[(0,r.tZ)(pt.II,{autoFocus:!0,placeholder:'Write a prompt (e.g. "draw a square")',value:f,onChange:function(e){return t=e.target.value,g||((0,pn.j)(pn.U3.CODE_GENERATION_USED,{action:"text-written",language:_}),y(!0)),void p(t);var t},ref:x,onKeyDown:function(e){"Escape"===e.key&&i()}}),(0,r.tZ)(pt.zx,{iconLeft:(0,r.tZ)(br.Z,{}),text:"Generate",colorway:"primary",disabled:C||""===f,type:"submit"})]}),T]})})}function zl(e){var t=e.dom,n=Pl(e,["dom"]);return w.createPortal((0,r.tZ)(Rl,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Al(e,t,n[t])}))}return e}({},n)),t)}var Bl=n(21837),Dl=n(11163),Ul=n.n(Dl);function Ll(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xl(e,t,n){var r="/replEnvironment2"===Ul().pathname,i=(0,or.Z)().showError,o=(0,$i.Z)(),c=(0,Ui.eRu)({variables:{replId:o,path:e},onError:function(e){i(e.message)},skip:!r||t}),l=a.useMemo((function(){var r;return t||c.loading||c.error||!c.data||"ThreadsByFileResult"!==(null===(r=c.data.threadsByFile)||void 0===r?void 0:r.__typename)?{}:c.data.threadsByFile.threads.filter((function(t){return t.path===e&&(!n||!t.isResolved)})).reduce((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ll(e,t,n[t])}))}return e}({},e,Ll({},t.id,t))}),{})}),[c.loading,c.data,c.error,e,t,n]);return l}var Ml=n(39155),Fl=n(52697);var Gl=function(e){var t,n,i=e.threadPreview,a=e.onClick;if(!i)throw new Error("expected thread preview");var c=((null===(t=(0,Ui.Fqz)().data)||void 0===t||null===(n=t.currentUser)||void 0===n?void 0:n.editorPreferences.fontSize)||14)-2,l=i.unreadCount>0,s=i.participants,u="".concat(c,"px");return(0,r.BX)("div",{onClick:a,className:o().dynamic([["ea3dc5f07734f351",[c]]])+" thread-preview",children:[(0,r.tZ)("div",{className:o().dynamic([["ea3dc5f07734f351",[c]]])+" user-stack",children:s.slice(0,3).map((function(e){return e&&(0,r.tZ)(Ml.Z,{url:e.image,size:"xs",style:{minWidth:u,minHeight:u,height:u,width:u}},e.id)}))}),i.messageCount>0&&(0,r.BX)("div",{className:o().dynamic([["ea3dc5f07734f351",[c]]])+" comment-info",children:[(0,r.tZ)("div",{className:o().dynamic([["ea3dc5f07734f351",[c]]])+" comment-count",children:i.messageCount}),(0,r.tZ)(Fl.Z,{size:c,unreadDot:l})]}),(0,r.tZ)(o(),{id:"ea3dc5f07734f351",dynamic:[c],children:".thread-preview.__jsx-style-dynamic-selector{padding:4px;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-border-top-right-radius:0;-moz-border-radius-topright:0;border-top-right-radius:0;-webkit-border-bottom-right-radius:0;-moz-border-radius-bottomright:0;border-bottom-right-radius:0;background-color:var(--background-default);color:var(--foreground-default);display:grid;grid-auto-flow:column;grid-column-gap:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border:.5px solid var(--background-higher);-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1);-webkit-transition:width.2s,background-color.2s,-webkit-transform.1s;-moz-transition:width.2s,background-color.2s,-moz-transform.1s;-o-transition:width.2s,background-color.2s,-o-transform.1s;transition:width.2s,background-color.2s,-webkit-transform.1s;transition:width.2s,background-color.2s,-moz-transform.1s;transition:width.2s,background-color.2s,-o-transform.1s;transition:width.2s,background-color.2s,transform.1s;z-index:1}.thread-preview.__jsx-style-dynamic-selector:hover{-webkit-transform:translateX(-5%)scale(1.1);-moz-transform:translateX(-5%)scale(1.1);-ms-transform:translateX(-5%)scale(1.1);-o-transform:translateX(-5%)scale(1.1);transform:translateX(-5%)scale(1.1)}.user-stack.__jsx-style-dynamic-selector{display:grid;grid-auto-flow:column;grid-column-gap:var(--space-4)}.comment-info.__jsx-style-dynamic-selector{display:grid;grid-auto-flow:column;grid-gap:var(--space-4);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.comment-count.__jsx-style-dynamic-selector{font-weight:var(--font-weight-medium);font-size:.8em;font-size:".concat(c,"px}")})]})},Wl=n(94184),Hl=n.n(Wl),Vl=n(71171),Kl=n.n(Vl),$l=n(70420),ql=n(74279),Yl=n(47571),Ql=n(33630),Jl=n(21394),es=n(68342);var ts=n(5440);function ns(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ns(e,t,n[t])}))}return e}function is(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var os=a.createContext({filePath:null,isLoading:!1,threads:{},view:null,placeholderId:null,openThreadId:null,setOpenThreadId:function(){}});function as(e){var t=e.children,n=is(e,["children"]);return(0,r.tZ)(os.Provider,{value:rs({},n),children:t})}function cs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ls(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ss(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ls(e,t,n[t])}))}return e}function us(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||fs(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ds(e){return function(e){if(Array.isArray(e))return cs(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fs(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fs(e,t){if(e){if("string"===typeof e)return cs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cs(e,t):void 0}}function ps(e){var t=(0,or.Z)().showError,n=(0,$i.Z)(),r=(0,y.Z)("flag-typing-indicator"),i=(0,y.Z)("flag-typing-presence"),o=function(){var e,t=(0,$i.Z)(),n=(0,Ui.LSE)({variables:{replId:t}}).data;if("Repl"!==(null===n||void 0===n?void 0:n.repl.__typename))return[];var r=[];(null===(e=n.repl.owner)||void 0===e?void 0:e.username)&&"User"===n.repl.owner.__typename&&r.push(n.repl.owner);var i=!0,o=!1,a=void 0;try{for(var c,l=n.repl.permissions[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var s,u=c.value;(null===(s=u.user)||void 0===s?void 0:s.username)&&r.push(u.user)}}catch(d){o=!0,a=d}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return r}(),c=o.map((function(e){return e.username})),s=a.useContext(os),u=s.view,d=s.filePath,f=(0,l.Z)().fs,p=(0,Ui.GDQ)({variables:{id:e}}),h=p.data,m=p.error,b=p.loading,v=p.client,g=!(!h||b||"AnnotationAnchor"===h.thread.__typename),x=a.useMemo((function(){return!h||b?null:"UserError"===h.thread.__typename?{id:e,__typename:"AnnotationAnchor",messages:[],isGeneral:!1,isResolved:!1}:"AnnotationAnchor"===h.thread.__typename?h.thread:null}),[h,e,b]),w=us((0,Ui.tTj)({onError:function(e){return t(e.message)},update:function(e,n){var r,i;n.errors?n.errors.forEach((function(e){return t(e.message)})):"UserError"!==(null===(r=n.data)||void 0===r||null===(i=r.createThread)||void 0===i?void 0:i.__typename)||t(n.data.createThread.message)}}),1)[0],k=us((0,Ui.ALh)({onError:function(e){return t(e.message)},update:function(e,n){var r;if(n.errors)n.errors.forEach((function(e){return t(e.message)}));else{var i=null===(r=n.data)||void 0===r?void 0:r.createThreadMessage;i&&"UserError"===i.__typename&&t(i.message)}}}),1)[0],Z=us((0,Ui.YaW)({onError:function(e){return t(e.message)},update:function(e,n){var r;if(n.errors)n.errors.forEach((function(e){return t(e.message)}));else{var i=null===(r=n.data)||void 0===r?void 0:r.updateThread;i&&"UserError"===i.__typename&&t(i.message)}}}),1)[0],j=us((0,Ui.HjV)(),1)[0],S=function(){var e=null===h||void 0===h?void 0:h.currentUser;return e?{user:{__typename:"User",id:e.id,username:e.username,image:e.image}}:{}};return{thread:x,isPlaceholder:g,error:m,loading:b,updateThread:function(e){var t,n=e.changes,r="AnnotationAnchor"===(null===h||void 0===h||null===(t=h.thread)||void 0===t?void 0:t.__typename)?h.thread:null;if(!r)throw new Error("expected thread");Z({variables:{id:r.id,changes:n},optimisticResponse:{updateThread:ss({},r,n,{isResolved:"boolean"===typeof n.isResolved?n.isResolved:r.isResolved})}})},finalizeThreadMessage:function(t){var r,i=t.message,o=t.messageId,a=t.highlight,l={id:o,text:i,mentions:(0,ts.kW)(i,{users:ds(c).concat(["everyone"])}).mentions};if(g&&u&&d){var s=u.state.field(Ba),p={id:e,replId:n,indexStart:null===s||void 0===s?void 0:s.indexStart,indexEnd:null===s||void 0===s?void 0:s.indexEnd,otVersion:f.getOTVersion(d),path:d};w({variables:{thread:p,message:l},optimisticResponse:{__typename:"RootMutationType",createThread:ss({__typename:"AnnotationAnchor"},p,S(),{messages:[ss({id:o,timeCreated:Date.now(),currentUserIsAuthor:!0},S(),{content:{text:i,__typename:"TextMessageContentType"},anchor:{id:p.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],isResolved:!1,isGeneral:!1})}}),v.writeQuery({query:Ui.VOL,variables:{id:e},data:{thread:ss({},p,{isResolved:!1,isGeneral:!1},S(),{messages:[ss({id:o,timeCreated:Date.now(),currentUserIsAuthor:!0},S(),{content:{text:i,__typename:"TextMessageContentType"},anchor:{id:p.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],__typename:"AnnotationAnchor"}),currentUser:null===h||void 0===h?void 0:h.currentUser}});var m=v.readQuery({query:Ui.JqK,variables:{replId:n,path:d}});if(m){var b,y="ThreadsByFileResult"===(null===(b=m.threadsByFile)||void 0===b?void 0:b.__typename)?m.threadsByFile.threads:[],x=S().user;v.writeQuery({query:Ui.JqK,variables:{replId:n,path:d},data:{threadsByFile:{__typename:"ThreadsByFileResult",threads:ds(y).concat([ss({messageCount:1,unreadCount:0,__typename:"AnnotationAnchor",isGeneral:!1,user:x,isResolved:!1,participants:[x]},p)])}}})}}else{var Z="AnnotationAnchor"===(null===h||void 0===h||null===(r=h.thread)||void 0===r?void 0:r.__typename)?h.thread:null;if(!Z)throw new Error("expected thread");k({variables:{replId:n,threadId:Z.id,threadMessage:l,highlight:a},optimisticResponse:{createThreadMessage:ss({},Z,{messages:ds(Z.messages.filter((function(e){return!e.id.startsWith("chat-")}))).concat([ss({},S(),l,{content:{text:l.text,__typename:"TextMessageContentType"},anchor:{id:Z.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})])})}})}},changeThreadMessage:function(t){var n=t.messageId,o=t.message;r&&j({variables:{threadId:e,messageId:n,message:i?o:null}})}}}function hs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ms(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||vs(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bs(e){return function(e){if(Array.isArray(e))return hs(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||vs(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vs(e,t){if(e){if("string"===typeof e)return hs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hs(e,t):void 0}}var gs=function(e){var t=e.threadId,n=e.onFinalizeMessage,i=void 0===n?function(){}:n,c=e.onChangeMessage,l=void 0===c?function(){}:c,s=e.onRequestClose,u=void 0===s?function(){}:s,d=e.style,f=e.width,p=ps(t),h=p.thread,m=p.loading,b=p.isPlaceholder,v=p.updateThread,g=p.changeThreadMessage,y=p.finalizeThreadMessage,x=a.useRef(null),w=a.useRef(null),k=(0,Ql.Z)(null===h||void 0===h?void 0:h.id),Z=ms((0,rl.L)({accept:[Lc.z.FileNode,Lc.z.FileHeaderTab],collect:function(e){var t,n=null===(t=e.getItem())||void 0===t?void 0:t.isFolder;return{isOver:e.isOver({shallow:!0})&&!n}},canDrop:function(e){return!e.isFolder},drop:function(e){e&&!e.isFolder&&O({messageId:Kl()(),message:"#".concat(e.path)})}}),2),j=Z[0],S=Z[1],E=(0,Pt.Z)((function(e){var t,n=e.target;n.closest(".node-row")||n.closest(".file-header-tab")||""!==(null===(t=w.current)||void 0===t?void 0:t.value)||u()}),[]);(0,Yl.Z)(h),a.useEffect((function(){var e=function(e){var t;"Escape"===e.key&&""===(null===(t=w.current)||void 0===t?void 0:t.value)&&u()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[u]),a.useEffect((function(){x.current&&(x.current.scrollTop=x.current.scrollHeight)}),[null===h||void 0===h?void 0:h.messages]);var C=a.useMemo((function(){var e;if(!(null===h||void 0===h?void 0:h.messages))return[];var t=bs(h.messages).sort((function(e,t){return new Date(e.timeCreated).getTime()-new Date(t.timeCreated).getTime()}));return(e=t).push.apply(e,bs(k.filter((function(e){return!t.slice(-5).find((function(t){return t.id===e.id}))})))),(0,ql.Z)(t)}),[null===h||void 0===h?void 0:h.messages,k]),O=function(e){y(e),i(e)};return h||m?(0,r.BX)("div",{style:d,ref:function(e){S(e),E.current=e},className:"jsx-".concat($l.Q.__hash)+" "+o().dynamic([["93337adeef9a977a",[f]]])+" "+(Hl()("thread-group",{"is-over":j.isOver})||""),children:[m||!h?(0,r.tZ)("div",{css:[_.l0.p(16)],className:"jsx-".concat($l.Q.__hash)+" "+o().dynamic([["93337adeef9a977a",[f]]]),children:(0,r.BX)(fa.ZP,{viewBox:"0 0 100 20",primaryColor:"var(--background-higher)",secondaryColor:"var(--background-highest)",speed:1.5,children:[(0,r.tZ)("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"100",height:"8",className:"jsx-".concat($l.Q.__hash)+" "+o().dynamic([["93337adeef9a977a",[f]]])}),(0,r.tZ)("rect",{x:"0",y:"10",rx:"4",ry:"4",width:"33",height:"8",className:"jsx-".concat($l.Q.__hash)+" "+o().dynamic([["93337adeef9a977a",[f]]])})]})}):(0,r.BX)(r.HY,{children:[C.length>0&&(0,r.tZ)("div",{ref:x,className:"jsx-".concat($l.Q.__hash)+" "+o().dynamic([["93337adeef9a977a",[f]]])+" message-group-container",children:C.map((function(e){return(0,r.tZ)(es.ZP,{messageGroup:e},e.messages[0].id)}))}),(0,r.tZ)(Jl.Z,{annote:h,onChangeMessage:function(e){g(e),l(e)},onFinalizeMessage:O,ref:w}),(0,r.BX)("div",{className:"jsx-".concat($l.Q.__hash)+" "+o().dynamic([["93337adeef9a977a",[f]]])+" floating-group",children:[b?null:(0,r.tZ)("div",{className:"jsx-".concat($l.Q.__hash)+" "+o().dynamic([["93337adeef9a977a",[f]]])+" delete show-on-hover",children:(0,r.tZ)("button",{"aria-label":"Resolve","data-microtip-position":"top",role:"tooltip",onClick:function(){v({changes:{isResolved:!0}})},className:"jsx-".concat($l.Q.__hash)+" "+o().dynamic([["93337adeef9a977a",[f]]])+" floating-button resolve",children:(0,r.tZ)(nn.Z,{})})}),(0,r.tZ)("div",{className:"jsx-".concat($l.Q.__hash)+" "+o().dynamic([["93337adeef9a977a",[f]]])+" close",children:(0,r.tZ)("button",{"aria-label":"Close","data-microtip-position":"top",role:"tooltip",onClick:u,className:"jsx-".concat($l.Q.__hash)+" "+o().dynamic([["93337adeef9a977a",[f]]])+" floating-button close",children:(0,r.tZ)(_t.Z,{})})})]})]}),(0,r.tZ)(o(),{id:$l.Q.__hash,children:$l.Q}),(0,r.tZ)(o(),{id:"93337adeef9a977a",dynamic:[f],children:".thread-group.__jsx-style-dynamic-selector{position:absolute;z-index:10;position:relative;display:grid;grid-row-gap:var(--space-16);-webkit-box-pack:stretch;-webkit-justify-content:stretch;-moz-box-pack:stretch;-ms-flex-pack:stretch;justify-content:stretch;background-color:var(--background-default);padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);width:".concat(f,"px;-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2);border:.5px solid var(--background-higher)}.thread-group.is-over.__jsx-style-dynamic-selector{background-color:var(--background-root)}.thread-group.__jsx-style-dynamic-selector *.__jsx-style-dynamic-selector{-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.message-group-container.__jsx-style-dynamic-selector{display:grid;grid-row-gap:var(--space-16);max-height:275px;overflow-y:auto;padding:var(--space-8);padding-bottom:0;grid-template-columns:minmax(0,1fr)}.floating-group.__jsx-style-dynamic-selector{position:absolute;display:grid;grid-auto-flow:column;-webkit-box-pack:end;-webkit-justify-content:end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:end;grid-column-gap:8px;top:-32px;left:0;right:0}.floating-group.__jsx-style-dynamic-selector .show-on-hover.__jsx-style-dynamic-selector{opacity:0}.thread-group.__jsx-style-dynamic-selector:hover>.floating-group.__jsx-style-dynamic-selector .show-on-hover.__jsx-style-dynamic-selector{opacity:1}.feedback.__jsx-style-dynamic-selector{position:absolute;text-decoration:none}.floating-button.__jsx-style-dynamic-selector{width:24px;height:24px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;background:var(--background-higher);color:var(--foreground-dimmer);border:1px solid var(--background-highest);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2)}.floating-button.__jsx-style-dynamic-selector:focus{outline:none}.floating-button.__jsx-style-dynamic-selector:hover{color:var(--foreground-default);background:var(--background-higher)}.floating-button.delete.__jsx-style-dynamic-selector:hover{color:var(--white);background:var(--accent-negative-default);border-color:var(--accent-negative-default)}.floating-button.resolve.__jsx-style-dynamic-selector:hover{color:var(--white);background:var(--accent-positive-default);border-color:var(--accent-positive-default)}.floating-button.__jsx-style-dynamic-selector:active{background:var(--background-highest)}")})]}):null};function ys(e){var t=e.threadId,n=a.useContext(os),i=n.threads,o=n.isLoading,c=n.placeholderId,l=n.openThreadId,s=n.setOpenThreadId,u=n.view,d=l===t,f=c===t,p="/replEnvironment2"===(0,Dl.useRouter)().pathname;if(!u)return null;var h=p?u.dom.getBoundingClientRect().width:u.dom.getBoundingClientRect().right;return o?null:i[t]||f?(0,r.tZ)(pt.G7,{css:{position:"fixed",left:h,transform:"translateX(-100%)"},className:"thread-ui",children:d||f?(0,r.tZ)(gs,{style:{transform:"translateX(100%)"},width:225,onRequestClose:function(){s(null),f&&u.dispatch({effects:[Pa.of(null)]})},threadId:t}):(0,r.tZ)(Gl,{threadPreview:i[t],onClick:function(){return s(t)}})}):null}function xs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ws(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ks(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ws(e,t,n[t])}))}return e}function Zs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||Ss(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function js(e){return function(e){if(Array.isArray(e))return xs(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ss(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ss(e,t){if(e){if("string"===typeof e)return xs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xs(e,t):void 0}}function Es(e){var t=e.setThreadsTooltips,n=e.setPlaceholderThreadId,i=e.setOpenThreadId,o=e.view,c=function(e,n){var i=function(e){t((function(t){return ks({},t,ws({},n,(0,r.tZ)(s,{onLayout:e})))}))},o=l[n];if(!o){var c=document.createElement("div");c.classList.add("cm-tooltip-thread"),o=l[n]={tooltip:{dom:c,update:function(e){e.viewportChanged&&i((function(){(0,S.E2)(e.view)}))}},Portal:function(e){var t=e.onLayout;return a.useLayoutEffect((function(){null===t||void 0===t||t()}),[t]),w.createPortal((0,r.tZ)(ys,{threadId:n}),c)}}}var s=o.Portal;return i(),o.tooltip},l={};return[Ra,za,Ba,S.tk.decorations.compute([za,Ba],(function(e){var t=e.field(za),n=e.field(Ba);return S.p.set(js(Object.values(t)).concat(js(n?[n]:[])).map((function(e){return t=e.id,n=e.indexStart,r=e.indexEnd,n===r?null:S.p.mark({class:"replit-thread-highlight cm-thread-".concat(t),id:t}).range(n,r);var t,n,r})).filter((function(t){return null!==t&&t.from!==t.to&&t.from<=e.doc.length&&t.to<=e.doc.length})),!0)})),S.tk.updateListener.of((function(e){var t,r=null===(t=e.view.state.field(Ba))||void 0===t?void 0:t.id;n(null!==r&&void 0!==r?r:null),r&&i(r)})),S.hJ.computeN([za,Ba],(function(e){var t=e.field(za),n=js(Object.values(t).map((function(e){return{pos:Math.min(e.indexStart,e.indexEnd),above:!0,create:function(){return c(0,e.id)}}}))),r=e.field(Ba);return r&&n.push({pos:Math.min(r.indexStart,r.indexEnd),above:!0,create:function(){return c(0,r.id)}}),n})),S.tk.updateListener.of((function(e){T(e,Na,(function(t){var n=t.value,r=e.state.field(za)[n];r&&(null===o||void 0===o||o.dispatch({selection:{anchor:r.indexStart,head:r.indexStart},effects:[S.tk.scrollIntoView(r.indexStart,{x:"nearest",y:"nearest"})]}))}))}))]}function Cs(e){var t=e.view,n=e.filePath,r=e.isLoading,i=e.enable,o=Zs(a.useState({}),2),c=o[0],s=o[1],u=Zs((0,Ka.KO)($a.Q),2),d=u[0],f=u[1];a.useEffect((function(){t&&d&&t.dispatch({effects:[Na.of(d)]})}),[t,d]);var p=Zs(a.useState(null),2),h=p[0],m=p[1],b=(0,oi.Z)({view:t});a.useEffect((function(){if(t&&i)return t.dispatch({effects:b.reconfigure(Es({view:t,setThreadsTooltips:s,setPlaceholderThreadId:m,setOpenThreadId:f}))}),function(){t.dispatch({effects:b.reconfigure([])})}}),[t,n,b,i]);var v=Xl(n,r,!0);return function(e,t,n,r){var i=(0,l.Z)().fs,o=(0,Bl.kL)(n),c=o.contentRef,s=o.loadedFile,u=o.transformSelectionRef;a.useEffect((function(){var o=!1,a=u.current,l=c.current;if(s&&a&&l&&!r&&t){var d=Object.values(e);0!==d.length?Promise.all(d.map((function(e){return(0,Bl.Ft)({anchor:e,version:i.getOTVersion(n),transformSelection:a,content:l})}))).then((function(e){if(!o){var n=e.filter((function(e){return Boolean(e)})).map((function(e){if(!e)throw new Error("expected resolved anchor");return ks({},e.anchor,null===e||void 0===e?void 0:e.newSelection)}));return t.dispatch({effects:Ia.of(n.reduce((function(e,t){return e[t.id]=t,e}),{}))}),function(){o=!0,t&&t.dispatch({effects:Ia.of({})})}}})):t.dispatch({effects:Ia.of({})})}}),[e,t,s,i,u,c,n,r])}(v,t,n,r),{threadPreviews:v,setPlaceholderThreadId:m,placeholderThreadId:h,openThreadId:d,setOpenThreadId:f,threadsTooltips:c}}function _s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Os(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ts,Is,As=function(e){var t=e.source,n=(0,On.Z)(t);return(0,r.tZ)(r.HY,{children:Array.from(n,(function(e){var t=Os(e,2),n=t[0],i=t[1];return(0,r.tZ)(a.Fragment,{children:i},n)}))})},Ps=n(84948);!function(e){e.ERROR="ERROR",e.ACK="ACK",e.RESET="RESET",e.WORKSPACE_STATE="WORKSPACE_STATE",e.WORKSPACE_STATE_REQUEST="WORKSPACE_STATE_REQUEST",e.REQUEST_SET_SELECTION="REQUEST_SET_SELECTION",e.REQUEST_SET_TEXT="REQUEST_SET_TEXT",e.REQUEST_INSERT_TEXT="REQUEST_INSERT_TEXT"}(Ts||(Ts={})),function(e){e.FROM_NATIVE="FROM_NATIVE",e.TO_NATIVE="TO_NATIVE"}(Is||(Is={}));function Ns(e){return null!==e&&void 0!==e&&"string"===typeof e}function Rs(e){return null!=e&&"number"===typeof e&&!Number.isNaN(e)&&Number.isFinite(e)&&Number.isSafeInteger(e)&&e>=0}function zs(e){return null!=e&&("object"===typeof e&&("location"in e&&"length"in e&&Rs(e.location)&&Rs(e.length)))}function Bs(e){return null!=e&&(!!Array.isArray(e)&&!!e.every((function(e){return zs(e)})))}function Ds(e){return null!=e&&("object"===typeof e&&("messageType"in e&&"filePath"in e&&"selections"in e&&"revisionId"in e&&e.messageType===Ts.REQUEST_SET_SELECTION&&Ns(e.filePath)&&Bs(e.selections)&&Ns(e.revisionId)))}function Us(e){return null!=e&&("object"===typeof e&&("messageType"in e&&"filePath"in e&&"text"in e&&"selections"in e&&"revisionId"in e&&e.messageType===Ts.REQUEST_SET_TEXT&&Ns(e.filePath)&&Ns(e.text)&&Bs(e.selections)&&Ns(e.revisionId)))}function Ls(e){return null!=e&&("object"===typeof e&&("messageType"in e&&"filePath"in e&&"text"in e&&"insertionRange"in e&&"selections"in e&&"revisionId"in e&&e.messageType===Ts.REQUEST_INSERT_TEXT&&Ns(e.filePath)&&Ns(e.text)&&zs(e.insertionRange)&&Bs(e.selections)&&Ns(e.revisionId)))}function Xs(e){return null!=e&&("object"===typeof e&&("protocolVersion"in e&&"messageDirection"in e&&"messageId"in e&&"payload"in e&&Ns(e.protocolVersion)&&Ns(e.messageDirection)&&Ns(e.messageId)&&function(e){if(null==e)return!1;if("object"!==typeof e)return!1;if(!("messageType"in e)||!Ns(e.messageType))return!1;switch(e.messageType){case Ts.ERROR:case Ts.ACK:case Ts.WORKSPACE_STATE_REQUEST:case Ts.RESET:case Ts.WORKSPACE_STATE:return!0;case Ts.REQUEST_SET_SELECTION:return Ds(e);case Ts.REQUEST_SET_TEXT:return Us(e);case Ts.REQUEST_INSERT_TEXT:return Ls(e);default:return!1}}(e.payload)))}function Ms(e,t){var n={protocolVersion:"1",messageDirection:Is.TO_NATIVE,messageId:t,payload:e};window.postMessage(n)}function Fs(e){return{filePath:e,text:"",selections:[]}}function Gs(e,t){return null==t?Fs(e):{filePath:e,text:null!==(n=t.state.doc.toString())&&void 0!==n?n:"",selections:t.state.selection.ranges.map((function(e){var t=e.from;return{location:t,length:e.to-t}}))};var n}function Ws(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Kl()(),i=Gs(e,t),o={messageType:Ts.WORKSPACE_STATE,filePath:e,text:i.text,selections:i.selections,revisionId:n.revisionId};Ms(o,r)}function Hs(e,t,n,r){return n===e&&n===t.workspaceState.filePath&&r===t.revisionId}function Vs(e){var t=e.map((function(e){return Z.jT.range(e.location,e.location+e.length)}));return Z.jT.create(t)}function Ks(e,t,n,r){var i=r.payload;if(Ds(i))return function(e,t,n,r){if(!Hs(e,n,r.filePath,r.revisionId))return!1;var i=Vs(r.selections);return t.dispatch({selection:i}),!0}(e,t,n,i);if(Us(i))return function(e,t,n,r){if(!Hs(e,n,r.filePath,r.revisionId))return!1;var i=Gs(e,t),o=Vs(r.selections);return t.dispatch({changes:{from:0,to:i.text.length,insert:r.text},selection:o}),!0}(e,t,n,i);if(Ls(i))return function(e,t,n,r){if(!Hs(e,n,r.filePath,r.revisionId))return!1;var i=r.insertionRange,o=Vs(r.selections);return t.dispatch({changes:{from:i.location,to:i.location+i.length,insert:r.text},selection:o}),!0}(e,t,n,i);throw new Error("Invalid payload.")}function $s(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function qs(e){var t=e.view,n=e.filePath,r=(0,Dl.useRouter)().query,i=Boolean(r.mobileBridge),o=(0,a.useRef)({revisionId:Kl()(),workspaceState:Fs(n)}),c=(0,oi.Z)({view:t});(0,a.useEffect)((function(){if(t&&i){var e=Gs(n,t);o.current={revisionId:Kl()(),workspaceState:e},Ws(n,t,o.current);return t.dispatch({effects:c.reconfigure(S.tk.updateListener.of((function(r){(r.docChanged||r.selectionSet)&&function(r){r.docChanged?(o.current={revisionId:Kl()(),workspaceState:e},Ws(n,t,o.current)):r.selectionSet&&(o.current={revisionId:o.current.revisionId,workspaceState:e},Ws(n,t,o.current))}(r)})))}),function(){t.dispatch({effects:c.reconfigure([])})}}}),[t,n,c,i]),(0,a.useEffect)((function(){if(t&&i){var e=function(e){Ks(n,t,o.current,e)?Ws(n,t,o.current,e.messageId):function(e){var t=null!==e&&void 0!==e?e:Kl()();Ms({messageType:Ts.ERROR},t)}(e.messageId)},r=function(){var r,i=(r=d().mark((function r(i){var a,c;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,Xs(a=i.data)&&a.messageDirection===Is.FROM_NATIVE){r.next=4;break}return r.abrupt("return");case 4:if("1"===a.protocolVersion){r.next=7;break}throw new Error("Invalid protocolVersion: ".concat(a.protocolVersion," != ").concat("1"));case 7:c=a.payload,r.t0=c.messageType,r.next=r.t0===Ts.ERROR?11:r.t0===Ts.ACK?13:r.t0===Ts.WORKSPACE_STATE_REQUEST?14:r.t0===Ts.RESET?16:r.t0===Ts.WORKSPACE_STATE?18:r.t0===Ts.REQUEST_SET_SELECTION?20:r.t0===Ts.REQUEST_SET_TEXT?22:r.t0===Ts.REQUEST_INSERT_TEXT?24:26;break;case 11:case 16:case 18:throw new Error("Unexpected message: ".concat(c.messageType));case 13:return r.abrupt("break",27);case 14:return Ws(n,t,o.current,a.messageId),r.abrupt("break",27);case 20:case 22:case 24:return e(a),r.abrupt("break",27);case 26:throw new Error("Unknown message.");case 27:r.next=33;break;case 29:throw r.prev=29,r.t1=r.catch(0),new Error("Invalid message: ".concat(r.t1));case 33:case"end":return r.stop()}}),r,null,[[0,29]])})),function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){$s(o,n,i,a,c,"next",e)}function c(e){$s(o,n,i,a,c,"throw",e)}a(void 0)}))});return function(e){return i.apply(this,arguments)}}();return window.addEventListener("message",r),Ws(n,t,o.current),function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kl()();Ms({messageType:Ts.RESET},e)}(),window.removeEventListener("message",r)}}}),[t,n,i])}function Ys(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Js(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Qs(e,t,n[t])}))}return e}function eu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ys(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ys(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tu(e){var t=e.filePath,n=e.onType,i=e.autoFocus,u=e.deeplink,d=(0,l.Z)(),f=d.fs,p=d.debuggest,h=d.presence,m=d.session,b="/replEnvironment2"===Ul().pathname,v=(0,y.Z)("flag-threads-2"),g=(0,s.Z)(),w=(0,oc.Z)({filePath:t,hasExtraPadding:!0,noHistory:!0,onException:function(e){(0,jl.x)(e,{tags:{codemirror:!0}})}}),k=w.view,j=w.ref,E=Bc({view:k,presence:h,session:m,fs:f,filePath:t}).isLoading;!function(e){var t=e.view,n=e.isLoading,r=e.autoFocus;a.useEffect((function(){r&&t&&(n||t.focus())}),[t,n,r])}({view:k,autoFocus:i,isLoading:E}),cc({view:k,filePath:t,isLoading:E}),function(e){var t=e.view,n=(0,l.Z)().session;a.useEffect((function(){if(t)return n.onEditorFocused((function(){t.focus()}))}),[n,t])}({view:k});var C=function(){var e=a.useRef((0,un.u)(new Map)).current,t=a.useCallback((function(t){var n=new Map(e.current);t(n),e.current=n}),[e]),n=a.useCallback((function(){e.current=new Map}),[e]);return a.useMemo((function(){return{observable:e,update:t,unmount:n}}),[t,e,n])}();hi({view:k,filePath:t,isLoading:E,decorations:C}),function(e){var t=e.view,n=e.filePath,r=e.isLoading,i=(0,l.Z)().anchorer,o=(0,Ka.Dv)($a.Q);a.useEffect((function(){t&&o&&t.dispatch({effects:[rc.of(o)]})}),[t,o]);var c=ic(i);(0,oi.Z)({view:t,initialExtension:[Ja,c,S.tk.updateListener.of((function(e){T(e,rc,(function(n){var r=n.value,i=e.state.field(c).find((function(e){return e.id===r}));i&&(null===t||void 0===t||t.dispatch({selection:{anchor:i.indexStart,head:i.indexStart},effects:[S.tk.scrollIntoView(i.indexStart,{x:"nearest",y:"nearest"})]}))}))}))]}),a.useEffect((function(){if(!r&&t&&n){var e=!1;i.getAnchors(n).then((function(n){if(e)return!0;t.dispatch({effects:[ec.of(n)]})}));var o=i.onAnchorsAdded((function(e){var r=e.filter((function(e){return e.path===n}));t.dispatch({effects:tc.of(r)})})),a=i.onAnchorsRemoved((function(e){t.dispatch({effects:nc.of(e)})}));return function(){e=!0,o(),a()}}}),[r,n,t])}({view:k,filePath:t,fs:f,isLoading:E}),Ni({view:k,debuggest:p,filePath:t,isLoading:E});var _=Ma({view:k,filePath:t}),O=_.onAction,I=_.actions,A=_.contextMenuCoords,P=_.onContextMenu,N=_.closeMenu,R=_.resizeRef,z=Wa({view:k,filePath:t,isLoading:E}),B=function(e){var t=e.view,n=ko(a.useState(null),2),r=n[0],i=n[1],o=(0,oi.Z)({view:t});return a.useEffect((function(){if(t){var e=document.createElement("div");return i(e),t.dispatch({effects:o.reconfigure([(0,xo.yC)({createPanel:function(){return{top:!0,pos:80,dom:e,mount:function(){var t=e.querySelector("[main-field]");t&&(t.focus(),t.select())}}}}),S.$f.of([{win:"Ctrl-h",linux:"Ctrl-h",preventDefault:!0,run:function(){return t.dispatch({effects:Zo.of(null)}),(0,xo.nx)(t)}}])])}),function(){t.dispatch({effects:o.reconfigure([])}),i(null)}}}),[t,o]),r}({view:k});!function(e){var t=e.filePath,n=e.view,r=e.isLoading,i=e.deeplink,o=(0,l.Z)().session;a.useEffect((function(){if(n&&!r&&i){var e=i.line,t=i.col;e&&Ha({view:n,line:e,col:t})}}),[n,r,i]),a.useEffect((function(){if(n&&!r)return o.onDeeplinkUpdated((function(e){var r=e.path,i=e.line,o=e.col;r===t&&i&&Ha({view:n,line:i,col:o})}))}),[o,n,t,r])}({filePath:t,view:k,isLoading:E,deeplink:u}),function(e){var t=e.view,n=e.onType,r=e.filePath,i=(0,oi.Z)({view:t});a.useEffect((function(){if(t&&n&&r)return t.dispatch({effects:i.reconfigure(S.tk.updateListener.of((function(e){e.docChanged&&(e.transactions.some((function(e){return e.annotation(Z.YW.remote)}))||n((0,No.r6)(r)))})))}),function(){t.dispatch({effects:i.reconfigure([])})}}),[t,n,r,i])}({view:k,onType:n,filePath:t}),function(e){var t=e.view,n=(0,oi.Z)({view:t}),r=(0,Dc.xZ)();a.useEffect((function(){if(t&&!(0,x.isMobile)({tablet:!0})){var e=r?[Qc,Jc,el,tl,nl]:[];return e.push(nl),t.dispatch({effects:n.reconfigure((0,Vc.ZP)({rules:e}))}),function(){t.dispatch({effects:n.reconfigure([])})}}}),[t,n,r])}({view:k}),function(e){var t=e.view,n=(0,oi.Z)({view:t}),r=(0,l.Z)().fs,i=(0,ir.Z)(),o=(0,Dc.xZ)();a.useEffect((function(){if(t)return t.dispatch({effects:n.reconfigure(S.tk.domEventHandlers({paste:function(e){var n,a=null===e||void 0===e||null===(n=e.clipboardData)||void 0===n?void 0:n.files,c=function(e){var n=t.state.selection.main.head;t.dispatch({changes:{from:n,insert:e},selection:{anchor:n,head:n+e.length}})};if(a){var l=!0,s=!1,u=void 0;try{for(var d,f=a[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value;o?(0,ol.L0)(p).then((function(e){return c('"'+e+'"')})):(null===i||void 0===i?void 0:i.endsWith(".md"))&&fl(p,r,i).then(c)}}catch(h){s=!0,u=h}finally{try{l||null==f.return||f.return()}finally{if(s)throw u}}}}}))}),function(){t.dispatch({effects:n.reconfigure([])})}}),[t,n,i,r,o])}({view:k}),function(e){var t=e.view,n=(0,oi.Z)({view:t}),r=(0,ir.Z)();a.useEffect((function(){if(t)return t.dispatch({effects:n.reconfigure(S.tk.domEventHandlers({paste:function(e){var n;Za({activeFile:r,view:t,event:e,clipboardText:null===(n=e.clipboardData)||void 0===n?void 0:n.getData("Text")})}}))}),function(){t.dispatch({effects:n.reconfigure([])})}}),[t,n,r])}({view:k}),function(e){var t=e.view,n=(0,oi.Z)({view:t}),r=(0,Dc.f6)();a.useEffect((function(){if(t&&r)return t.dispatch({effects:n.reconfigure(Zl)}),function(){t.dispatch({effects:n.reconfigure([])})}}),[t,n,r])}({view:k}),function(e){var t=e.view,n=(0,oi.Z)({view:t}),r=(0,l.Z)().session;a.useEffect((function(){var e=function(){return r.setIsCommandBarOpen(!0),!0};if(t)return t.dispatch({effects:n.reconfigure(S.$f.of([{key:"Mod-Shift-p",run:e,preventDefault:!0},{key:"F1",run:e,preventDefault:!0}]))}),function(){t.dispatch({effects:n.reconfigure([])})}}),[t,r,n])}({view:k});var D=function(e){var t=e.view,n=(0,l.Z)().fs,r=(0,ir.Z)(),i=(0,Dc.xZ)();return hl((0,rl.L)({accept:[Lc.z.Code,il.FILE],drop:function(e,o){if(t){var a=o.getClientOffset(),c=a?t.posAtCoords(a):null;if(null!==c){var l=function(e){t.focus(),t.dispatch({changes:{from:c,insert:e},selection:{anchor:c,head:c+e.length}})};if(e.type===Lc.z.Code)l(e.code);else{var s=!0,u=!1,d=void 0;try{for(var f,p=e.files[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var h=f.value;i?(0,ol.L0)(h).then((function(e){return l('"'+e+'"')})):(null===r||void 0===r?void 0:r.endsWith(".md"))&&fl(h,n,r).then(l)}}catch(m){u=!0,d=m}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}}}}}}),2)[1]}({view:k}),U=(0,Dc.xZ)();!function(e){var t=e.view,n=(0,l.Z)().container;(0,oi.Z)({view:t,initialExtension:[ta(n),ea]})}({view:k});var L=function(e){var t=e.view,n=e.filePath,r=ga(a.useState(null),2),i=r[0],o=r[1],c=(0,oi.Z)({view:t});return a.useEffect((function(){if(t)return t.dispatch({effects:c.reconfigure(wa({setExplainCodeParams:o,view:t,filePath:n}))}),function(){t.dispatch({effects:c.reconfigure([])})}}),[t,c,n]),i}({view:k,filePath:t}),X=function(e){var t=e.view,n=El(a.useState(null),2),r=n[0],i=n[1],o=(0,oi.Z)({view:t}),c=Qi(),l=a.useCallback((function(){if(!t)throw new Error("did not expect to be asked to open generate code modal without view");t.dispatch({effects:ja.of(!0)})}),[t]);return a.useEffect((function(){if(t&&c)return t.dispatch({effects:o.reconfigure(Ea({view:t,setGenerateCodePortalProps:i}))}),function(){t.dispatch({effects:o.reconfigure([])})}}),[t,o,c]),{generateCodePortalProps:r,openGenerateCodeModal:l}}({view:k}),M=X.generateCodePortalProps,F=X.openGenerateCodeModal,G=Cs({view:k,filePath:t,isLoading:E,enable:b&&!v});!function(e){var t=e.view,n=e.filePath,r=e.enable,i=(0,oi.Z)({view:t});a.useEffect((function(){if(t&&r)return t.dispatch({effects:i.reconfigure([])}),function(){t.dispatch({effects:i.reconfigure([])})}}),[t,n,i,r])}({view:k,filePath:t,isLoading:E,enable:b&&v});var W=(0,Ps.Z)(Yi.H.Editor);return qs({view:k,filePath:t}),(0,r.BX)("div",{ref:W,className:o().dynamic([["739a5e9778efb037",[g?"0 3px 0 3px ".concat(g):"0"]]])+" root",children:[(0,r.tZ)(yo,{view:k,filePath:t,isLoading:E}),(0,r.BX)("div",{ref:R,className:o().dynamic([["739a5e9778efb037",[g?"0 3px 0 3px ".concat(g):"0"]]])+" editor",children:[E&&(0,r.tZ)("div",{className:o().dynamic([["739a5e9778efb037",[g?"0 3px 0 3px ".concat(g):"0"]]])+" loader",children:(0,r.tZ)(c.Z,{})}),(0,r.tZ)("div",{ref:function(e){j(e),D(e)},onContextMenu:P,className:o().dynamic([["739a5e9778efb037",[g?"0 3px 0 3px ".concat(g):"0"]]])}),A&&k?(0,r.tZ)(_r,{view:k,coords:A,actions:I,closeMenu:N,onAction:O}):null,L?L.node:null,M?(0,r.tZ)(zl,Js({},M,{filePath:t})):null,z?(0,r.tZ)(io,{dom:z,onShowGenerateCodeModal:F}):null,B?(0,r.tZ)(Po,{dom:B,view:k}):null,(0,r.tZ)(As,{source:C.observable}),k&&(0,r.tZ)(as,{view:k,filePath:t,isLoading:E,threads:G.threadPreviews,openThreadId:G.openThreadId,setOpenThreadId:G.setOpenThreadId,placeholderId:G.placeholderThreadId,children:Object.entries(G.threadsTooltips).map((function(e){var t=eu(e,2),n=t[0],i=t[1];return(0,r.tZ)(a.Fragment,{children:i},n)}))})]}),U&&(0,r.tZ)(Hc,{}),(0,r.tZ)(o(),{id:"739a5e9778efb037",dynamic:[g?"0 3px 0 3px ".concat(g):"0"],children:".root.__jsx-style-dynamic-selector{position:relative;overflow-y:auto;width:100%;height:100%;font-size:14px;background-color:var(--background-default);z-index:3;-webkit-box-shadow:".concat(g?"0 3px 0 3px ".concat(g):"0",";-moz-box-shadow:").concat(g?"0 3px 0 3px ".concat(g):"0",";box-shadow:").concat(g?"0 3px 0 3px ".concat(g):"0","}.editor.__jsx-style-dynamic-selector{position:relative;overflow-y:auto;width:100%;height:100%;font-size:14px;background-color:var(--background-default)}.editor.__jsx-style-dynamic-selector>div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;width:100%;height:100%}.editor.__jsx-style-dynamic-selector>div.__jsx-style-dynamic-selector>.cm-editor{-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:100%}.loader.__jsx-style-dynamic-selector{position:absolute;left:0;top:0;height:100%;width:100%;overflow:hidden;z-index:5}")})]})}},80209:function(e,t,n){n.d(t,{Z:function(){return Q}});var r,i=n(34051),o=n.n(i),a=n(35944),c=n(67294),l=n(27740),s=n.n(l),u=n(87139),d=n(89957),f=n(67938),p=n(92704),h=n(88768),m=n(30617),b=n(45193),v=n(28593),g=n(8996),y=n(3204),x=n(24506),w=n(54929),k=n(33108),Z=n(28614),j=n(89431),S=n(11938),E=n(5560),C=n(52722),_=n(57923),O=n(90020),T=n(66552),I=n(67289);!function(e){e.Unknown="UNKNOWN",e.Npm="NPM",e.Django="DJANGO",e.Rails="RAILS",e.DotNet="DOTNET",e.Cargo="CARGO",e.Make="MAKE",e.RegularRun="REGULAR_RUN"}(r||(r={}));var A=new RegExp("((index)|(main)|(app)|(run)|(start)|(server))\\..+","i");function P(e){var t=e.initRunCommand,n=e.isCompiled,i=e.allFiles,o=new Set(i);return o.has("Makefile")||o.has("makefile")?r.Make:o.has("package.json")?r.Npm:o.has("Cargo.toml")?r.Cargo:n?r.Unknown:o.has("config/application.rb")?r.Rails:function(e,t){return e.some((function(e){return(0,I.r6)(e)===t}))}(i,"csproj")?r.DotNet:o.has("manage.py")?r.Django:A.test(t)?r.RegularRun:r.Unknown}function N(e,t){var n=t.initRunCommand,i=t.allFiles;switch(e){case r.Npm:return"npm run start";case r.RegularRun:var o=function(e){var t;return null!==(t=e.find((function(e){return A.test(e)})))&&void 0!==t?t:null}(i);return null==o?null:n.replace(A,o);case r.Django:return"python3 manage.py runserver 0.0.0.0:3000";case r.Rails:return"bundle exec rails server --binding=0.0.0.0";case r.DotNet:return"dotnet run";case r.Cargo:return"cargo run";case r.Make:case r.Unknown:default:return null}}function R(e){switch(e){case r.Make:return"make";case r.Cargo:case r.DotNet:case r.Npm:return"";default:return null}}function z(e,t,n){if(0===n.length)return{projType:r.Unknown,runCommand:null,compileCommand:null};var i={initRunCommand:e,isCompiled:t,allFiles:n},o=P(i);return{projType:o,runCommand:N(o,i),compileCommand:R(o)}}var B=n(56834),D=n(47043),U=n(91449),L=n(48493),X=n(37155);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function G(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){F(o,r,i,a,c,"next",e)}function c(e){F(o,r,i,a,c,"throw",e)}a(void 0)}))}}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){W(e,t,n[t])}))}return e}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e){var t=e.children,n=(0,j.Z)("flag-workspace-v2");return(0,a.BX)(T.Z,{background:"default",css:[y.l0.borderRadius(8),{width:"100%",height:n?"calc(100% - var(--space-2))":"calc(100% + var(--space-32) - var(--space-2))",backgroundColor:"var(--background-default)",overflowY:"auto",marginTop:n?"0px":"-32px"}],children:[(0,a.tZ)(w.Z,{children:(0,a.tZ)(f.x,{variant:"subheadDefault",css:[y.l0.color.foregroundDimmest,y.l0.pl(16),y.l0.pt(16)],children:".replit"})}),(0,a.tZ)(w.Z,{css:[y.l0.p(16),y.l0.justify.center,y.l0.align.center,{flex:"1 1 auto"}],children:t})]})}function $(e){var t,n=Boolean(e.hasInterpreter),i=e.initialRun,o=null!==(t=e.initialCompile)&&void 0!==t?t:"",l=e.isFrameworkRecommended,u=!!e.projType&&e.projType===r.Rails,h=e.isApplyingConfig,m=V(c.useState("Unknown"===s().get(e.initialLanguage).displayName?"bash":e.initialLanguage),2),j=m[0],S=(m[1],(0,k.Y)(e.initialRun,(function(e){if(!e)return{message:"Add a run command"}}))),E=V(c.useState(e.initialCompile),2),T=E[0],I=E[1];c.useEffect((function(){S.setValue(i)}),[i]),c.useEffect((function(){I(null!==o&&void 0!==o?o:"")}),[o]);var A=(0,k.Y)("",(function(e){if(!e)return{message:"Choose an entry point file"}})),P=V(c.useState(Boolean(n&&!l)),2),N=P[0],R=P[1];c.useEffect((function(){R(Boolean(n&&!l))}),[n,l]);var z=(0,w.K)("a"),B=V(c.useState([]),2),D=B[0],U=B[1],L=(0,_.Z)(),M=(0,X.u)();return c.useEffect((function(){M&&L.current&&U(M)}),[L,M]),(0,a.BX)("form",{onSubmit:function(t){t.preventDefault(),e.setIsApplyingConfig(!0),S.value||N?e.onSubmit({run:S.value,compile:null!==T&&void 0!==T?T:"",entry:A.value,deleteInterp:!N,onDone:e.closeConfigPane,runChanged:S.value!==i,compileChanged:T!==o,projType:e.projType}):S.validate()},css:[y.l0.maxWidth(400),{width:"100%"}],children:[(0,a.BX)(w.Z,{css:[y.l0.colWithGap(8)],children:[n?(0,a.tZ)(w.Z,{css:[y.l0.pb(16)],children:(0,a.BX)(C.hE,{disabled:h,name:"interpreterView",value:N.toString(),row:!0,onChange:function(){return R((function(e){return!e}))},stretch:!0,primary:!0,children:[(0,a.tZ)(C.rK,{id:"interpreterFalse",value:"false",text:"Use run command"}),(0,a.tZ)(C.rK,{id:"interpreterTrue",value:"true",text:"Use default interpreter"})]})}):null,(0,a.BX)(w.Z,{css:[y.l0.height(e.initialCompile?210:170),y.l0.colWithGap(8)],children:[N?null:(0,a.BX)(w.Z,{css:[y.l0.maxWidth(400),y.l0.colWithGap(8)],children:[e.initialCompile?(0,a.BX)(w.Z,{css:[y.l0.colWithGap(4)],children:[(0,a.tZ)("label",{htmlFor:"compile-sel",children:"Configure the Compile Command"}),(0,a.tZ)(f.x,{multiline:!0,variant:"small",color:"dimmest",children:"This is optional, and is executed before your run command."}),(0,a.tZ)(d.ZP,{disabled:h,id:"compile-sel",type:"text",value:T,placeholder:"Enter a command to compile the program",onChange:function(e){I(e.currentTarget.value)},css:{"&:disabled":{color:y.TV.foregroundDimmer}}})]}):null,(0,a.tZ)("label",{htmlFor:"run-sel",css:[y.l0.mt(4)],children:"Configure the Run Command"}),(0,a.tZ)(d.ZP,{disabled:h,id:"run-sel",type:"text",value:S.value,placeholder:"Enter a command to run the program",onChange:function(e){S.setValue(e.currentTarget.value)},css:[{"&:disabled":{color:y.TV.foregroundDimmer,cursor:"auto"},cursor:"text"}]}),u?(0,a.BX)(f.x,{multiline:!0,variant:"small",color:"dimmest",children:["We detected this is a Rails project. You will need",(0,a.BX)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.replit.com/misc/rails-on-replit",children:[" ","additional changes"," "]}),"to your config files to use all of Replit\u2019s features."]}):null,S.error||!S.value?(0,a.BX)(w.Z,{css:[y.l0.color.accentNegativeDefault,y.l0.rowWithGap(4),y.l0.align.center],children:[(0,a.tZ)(Z.Z,{size:12}),(0,a.tZ)(w.Z,{children:S.error?S.error.message:"Add a run command"})]}):null]}),N?(0,a.BX)(w.Z,{css:[{maxWidth:400},y.l0.colWithGap(8)],children:[(0,a.tZ)("label",{htmlFor:"entry-sel",children:"Configure entry point"}),(0,a.tZ)(f.x,{variant:"small",css:[y.l0.color.foregroundDimmest],multiline:!0,children:"The entry point is the file that\u2019s run by default and shown first."}),0!==D.length?(0,a.tZ)(O.Z,H({id:"config-selector",onSelect:A.setValue,onInit:A.setValue,options:D},D.length&&Boolean(M)&&{initialSelectedOption:D[0]},{disabled:h})):(0,a.tZ)(d.ZP,{disabled:h,id:"entry-sel",type:"text",value:A.value,placeholder:"Choose entry point file",onChange:function(e){A.setValue(e.currentTarget.value)},css:[x.gU.filled,{cursor:"text"}]}),A.error?(0,a.BX)(w.Z,{css:[{color:"var(--accent-negative-default)"},y.l0.rowWithGap(4),y.l0.align.center],children:[(0,a.tZ)(Z.Z,{size:12}),(0,a.tZ)(w.Z,{children:A.error.message})]}):null]}):null,(0,a.tZ)(z,{css:[y.l0.color.accentPrimaryStronger,{fontWeight:y.TV.fontWeightMedium}],target:"_blank",href:"https://docs.replit.com/programming-ide/running-github-repositories-replit",rel:"noopener noreferrer",children:"Not sure what to do?"}),(0,a.tZ)(w.Z,{css:[y.l0.flex.row,y.l0.pt(16)],children:(0,a.tZ)(p.ZP,{colorway:"primary",outlined:!0,type:"submit",text:h?"Saving...":"Done",disabled:h||!N&&(Boolean(S.error)||!S.value),css:[x.gU.filledAndOutlined,{fontWeight:y.TV.fontWeightMedium,color:y.TV.accentPrimaryStronger}]})})]})]}),(0,a.tZ)(b.Z,{isOpen:!1,preventClose:!0,onRequestClose:function(){},children:(0,a.tZ)(w.Z,{css:[y.l0.borderRadius(16),y.l0.p(32),{backgroundColor:"var(--background-default)"}],children:(0,a.BX)(g.gC,{align:"center",spacing:1,children:[(0,a.tZ)(v.Z,{}),(0,a.BX)(f.x,{children:["Upgrading to ",s().get(j).displayName]})]})})})]})}function q(){return(0,a.BX)(w.Z,{children:[(0,a.tZ)(w.Z,{children:".replit looks a lil messed up :/"}),(0,a.tZ)("a",{css:[y.l0.pt(8),{fontSize:y.TV.fontSizeSmall}],target:"_blank",href:"https://docs.replit.com/programming-ide/configuring-repl",children:"View docs"})]})}function Y(){return(0,a.tZ)(w.Z,{children:(0,a.BX)("p",{children:["Initializing run configuration",(0,a.tZ)(u.Z,{style:{color:"var(--foreground-default)"}})]})})}var Q=function(e){var t,n=(0,E.Z)(),i=(0,m.Z)(),l=i.fs,s=i.dotReplit,u=V((0,h.Fn2)(),1)[0],d=(0,_.Z)(),f=(0,h.HmU)({variables:{replId:n}}),p="Repl"===(null===(t=f.data)||void 0===t?void 0:t.repl.__typename)?f.data.repl:null,b=e.useReadFile(l,S.l),v=V(c.useState(!1),2),g=v[0],y=v[1],x=b&&!b.error?b.content.toString("utf8"):"",w=V(c.useState(""),2),k=w[0],Z=w[1],j=V(c.useState(""),2),C=j[0],O=j[1],T=V(c.useState(!1),2),I=T[0],A=T[1],P=V(c.useState(r.Unknown),2),N=P[0],R=P[1],X=V(c.useState(!1),2),M=X[0],F=X[1];c.useEffect((function(){function e(){return e=G(o().mark((function e(){var t,n,i,a,c,u,f,p,h,m,b,v,g,y,x,w,k,j,S;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,s.getConfig();case 3:if(c=e.sent,u=c.config,!c.error){e.next=8;break}return e.abrupt("return");case 8:return p=null!==(f=null===(t=u.run)||void 0===t||null===(n=t.args)||void 0===n?void 0:n.join(" "))&&void 0!==f?f:"",m=null!==(h=null===(i=u.compile)||void 0===i||null===(a=i.args)||void 0===a?void 0:a.join(" "))&&void 0!==h?h:"",b=Boolean(u.compile),v=Boolean(u.interpreter),e.next=16,l.listFiles();case 16:if(g=e.sent,d.current){e.next=19;break}return e.abrupt("return");case 19:if(null==g.error&&null!=g.files&&0!==g.files.length){e.next=21;break}return e.abrupt("return");case 21:y=g.files,x=z(p,b,y),w=x.projType,k=x.runCommand,j=x.compileCommand,S=null!==j&&void 0!==j?j:m,Z(null!==k&&void 0!==k?k:p),O(S),A(w!==r.Unknown&&w!==r.RegularRun),R(w),F(v);case 31:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}x&&function(){e.apply(this,arguments)}()}),[x,d]),c.useEffect((function(){(0,B.j)(B.U3.NIX_GH_IMPORT_USED,{action:D.D.ImportEnded,replId:n})}),[n]);var W=(0,U.Z)();c.useEffect((function(){W(!1)}),[]);var H=function(){var e=G(o().mark((function e(t){var r,i,a,c,d,f,p,h,m,b;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.run,i=t.compile,a=t.entry,c=t.deleteInterp,d=t.onDone,f=t.runChanged,p=t.compileChanged,h=t.projType,(0,B.j)(B.U3.NIX_GH_IMPORT_USED,{action:D.D.ConfigDone,interpUsed:!c,isCompiled:""!==i,runChanged:f,compileChanged:p,projType:h,replId:n}),m=(0,L.createDotReplitEditOps)(r,a,i,c),e.next=5,s.updateDotReplit(m);case 5:return e.next=7,l.flush();case 7:return e.next=9,l.persist({skipDebounce:!0});case 9:return b={id:n},e.next=12,u({variables:{input:b}});case 12:d();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return p&&b?(null===b||void 0===b?void 0:b.error)?(0,a.tZ)(K,{children:(0,a.tZ)(q,{})}):(0,a.tZ)(K,{children:(0,a.tZ)($,{initialLanguage:"",initialRun:k,initialCompile:C,hasInterpreter:M,fs:l,isApplyingConfig:g,setIsApplyingConfig:y,onSubmit:H,isFrameworkRecommended:I,projType:N,closeConfigPane:e.closeConfigPane})}):(0,a.tZ)(K,{children:(0,a.tZ)(Y,{})})}},90020:function(e,t,n){n.d(t,{Z:function(){return I}});var r=n(35944),i=n(67294),o=n(54929),a=n(3204),c=n(24506),l=n(27291),s=n(85060),u=n(88503),d=n(48015),f=n(96594);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e){var t,n=e.options,r=e.initialSelectedOption,o=e.inputRef,a=e.setInputValue,c=m(i.useState(""),2),l=c[0],s=c[1],u=(t={options:n,filter:l},i.useMemo((function(){return t.filter?d.Z.filter(t.filter.toLowerCase(),t.options).map((function(e){return e.original})):t.options}),[t.options,t.filter])),p=(0,f.Kb)({items:u,initialHighlightedIndex:0,initialSelectedItem:r,stateReducer:function(e,t){var n,r,i=t.type,c=t.changes;(i===f.Kb.stateChangeTypes.ItemClick||i===f.Kb.stateChangeTypes.InputKeyDownEnter&&c.selectedItem)&&(null===(n=o.current)||void 0===n||n.blur());return i!==f.Kb.stateChangeTypes.InputBlur||c.selectedItem?i===f.Kb.stateChangeTypes.InputBlur&&c.selectedItem?(a(null!==(r=c.selectedItem)&&void 0!==r?r:""),c):c:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}({},c,{isOpen:!0})}});return{filteredOptions:u,combobox:p,setFilter:s,filter:l}}var v=n(67938),g=n(50553),y=n(70917),x=n(79162),w=n(45718),k=n(89957);function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){j(e,t,n[t])}))}return e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var C=(0,y.iv)([a.l0.py(8),a.l0.pl(8),a.l0.pr(32),{color:"inherit",outline:"0 none",border:"1px solid",fontSize:"inherit",lineHeight:a.TV.space16,display:"block",width:"100%","::placeholder, :disabled":{color:a.TV.foregroundDimmer,borderColor:"transparent"},cursor:"text"}]),_=(0,y.iv)({border:"none",background:"transparent",color:"inherit",font:"inherit",lineHeight:"normal"}),O=(0,y.iv)([_,c.gU.listItem,a.l0.borderRadius(8),a.l0.center,{width:24,height:24}]),T=(0,o.K)("button");function I(e){var t=e.id,n=e.onSelect,c=e.onInit,d=e.options,f=e.initialSelectedOption,p=e.placeholderText,h=e.autoFocus,m=e.disabled,y=i.useRef(null),Z=E(i.useState(null!==f&&void 0!==f?f:""),2),j=Z[0],_=Z[1],I=b({options:d,initialSelectedOption:f,inputRef:y,setInputValue:_}),P=I.filteredOptions,N=I.filter,R=I.combobox,z=I.setFilter,B=(0,l.Z)(n),D=(0,l.Z)(c);return i.useEffect((function(){f&&(D.current(f),_(f),z(""))}),[f]),(0,s.Z)((function(){var e;R.selectedItem&&(null===(e=y.current)||void 0===e||e.blur(),B.current(R.selectedItem),_(R.selectedItem),z(""))}),[R.selectedItem,B]),i.useEffect((function(){f&&(R.selectItem(f),_(f),z(""))}),[f]),(0,r.BX)(o.Z,{children:[(0,r.tZ)("div",S({},R.getComboboxProps(),{children:(0,r.BX)(o.Z,{css:[a.l0.flex.row,{position:"relative"}],children:[(0,r.tZ)(o.Z,{css:[a.l0.flex.growAndShrink(1)],children:(0,r.tZ)(k.ZP,S({},R.getInputProps({id:t,spellCheck:!1,autoFocus:h,onChange:function(e){z(e.currentTarget.value.toLowerCase()),_(e.currentTarget.value)},ref:y,onFocus:function(e){R.openMenu(),e.currentTarget.select()}}),{value:j,placeholder:null!==f&&void 0!==f?f:p,css:[C],disabled:m}))}),m?null:(0,r.tZ)(o.Z,{css:[{position:"absolute",top:0,right:0,height:"100%"},a.l0.center],children:(0,r.tZ)(T,S({},R.getToggleButtonProps(),{css:O,type:"button",children:R.inputValue&&!R.isOpen?(0,r.tZ)(g.Z,{}):(0,r.tZ)(u.Z,{})}))})]})})),(0,r.BX)("div",S({},R.getMenuProps(),{css:{position:"relative"},children:[R.isOpen&&P.length?(0,r.tZ)(x.Z,{children:(0,r.tZ)("ul",{css:[a.l0.pt(4),a.l0.pb(8)],children:P.map((function(e,t){return(0,r.tZ)("li",S({},R.getItemProps({item:e,index:t}),{children:(0,r.tZ)(w.Z,S({},A(e),{filter:N,selected:R.selectedItem===e,highlighted:R.highlightedIndex===t}))}),e.toLowerCase())}))})}):null,N&&!P.length&&R.isOpen?(0,r.tZ)(x.Z,{children:(0,r.tZ)(o.Z,{css:[a.l0.p(16),a.l0.colWithGap(4)],children:(0,r.BX)(v.x,{color:"dimmer",children:['No results for "',N,'"']})})}):null]}))]})}function A(e){return{title:e,key:e.toLowerCase()}}},67472:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(35944),i=n(67294),o=n(88768),a=n(1517),c=n(98647),l=n(5560),s=n(60818),u=n(67289),d=n(4590),f=n(71841),p=n(92432),h=n(23139),m=n(52697);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function x(e){var t,n,i,a,c=e.style,s=e.activeFile,u=(0,l.Z)(),d=(0,o.r8C)({variables:{replID:u},pollInterval:1e4}),f=d.data,p=d.error,m=d.loading;f&&("Repl"===f.repl.__typename?i=null===f||void 0===f||null===(a=f.repl)||void 0===a?void 0:a.database:n="Could not fetch Database info");p&&("GraphQL error: You don't have access to this database"===p.message?i=null:n=p.message);var b=null===f||void 0===f||null===(t=f.currentUser)||void 0===t?void 0:t.isLoggedIn;return(0,r.BX)(h.G7,{css:[c,h.l0.colWithGap(16),h.l0.backgroundColor.backgroundDefault,h.l0.p(8),h.l0.borderRadius(0,4,4,0)],children:[(0,r.tZ)(h.h4,{level:2,variant:"subheadBig",children:"Database"}),(0,r.tZ)(h.G7,{css:[h.l0.colWithGap(16),{overflowY:"auto",width:"100%",flex:"1"}],children:b?(0,r.BX)(r.HY,{children:[(0,r.BX)(h.xv,{multiline:!0,children:[(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/database-faq",target:"_blank",rel:"noopener",css:[h.l0.color.accentPrimaryStronger,h.l0.pr(4)],children:"Replit Database"}),"is an easy to use key-value store."]}),n&&(0,r.tZ)(h.xv,{multiline:!0,css:[h.l0.color.accentNegativeStronger],children:n}),(i||m)&&(0,r.tZ)(h.G7,{css:[h.l0.pb(16)],children:(0,r.tZ)(w,{database:i,loading:m})}),!m&&(0,r.BX)(h.G7,{css:[h.l0.colWithGap(8)],children:[(0,r.tZ)(h.xv,{variant:"small",css:{textTransform:"uppercase",fontWeight:h.TV.fontWeightMedium},children:"commands"}),(0,r.tZ)(k,{activeFile:s})]})]}):(0,r.tZ)(A,{})}),(0,r.tZ)(I,{})]})}var w=function(e){var t=e.database;if(e.loading)return(0,r.tZ)(a.Z,{style:{margin:"10px auto",width:"35px",height:"35px"}});if(!t)return null;var n=t.sizeMB||0,i="MB";return n<1&&(n*=1e3,i="KB"),(0,r.BX)(h.G7,{css:[h.l0.colWithGap(8)],children:[(0,r.tZ)(h.xv,{variant:"small",css:{textTransform:"uppercase",fontWeight:h.TV.fontWeightMedium},children:"storage"}),(0,r.BX)(h.G7,{css:[h.l0.rowWithGap(4)],children:[(0,r.BX)(h.xv,{color:"dimmer",children:[n.toFixed(2)," ",i]}),(0,r.tZ)(h.xv,{color:"dimmer",children:"|"}),(0,r.tZ)(h.xv,{color:"dimmer",children:"".concat(t.keysCount||0," ").concat(1===t.keysCount?"key":"keys")})]})]})},k=function(e){var t=e.activeFile,n=(0,r.tZ)(T,{activeFile:t});if(t)switch((0,u.r6)(t)){case"go":n=(0,r.tZ)(O,{examples:C,activeFile:t});break;case"js":case"ts":case"tsx":case"jsx":case"mjs":n=(0,r.tZ)(O,{examples:_,activeFile:t});break;case"py":n=(0,r.tZ)(O,{examples:E,activeFile:t})}return(0,r.tZ)(h.G7,{css:[h.l0.colWithGap(8)],children:n})},Z=function(e){var t=e.title,n=e.content,o=e.activeFile,a=v(i.useState(n),2),c=a[0],l=a[1],s=v(function(){var e=t.split(" ");return[e[0],e.slice(1).join(" ")]}(),2),u=s[0],d=s[1];return(0,r.BX)(h.G7,{css:[h.l0.colWithGap(4)],children:[(0,r.BX)(h.G7,{css:[h.l0.rowWithGap(4)],children:[(0,r.tZ)(h.xv,{css:{fontWeight:h.TV.fontWeightMedium},children:u}),(0,r.tZ)(h.xv,{color:"dimmer",children:d})]}),(0,r.BX)(h.G7,{css:[h.l0.colWithGap(4),{width:"fit-content"}],children:[(0,r.tZ)(h.G7,{css:[h.l0.rowWithGap(4),h.l0.backgroundColor.backgroundRoot,h.l0.borderRadius(4),h.l0.p(4),h.l0.align.center],children:n.map((function(e,n){return"input"===e.type?(0,r.tZ)(h.II,{onChange:function(e){var t=g(c);t[n].value=e.target.value,l(t)},placeholder:e.placeholder,value:e.value||"",css:[h.l0.width(64),h.l0.height(24),h.l0.zIndex(1)]},"".concat(t,"-").concat(n)):(0,r.tZ)(h.G7,{css:[h.l0.borderRadius(4),h.l0.backgroundColor.backgroundRoot,h.l0.font.code,h.l0.color.accentNegativeStronger],children:e.value},"".concat(t,"-").concat(n))}))}),(0,r.tZ)(j,{code:c.reduce((function(e,t){return"input"===t.type?e+(t.value||t.placeholder):e+t.value}),""),activeFile:o})]})]})},j=function(e){var t=e.code,n=e.activeFile,i=(0,s.Z)(n);return i?(0,r.tZ)(h.Tg,{background:"default",children:(0,r.tZ)(h.zx,{small:!0,outlined:!0,onClick:function(){i({code:t})},text:"Insert",iconRight:(0,r.tZ)(p.Z,{}),css:{width:"fit-content"}})}):(0,r.tZ)(h.Tg,{background:"default",children:(0,r.tZ)(h.zx,{small:!0,outlined:!0,onClick:function(){return(0,c.Z)(t)},text:"Copy",iconLeft:(0,r.tZ)(f.Z,{}),css:{width:"fit-content"}})})},S=[{title:"Set a key to a value",content:[{type:"code",value:"curl $REPLIT_DB_URL -d '"},{type:"input",placeholder:"key"},{type:"code",value:"="},{type:"input",placeholder:"value"},{type:"code",value:"'"}]},{title:"Get a key's value",content:[{type:"code",value:"curl $REPLIT_DB_URL/"},{type:"input",placeholder:"key"}]},{title:"Delete a key",content:[{type:"code",value:"curl -XDELETE $REPLIT_DB_URL/"},{type:"input",placeholder:"key"}]},{title:"List all keys",content:[{type:"code",value:'curl "$REPLIT_DB_URL?prefix='},{type:"input",placeholder:"key"},{type:"code",value:'"'}]}],E=[{title:"Import the database",content:[{type:"code",value:"from replit import db"}]},{title:"Set a key to a value",content:[{type:"code",value:'db["'},{type:"input",placeholder:"key"},{type:"code",value:'"] = "'},{type:"input",placeholder:"value"},{type:"code",value:'"'}]},{title:"Get a key's value",content:[{type:"code",value:'value = db["'},{type:"input",placeholder:"key"},{type:"code",value:'"]'}]},{title:"Delete a key",content:[{type:"code",value:'del db["'},{type:"input",placeholder:"key"},{type:"code",value:'"]'}]},{title:"List all keys",content:[{type:"code",value:"keys = db.keys()"}]},{title:"List keys with a prefix",content:[{type:"code",value:'matches = db.prefix("'},{type:"input",placeholder:"prefix"},{type:"code",value:'")'}]}],C=[{title:"Import the database",content:[{type:"code",value:'import "github.com/replit/database-go"'}]},{title:"Set a key to a value",content:[{type:"code",value:'database.Set("'},{type:"input",placeholder:"key"},{type:"code",value:'", "'},{type:"input",placeholder:"value"},{type:"code",value:'")'}]},{title:"Get a key's value",content:[{type:"code",value:'value, _ := database.Get("'},{type:"input",placeholder:"key"},{type:"code",value:'")'}]},{title:"Delete a key",content:[{type:"code",value:'database.Delete("'},{type:"input",placeholder:"key"},{type:"code",value:'")'}]},{title:"List all keys",content:[{type:"code",value:'keys, _ := database.ListKeys("")'}]},{title:"List keys with a prefix",content:[{type:"code",value:"matches, _ := database.ListKeys("},{type:"input",placeholder:"prefix"},{type:"code",value:'")'}]}],_=[{title:"Import the database",content:[{type:"code",value:'const Database = require("@replit/database")'}]},{title:"Create a new database",content:[{type:"code",value:"const db = new Database()"}]},{title:"Set a key to a value",content:[{type:"code",value:'db.set("'},{type:"input",placeholder:"key"},{type:"code",value:'", "'},{type:"input",placeholder:"value"},{type:"code",value:'").then(() => {});'}]},{title:"Get a key's value",content:[{type:"code",value:'db.get("'},{type:"input",placeholder:"key"},{type:"code",value:'").then(value => {});'}]},{title:"Delete a key",content:[{type:"code",value:'db.delete("'},{type:"input",placeholder:"key"},{type:"code",value:'").then(() => {});'}]},{title:"List all keys",content:[{type:"code",value:"db.list().then(keys => {});"}]},{title:"List keys with a prefix",content:[{type:"code",value:'db.list("'},{type:"input",placeholder:"prefix"},{type:"code",value:'").then(matches => {});'}]}],O=function(e){var t=e.examples,n=e.activeFile;return(0,r.tZ)(h.G7,{css:[h.l0.colWithGap(24)],children:t.map((function(e,t){return(0,r.tZ)(Z,{title:e.title,content:e.content,activeFile:n},t)}))})},T=function(e){var t=e.activeFile;return(0,r.tZ)(r.HY,{children:(0,r.BX)(h.G7,{css:[h.l0.colWithGap(24)],children:[(0,r.BX)(h.G7,{css:[h.l0.rowWithGap(4),{flexWrap:"wrap"}],children:[(0,r.tZ)(h.xv,{color:"dimmer",multiline:!0,children:"We\u2019ve set an environment variable called"}),(0,r.tZ)(h.G7,{css:[h.l0.borderRadius(4),h.l0.backgroundColor.backgroundRoot,h.l0.font.code,h.l0.color.accentNegativeStronger,h.l0.p(4)],children:"REPLIT_DB_URL"}),(0,r.tZ)(h.xv,{color:"dimmer",multiline:!0,children:"in your Repl."})]}),S.map((function(e,n){return(0,r.tZ)(Z,{title:e.title,content:e.content,activeFile:t},n)})),(0,r.tZ)(h.xv,{color:"dimmer",multiline:!0,children:"You can use the Database from any Repl by making HTTP requests similar to those above. We have language clients for Python, Go, and Node, switch to a file that uses that language to see how to use the client."})]})})},I=function(){return(0,r.tZ)(h.G7,{css:[h.l0.pt(8)],children:(0,r.tZ)(h.ZP,{href:"https://replit.com/talk/announcements/Replit-Database-feedback/51085",iconLeft:(0,r.tZ)(m.Z,{}),text:"Send feedback",outlined:!0,colorway:"primary",target:"_blank",rel:"noopener",small:!0,css:{width:"fit-content"}})})},A=function(){return(0,r.BX)(h.G7,{css:[h.l0.colWithGap(16)],children:[(0,r.BX)(h.xv,{multiline:!0,children:[(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/database-faq",target:"_blank",rel:"noopener",css:[h.l0.color.accentPrimaryStronger,h.l0.pr(4)],children:"Replit Database"}),"is the fastest and easiest way to store data from your Repl. Try it out by logging in or signing up."]}),(0,r.tZ)(h.ZP,{href:"/signup",colorway:"primary",text:"Sign up",iconLeft:(0,r.tZ)(d.Z,{})})]})}},4368:function(e,t,n){n.d(t,{Z:function(){return K}});var r=n(35944),i=n(79547),o=n.n(i),a=n(67294),c=n(8996),l=n(40425),s=n(30617),u=n(31284),d=n(51281),f=n(6763);function p(e){return(0,r.BX)(r.HY,{children:[(0,r.tZ)(l.Z,{truncate:!0,level:5,children:"Call stack"}),(0,r.tZ)(c.gC,{align:"stretch",constrainWidth:!0,children:e.frames.map((function(t){return(0,r.tZ)(h,{frame:t,onClick:e.onFrameClick},t.id)}))})]})}function h(e){var t,n,i=e.frame,a=e.onClick,c=null===(t=i.source)||void 0===t?void 0:t.name,l=null===(n=i.source)||void 0===n?void 0:n.path,s=c&&(0,f.om)(c),u=l&&(0,f.om)(l),d=l&&(0,f.IT)(l);return(0,r.BX)(r.HY,{children:[(0,r.BX)("div",{onClick:function(){return d&&a(d,i.line)},className:"jsx-c66d0af1ad52f929 frame",children:[(0,r.tZ)("div",{className:"jsx-c66d0af1ad52f929 label name",children:i.name}),(0,r.BX)("div",{className:"jsx-c66d0af1ad52f929 label path",children:[(0,r.tZ)("span",{className:"jsx-c66d0af1ad52f929 line",children:i.line}),s||u||c||l]})]}),(0,r.tZ)(o(),{id:"c66d0af1ad52f929",children:".frame.jsx-c66d0af1ad52f929{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;max-width:100%;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-small);font-family:var(--font-family-code)}.frame.jsx-c66d0af1ad52f929:hover{background-color:var(--background-higher);color:var(--foreground-default)}.label.jsx-c66d0af1ad52f929{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.name.jsx-c66d0af1ad52f929{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;background-color:var(--background-higher);padding:1px 2px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.path.jsx-c66d0af1ad52f929{-webkit-box-flex:0;-webkit-flex:0 1 auto;-moz-box-flex:0;-ms-flex:0 1 auto;flex:0 1 auto}.line.jsx-c66d0af1ad52f929{display:inline-block;margin-right:var(--space-8);background-color:var(--background-higher);padding:1px 2px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}"})]})}var m=n(89431),b=n(57541),v=n(58458),g=n(94184),y=n.n(g),x=n(50553);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e){var t=[],n=(0,m.Z)("flag-debugger-v2"),i=!0,a=!1,s=void 0;try{for(var u,d=e.breakpoints[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var f=k(u.value,2),p=f[0],h=f[1],b=!0,g=!1,y=void 0;try{for(var x,w=h[Symbol.iterator]();!(b=(x=w.next()).done);b=!0){var Z=x.value;t.push((0,r.tZ)(j,{breakpoint:Z,file:p,line:Z.line,verified:Z.verified,supportsLogPoints:n,logMessage:Z.logMessage,onClick:e.onBreakpointClick,onUpdate:e.onUpdate},"".concat(p,":").concat(Z.line,":").concat(Z.pid1Id,":").concat(Z.dapId)))}}catch(S){g=!0,y=S}finally{try{b||null==w.return||w.return()}finally{if(g)throw y}}}}catch(S){a=!0,s=S}finally{try{i||null==d.return||d.return()}finally{if(a)throw s}}return(0,r.BX)(r.HY,{children:[(0,r.tZ)(l.Z,{truncate:!0,level:5,children:"Breakpoints"}),t.length>0?(0,r.tZ)(c.gC,{align:"stretch",constrainWidth:!0,children:t}):(0,r.BX)(v.Z,{size:"xsmall",foreground:2,children:["To start, add a breakpoint ",(0,r.tZ)("span",{className:"jsx-223474dbb82a953c breakpoint"})," by clicking on the line number.",(0,r.tZ)(o(),{id:"223474dbb82a953c",children:".breakpoint.jsx-223474dbb82a953c{display:inline-block;background-color:var(--accent-primary-default);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:8px;height:8px}"})]})]})}function j(e){var t=e.breakpoint,n=e.file,i=e.line,l=e.verified,s=e.supportsLogPoints,u=e.logMessage,p=e.onClick,h=e.onUpdate,m=(0,f.om)(n),v=k(a.useState(Boolean(u)),2),g=v[0],w=v[1],Z=k(a.useState(null!==u&&void 0!==u?u:""),2),j=Z[0],S=Z[1];return(0,r.BX)(r.HY,{children:[(0,r.BX)(c.gC,{spacing:1,align:"stretch",children:[(0,r.BX)("div",{className:"jsx-dc2453dcc3d392c8 breakpoint",children:[(0,r.BX)("div",{onClick:function(){p(n,i)},className:"jsx-dc2453dcc3d392c8 frame",children:[(0,r.tZ)("div",{className:"jsx-dc2453dcc3d392c8 "+(y()("circle",{verified:l})||"")}),(0,r.tZ)("div",{className:"jsx-dc2453dcc3d392c8 line",children:i}),(0,r.tZ)("div",{className:"jsx-dc2453dcc3d392c8 location",children:(0,r.tZ)("span",{className:"jsx-dc2453dcc3d392c8 path",children:m||n})})]}),s&&(0,r.tZ)(x.Z,{size:16,className:"chevron",rotate:g?180:0,onClick:function(){return w(!g)}})]}),g&&(0,r.BX)(c.gC,{spacing:1,align:"stretch",children:[(0,r.tZ)(b.ZP,{label:"log message",name:"logMessage",value:j,onChange:function(e){return S(e.currentTarget.value)},spellCheck:!1}),(0,r.tZ)(d.Z,{onClick:function(){return h({breakpoint:t,logMessage:j})},children:"Save"})]})]}),(0,r.tZ)(o(),{id:"dc2453dcc3d392c8",children:".breakpoint.jsx-dc2453dcc3d392c8{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;max-width:100%;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.frame.jsx-dc2453dcc3d392c8{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-default)}.frame.jsx-dc2453dcc3d392c8:hover{background-color:var(--background-higher);color:var(--foreground-default)}.circle.jsx-dc2453dcc3d392c8{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;background-color:var(--accent-primary-default);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:11px;height:11px;margin-left:var(--space-8);margin-right:var(--space-8);opacity:.5}.verified.jsx-dc2453dcc3d392c8{opacity:1}.line.jsx-dc2453dcc3d392c8{font-family:var(--font-family-code);background-color:var(--background-higher);padding:1px 2px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.location.jsx-dc2453dcc3d392c8{font-family:var(--font-family-code);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8)}.path.jsx-dc2453dcc3d392c8{overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.chevron.jsx-dc2453dcc3d392c8{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;padding:var(--space-16)}"})]})}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e){var t=E(a.useState(!1),2),n=t[0],i=t[1],o=[],s=[];if(e.variables.length>0){var u=e.variables[0].parentVariableReference,f=!0,p=!1,h=void 0;try{for(var m,b=e.variables[Symbol.iterator]();!(f=(m=b.next()).done);f=!0){var v=m.value;v.parentVariableReference===u?o.push(v):s.push(v)}}catch(g){p=!0,h=g}finally{try{f||null==b.return||b.return()}finally{if(p)throw h}}}return(0,r.BX)(r.HY,{children:[(0,r.tZ)(l.Z,{truncate:!0,level:5,children:"Variables"}),(0,r.BX)(c.gC,{align:"stretch",constrainWidth:!0,children:[o.map((function(t){return(0,r.tZ)(_,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)})),s.length>0&&(0,r.BX)(r.HY,{children:[(0,r.BX)(d.Z,{filled:!1,border:!1,onClick:function(){return i((function(e){return!e}))},children:["See ",n?"Less":"More"]}),n&&s.map((function(t){return(0,r.tZ)(_,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)}))]})]})]})}function _(e){var t=e.depth,n=e.variable,i=e.client,l=E(a.useState(!1),2),s=l[0],u=l[1],d=E(a.useState([]),2),f=d[0],p=d[1];return a.useEffect((function(){s&&i.fetchVariables(n.variablesReference).then((function(e){return p(e)}),(function(){return u(!1)}))}),[s,i,n.variablesReference]),(0,r.BX)(r.HY,{children:[(0,r.BX)("div",{onClick:function(){n.variablesReference>0&&u((function(e){return!e}))},className:o().dynamic([["ccf0fe08500d61b6",[s?0:-90,t]]])+" variable",children:[(0,r.tZ)("div",{className:o().dynamic([["ccf0fe08500d61b6",[s?0:-90,t]]])+" gutter",children:n.variablesReference>0?(0,r.tZ)("div",{className:o().dynamic([["ccf0fe08500d61b6",[s?0:-90,t]]])+" chevron",children:(0,r.tZ)(x.Z,{})}):null}),(0,r.BX)("div",{className:o().dynamic([["ccf0fe08500d61b6",[s?0:-90,t]]])+" label",children:[n.name,n.type&&(0,r.BX)("span",{className:o().dynamic([["ccf0fe08500d61b6",[s?0:-90,t]]])+" type",children:[" ",n.type]}),""!==n.value&&": "]}),(0,r.tZ)("div",{className:o().dynamic([["ccf0fe08500d61b6",[s?0:-90,t]]])+" label value",children:n.value})]}),s?(0,r.tZ)(c.gC,{align:"stretch",constrainWidth:!0,children:f.map((function(e){return(0,r.tZ)(_,{depth:t+1,variable:e,client:i},e.parentVariableReference+"/"+e.name)}))}):null,(0,r.tZ)(o(),{id:"ccf0fe08500d61b6",dynamic:[s?0:-90,t],children:".chevron.__jsx-style-dynamic-selector{-webkit-transform:rotate(".concat(s?0:-90,"deg);-moz-transform:rotate(").concat(s?0:-90,"deg);-ms-transform:rotate(").concat(s?0:-90,"deg);-o-transform:rotate(").concat(s?0:-90,"deg);transform:rotate(").concat(s?0:-90,"deg);-webkit-transition:.1s -webkit-transform;-moz-transition:.1s -moz-transform;-o-transition:.1s -o-transform;transition:.1s -webkit-transform;transition:.1s -moz-transform;transition:.1s -o-transform;transition:.1s transform}.gutter.__jsx-style-dynamic-selector{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;width:var(--space-16);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.variable.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-default);padding-left:-webkit-calc(").concat(t," * var(--space-16));padding-left:-moz-calc(").concat(t," * var(--space-16));padding-left:calc(").concat(t," * var(--space-16));font-family:var(--font-family-code)}.variable.__jsx-style-dynamic-selector:hover{background-color:var(--background-higher);color:var(--foreground-default)}.label.__jsx-style-dynamic-selector{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;-webkit-box-flex:1;-webkit-flex:1 0 auto;-moz-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto}.type.__jsx-style-dynamic-selector{opacity:.5}.value.__jsx-style-dynamic-selector{text-align:right;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1}")})]})}var O=n(21130),T=n(80286),I=n(64396),A=n(31758),P=n(63051),N=n(61036),R=n(1517),z=n(54929),B=n(3204),D=n(70917),U=n(56834),L=n(92944),X=n(87349);function M(e){var t=e.client,n=(0,u.Z)(null===t||void 0===t?void 0:t.state),i=(0,u.Z)(null===t||void 0===t?void 0:t.supportsStepBack);return(0,r.BX)(z.Z,{css:B.l0.rowWithGap(2),children:[i&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(O.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){(0,U.j)(U.U3.DEBUGGER_USED,{action:"lastBreakpoint"}),null===t||void 0===t||t.reverseContinue()},alt:"Last Breakpoint",tooltipText:"Last Breakpoint",tooltipPlacement:"bottom",children:(0,r.tZ)(T.Z,{})}),(0,r.tZ)(O.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){(0,U.j)(U.U3.DEBUGGER_USED,{action:"stepBack"}),null===t||void 0===t||t.back()},alt:"Step Back",tooltipText:"Step Back",tooltipPlacement:"bottom",children:(0,r.tZ)(I.Z,{})})]}),(0,r.tZ)(G,{stop:function(){(0,U.j)(U.U3.DEBUGGER_USED,{action:"stop"}),null===t||void 0===t||t.stop()},start:function(){(0,U.j)(U.U3.DEBUGGER_USED,{action:"start"}),null===t||void 0===t||t.start()},state:n}),(0,r.tZ)(O.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){(0,U.j)(U.U3.DEBUGGER_USED,{action:"nextStep"}),null===t||void 0===t||t.next()},alt:"Next Step",tooltipText:"Next Step",tooltipPlacement:"bottom",children:(0,r.tZ)(P.Z,{})}),(0,r.tZ)(O.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){(0,U.j)(U.U3.DEBUGGER_USED,{action:"skipStep"}),null===t||void 0===t||t.skip()},alt:"Skip Step",tooltipText:"Skip Step",tooltipPlacement:"bottom",children:(0,r.tZ)(A.Z,{rotate:90})}),(0,r.tZ)(O.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){(0,U.j)(U.U3.DEBUGGER_USED,{action:"nextBreakpoint"}),null===t||void 0===t||t.continue()},alt:"Next Breakpoint",tooltipText:"Next Breakpoint",tooltipPlacement:"bottom",children:(0,r.tZ)(N.Z,{})})]})}var F=(0,D.F4)({"0%":{opacity:.2},"50%":{opacity:1},"100%":{opacity:.2}});function G(e){var t=e.state,n=e.start,i=e.stop;return"terminated"===t?(0,r.tZ)(O.Z,{css:B.l0.color.accentPrimaryDefault,size:40,onClick:n,alt:"Run",tooltipText:"Run",tooltipPlacement:"bottom",children:(0,r.tZ)(X.Z,{})}):"stopping"===t||null===t?(0,r.tZ)(O.Z,{size:40,disabled:!0,alt:"Loading",tooltipText:"Loading",tooltipPlacement:"bottom",children:(0,r.tZ)(R.Z,{})}):(0,r.tZ)(O.Z,{css:"initializing"===t||"preinitializing"===t?[B.l0.color.foregroundDimmer,{animationName:F.toString(),animationDuration:"2s",animationIterationCount:"infinite"}]:B.l0.color.accentPrimaryDefault,size:40,onClick:i,alt:"Stop",tooltipText:"Stop",tooltipPlacement:"bottom",children:(0,r.tZ)(L.Z,{})})}var W=n(42650),H=n(66552);function V(e){var t=e.children;return(0,r.BX)(H.Z,{background:"default",css:[B.l0.height("100%"),B.l0.width("100%"),B.l0.p(8),B.l0.overflow("auto"),{borderTopRightRadius:B.TV.borderRadius4}],children:[(0,r.BX)(c.gC,{spacing:2,align:"stretch",justify:"center",constrainWidth:!0,children:[(0,r.BX)(c.Ug,{spacing:1,align:"center",justify:"space-between",constrainWidth:!0,children:[(0,r.tZ)(l.Z,{truncate:!0,level:4,children:"Debugger"}),(0,r.tZ)(W.Z,{link:"https://replit.com/support"})]}),(0,r.tZ)("a",{href:"https://replit.com/support",target:"_blank",rel:"noopener noreferrer",className:"jsx-ffa04cbdbbf3badd",children:"Send feedback"}),t]}),(0,r.tZ)(o(),{id:"ffa04cbdbbf3badd",children:"a.jsx-ffa04cbdbbf3badd{font-size:var(--font-size-default);color:var(--accent-primary-default);font-weight:var(--font-weight-medium)}"})]})}function K(e){var t=(0,s.Z)().debuggest,n=(0,u.Z)(t.mainClient),i=(0,u.Z)(n?n.state:null),a=(0,u.Z)(n?n.stackFrames:null),c=(0,u.Z)(n?n.variables:null),l=(0,u.Z)(n?n.breakpoints:null),h=function(t,n){var r=(0,f.om)(t);r&&e.onOpenFile({path:r,line:n})};return(0,r.BX)(V,{children:[(0,r.tZ)(M,{client:n}),l&&(0,r.tZ)(Z,{breakpoints:l,onBreakpointClick:h,onUpdate:function(e){var t=e.breakpoint,r=e.logMessage;n&&t.pid1Id&&n.updateBreakpoint(t.pid1Id,{logMessage:r})}}),c&&n&&"paused"===i&&(0,r.tZ)(C,{client:n,variables:c}),a&&"paused"===i&&(0,r.tZ)(p,{frames:a,onFrameClick:h}),n&&(0,r.tZ)("div",{className:"jsx-98cfff378e1e6f5f logs-button",children:(0,r.tZ)(d.Z,{size:"small",onClick:function(){return function(e){if("undefined"===typeof Blob)return;var t=new Blob([e],{type:"text/plain"}),n=document.createElement("a");n.download="debugger-logs.txt",n.href=URL.createObjectURL(t),n.dataset.downloadurl=["text/plain",n.download,n.href].join(":"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout((function(){URL.revokeObjectURL(n.href)}),1500)}(n.getDebugLogs())},children:"Download Logs"})}),(0,r.tZ)(o(),{id:"98cfff378e1e6f5f",children:".instructions.jsx-98cfff378e1e6f5f{height:var(--space-16)}.logs-button.jsx-98cfff378e1e6f5f{position:absolute;bottom:var(--space-8);right:var(--space-8)}"})]})}},37044:function(e,t,n){n.d(t,{Z:function(){return _}});var r=n(34051),i=n.n(r),o=n(35944),a=n(67294),c=n(80796),l=n(88457),s=n(88768),u=n(49337),d=n(39550),f=n(93770);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var m=function(e,t,n){var r;if(!e)return[];var i=t(e.getSceneElementsIncludingDeleted()),o=e.getAppState();return(r=n.reduce((function(e,t){var n,r,a;return t.id===(null===(n=o.editingElement)||void 0===n?void 0:n.id)||t.id===(null===(r=o.resizingElement)||void 0===r?void 0:r.id)||t.id===(null===(a=o.draggingElement)||void 0===a?void 0:a.id)||(i[t.id]&&i[t.id].version>t.version?(e.push(i[t.id]),delete i[t.id]):i[t.id]&&i[t.id].version===t.version&&i[t.id].versionNonce!==t.versionNonce?(i[t.id].versionNonce<t.versionNonce?e.push(i[t.id]):e.push(t),delete i[t.id]):(e.push(t),delete i[t.id])),e}),[])).concat.apply(r,h(Object.values(i)))},b=function(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n},v=n(54929),g=n(3204);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){x(o,r,i,a,c,"next",e)}function c(e){x(o,r,i,a,c,"throw",e)}a(void 0)}))}}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){k(e,t,n[t])}))}return e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function C(e){var t,r=e.fs,p=e.presence,h=e.broadcast,y=e.filePath,x=(0,a.useState)(void 0),k=x[0],E=x[1],C=(0,a.useRef)((function(e){return S(e)})),_=(0,a.useRef)((function(e){return-1})),O=(0,a.useRef)((function(e){return{}})),T=(0,a.useRef)({readyPromise:b()}),I=(0,a.useRef)({promise:null});(0,a.useEffect)((function(){Promise.all([n.e(2738),n.e(4474)]).then(n.t.bind(n,74474,23)).then((function(e){C.current=e.getSyncableElements,_.current=e.getSceneVersion,O.current=e.getElementMap,E(e.default)}))}),[]);var A=function(){return T.current},P=(0,s.K1s)({ssr:!1}),N=P.data,R=P.loading,z=(null===N||void 0===N||null===(t=N.currentUser)||void 0===t?void 0:t.username)||"",B=(0,l.Fg)(),D=(0,u.Z)({presence:p}),U=(0,d.Z)(),L=null===U||void 0===U?void 0:U.color,X=(0,a.useState)(new Map),M=X[0],F=X[1],G=(0,a.useState)(-1),W=G[0],H=G[1];(0,a.useEffect)((function(){function e(){return(e=w(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N&&N.currentUser){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,T.current.readyPromise;case 4:t=A().getAppState().collaborators,n=new Map,D.forEach((function(e){var r;if(e.username!==(null===N||void 0===N||null===(r=N.currentUser)||void 0===r?void 0:r.username)){var i=t.get(e.username)||{};n.set(e.username,Z({},i,{username:e.username,color:{background:e.color,foreground:e.color}}))}})),A().updateScene({collaborators:n});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[N,D]);var V=function(){var e=w(i().mark((function e(t,n){var r,o,a,c,l,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n||(t=t.filter((function(e){return!M.has(e.id)||e.version>M.get(e.id)}))),r=!0,o=!1,a=void 0,e.prev=2,c=t[Symbol.iterator]();!(r=(l=c.next()).done);r=!0)s=l.value,M.set(s.id,s.version),F(new Map(M));e.next=10;break;case 6:e.prev=6,e.t0=e.catch(2),o=!0,a=e.t0;case 10:e.prev=10,e.prev=11,r||null==c.return||c.return();case 13:if(e.prev=13,!o){e.next=16;break}throw a;case 16:return e.finish(13);case 17:return e.finish(10);case 18:h.broadcastMessage({text:JSON.stringify({elements:t,path:y})});case 19:case"end":return e.stop()}}),e,null,[[2,6,10,18],[11,,13,17]])})));return function(t,n){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){if(h){var e=h.onBroadcastReceived((function(e){var t=e.username,n=e.text,r=JSON.parse(n);if(r.path===y)if(r.collaborator&&T.current){var i=A().getAppState().collaborators;i.set(t,Z({},i.get(t),r.collaborator,{username:t})),A().updateScene({collaborators:i})}else if(r.elements){var o=m(A(),O.current,r.elements);H(_.current(o)),A().updateScene({elements:o})}}));return function(){e()}}}),[h,y]),(0,a.useEffect)((function(){function e(){return e=w(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y&&r){e.next=2;break}return e.abrupt("return");case 2:I.current.promise=new Promise(function(){var e=w(i().mark((function e(t){var n,o,a,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=j,e.next=3,Promise.all([r.readFile(y),T.current.readyPromise]);case 3:e.t1=e.sent,n=(0,e.t0)(e.t1,1),"content"in(o=n[0])&&(a=o.content.toString(),c=JSON.parse(a||"{}"),l=A().getAppState(),c.appState=Z({},l),c.scrollToContent=!0,t(c));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[y,r]);var K=(0,a.useCallback)((0,c.Z)(function(){var e=w(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.filter((function(e){return!e.isDeleted})),!y){e.next=4;break}return e.next=4,r.writeFile(y,f.Z.from(JSON.stringify({elements:n})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),350),[y]);return(0,o.tZ)(v.Z,{css:{position:"relative",height:"100%",width:"100%",flex:1,boxShadow:L?"0 3px 0 3px ".concat(L):"none",backgroundColor:g.TV.backgroundDefault,"& .excalidraw [title~=Library]":{display:"none"},"& .excalidraw .App-menu_top":{gridTemplateColumns:"0 auto 1fr !important",gridGap:"none !important"},"& .excalidraw .App-menu_bottom":{transform:"none !important",paddingLeft:"var(--space-4) !important"}},children:k&&!R&&(0,o.tZ)(k,{zenModeEnabled:!0,ref:T,isCollaborating:!0,theme:B===l.V2.replitLight?"light":"dark",initialData:I.current.promise,onPointerUpdate:function(e){var t=e.pointer;if(A().getAppState().collaborators.size>0){var n=A().getAppState().selectedElementIds||{};h.broadcastMessage({text:JSON.stringify({collaborator:{pointer:t,selectedElementIds:n},path:y})})}},onChange:function(e){A().getAppState().collaborators.size>0?function(e){_.current(e)>W&&(W>-1&&V(C.current(e),!1),H(_.current(e)))}(e):H(_.current(e)),_.current(e)>W&&K(e)},user:{name:z}})})}function _(e){var t=e.fs,n=e.presence,r=e.broadcast,i=e.filePath;return(0,o.tZ)(C,{fs:t,presence:n,broadcast:r,filePath:i},i)}},10781:function(e,t,n){n.d(t,{Z:function(){return ze}});var r=n(35944),i=n(79547),o=n.n(i),a=n(67294),c=n(40425),l=n(5560),s=n(88768),u=n(41664),d=n.n(u),f=n(37424),p=n(45557),h=n(51281),m=n(8286),b=n(20795),v=n(35060),g=n(94485),y=n(16342),x=n(17632),w=n(6529),k=n(8996),Z=n(3204),j=n(66552),S=n(52697),E=n(38880),C=n(26400),_=n(88503),O=n(34860),T=n(96594),I=n(94184),A=n.n(I),P=n(39155),N=n(11163),R=n(93577),z=n(50553);function B(e){var t=e.direction,n=e.url,i=(0,r.BX)("span",{className:o().dynamic([["78db7dc25a35a576",["left"===t?"rotate(90deg)":"rotate(-90deg)"]]])+" "+(A()("chevron",{hoverable:void 0!==n})||""),children:[(0,r.tZ)(z.Z,{size:20,color:n?"var(--foreground-dimmest)":"var(--background-root)"}),(0,r.tZ)(o(),{id:"78db7dc25a35a576",dynamic:["left"===t?"rotate(90deg)":"rotate(-90deg)"],children:".chevron.__jsx-style-dynamic-selector{display:inline-block;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-transition:.2s all;-moz-transition:.2s all;-o-transition:.2s all;transition:.2s all}.chevron.__jsx-style-dynamic-selector svg{width:24px;height:24px;-webkit-transform:".concat("left"===t?"rotate(90deg)":"rotate(-90deg)",";-moz-transform:").concat("left"===t?"rotate(90deg)":"rotate(-90deg)",";-ms-transform:").concat("left"===t?"rotate(90deg)":"rotate(-90deg)",";-o-transform:").concat("left"===t?"rotate(90deg)":"rotate(-90deg)",";transform:").concat("left"===t?"rotate(90deg)":"rotate(-90deg)","}.hoverable.__jsx-style-dynamic-selector{cursor:pointer}.hoverable.chevron.__jsx-style-dynamic-selector svg:hover{stroke:var(--accent-primary-default)}.hoverable.__jsx-style-dynamic-selector:hover{background:var(--accent-primary-default)}")})]});return n?(0,r.tZ)(d(),{href:n,children:(0,r.tZ)("a",{children:i})}):i}var D,U=function(){return(0,r.BX)("span",{title:"late",className:"jsx-c2ef7e04fe810e06",children:["late",(0,r.tZ)(o(),{id:"c2ef7e04fe810e06",children:"span.jsx-c2ef7e04fe810e06{display:inline-block;color:var(--accent-negative-default);border:1px solid var(--accent-negative-default);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:1px var(--space-4);font-size:var(--font-size-small)}"})]})};function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){X(e,t,n[t])}))}return e}function F(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||H(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||H(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){if(e){if("string"===typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}function V(e){var t=D.NotStarted,n=D.Started,r=D.Submitted,i=D.Reviewed;switch(e){case t:return"Not Started";case n:return"Not submitted yet";case r:return"Submitted";case i:return"Reviewed";default:return""}}function K(e){return e?e.timeSubmitted||e.timeLastReviewed?e.timeSubmitted&&!e.timeLastReviewed?D.Submitted:!e.timeSubmitted&&e.timeLastReviewed?D.Reviewed:e.timeSubmitted&&e.timeLastReviewed?new Date(e.timeSubmitted)>new Date(e.timeLastReviewed)?D.Submitted:D.Reviewed:void 0:D.Started:D.NotStarted}!function(e){e.NotStarted="not-started",e.Started="started",e.Submitted="submitted",e.Reviewed="reviewed"}(D||(D={}));var $=function(e,t){if(e){var n=e.indexOf("?"),r=new URLSearchParams(-1===n?"":e.slice(n));r.append("submissionReview","true");var i=-1===n?e:e.slice(0,n);return t?"".concat(i,"?").concat(r.toString(),"#").concat(t):"".concat(i,"?").concat(r.toString())}};function q(e){var t=e.result,n=e.selected,i=e.current,a=e.isLate,c=F(e,["result","selected","current","isLate"]),l=(0,R.Z)(),s=i?"":$(t.url,l),u=(0,r.BX)(k.Ug,{spacing:1,align:"center",children:[(0,r.tZ)("div",{"data-microtip-position":"right","aria-label":V(t.status),role:"tooltip",className:"jsx-5d2ba38a58506d36 indicator-container",children:(0,r.tZ)("div",{className:"jsx-5d2ba38a58506d36 "+(A()("indicator",t.status)||"")})}),(0,r.tZ)(P.Z,{url:t.image}),(0,r.tZ)("div",{className:"jsx-5d2ba38a58506d36 name",children:t.name}),a&&(0,r.tZ)(U,{}),(0,r.tZ)(o(),{id:"5d2ba38a58506d36",children:".indicator-container.jsx-5d2ba38a58506d36{width:10px;height:10px;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;padding:var(--space-4)}.name.jsx-5d2ba38a58506d36{color:var(--foreground-dimmer);font-size:var(--font-size-default);max-width:230px;-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow:hidden}.indicator.jsx-5d2ba38a58506d36{width:8px;height:8px;-webkit-border-radius:16px;-moz-border-radius:16px;border-radius:16px}.indicator.submitted.jsx-5d2ba38a58506d36{background:var(--accent-yellow-dimmer)}.indicator.reviewed.jsx-5d2ba38a58506d36{background:var(--accent-positive-default)}.indicator.started.jsx-5d2ba38a58506d36{border:2px solid var(--foreground-dimmest)}"})]});return(0,r.BX)("div",M({},c,{className:"jsx-39df8ba33633f058 "+(A()("result",t.status,{selected:n,current:i})||""),children:[s?(0,r.BX)(r.HY,{children:[(0,r.tZ)(d(),{href:s,children:(0,r.tZ)("a",{className:"jsx-39df8ba33633f058 result-link",children:u})},t.submissionId),(0,r.tZ)("a",{href:s,target:"_blank",role:"tooltip","data-microtip-position":"left","aria-label":"Open in a new tab",className:"jsx-39df8ba33633f058 result-external-link",children:(0,r.tZ)(O.Z,{color:"var(--foreground-default)"})})]}):(0,r.tZ)("div",{className:"jsx-39df8ba33633f058 result-link",children:u}),(0,r.tZ)(o(),{id:"39df8ba33633f058",children:".result.jsx-39df8ba33633f058{cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;background-color:var(--background-default)}.result.not-started.jsx-39df8ba33633f058{opacity:.4}.result.current.jsx-39df8ba33633f058{background-color:var(--background-root)}.selected.jsx-39df8ba33633f058{background-color:var(--background-root);opacity:1!important}.result-link.jsx-39df8ba33633f058{text-decoration:none;padding:var(--space-8)}.result-external-link.jsx-39df8ba33633f058{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--space-8);opacity:0;margin-left:auto}.result.jsx-39df8ba33633f058:hover .result-external-link.jsx-39df8ba33633f058{opacity:1}.result-external-link.jsx-39df8ba33633f058 svg{-webkit-transition:.3s stroke;-moz-transition:.3s stroke;-o-transition:.3s stroke;transition:.3s stroke}.result-external-link.jsx-39df8ba33633f058:hover svg{stroke:var(--accent-primary-default)}"})]}))}var Y=function(e){var t,n,i,c=e.team,l=e.submission,s=e.submissionList,u=e.template,d=(0,N.useRouter)(),f=(0,R.Z)(),p=G(a.useState([]),2),h=p[0],m=p[1],b=G(a.useState(""),2),v=b[0],g=b[1],y=(0,T.Kb)({items:h,defaultHighlightedIndex:0,onSelectedItemChange:function(e){var t=e.selectedItem;h.length&&t&&-1!==e.highlightedIndex&&t.url&&d.push(t.url)}}),x=y.isOpen,w=y.getInputProps,Z=y.getMenuProps,j=y.getItemProps,S=y.openMenu,E=y.highlightedIndex,C=a.useRef(null);a.useEffect((function(){x&&C.current&&C.current.focus()}),[x]);var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(l.isGroupSubmission){var t=s;0!==e.length&&(t=t.filter((function(t){var n;return null===(n=t.submissionGroup)||void 0===n?void 0:n.users.some((function(t){var n;return null===(n=(null===t||void 0===t?void 0:t.fullName)||(null===t||void 0===t?void 0:t.username))||void 0===n?void 0:n.toLocaleLowerCase().includes(e.toLocaleLowerCase())}))})));var n=t.map((function(e){var t,n=e.submissionGroup.users.map((function(e){return e.fullName||e.username})).join(", ");return{image:e.submissionGroup.users[0].image,name:n,url:null===(t=e.repl)||void 0===t?void 0:t.url,status:K(e),submissionId:e.id,timeSubmitted:null===e||void 0===e?void 0:e.timeSubmitted}}));m(W(n))}else{var r=c.students,i=(r=0===e.length?r.filter((function(e){return e.user})).sort((function(e,t){return(e.nickname||e.user.fullName||e.user.username).localeCompare(t.nickname||t.user.fullName||t.user.username)})):r.filter((function(t){var n,r,i;return null===(i=t.nickname||(null===(n=t.user)||void 0===n?void 0:n.fullName)||(null===(r=t.user)||void 0===r?void 0:r.username))||void 0===i?void 0:i.toLocaleLowerCase().includes(e.toLocaleLowerCase())}))).map((function(e){var t,n=s.find((function(t){var n;return(null===(n=t.author)||void 0===n?void 0:n.id)===e.user.id}));return{image:e.user.image,name:e.nickname||e.user.fullName||e.user.username,url:null===n||void 0===n||null===(t=n.repl)||void 0===t?void 0:t.url,status:K(n),submissionId:null===n||void 0===n?void 0:n.id,timeSubmitted:null===n||void 0===n?void 0:n.timeSubmitted}}));m(W(i))}},I=s.findIndex((function(e){return e.id===l.id})),A=s[I-1],z=s[I+1],D=s.filter((function(e){return e.timeLastReviewed})).length,U=function(e){var t=c.students.find((function(t){var n;return(null===(n=t.user)||void 0===n?void 0:n.id)===(null===e||void 0===e?void 0:e.id)}));return(null===t||void 0===t?void 0:t.nickname)||(null===e||void 0===e?void 0:e.fullName)||"@".concat(null===e||void 0===e?void 0:e.username)};return(0,r.BX)("div",M({},Z(),{className:"jsx-e10a8ca7bd05f64a submission-search",children:[x&&(0,r.BX)("div",{className:"jsx-e10a8ca7bd05f64a dropdown",children:[(0,r.BX)("div",{className:"jsx-e10a8ca7bd05f64a search-box-container",children:[(0,r.tZ)("div",{className:"jsx-e10a8ca7bd05f64a search-icon",children:(0,r.tZ)(_.Z,{})}),(0,r.tZ)("input",M({},w({value:v,placeholder:"Navigate",onKeyDown:function(e){"Escape"===e.key&&m([])},onChange:function(e){var t=e.target.value;O(t),g(t)},ref:C}),{className:"jsx-e10a8ca7bd05f64a search-box"}))]}),(0,r.tZ)("div",{className:"jsx-e10a8ca7bd05f64a",children:h.map((function(e,t){return(0,r.tZ)(q,M({result:e,selected:E===t,current:e.submissionId===l.id},j({index:t,item:e,onClick:function(e){e.nativeEvent.preventDownshiftDefault=!0}}),{isLate:u.dueDate&&e.timeSubmitted&&u.dueDate<e.timeSubmitted}))}))})]}),(0,r.BX)("div",{className:"jsx-e10a8ca7bd05f64a navigation-element",children:[(0,r.BX)("div",{onClick:function(){S(),O()},className:"jsx-e10a8ca7bd05f64a pseudo-search-input",children:[(0,r.tZ)("div",{className:"jsx-e10a8ca7bd05f64a search-icon",children:(0,r.tZ)(_.Z,{})}),(0,r.tZ)("div",{className:"jsx-e10a8ca7bd05f64a",children:"Navigate"})]}),(0,r.BX)("div",{className:"jsx-e10a8ca7bd05f64a arrow-navigation",children:[(0,r.tZ)(B,{direction:"left",url:$(null===A||void 0===A||null===(t=A.repl)||void 0===t?void 0:t.url,f)}),(0,r.BX)("div",{className:"jsx-e10a8ca7bd05f64a",children:[D,"/",s.length]}),(0,r.tZ)(B,{direction:"right",url:$(null===z||void 0===z||null===(n=z.repl)||void 0===n?void 0:n.url,f)})]})]}),(0,r.tZ)("div",{className:"jsx-e10a8ca7bd05f64a submission-info",children:l.isGroupSubmission?l.submissionGroup.users.map((function(e){return(0,r.tZ)("div",{className:"jsx-e10a8ca7bd05f64a submitter-row",children:(0,r.BX)(k.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(P.Z,{url:null===e||void 0===e?void 0:e.image}),(0,r.tZ)("span",{className:"jsx-e10a8ca7bd05f64a submission-name",children:U(e)})]})},null===e||void 0===e?void 0:e.id)})):(0,r.tZ)("div",{className:"jsx-e10a8ca7bd05f64a submission-identity",children:(0,r.tZ)("div",{className:"jsx-e10a8ca7bd05f64a submitter-row",children:(0,r.BX)(k.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(P.Z,{url:null===(i=l.author)||void 0===i?void 0:i.image}),(0,r.tZ)("span",{className:"jsx-e10a8ca7bd05f64a submission-name",children:U(l.author)})]})})})}),(0,r.tZ)(o(),{id:"e10a8ca7bd05f64a",children:".submission-search.jsx-e10a8ca7bd05f64a{width:100%;position:relative;border:1px solid;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);border-color:var(--foreground-dimmest)}.navigation-element.jsx-e10a8ca7bd05f64a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.pseudo-search-input.jsx-e10a8ca7bd05f64a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;color:var(--foreground-dimmer);font-size:var(--font-size-default)}.arrow-navigation.jsx-e10a8ca7bd05f64a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--foreground-dimmest);font-size:var(--font-size-small);-webkit-box-align:baseline;-webkit-align-items:baseline;-moz-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;padding:0 var(--space-8)}.submitter-row.jsx-e10a8ca7bd05f64a{text-decoration:none;color:var(--foreground-default)}.submission-info.jsx-e10a8ca7bd05f64a{display:grid;grid-gap:var(--space-8);padding:var(--space-16)}.submission-name.jsx-e10a8ca7bd05f64a{color:var(--foreground-dimmer);font-size:var(--font-size-default)}.search-box.jsx-e10a8ca7bd05f64a{border:none;outline:none;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;font-size:var(--font-size-default);background-color:inherit;color:var(--foreground-default)}.search-icon.jsx-e10a8ca7bd05f64a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-16);background-color:inherit}.search-box-container.jsx-e10a8ca7bd05f64a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;background-color:var(--background-default)}.dropdown.jsx-e10a8ca7bd05f64a{position:absolute;background:var(--background-default);z-index:10;width:350px;max-height:426px;overflow-y:scroll;overflow-y:overlay;white-space:nowrap;border:1px solid;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);border-color:var(--foreground-dimmest);margin:-1px}"})]}))},Q=n(17847);function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ee(e,t,n[t])}))}return e}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var re=function(e){return{short:(0,Q.Z)(e,"do MMM"),long:(0,Q.Z)(e,"do MMM, hh:mm a")}};function ie(e){var t=e.submission,n=e.dueDate;return(0,r.BX)("div",{className:"jsx-5ae79eda8485444a submission-info",children:[t.timeSubmitted?(0,r.BX)(r.HY,{children:[(0,r.tZ)("div",{className:"jsx-5ae79eda8485444a submitted-header",children:(0,r.BX)(k.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(m.Z,{}),(0,r.tZ)("span",{className:"jsx-5ae79eda8485444a submitted-text",children:"Submitted"}),n&&n<t.timeSubmitted&&(0,r.tZ)(U,{})]})}),(0,r.tZ)("div",{className:"jsx-5ae79eda8485444a submitted-time",children:(0,r.BX)(k.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(g.Z,{}),(0,r.tZ)("span",{className:"jsx-5ae79eda8485444a",children:re(new Date(t.timeSubmitted)).long})]})})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)("div",{className:"jsx-5ae79eda8485444a submitted-header",children:(0,r.BX)(k.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(v.Z,{}),(0,r.tZ)("span",{className:"jsx-5ae79eda8485444a submitted-text",children:"Not submitted"})]})}),(0,r.tZ)("div",{className:"jsx-5ae79eda8485444a submitted-time",children:(0,r.BX)(k.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(p.Z,{}),(0,r.BX)("span",{className:"jsx-5ae79eda8485444a",children:["Forked"," ",re(new Date(t.repl.timeCreated)).short]})]})})]}),(0,r.tZ)(o(),{id:"5ae79eda8485444a",children:".submission-info.jsx-5ae79eda8485444a{padding:var(--space-8);background-color:var(--background-root);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8)}.submitted-header.jsx-5ae79eda8485444a{color:var(--foreground-default);font-weight:var(--font-weight-medium);white-space:nowrap}.submitted-header.jsx-5ae79eda8485444a svg{width:2em;height:2em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.submitted-time.jsx-5ae79eda8485444a{color:var(--foreground-dimmer);padding:var(--space-8)var(--space-16);white-space:nowrap;font-size:var(--font-size-default)}.submitted-time.jsx-5ae79eda8485444a svg{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}"})]})}function oe(e){var t=e.repl,n=e.submission,i=e.onFeedbackCTA,a=void 0===i?function(){}:i,c=(0,f.H)(),l=(0,E.Z)().showError,u=ne((0,s.SyV)({onError:function(e){return l(e.message)},onCompleted:function(e){"UserError"===e.reviewRepl.__typename&&l(e.reviewRepl.message)}}),2),d=u[0],p=u[1].loading,m=ne((0,s.F_9)(),1)[0],b=Boolean(n.timeLastReviewed);return(0,r.BX)(j.Z,{css:[Z.l0.p(8),Z.l0.borderRadius(8)],children:[(0,r.BX)("div",{className:"jsx-badd306accf589e0 feedback-header",children:[(0,r.tZ)(S.Z,{}),(0,r.tZ)("span",{className:"jsx-badd306accf589e0",children:"Feedback"})]}),(0,r.BX)("div",{className:"jsx-badd306accf589e0 mark-reviewed",children:[(0,r.tZ)(w.Z,{id:c("reviewed-status"),disabled:p,checked:b,onChange:function(){return e=!b,void d({variables:{replId:t.id,status:e},optimisticResponse:{reviewRepl:te({},t,{submission:te({},n,{timeLastReviewed:e?(new Date).toJSON():null})})}});var e}}),(0,r.tZ)("label",{htmlFor:c("reviewed-status"),className:"jsx-badd306accf589e0",children:b?"Reviewed":"Mark as reviewed"})]}),(0,r.BX)("div",{className:"jsx-badd306accf589e0 feedback-info",children:[(0,r.tZ)(x.Z,{}),(0,r.tZ)("div",{onClick:a,className:"jsx-badd306accf589e0",children:"Code feedback"})]}),n.timeSubmitted&&(0,r.tZ)("div",{className:"jsx-badd306accf589e0 unsubmit",children:(0,r.tZ)(h.Z,{onClick:function(){m({variables:{replId:t.id},optimisticResponse:{unsubmitRepl:te({},t,{submission:te({},n,{timeLastReviewed:null})})}})},fullWidth:!0,children:"Unsubmit"})}),(0,r.tZ)(o(),{id:"badd306accf589e0",children:".feedback-header.jsx-badd306accf589e0{display:grid;grid-auto-flow:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8);color:var(--foreground-default);font-weight:var(--font-weight-medium);white-space:nowrap}.feedback-header.jsx-badd306accf589e0 svg{width:1.4em;height:1.4em;padding:.3em;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.mark-reviewed.jsx-badd306accf589e0,.feedback-info.jsx-badd306accf589e0,.unsubmit.jsx-badd306accf589e0{display:grid;grid-auto-flow:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8);padding:var(--space-8)var(--space-16);font-size:var(--font-size-default);cursor:pointer;color:var(--foreground-dimmer)}.feedback-info.jsx-badd306accf589e0 svg{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}"})]})}function ae(e){var t=e.replUrl;return(0,r.tZ)(d(),{href:"".concat(t,"/history"),children:(0,r.BX)("a",{target:"_blank",className:"jsx-d3efcaed296b8808",children:[(0,r.tZ)(h.Z,{Icon:b.HistoryIcon,fullWidth:!1,className:"history-button",children:"See Repl History"}),(0,r.tZ)(o(),{id:"d3efcaed296b8808",children:"a.jsx-d3efcaed296b8808{text-decoration:none}.history-button svg{width:1em}"})]})})}function ce(e){var t,n,i,c=e.data,l=ne(a.useState(!1),2),s=l[0],u=l[1];if(!c||"Repl"!==c.repl.__typename||"Team"!==(null===(t=c.repl.owner)||void 0===t?void 0:t.__typename)||"ReplSubmission"!==(null===(n=c.repl.submission)||void 0===n?void 0:n.__typename)||"ReplTemplate"!==(null===(i=c.repl.template)||void 0===i?void 0:i.__typename))return null;var f=c.repl.submission,p=c.repl.template.submissions;return(0,r.BX)("div",{className:"jsx-a8b6b0d83e1c54ba education-pane-container",children:[(0,r.BX)("div",{className:"jsx-a8b6b0d83e1c54ba contents",children:[(0,r.tZ)("div",{className:"jsx-a8b6b0d83e1c54ba template-selector-container",children:(0,r.tZ)(Y,{team:c.repl.owner,template:c.repl.template,submission:f,submissionList:p})}),(0,r.tZ)(ie,{submission:f,dueDate:c.repl.template.dueDate}),(0,r.tZ)(oe,{repl:c.repl,submission:f,onFeedbackCTA:function(){return u(!0)}}),(0,r.tZ)("div",{className:"jsx-a8b6b0d83e1c54ba buffer"})]}),(0,r.BX)("div",{className:"jsx-a8b6b0d83e1c54ba bottom-dock",children:["Repl"===c.repl.__typename&&(0,r.tZ)(ae,{replUrl:c.repl.url}),(0,r.tZ)("div",{className:"jsx-a8b6b0d83e1c54ba",children:(0,r.tZ)(d(),{href:"/team/".concat(c.repl.owner.username,"/templates/").concat(c.repl.template.repl.slug),children:(0,r.tZ)(h.Z,{Icon:y.Z,children:"Return to submissions"})})})]}),(0,r.tZ)(C.Z,{isOpen:s,onRequestClose:function(){return u(!1)}}),(0,r.tZ)(o(),{id:"a8b6b0d83e1c54ba",children:".education-pane-container.jsx-a8b6b0d83e1c54ba{padding:var(--space-8);max-width:400px;width:inherit;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:hidden}.contents.jsx-a8b6b0d83e1c54ba{display:grid;grid-gap:var(--space-16)}.bottom-dock.jsx-a8b6b0d83e1c54ba{display:grid;grid-gap:var(--space-8);margin-top:auto}.template-selector-container.jsx-a8b6b0d83e1c54ba{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]})}var le,se=n(34051),ue=n.n(se),de=n(77847),fe=n(58458),pe=n(45193),he=n(47421),me=n(78120),be=n(38098),ve=function(e){var t=e.fileName,n=e.docRef,i=e.initialContents,c=(0,be.Z)({filePath:t,fontSize:14,indentSize:4,indentIsSpaces:!0}),l=c.view,s=c.ref;return a.useEffect((function(){if(l){var e=he.tk.updateListener.of((function(e){n.current=e.state.doc}));l.dispatch({effects:me.Py.appendConfig.of(e)}),l.focus()}}),[l,n]),a.useEffect((function(){l&&(l.state.doc.length||l.dispatch({changes:{from:0,insert:i}}))}),[l,i]),(0,r.BX)("div",{className:"jsx-d59ba8968f57599c editable-area",children:[(0,r.tZ)("div",{className:"jsx-d59ba8968f57599c editor-wrapper",children:(0,r.tZ)("div",{className:"jsx-d59ba8968f57599c editor",children:(0,r.tZ)("div",{ref:s,className:"jsx-d59ba8968f57599c"})})}),(0,r.tZ)(o(),{id:"d59ba8968f57599c",children:".editable-area.jsx-d59ba8968f57599c{width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;border:1px solid var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8)0}.editor-wrapper.jsx-d59ba8968f57599c{height:450px;padding-bottom:var(--space-8);-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;position:relative}.editor.jsx-d59ba8968f57599c{overflow:auto;position:absolute;width:100%;height:100%}.loader.jsx-d59ba8968f57599c{height:100%;width:100%;z-index:5}"})]})},ge=function(e){var t=e.title,n=e.fileName,i=e.initialContents,l=e.isOpen,s=e.onSave,u=e.onCancel,d=a.useRef(null);return(0,r.BX)(pe.Z,{width:"large",isOpen:l,onRequestClose:function(){},preventClose:!0,children:[(0,r.tZ)("div",{className:"jsx-c68269737c22d0ec editor-modal",children:(0,r.BX)(k.gC,{align:"stretch",spacing:2,children:[(0,r.BX)(c.Z,{level:3,children:["Edit ",t.toLowerCase()]}),(0,r.tZ)(ve,{docRef:d,fileName:n,initialContents:i}),(0,r.tZ)(k.Ug,{justify:"end",align:"end",children:(0,r.BX)(k.Ug,{justify:"end",align:"end",spacing:1,children:[(0,r.tZ)(h.Z,{onClick:function(){return u()},children:"Cancel"}),(0,r.tZ)(h.Z,{color:"primary",onClick:function(){var e;return d.current&&s(null===(e=d.current)||void 0===e?void 0:e.toString())},children:"Save"})]})})]})}),(0,r.tZ)(o(),{id:"c68269737c22d0ec",children:".editor-modal.jsx-c68269737c22d0ec{padding:var(--space-16)}"})]})};function ye(e){var t="For example, here is a code block in ".concat(e);switch(e){case"python3":return"".concat(t,'\n```python\ndef hello_world():\n  print("hello world!")\n```\n');case"java10":return"".concat(t,'\n```java\npublic class Main {\n  public static void main(String[] args) {\n    System.out.println("hello world");\n  }\n}\n```\n');case"html":return"".concat(t,"\n```python\n<html>\n<body>\n  <h1>hello world</h1>\n</body>\n</html>\n``")}return""}!function(e){e.LessonPlan="lessonplan.md",e.Instructions="instructions.md"}(le||(le={}));var xe=n(85133),we=n(28593),ke=n(29698),Ze=n(15853),je=n(78135),Se=n(32646),Ee=n(25108);function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _e(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function Oe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){_e(o,r,i,a,c,"next",e)}function c(e){_e(o,r,i,a,c,"throw",e)}a(void 0)}))}}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e){var t=e.attachments;return(0,r.tZ)("div",{className:"manage-attachments",children:(0,r.BX)(k.gC,{spacing:2,children:[(0,r.tZ)(Ae,{attachment:t.find((function(e){return e.fileName===le.LessonPlan})),fileName:le.LessonPlan,label:"Lesson plan",helpText:"Upload teacher facing materials"}),(0,r.tZ)(Ae,{attachment:t.find((function(e){return e.fileName===le.Instructions})),fileName:le.Instructions,label:"Instructions",helpText:"Upload student facing materials"})]})})}function Ae(e){var t,n=e.attachment,i=e.fileName,o=e.label,c=e.helpText,l=(0,xe.Z)(),u=(0,E.Z)(),d=u.showConfirm,f=u.showError,p=(0,je.I0)(),h=(0,Se.Z)(),m=Te((0,s.RG9)({onCompleted:function(){return d("Updated "+i)},onError:function(e){Ee.log(e),f("Error")}}),2),b=m[0],v=m[1],g=a.useCallback(function(){var e=Oe(ue().mark((function e(t){return ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l&&(b({variables:{input:{replId:l.id,fileName:i,contents:t,lastModified:(new Date).toISOString()}}}),i===le.Instructions&&p({type:"INSTRUCTIONS_UPLOADED",wid:h,contents:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l,i,b,h,p]);return l&&(t=i===le.LessonPlan?function(e){var t=e.language;return"# Lesson plan\n  \n  ** this file should contain teacher lesson plan details ** \n\n  __ students will never see this __\n\n  ## Learning Objectives\n  1. \n  2. \n  3. \n\n  Use [Markdown](https://gist.github.com/cuonggt/9b7d08a597b167299f0d) to format your lesson plan.\n\n  ".concat(ye(t),"\n  ")}({language:l.language}):function(e){var t=e.language;return"# Instructions  \n\n  ** this file should contain student lesson instructions **\n\n  _ students will see these instructions in a read-only workspace tab _\n\n  ## Steps\n  1. \n  2. \n  3. \n\n  Use [Markdown](https://gist.github.com/cuonggt/9b7d08a597b167299f0d) to format your instructions.\n\n  ".concat(ye(t),"\n  ")}({language:l.language})),(0,r.tZ)(Pe,{loading:!l||v.loading,fileName:i,contents:null===n||void 0===n?void 0:n.contents,defaultContents:t,label:o,helpText:c,attachmentLastUploadedAgo:n?(0,Ze.Sy)(new Date(n.timeUpdated)):void 0,onUploadFile:g})}function Pe(e){var t=e.loading,n=e.fileName,i=e.contents,c=e.defaultContents,l=e.label,s=e.helpText,u=e.attachmentLastUploadedAgo,d=e.onUploadFile,f=Te(a.useState(!1),2),p=f[0],m=f[1];return(0,r.BX)("div",{className:"jsx-5b5c01bd3abb3f44 attachment",children:[(0,r.tZ)(ge,{title:l,fileName:n,isOpen:p,initialContents:i||c,onCancel:function(){return m(!1)},onSave:function(e){m(!1),d(e)}}),(0,r.BX)(k.Ug,{justify:"space-between",align:"center",wrap:"nowrap",children:[(0,r.BX)(k.gC,{spacing:1,children:[(0,r.BX)(k.Ug,{align:"center",spacing:1,wrap:"nowrap",children:[(0,r.tZ)(fe.Z,{fontWeight:"medium",children:l}),(0,r.tZ)(de.Z,{label:s})]}),u&&(0,r.BX)(fe.Z,{size:"xsmall",children:["Uploaded ",u]})]}),t?(0,r.tZ)(we.Z,{style:{width:"16px",height:"16px"}}):(0,r.tZ)(h.Z,{border:!1,filled:!1,Icon:ke.Z,onClick:Oe(ue().mark((function e(){return ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(!0);case 1:case"end":return e.stop()}}),e)})))})]}),(0,r.tZ)(o(),{id:"5b5c01bd3abb3f44",children:".attachment.jsx-5b5c01bd3abb3f44{padding:var(--space-8);background-color:var(--background-root);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"})]})}function Ne(e){var t,n,i=e.data;return!i||"Repl"!==i.repl.__typename||"Team"!==(null===(t=i.repl.owner)||void 0===t?void 0:t.__typename)||"ReplTemplate"!==(null===(n=i.repl.template)||void 0===n?void 0:n.__typename)||i.repl.submission?null:(0,r.BX)("div",{className:"jsx-ea2ca64296d8f56a project-view-container",children:[(0,r.tZ)("div",{className:"jsx-ea2ca64296d8f56a project-view-contents",children:(0,r.tZ)(Ie,{attachments:i.repl.attachments})}),(0,r.tZ)("div",{className:"jsx-ea2ca64296d8f56a bottom-dock",children:(0,r.tZ)(fe.Z,{size:"small",children:(0,r.tZ)("a",{href:"/curriculum",target:"_blank",className:"jsx-ea2ca64296d8f56a",children:"Find more curriculum on Curriculum Hub"})})}),(0,r.tZ)(o(),{id:"ea2ca64296d8f56a",children:".project-view-container.jsx-ea2ca64296d8f56a{padding-top:var(--space-32);max-width:400px;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.bottom-dock.jsx-ea2ca64296d8f56a{display:grid;grid-gap:var(--space-8);margin-top:auto}"})]})}var Re=n(25108);function ze(e){var t,n,i,a,u,d,f,p=e.style,h=(0,l.Z)(),m=(0,s.SAU)({variables:{replId:h}}),b=m.data,v=m.loading,g=m.error;return v&&(d=(0,r.tZ)("div",{children:"Loading..."})),g&&(Re.error(g),d=(0,r.tZ)("div",{children:"Something went wrong"})),b&&"Repl"===b.repl.__typename&&"Team"===(null===(t=b.repl.owner)||void 0===t?void 0:t.__typename)&&"ReplTemplate"===(null===(n=b.repl.template)||void 0===n?void 0:n.__typename)&&"ReplSubmission"===(null===(i=b.repl.submission)||void 0===i?void 0:i.__typename)&&(d=(0,r.tZ)(ce,{data:b}),f="Submissions"),b&&"Repl"===b.repl.__typename&&"Team"===(null===(a=b.repl.owner)||void 0===a?void 0:a.__typename)&&"ReplTemplate"===(null===(u=b.repl.template)||void 0===u?void 0:u.__typename)&&!b.repl.submission&&(d=(0,r.tZ)(Ne,{data:b}),f="Curriculum"),(0,r.BX)("div",{style:p,className:"jsx-a46a7aae0e88f5b6 education-pane",children:[(0,r.tZ)("div",{className:"jsx-a46a7aae0e88f5b6 education-pane-header",children:(0,r.tZ)(c.Z,{level:4,children:f})}),d,(0,r.tZ)(o(),{id:"a46a7aae0e88f5b6",children:".education-pane.jsx-a46a7aae0e88f5b6{background-color:var(--background-default);color:var(--foreground-dimmer);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--space-8)}.education-pane-header.jsx-a46a7aae0e88f5b6{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;position:relative;color:var(--foreground-default);width:100%;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap}"})]})}},58032:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(35944),i=n(79547),o=n.n(i),a=(n(67294),n(8996)),c=n(40425),l=n(58458),s=n(54929),u=n(3204),d=n(44262),f=n(73345),p={styles:(0,r.tZ)(o(),{id:"223f8ac8383e5040",children:"*.jsx-223f8ac8383e5040{max-width:100%}"}),className:"jsx-223f8ac8383e5040"};function h(e){var t=e.children;return(0,r.BX)("div",{className:"jsx-f9a53312d33ef027 enveditor",children:[(0,r.BX)(a.gC,{spacing:2,align:"stretch",justify:"center",className:p.className,children:[(0,r.BX)(a.gC,{spacing:1,align:"stretch",justify:"center",className:p.className,children:[(0,r.BX)(s.Z,{css:[u.l0.flex.row,u.l0.justify.spaceBetween,u.l0.flex.wrap],children:[(0,r.tZ)(c.Z,{truncate:!0,level:4,children:"Secrets"}),(0,r.tZ)(f.Co,{iconLeft:(0,r.tZ)(d.Z,{}),href:"https://docs.replit.com/programming-ide/storing-sensitive-information-environment-variables",small:!0,text:"Docs",target:"_blank"})]}),(0,r.tZ)(l.Z,{size:"small",foreground:"2",children:"System environment variables."})]}),t]}),p.styles,(0,r.tZ)(o(),{id:"f9a53312d33ef027",children:".enveditor.jsx-f9a53312d33ef027{height:100%;width:100%;-webkit-border-top-right-radius:var(--border-radius-4);-moz-border-radius-topright:var(--border-radius-4);border-top-right-radius:var(--border-radius-4);background-color:var(--background-default);padding:var(--space-8);overflow:auto}"})]})}},51419:function(e,t,n){n.d(t,{Z:function(){return se}});var r=n(34051),i=n.n(r),o=n(35944),a=n(79547),c=n.n(a),l=n(67294),s=n(50658),u=n(94184),d=n.n(u),f=n(46846),p=n(93770),h=n(11503),m=n(8996),b=n(51281),v=n(57541),g=n(57923),y=n(40425),x=n(58458),w=n(29698),k=n(44894),Z=n(62857),j=n(27740),S=n.n(j),E=n(85133),C=n(98620),_=n(50553),O=n(88768),T=n(86923),I=n(11542),A=n(56834),P=n(45193),N=n(28593),R=n(60818),z=n(67289);function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function U(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){D(o,r,i,a,c,"next",e)}function c(e){D(o,r,i,a,c,"throw",e)}a(void 0)}))}}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){L(e,t,n[t])}))}return e}function M(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var G=A.U3.ENV_EDITOR_OPENED,W=A.U3.ENV_EDITOR_USED,H=A.U3.ENV_EDITOR_INTRO_SKIPPED,V=A.U3.ENV_EDITOR_INSERT_USED,K=((0,o.tZ)(c(),{id:"223f8ac8383e5040",children:"*.jsx-223f8ac8383e5040{max-width:100%}"}),"jsx-223f8ac8383e5040");function $(e){return function(t){t.stopPropagation(),e(t)}}function q(e,t){return e?e.trim()?t.includes(e)?"You already have a secret with this key":null:"The key must include a non-space character":"Please add a key for this secret"}function Y(e){return e?null:"Please add a value for this secret"}function Q(e){var t=e.secret,n=e.otherKeys,r=e.onUpdateKey,i=e.onUpdateValue,a=e.onSave,s=e.onCancel,u=e.onDelete,d=F(l.useState(),2),f=d[0],p=d[1],h=F(l.useState(),2),g=h[0],y=h[1],x=l.useRef(null),w=l.useRef(null),k=function(){var e=q(t.key,n);if(e)return p(e),void(x.current&&x.current.focus());var r=Y(t.value);if(r)return y(r),void(w.current&&w.current.focus());a()};l.useEffect((function(){f&&(q(t.key,n)||p(null))}),[t.key,f,n]),l.useEffect((function(){g&&(Y(t.value)||y(null))}),[t.value,g]);var Z=$((function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),k())}));return(0,o.BX)("div",{className:"jsx-691e121709ad57fd",children:[(0,o.BX)(m.gC,{spacing:1,align:"stretch",className:K,children:[(0,o.tZ)(v.ZP,{autoFocus:!0,ref:x,label:"key",name:"key",value:t.key,spellCheck:!1,onChange:function(e){r(e.currentTarget.value)},onKeyDown:Z,validationResults:f?[{message:f,state:"error"}]:void 0}),(0,o.tZ)(T.Z,{ref:w,label:"value",name:"value",value:t.value,spellCheck:!1,onChange:function(e){i(e.currentTarget.value)},onKeyDown:Z,validationResults:g?[{message:g,state:"error"}]:void 0}),(0,o.BX)(m.Ug,{justify:"space-between",children:[u?(0,o.tZ)(b.Z,{onClick:$(u),color:"negative",children:"Delete"}):null,(0,o.BX)(m.Ug,{spacing:1,children:[s?(0,o.tZ)(b.Z,{onClick:$(s),children:"Cancel"}):null,(0,o.tZ)(b.Z,{color:"primary",onClick:$(k),children:u?"Save":"Add new secret"})]})]})]}),(0,o.tZ)(c(),{id:"691e121709ad57fd",children:"div.jsx-691e121709ad57fd{background:var(--background-root);padding:var(--space-16);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8)}"})]})}function J(e){var t=e.onAdd,n=e.otherKeys,r=F(l.useState({key:"",value:""}),2),i=r[0],a=r[1];return(0,o.tZ)(Q,{secret:i,otherKeys:n,onUpdateKey:function(e){return a((function(t){return t?X({},t,{key:e}):t}))},onUpdateValue:function(e){return a((function(t){return t?X({},t,{value:e}):t}))},onSave:function(){a({key:"",value:""}),i.value&&i.key&&t(i)}})}var ee={styles:(0,o.tZ)(c(),{id:"6ee31908fcf933da",children:"*.jsx-6ee31908fcf933da{max-width:-webkit-calc(100% - 16px);max-width:-moz-calc(100% - 16px);max-width:calc(100% - 16px)}"}),className:"jsx-6ee31908fcf933da"};function te(e){var t=e.secret,n=e.otherKeys,r=e.onUpdateSecret,i=e.onDeleteSecret,a=F(l.useState(null),2),s=a[0],u=a[1],f=null;s&&(f=(0,o.tZ)(Q,{secret:s,otherKeys:n,onUpdateKey:function(e){return u((function(t){return t?X({},t,{key:e}):t}))},onUpdateValue:function(e){return u((function(t){return t?X({},t,{value:e}):t}))},onSave:function(){u(null),s.value&&s.key&&(s.value===t.value&&s.key===t.key||r(t.key,s))},onCancel:function(){return u(null)},onDelete:function(){return i(t.key)}}));var p=Boolean(f);return(0,o.BX)("div",{onClick:function(){p||u(X({},t))},className:"jsx-93c5849ae6790dea "+(d()("secret",K,{"is-editing":p})||""),children:[f||(0,o.BX)(m.Ug,{align:"center",justify:"space-between",wrap:"nowrap",className:K,children:[(0,o.BX)(m.Ug,{align:"center",justify:"start",wrap:"nowrap",className:ee.className,children:[(0,o.tZ)(x.Z,{children:(0,o.tZ)(Z.Z,{size:24})}),(0,o.tZ)(x.Z,{truncate:!0,children:t.key})]}),(0,o.tZ)("div",{className:"jsx-93c5849ae6790dea edit",children:(0,o.tZ)(x.Z,{children:(0,o.tZ)(w.Z,{size:16})})})]}),ee.styles,(0,o.tZ)(c(),{id:"93c5849ae6790dea",children:".secret.jsx-93c5849ae6790dea{cursor:pointer;padding:var(--space-16)var(--space-16)var(--space-16)0;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8)}.secret.is-editing.jsx-93c5849ae6790dea{cursor:auto;padding:0;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.secret.jsx-93c5849ae6790dea:hover{background:var(--background-root)}.edit.jsx-93c5849ae6790dea{margin-left:var(--space-8);visibility:hidden}.secret.jsx-93c5849ae6790dea:hover .edit.jsx-93c5849ae6790dea{visibility:initial}.is-touch-device .edit.jsx-93c5849ae6790dea{visibility:initial}"})]})}function ne(e){var t=e.secrets,n=e.onUpdateSecret,r=e.onDeleteSecret;return(0,o.tZ)(m.gC,{spacing:1,align:"stretch",className:K,children:Object.keys(t).sort().map((function(e){return(0,o.tZ)(te,{otherKeys:Object.keys(t).filter((function(t){return t!==e})),secret:{key:e,value:t[e]},onUpdateSecret:n,onDeleteSecret:r},e)}))})}function re(e){var t=e.secrets,n=e.language,r=e.activeFile,i=e.onInsertDone,a=F(l.useState(Object.keys(t)[0]),2),c=a[0],s=a[1],u=(0,R.Z)(r),d=function(e,t){if(!e)return null;switch((0,z.r6)(e)){case"js":case"ts":case"jsx":case"tsx":return{import:null,access:"const mySecret = process.env['".concat(t,"']")};case"py":return{import:"import os",access:"my_secret = os.environ['".concat(t,"']")};case"go":return{import:'import "os"',access:'mySecret := os.Getenv("'.concat(t,'")')};case"java":case"scala":return{import:null,access:'System.getenv("'.concat(t,'")')};case"rb":return{import:null,access:'ENV["'.concat(t,'"]')};case"c":case"cpp":return{import:"#include <stdlib.h>",access:'char* mySecret = getenv("'.concat(t,'")')};case"cs":return{import:"using System;",access:'string mySecret = System.Environment.GetEnvironmentVariable("'.concat(t,'");')};case"sh":return{import:null,access:'"$'.concat(t,'"')};default:return null}}(r,c);return d&&u?(0,o.BX)(m.gC,{spacing:2,align:"stretch",className:K,children:[(0,o.BX)(x.Z,{children:["To use secrets in ",S().get(n).displayName]}),d.import?(0,o.BX)(m.gC,{spacing:1,align:"stretch",className:K,children:[(0,o.tZ)(y.Z,{level:6,truncate:!0,children:"1. Add the imports"}),(0,o.tZ)(x.Z,{tag:"pre",fontFamily:"monospace",className:oe.className,truncate:!0,children:d.import}),(0,o.tZ)(m.Ug,{children:(0,o.BX)(b.Z,{onClick:function(){u({code:d.import,insertAt:0}),(0,A.j)(V)},children:["Insert -",">"]})})]}):null,(0,o.BX)(m.gC,{spacing:1,align:"stretch",className:K,children:[(0,o.BX)(y.Z,{level:6,truncate:!0,children:[d.import?"2. ":"","Access the secret by key as an environment variable"]}),(0,o.tZ)(C.Z,{respectMaxWidth:!0,items:Object.keys(t),onClick:function(e){s(e)},renderAnchorComponent:function(e){var t=e.innerRef,n=M(e,["innerRef"]);return(0,o.tZ)(b.Z,X({ref:t},n,{Icon:_.Z,filled:!1,iconOnRight:!0,children:(0,o.tZ)(x.Z,{style:{maxWidth:"100px"},truncate:!0,children:c})}))},renderItemChildComponent:function(e){return(0,o.tZ)(x.Z,{truncate:!0,children:e})}}),(0,o.tZ)(x.Z,{tag:"pre",fontFamily:"monospace",className:oe.className,truncate:!0,children:d.access}),(0,o.tZ)(m.Ug,{children:(0,o.BX)(b.Z,{onClick:function(){u({code:d.access}),i&&i(),(0,A.j)(V)},children:["Insert -",">"]})})]}),oe.styles]}):(0,o.BX)(m.gC,{spacing:1,align:"stretch",className:K,children:[(0,o.tZ)(x.Z,{children:"The secrets will be available in your Repl when you hit the run button as environment variables."}),u?null:(0,o.BX)(x.Z,{children:["Select a $",S().get(n).displayName," file to enable code inserter"]})]})}var ie,oe={styles:(0,o.tZ)(c(),{id:"62380dc2f7e272ba",children:"*.jsx-62380dc2f7e272ba{padding:var(--space-8);background:var(--background-root)}"}),className:"jsx-62380dc2f7e272ba"};function ae(e){var t=e.language,n=e.secrets,r=e.activeFile,i=e.onAdd,a=e.onIntroDone,c=F(l.useState(ie.What),2),s=c[0],u=c[1];return s===ie.What?(0,o.BX)(m.gC,{spacing:1,align:"stretch",className:K,children:[(0,o.tZ)(y.Z,{level:5,children:"What\u2019s this?"}),(0,o.tZ)(x.Z,{children:"Using this feature will allow you to hide secret information like passwords while still being able to use them in the Repl"}),(0,o.tZ)(m.Ug,{children:(0,o.tZ)(b.Z,{filled:!0,color:"primary",onClick:function(){return u(ie.Add)},children:"Got it"})})]}):s===ie.Add?(0,o.BX)(m.gC,{spacing:1,align:"stretch",className:K,children:[(0,o.tZ)(y.Z,{level:5,children:"Add your first secret!"}),(0,o.tZ)(x.Z,{children:'The "key" is what you will use in the code itself and will be visible to everyone'}),(0,o.tZ)(x.Z,{children:'The "value" is where you put the private or secret text, hit shift+enter to add new lines'}),(0,o.tZ)(J,{onAdd:function(e){i(e),u(ie.Use)},otherKeys:Object.keys(n)}),(0,o.tZ)(b.Z,{onClick:function(){var e=Object.keys(n).length>0?ie.Use:ie.End;u(e),(0,A.j)(H,{step:ie.Add})},children:"Skip this step"})]}):s===ie.Use?(0,o.BX)(m.gC,{spacing:1,align:"stretch",className:K,children:[(0,o.tZ)(y.Z,{level:5,children:"Now let\u2019s use it in the Repl."}),(0,o.tZ)(re,{secrets:n,language:t,onInsertDone:function(){return u(ie.End)},activeFile:r}),(0,o.tZ)(b.Z,{onClick:function(){u(ie.End),(0,A.j)(H,{step:ie.Use})},children:"Skip this step"})]}):(0,o.BX)(m.gC,{spacing:1,align:"stretch",className:K,children:[(0,o.tZ)(x.Z,{children:"You\u2019re all set. You can add as many secrets as you want, we promise to keep them safe."}),(0,o.BX)(x.Z,{children:["You can always"," ",(0,o.tZ)("a",{href:"https://docs.replit.com/programming-ide/storing-sensitive-information-environment-variables",target:"_blank",children:"visit our docs"})," ","for more information."]}),(0,o.tZ)(x.Z,{children:"Please note, that people you invite as multiplayer collaborators will have access to these secrets."}),(0,o.tZ)(b.Z,{onClick:a,children:"Got it"})]})}function ce(e){var t=e.secrets,n=e.update,r=F(l.useState(!1),2),a=r[0],u=r[1],d=F(l.useState(""),2),f=d[0],p=d[1],h=F(l.useState(!1),2),v=h[0],g=h[1],w=F(l.useState(!1),2),k=w[0],Z=w[1],j=l.useRef(null),S=function(){var e=U(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(!0),t=function(){Z(!0),g(!1),(0,A.j)(W,{action:"rawEditorUpdatedError"}),j.current&&j.current.focus()},e.prev=3,r=JSON.parse(f),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(3),t(),e.abrupt("return");case 11:if("object"===typeof r&&Object.getPrototypeOf(r)===Object.prototype&&!Object.values(r).some((function(e){return"string"!==typeof e}))&&!Object.keys(r).some((function(e){return"string"!==typeof e}))){e.next=14;break}return t(),e.abrupt("return");case 14:return e.prev=14,e.next=17,n(r);case 17:e.next=24;break;case 19:return e.prev=19,e.t1=e.catch(14),s.Tb(e.t1),t(),e.abrupt("return");case 24:u(!1),g(!1),(0,A.j)(W,{action:"rawEditorUpdated"});case 27:case"end":return e.stop()}}),e,null,[[3,7],[14,19]])})));return function(){return e.apply(this,arguments)}}();return l.useEffect((function(){Z(!1)}),[f]),l.useEffect((function(){0!==Object.keys(t).length?p(JSON.stringify(t,null,2)):p("{\n}")}),[t]),(0,o.BX)(m.gC,{spacing:1,align:"stretch",className:K,children:[(0,o.tZ)(y.Z,{level:5,children:"Edit raw JSON (Advanced)"}),(0,o.tZ)(b.Z,{onClick:function(){(0,A.j)(W,{action:"rawEditorOpened"}),u(!0)},children:"Open raw editor"}),(0,o.tZ)(P.Z,{isOpen:a,preventClose:v,onRequestClose:function(){return u(!1)},children:(0,o.BX)("div",{className:"jsx-47d637c4b0043f26 content",children:[(0,o.BX)(m.gC,{spacing:2,align:"stretch",children:[(0,o.tZ)(y.Z,{level:4,children:"Raw Secrets Editor"}),(0,o.tZ)(x.Z,{children:"The text must be valid JSON object with keys and values as strings"}),(0,o.tZ)(T.Z,{ref:j,disabled:v,value:f,onChange:function(e){p(e.currentTarget.value)},validationResults:k?[{message:"Invalid input. Please make sure the data is valid JSON and all keys and values are strings.",state:"error"}]:void 0}),(0,o.BX)(m.Ug,{spacing:2,justify:"end",children:[(0,o.tZ)(b.Z,{disabled:v,onClick:function(){return u(!1)},children:"Cancel"}),(0,o.tZ)(b.Z,{loading:v,color:"primary",onClick:S,children:"Save"})]})]}),(0,o.tZ)(c(),{id:"47d637c4b0043f26",children:".content.jsx-47d637c4b0043f26{height:100%;width:100%;padding:var(--space-24)}.editable-area.jsx-47d637c4b0043f26{width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;border:1px solid var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8)0}.editor.jsx-47d637c4b0043f26{height:150px;padding-bottom:var(--space-8);-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.collapse.jsx-47d637c4b0043f26{cursor:pointer}"})]})})]})}function le(e,t){var n=X({},e);return"add"===t.type?n[t.key]=t.value:"update"===t.type?(delete n[t.oldKey],n[t.key]=t.value):delete n[t.key],n}function se(e){var t,n=e.fs,r=e.activeFile,a=(0,g.Z)(),c=F(l.useState(null),2),s=c[0],u=c[1],d=(0,O.eYX)(),b=d.data,v=d.loading,x=d.updateQuery,w=F((0,O.e_)(),1)[0],Z=(0,E.Z)();l.useEffect((function(){(0,A.Cn)(G),k.Z.set("enveditortour",!0)}),[]),l.useEffect((function(){function e(){return(e=U(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.readFile(".env");case 2:if((t=e.sent).error!==f.Df.NotFound){e.next=6;break}return a.current&&u({}),e.abrupt("return");case 6:if(!t.error){e.next=8;break}throw new Error("Error getting .env");case 8:if(a.current){e.next=10;break}return e.abrupt("return");case 10:r=h.Z.parse(t.content.toString()),u(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,u,a]);var j=l.useRef(null),S=l.useRef([]),C=function(){var e=U(i().mark((function e(t){var r,o,a,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}throw new Error("trying to write secrets before loading");case 2:return r=le(s,t),u(r),S.current.push(t),o=Math.random(),j.current=o,e.next=10,n.readFile(".env");case 10:if(c=e.sent,j.current===o){e.next=13;break}return e.abrupt("return");case 13:return c.error?a=r:(a=h.Z.parse(c.content.toString()),S.current.forEach((function(e){a=le(a,e)})),u(a)),S.current=[],l=h.Z.serialize(a),e.next=18,n.writeFile(".env",p.Z.from(l));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=U(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,A.j)(W,{action:"created",multiline:t.value.includes("\n")}),C(X({type:"add"},t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=U(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,A.j)(W,{action:"updated",multiline:n.value.includes("\n")}),C(X({type:"update",oldKey:t},n));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=U(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,A.j)(W,{action:"deleted"}),C({type:"delete",key:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(v||!s||!Z)return(0,o.tZ)(m.ZP,{align:"stretch",justify:"center",children:(0,o.tZ)(N.Z,{})});if(null===b||void 0===b||null===(t=b.currentUser)||void 0===t?void 0:t.seenIntro){var R=Object.keys(s);return(0,o.BX)(o.HY,{children:[(0,o.tZ)(ne,{secrets:s,onUpdateSecret:T,onDeleteSecret:P}),(0,o.tZ)("div",{children:(0,o.tZ)(J,{onAdd:_,otherKeys:R})}),R.length>0?(0,o.BX)(o.HY,{children:[(0,o.tZ)(I.Z,{size:2}),(0,o.BX)(m.gC,{spacing:1,align:"stretch",className:K,children:[(0,o.tZ)(y.Z,{level:5,children:"Use secrets in the Repl"}),(0,o.tZ)(re,{secrets:s,language:Z.language,activeFile:r})]})]}):null,(0,o.tZ)(I.Z,{size:2}),(0,o.tZ)(ce,{secrets:s,update:function(){var e=U(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(t),r=h.Z.serialize(t),e.next=4,n.writeFile(".env",p.Z.from(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})}return(0,o.tZ)(ae,{secrets:s,onAdd:_,activeFile:r,language:Z.language,onIntroDone:function(){w(),x((function(e){return e.currentUser?X({},e,{currentUser:X({},e.currentUser,{seenIntro:!0})}):e}))}})}!function(e){e.What="What",e.Add="Add",e.Use="Use",e.End="End"}(ie||(ie={}))},42458:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(35944),i=n(79547),o=n.n(i),a=(n(67294),n(8996)),c=n(70294),l=n(58458);function s(e){var t=e.isOn,n=e.onChange;return(0,r.BX)("div",{className:"jsx-ba89bcc1d04a3ebe toggle-container",children:[(0,r.BX)(a.Ug,{spacing:1,align:"center",wrap:"nowrap",children:[(0,r.tZ)(l.Z,{size:"small",children:"Preview"}),(0,r.tZ)(c.Z,{isOn:t,onChange:n})]}),(0,r.tZ)(o(),{id:"ba89bcc1d04a3ebe",children:".toggle-container.jsx-ba89bcc1d04a3ebe{background-color:var(--background-root);padding:4px var(--space-8);-webkit-border-top-left-radius:var(--border-radius-4);-moz-border-radius-topleft:var(--border-radius-4);border-top-left-radius:var(--border-radius-4);-webkit-border-top-right-radius:var(--border-radius-4);-moz-border-radius-topright:var(--border-radius-4);border-top-right-radius:var(--border-radius-4)}"})]})}},22944:function(e,t,n){var r=n(35944),i=n(67294),o=n(41664),a=n.n(o),c=n(56834),l=n(20795),s=n(15151),u=n(50348),d=n(30617),f=n(46846),p=n(27754),h=n(3204),m=n(67938),b=n(54929),v=n(70917),g=n(21130),y=(0,v.F4)("0%,100%{opacity:1;}50%{opacity:0.25;}");function x(){(0,c.j)(c.U3.HISTORY_USED,{action:"historyOpened"})}var w=function(e){var t=e.repl,n=e.isSaving;return(0,r.tZ)(a(),{prefetch:!1,href:{pathname:"/replHistory",query:{slug:t.slug}},as:"".concat(t.url,"/history"),children:(0,r.tZ)("a",{role:"button",tabIndex:0,onClick:x,onKeyDown:x,children:(0,r.tZ)(b.Z,{css:[h.l0.flex.row,h.l0.align.center,h.l0.color.foregroundDefault,n?(0,v.iv)({animation:"".concat(y," 2s infinite")}):null],children:(0,r.tZ)(g.Z,{size:28,alt:"Repl history",children:(0,r.tZ)(s.Z,{})})})})})},k=(0,v.iv)({color:h.TV.accentNegativeDefault}),Z=function(){return(0,r.BX)(b.Z,{css:[h.l0.flex.row],children:[(0,r.tZ)(g.Z,{size:18,disabled:!0,alt:"Reconnecting, changes will be synced when you\u2019re online",css:[k],children:(0,r.tZ)(l.CloudOff,{})}),(0,r.tZ)(m.x,{css:[(0,v.iv)({"@media (hover: hover)":{display:"none"}}),h.l0.pl(4),k],children:"Offline"})]})};t.Z=function(e){var t=e.canEdit,n=e.repl,o=function(){var e=(0,d.Z)().fs,t=(0,i.useState)(!1),n=t[0],r=t[1],o=(0,u.Z)(),a=(0,i.useState)(!1),c=a[0],l=a[1];return(0,i.useEffect)((function(){o===p.e.CONNECTED&&l(!0)}),[o]),(0,i.useEffect)((function(){return r(e.getStatus()===f.kO.Syncing),e.onStatusChange((function(e){r(e===f.kO.Syncing)}))}),[e]),c?{isSaving:n,isOffline:o!==p.e.CONNECTED}:{isSaving:!1,isOffline:!1}}(),a=o.isSaving,c=o.isOffline;return t?(0,r.tZ)(b.Z,{css:[h.l0.flex.row,h.l0.align.center,h.l0.height("100%")],children:c?(0,r.tZ)(Z,{}):(0,r.tZ)(w,{isSaving:a,repl:n})}):null}},22150:function(e,t,n){var r=n(35944),i=n(79547),o=n.n(i),a=n(67294),c=n(88534),l=n(38732),s=n(44054),u=n(98184),d=n(30617),f=n(50658),p=n(57923),h=n(5560),m=n(25108);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var g=".lesson/".concat("instructions.md"),y=function(e){var t=e.contents,n=(0,d.Z)().fs,i=(0,l.Z)(n,g);return(0,r.BX)("div",{className:o().dynamic([["21a55501dce7f81b",[s.j.tabletMin]]])+" root",children:[(0,r.tZ)("div",{className:o().dynamic([["21a55501dce7f81b",[s.j.tabletMin]]])+" content",children:(0,r.tZ)(c.Z,{components:{img:i},sourcePos:!0,children:t})}),(0,r.tZ)(o(),{id:"21a55501dce7f81b",dynamic:[s.j.tabletMin],children:".root.__jsx-style-dynamic-selector{height:100%;width:100%;overflow:auto;background:var(--background-default);z-index:2;position:relative}.content.__jsx-style-dynamic-selector{max-width:840px;margin:0 auto;padding:var(--space-32)var(--space-16)}@media only screen and (min-width:".concat(s.j.tabletMin,"px){.content.__jsx-style-dynamic-selector{padding:var(--space-48)var(--space-32)}}")})]})};t.Z=function(){var e=(0,h.Z)(),t=(0,d.Z)().fs,n=(0,p.Z)(),i=v(a.useState(null),2),o=i[0],c=i[1];return a.useEffect((function(){t.readFile(g).then((function(e){if(n.current)return e.error?(m.error(e.error),void f.$e((function(t){t.setTag("instructions-viewer",!0),f.Tb("Error loading instructions viewier: ".concat(e.error))}))):void c(e.content.toString())}))}),[t,n,e]),o?(0,r.tZ)(y,{contents:o}):(0,r.tZ)(u.Z,{preventHighlightBorder:!0})}},95249:function(e,t,n){n.d(t,{Z:function(){return Be}});var r=n(35944),i=n(67294),o=n(8996),a=n(34860),c=n(76529),l=n(51281),s=n(88534),u=n(23139),d=n(30617),f=n(50553),p=n(29698),h=n(79547),m=n.n(h),b=n(40425);var v=function(e){var t=e.title,n=e.sub,i=void 0!==n&&n,a=e.actions,c=void 0===a?[]:a;return(0,r.BX)(o.Ug,{justify:"space-between",align:"center",children:[(0,r.tZ)(m(),{id:"fd8117a15303f4ca",children:".header-action.jsx-fd8117a15303f4ca{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-24);height:var(--space-24);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);color:var(--foreground-dimmer)}.header-action.jsx-fd8117a15303f4ca:hover{background:var(--background-higher);cursor:pointer}"}),(0,r.tZ)(b.Z,{level:i?5:4,children:t}),(0,r.tZ)(o.Ug,{spacing:"4px",align:"center",children:c&&c.map((function(e,t){return(0,r.tZ)("div",{onClick:e.action,className:"jsx-fd8117a15303f4ca header-action",children:e.icon},t)}))})]})},g=n(94184),y=n.n(g);function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||Z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){if(e){if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}var j=function(e){var t=e.fileDrag,n=e.children,o=w(i.useState(!1),2),a=o[0],c=o[1],l=i.useRef(0);return(0,r.BX)("div",{onDragEnter:function(e){if(t){e.preventDefault(),e.stopPropagation();var n=!0;if(e.dataTransfer.items&&e.dataTransfer.items.length>0){if(t.accept)for(var r=e.dataTransfer.items,i=0;i<r.length;i++){var o=r[i];t.accept.includes(o.type)||(n=!1)}n&&(c(!0),l.current++)}}},onDragLeave:function(e){t&&(e.preventDefault(),e.stopPropagation(),l.current--,0===l.current&&c(!1))},onDrop:function(e){t&&(e.preventDefault(),e.stopPropagation(),l.current=0,c(!1),k(e.dataTransfer.files).filter((function(e){return t.accept.includes(e.type)})).forEach(t.onDrop))},className:"jsx-68ea6c6d36b196a3 section",children:[(0,r.tZ)(m(),{id:"68ea6c6d36b196a3",children:".section.jsx-68ea6c6d36b196a3{position:relative;width:100%}.dragfilter.jsx-68ea6c6d36b196a3{position:absolute;width:100%;height:100%;top:0;left:0;background:var(--accent-primary-default);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);opacity:.2}.dragfilter.hidden.jsx-68ea6c6d36b196a3{display:none!important}"}),n,(0,r.tZ)("div",{className:"jsx-68ea6c6d36b196a3 "+(y()("dragfilter",{hidden:!a})||"")})]})};function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var C,_=function(){var e=(0,d.Z)().session,t=E(i.useState(!1),2),n=t[0],a=t[1];return(0,r.BX)(j,{children:[(0,r.tZ)(v,{title:"Kaboom",actions:[{icon:(0,r.tZ)(f.Z,{rotate:n?0:-90}),action:function(){return a(!n)}}]}),n&&(0,r.BX)(o.gC,{spacing:1,children:[(0,r.tZ)("div",{}),(0,r.tZ)(l.Z,{Icon:p.Z,size:"small",onClick:function(){return e.openFile("template.html")},children:"Edit HTML Template"})]})]})},O=n(94590),T=n(11542),I=n(57541),A=n(49638),P=n(36377),N=n(13475),R=n(93770),z=n(67289),B=n(38880),D=n(93577),U=n(46846),L=n(7177),X=n(67952);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e){return function(t){for(var n in e)t.key===n&&e[n](t)}}function W(e,t){C||(C=document.createElement("input")).setAttribute("type","file"),C.setAttribute("accept",t.join(","));var n=function(){C.files&&(F(C.files).forEach(e),C.removeEventListener("change",n))};C.addEventListener("change",n),C.click()}var H=n(73216);function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var $=function(e){var t=e.isActive,n=e.name,a=e.icon,c=e.options,l=e.onClick,s=e.onRename,u=K(i.useState(!1),2),d=u[0],f=u[1],p=K(i.useState(null),2),h=p[0],b=p[1],v=(0,N.Z)((function(){f(!1)}),[]),g=(0,N.Z)((function(){b(null)}),[]);return i.useEffect((function(){g.current&&null!==h&&g.current.focus()}),[g,h]),(0,r.BX)("div",{onClick:l,className:"jsx-103c0085cc983ea1 "+(y()("entry",{active:t&&null===h})||""),children:[(0,r.BX)(o.Ug,{spacing:1,align:"center",children:[a,null===h?(0,r.tZ)("p",{className:"jsx-103c0085cc983ea1",children:n}):(0,r.tZ)(I.ZP,{ref:g,value:h,onChange:function(e){b(e.currentTarget.value)},onKeyDown:G({Escape:function(){b(null)},Enter:function(){s&&h&&s(h),b(null)}})})]}),c&&c.length>0&&(0,r.tZ)("div",{onClick:function(e){e.stopPropagation(),f(!d)},className:"jsx-103c0085cc983ea1 "+(y()("options-icon",{active:t})||""),children:(0,r.tZ)(H.MoreVertical,{})}),c&&c.length>0&&d&&(0,r.tZ)("div",{ref:v,onKeyDown:G({Escape:function(){f(!1)}}),className:"jsx-103c0085cc983ea1 options-box",children:c.map((function(e){return e?(0,r.tZ)("div",{onClick:function(t){t.stopPropagation(),f(!1),e.action(),"Rename"===e.name&&b(n)},className:"jsx-103c0085cc983ea1 "+(y()("option",{danger:e.danger})||""),children:e.name},e.name):null}))}),(0,r.tZ)(m(),{id:"103c0085cc983ea1",children:".entry.jsx-103c0085cc983ea1{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8);color:var(--foreground-dimmer);position:relative}.entry.active.jsx-103c0085cc983ea1{background:var(--accent-primary-default)!important;color:var(--white)!important;font-weight:var(--font-weight-medium)!important}.entry.jsx-103c0085cc983ea1:hover{color:var(--foreground-default);background:var(--background-higher);cursor:pointer}.options-icon.jsx-103c0085cc983ea1{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-16);height:var(--space-16);opacity:0;color:var(--foreground-dimmest)}.options-icon.jsx-103c0085cc983ea1:hover{color:var(--foreground-dimmest)}.options-icon.active.jsx-103c0085cc983ea1{opacity:1!important;color:var(--white)!important}.entry.jsx-103c0085cc983ea1:hover .options-icon.jsx-103c0085cc983ea1{opacity:1}.options-box.jsx-103c0085cc983ea1{position:absolute;top:var(--space-32);right:var(--space-16);padding:var(--space-4);background:var(--background-default);border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-regular)!important;z-index:500}.option.jsx-103c0085cc983ea1{padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);color:var(--foreground-default)}.option.danger.jsx-103c0085cc983ea1{color:var(--accent-negative-default)}.option.jsx-103c0085cc983ea1:hover{background:var(--background-higher)}.option.danger.jsx-103c0085cc983ea1:hover{background:var(--accent-negative-default);color:var(--white)}"})]})},q=n(58375);function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e){var t=e.close,n=e.entries,o=(0,d.Z)(),a=o.fs,c=o.session,l=(0,N.Z)(t,[]),s=(0,B.Z)().showError,u=Q((0,A.Z)({name:""}),3),f=u[0],p=u[2];return i.useEffect((function(){l.current&&l.current.focus()}),[l]),(0,r.tZ)(I.ZP,{ref:l,name:"name",onChange:p,onKeyDown:G({Escape:t,Enter:function(){var e="".concat(f.name,".js"),r="code/".concat(e);n.includes(e)?s("file '".concat(f.name,"' already exists")):(a.writeFile(r,R.Z.from("")).then((function(){c.openFile(r)})),t())}})})}var ee=function(e){var t=e.onFileOpen,n=(0,d.Z)().fs,o=(0,D.Z)(),a=Q(i.useState(!1),2),c=a[0],l=a[1],s=(0,B.Z)().showError,u=Q(i.useState(null),2),f=u[0],p=u[1],h=((0,P.Z)({path:"code",initialExpanded:!0,fs:n}).children||[]).filter((function(e){return e.type===U.Tv.File})).map((function(e){return e.filename})).sort();return(0,r.BX)(j,{fileDrag:{accept:["text/javascript"],onDrop:function(e){var t="code/".concat(e.name);h.includes(t)?s("scene '".concat((0,z.eb)(e.name),"' already exists")):e.text().then((function(e){n.writeFile(t,R.Z.from(e))}))}},children:[(0,r.tZ)(v,{sub:!0,title:"Code",actions:[{icon:(0,r.tZ)(O.Z,{}),action:function(){return l(!0)}}]}),(0,r.tZ)(T.Z,{height:"4px"}),(0,r.tZ)("div",{children:h.map((function(e){var i="code/".concat(e),a=(0,z.eb)(e),c=[{name:"Rename",action:function(){}}];return"main"!==a&&c.push({name:"Delete",action:function(){return p(i)},danger:!0}),(0,r.tZ)($,{isActive:i===o,onClick:function(){return t(i)},onRename:function(e){n.moveFile(i,"code/".concat(e,".js")).then((function(e){e.error&&s("failed to rename")}))},name:a,options:c},a)}))}),c&&(0,r.tZ)(J,{entries:h,close:function(){return l(!1)}}),f&&(0,r.tZ)(L.Z,{isOpen:Boolean(f),onRequestClose:function(){return p(null)},maxWidth:512,children:(0,r.tZ)(X.Z,{danger:!0,prompt:"Delete scene '".concat((0,z.eb)(f),"' ?"),desc:"Are you sure you want to delete this scene? This action cannot be undone.",onCancel:function(){return p(null)},confirmText:"Yes, delete this scene",icon:(0,r.tZ)(q.Z,{}),onConfirm:function(){n.deleteFile(f),p(null)}})})]})},te=n(34051),ne=n.n(te),re=n(90860),ie=n(52620),oe=n(60818),ae=n(54098),ce=n.n(ae),le=n(58458);function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var de=function(e){var t=e.kind,n=e.renderItem,a=e.onRequestClose,c=e.onAdd,s=function(e){var n="".concat(k,"/").concat(e);ce()(n).then((function(e){return e.arrayBuffer()})).then((function(r){var i="".concat(t,"/").concat(e);f.writeFile(i,R.Z.from(r)).then((function(t){if(t.error)throw new Error(t.error);p.openFile(i),c&&c(e,n)})),a()})).catch((function(){return Z("Failed to fetch ".concat(e))}))},u=(0,d.Z)(),f=u.fs,p=u.session,h=ue(i.useState([]),2),v=h[0],g=h[1],y=ue(i.useState(""),2),x=y[0],w=y[1],k="https://kaboomjs.com/".concat(t),Z=(0,B.Z)().showError;return i.useEffect((function(){ce()("https://kaboomjs.com/api/assets/".concat(t)).then((function(e){return e.json()})).then((function(e){return g(e)})).catch((function(){return Z("Failed to fetch assets lib listing")}))}),[g,Z,k]),(0,r.BX)("div",{className:"jsx-d616aed56d26af98 assets",children:[(0,r.BX)(o.gC,{spacing:2,children:[(0,r.tZ)(b.Z,{level:3,children:"Assets Lib (beta)"}),0===v.length?(0,r.tZ)(le.Z,{foreground:2,children:"Loading..."}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(I.ZP,{large:!0,label:"Search",onChange:function(e){w(e.target.value)}}),(0,r.tZ)("div",{className:"jsx-d616aed56d26af98 box",children:v.filter((function(e){return!x||e.includes(x)})).map((function(e){return(0,r.tZ)(i.Fragment,{children:n({name:e,url:"".concat(k,"/").concat(e),add:function(){return s(e)}})},e)}))}),(0,r.tZ)(l.Z,{size:"small",onClick:function(){v.length>0&&s(v[Math.floor(Math.random()*v.length)])},children:"I\u2019m Feeling Lucky"})]})]}),(0,r.tZ)(m(),{id:"d616aed56d26af98",children:".assets.jsx-d616aed56d26af98{padding:var(--space-24)}.box.jsx-d616aed56d26af98{width:100%;height:320px;overflow-x:hidden;overflow-y:scroll}"})]})};function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pe(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){he(e,t,n[t])}))}return e}function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||ge(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ge(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){if(e){if("string"===typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}function ye(e){var t=e.url,n=e.add;return(0,r.BX)(r.HY,{children:[(0,r.tZ)("img",{src:t,loading:"lazy",onClick:n,className:"jsx-4ad892a0258c4ced entry"}),(0,r.tZ)(m(),{id:"4ad892a0258c4ced",children:".entry.jsx-4ad892a0258c4ced{padding:var(--space-16);height:120px;-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:-o-pixelated;image-rendering:pixelated;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.entry.jsx-4ad892a0258c4ced:hover{cursor:pointer;background:var(--background-root)}"})]})}function xe(e){var t=e.close,n=e.entries,a=e.onFileOpen,c=(0,d.Z)().fs,s=(0,N.Z)(t,[]),u=i.useRef(null),f=(0,B.Z)().showError,p=be(i.useState({name:"",width:32,height:32}),2),h=p[0],b=p[1];i.useEffect((function(){u.current&&u.current.focus()}),[u]);var v=function(){if(0!==h.name.length){var e=h.width,r=h.height;if(isNaN(e)||isNaN(r)||e<=0||r<=0)f("invalid width / height!");else if(e>256||r>256)f("only supports sprites smaller than 256x256 yet");else{var i="".concat(h.name,".pedit"),o="sprites/".concat(i);n.includes(i)?f("sprite '".concat(h.name,"' already exists")):(c.writeFile(o,R.Z.from(JSON.stringify({fromKaboom:!0,width:h.width,height:h.height}))).then((function(){a(o)})),t())}}else f("invalid 'name'")};return(0,r.BX)("div",{ref:s,onKeyDown:G({Escape:t,Enter:v}),className:"jsx-a1d2f6333860f5ac dialog",children:[(0,r.BX)(o.gC,{spacing:1,children:[(0,r.tZ)(I.ZP,{label:"Name",name:"name",large:!0,ref:u,value:h.name,onChange:function(e){b(me({},h,{name:e.target.value}))}}),(0,r.BX)(o.Ug,{spacing:1,wrap:"nowrap",children:[(0,r.tZ)(I.ZP,{label:"Width",name:"width",large:!0,value:h.width,onChange:function(e){return b(me({},h,{width:parseInt(e.target.value,10)||0}))}}),(0,r.tZ)(I.ZP,{label:"Height",name:"height",large:!0,value:h.height,onChange:function(e){return b(me({},h,{height:parseInt(e.target.value,10)||0}))}})]}),(0,r.BX)(o.Ug,{spacing:1,children:[(0,r.tZ)(l.Z,{size:"medium",onClick:t,children:"Cancel"}),(0,r.tZ)(l.Z,{size:"medium",color:"primary",onClick:v,children:"Create"})]})]}),(0,r.tZ)(m(),{id:"a1d2f6333860f5ac",children:".dialog.jsx-a1d2f6333860f5ac{background:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);margin:var(--space-8)auto;width:-webkit-calc(100%);width:-moz-calc(100%);width:calc(100%);padding:var(--space-16)}"})]})}var we=function(e){var t=e.onFileOpen,n=(0,d.Z)().fs,o=(0,B.Z)().showError,a=(0,D.Z)(),c=be(i.useState(!1),2),l=c[0],s=c[1],u=be(i.useState(!1),2),f=u[0],p=u[1],h=be(i.useState(null),2),b=h[0],g=h[1],y=be(i.useState({}),2),x=y[0],w=y[1],k=(0,oe.Z)(a),Z=i.useCallback((function(e){var t=function(){var t,r=(t=ne().mark((function t(){var r,i,o,a,c,l,s;return ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="sprites/".concat(e),t.next=3,n.stat(r);case 3:if((i=t.sent).exists){t.next=7;break}return x[e]&&w((function(t){var n=me({},t);return delete n[e],n})),t.abrupt("return");case 7:if(o=i.lastModified.getTime(),!x[e]||x[e].lastMod!==o){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,n.readFile(r);case 12:if(!(a=t.sent).error){t.next=15;break}return t.abrupt("return");case 15:e.endsWith("pedit")?(c=a.content.toString(),(l=JSON.parse(c)).fromKaboom||w((function(t){return me({},t,he({},e,{lastMod:o,img:l.frames[0]}))}))):(s=(0,z.yC)(r))&&w((function(t){return me({},t,he({},e,{lastMod:o,img:"data:".concat(s,";base64,").concat(a.content.toString("base64"))}))}));case 16:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){pe(o,r,i,a,c,"next",e)}function c(e){pe(o,r,i,a,c,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return t(),x[e]?x[e].img:null}),[x,n]),S=((0,P.Z)({path:"sprites",initialExpanded:!0,fs:n}).children||[]).filter((function(e){return e.type===U.Tv.File})).map((function(e){return e.filename})).sort(),E=["image/png","image/jpeg",".pedit"],C=function(e){var t="sprites/".concat(e.name);if(S.includes(t))return o("sprite '".concat((0,z.eb)(e.name),"' already exists"));e.arrayBuffer().then((function(e){n.writeFile(t,R.Z.from(e))}))},_=[{icon:(0,r.tZ)(re.Z,{}),action:function(){return p(!0)}},{icon:(0,r.tZ)(ie.Z,{}),action:function(){return W(C,E)}},{icon:(0,r.tZ)(O.Z,{}),action:function(){return s(!0)}}];return(0,r.BX)(j,{fileDrag:{accept:E,onDrop:C},children:[(0,r.tZ)(v,{sub:!0,title:"Sprites",actions:_}),(0,r.tZ)(T.Z,{height:"4px"}),(0,r.tZ)("div",{className:"jsx-286709118fe5858",children:S.map((function(e){var i="sprites/".concat(e),c=(0,z.r6)(e),l=(0,z.eb)(e),s=Z(e),u=k?[{name:"Insert load code",action:function(){var e="".concat("pedit"===c?"loadPedit":"loadSprite","(").concat(JSON.stringify(l),", ").concat(JSON.stringify(i),");");k({code:e})}}]:[];return(0,r.tZ)($,{isActive:i===a,onClick:function(){return t(i)},onRename:function(e){n.moveFile(i,"sprites/".concat(e,".").concat(c)).then((function(e){e.error&&o("failed to rename")}))},icon:(0,r.tZ)("div",{className:"jsx-286709118fe5858 preview-img",children:s&&(0,r.tZ)("img",{src:s,className:"jsx-286709118fe5858"})}),name:l,options:ve(u).concat([{name:"Rename",action:function(){}},{name:"Delete",action:function(){return g(i)},danger:!0}])},l)}))}),l&&(0,r.tZ)(xe,{entries:S,close:function(){return s(!1)},onFileOpen:t}),b&&(0,r.tZ)(L.Z,{isOpen:Boolean(b),onRequestClose:function(){return g(null)},maxWidth:512,children:(0,r.tZ)(X.Z,{danger:!0,prompt:"Delete sprite '".concat((0,z.eb)(b),"' ?"),desc:"Are you sure you want to delete this sprite? This action cannot be undone.",confirmText:"Yes, delete this sprite",icon:(0,r.tZ)(q.Z,{}),onCancel:function(){return g(null)},onConfirm:function(){n.deleteFile(b),g(null)}})}),(0,r.tZ)(L.Z,{isOpen:f,onRequestClose:function(){return p(!1)},children:(0,r.tZ)(de,{kind:"sprites",renderItem:ye,onRequestClose:function(){return p(!1)}})}),(0,r.tZ)(m(),{id:"286709118fe5858",children:".preview-img.jsx-286709118fe5858{width:var(--space-32);height:var(--space-32);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden}.preview-img.jsx-286709118fe5858 img.jsx-286709118fe5858{width:100%;-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:-o-pixelated;image-rendering:pixelated;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:crisp-edges}"})]})};function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||Se(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e){return function(e){if(Array.isArray(e))return ke(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Se(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){if(e){if("string"===typeof e)return ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ke(e,t):void 0}}function Ee(e){var t=e.name,n=e.url,i=e.add;return(0,r.BX)(o.Ug,{justify:"space-between",align:"center",children:[(0,r.BX)(o.gC,{spacing:1,children:[(0,r.tZ)(le.Z,{children:t}),(0,r.tZ)("audio",{src:n,controls:!0})]}),(0,r.tZ)(l.Z,{onClick:i,children:"Import"})]})}var Ce=function(e){var t=e.onFileOpen,n=(0,d.Z)().fs,o=(0,D.Z)(),a=(0,B.Z)().showError,c=Ze(i.useState(null),2),l=c[0],s=c[1],u=Ze(i.useState(!1),2),f=u[0],p=u[1],h=(0,oe.Z)(o),m=((0,P.Z)({path:"sounds",initialExpanded:!0,fs:n}).children||[]).filter((function(e){return e.type===U.Tv.File})).map((function(e){return e.filename})).sort(),b=["audio/ogg","audio/mpeg","audio/wav"],g=function(e){var t="sounds/".concat(e.name);if(m.includes(t))return a("sound '".concat((0,z.eb)(e.name),"' already exists"));e.arrayBuffer().then((function(e){n.writeFile(t,R.Z.from(e))}))},y=[{icon:(0,r.tZ)(re.Z,{}),action:function(){return p(!0)}},{icon:(0,r.tZ)(ie.Z,{}),action:function(){return W(g,b)}}];return(0,r.BX)(j,{fileDrag:{accept:b,onDrop:g},children:[(0,r.tZ)(v,{sub:!0,title:"Sounds",actions:y}),(0,r.tZ)(T.Z,{height:"4px"}),(0,r.tZ)("div",{children:m.map((function(e){var i=(0,z.eb)(e),c="sounds/".concat(e),l=h?[{name:"Insert load code",action:function(){return h({code:"loadSound(".concat(JSON.stringify(i),", ").concat(JSON.stringify(c),");")})}}]:[];return(0,r.tZ)($,{isActive:c===o,onClick:function(){return t(c)},onRename:function(t){n.moveFile(c,"sounds/".concat(t,".").concat((0,z.r6)(e))).then((function(e){e.error&&a("failed to rename")}))},name:i,options:je(l).concat([{name:"Rename",action:function(){}},{name:"Delete",action:function(){return s(c)},danger:!0}])},i)}))}),l&&(0,r.tZ)(L.Z,{isOpen:Boolean(l),onRequestClose:function(){return s(null)},maxWidth:512,children:(0,r.tZ)(X.Z,{danger:!0,prompt:"Delete sound '".concat((0,z.eb)(l),"' ?"),desc:"Are you sure you want to delete this sound? This action cannot be undone.",confirmText:"Yes, delete this sound",icon:(0,r.tZ)(q.Z,{}),onCancel:function(){return s(null)},onConfirm:function(){n.deleteFile(l),s(null)}})}),(0,r.tZ)(L.Z,{isOpen:f,onRequestClose:function(){return p(!1)},children:(0,r.tZ)(de,{kind:"sounds",renderItem:Ee,onRequestClose:function(){return p(!1)},onAdd:function(e,t){return new window.Audio(t).play()}})})]})},_e=n(44262),Oe=n(19826),Te=n(92594);function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e){var t=e.file,n=e.name,i=(0,d.Z)().session,a=(0,Te.Z)()===t;return(0,r.BX)("div",{onClick:function(){i.setPreviewedFile(null),i.setPreviewedFile(t)},className:"jsx-148e6ca45d3ccd5a entry",children:[(0,r.BX)(o.Ug,{spacing:1,align:"center",children:[a?(0,r.tZ)(_e.Z,{}):(0,r.tZ)(Oe.Z,{}),(0,r.tZ)(le.Z,{foreground:a?1:2,fontWeight:a?"medium":"regular",children:null!==n&&void 0!==n?n:(0,z.eb)(t)})]}),(0,r.tZ)(m(),{id:"148e6ca45d3ccd5a",children:".entry.jsx-148e6ca45d3ccd5a{cursor:pointer}"})]})}var Ne=function(){var e=Ae(i.useState(!0),2),t=e[0],n=e[1],a=Ae(i.useState(!1),2),c=a[0],l=a[1],s=(0,d.Z)().fs,u=(0,P.Z)({path:"learn",initialExpanded:!0,fs:s});i.useEffect((function(){var e=!1;return s.stat("README.md").then((function(t){e||t.exists&&l(!0)})),function(){e=!0}}),[]);var p=(u.children||[]).filter((function(e){return e.type===U.Tv.File&&e.filename.endsWith(".md")})).map((function(e){return e.filename})).sort();return(0,r.BX)(j,{children:[(0,r.tZ)(v,{sub:!0,title:"Learn",actions:[{icon:(0,r.tZ)(f.Z,{rotate:t?0:-90}),action:function(){return n(!t)}}]}),t&&(0,r.BX)(o.gC,{spacing:1,children:[(0,r.tZ)("div",{}),c&&(0,r.tZ)(Pe,{name:"Intro",file:"README.md"}),p.map((function(e){return(0,r.tZ)(Pe,{file:"learn/".concat(e)},e)}))]})]})};function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(e){var t=e.onFileOpen,n=ze(i.useState(!1),2),d=n[0],f=n[1];return(0,r.BX)(u.G7,{css:[u.l0.p(8),u.l0.flex.growAndShrink(1),u.l0.overflow("scroll"),{userSelect:"none"}],children:[(0,r.BX)(o.gC,{spacing:1,children:[(0,r.tZ)(_,{}),(0,r.tZ)(ee,{onFileOpen:t}),(0,r.tZ)(we,{onFileOpen:t}),(0,r.tZ)(Ce,{onFileOpen:t}),(0,r.tZ)(Ne,{}),(0,r.tZ)("div",{}),(0,r.tZ)(l.Z,{Icon:a.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com")},children:"Docs"}),(0,r.tZ)(l.Z,{Icon:a.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com/play")},children:"Examples"}),(0,r.tZ)(l.Z,{Icon:c.Z,size:"small",onClick:function(){return f(!0)},children:"What\u2019s new"})]}),(0,r.tZ)(u.u_,{isOpen:d,onRequestClose:function(){return f(!1)},children:(0,r.tZ)(u.G7,{css:[u.l0.colWithGap(16),u.l0.p(32)],children:(0,r.tZ)(s.Z,{children:'\n# New Kaboom Workspace\n\n- **No weird delay when run after editing.** Just press Cmd + S to refresh webview and quickly iterate!\n- **Helpful error reporting.** No need to go into browser console every time. The kaboom console displays your errors nicely.\n- **Support NPM packages and typescript by default.** Kaboom dev server builds your code with esbuild on the fly.\n- **Replit DB and Auth integration.** Make a score board even multiplayer with DB and Auth!\n- **In editor tutorial.** The template comes with a nice intro tutorial which you can learn and code along.\n- **Autocomplete.** Updated kaboom lib comes with detailed jsdoc for every function. No need to pull your hair out to figure out how certain functions work!\n- **HTML template.** Easily customize the html for your game.\n- **Total control over which version of Kaboom you use.** it\'s managed by NPM.\n- **Assets Library** Grab some quick assets to test out a game idea.\n- **Transparent dev server.** The dev server scripts are just in the Repl, customize them or toss them out if you want to. Or turn it into a multiplayer game server!\n- **New library version** The template comes with kaboom2000 (beta), with bunch of [new stuff and improvements](https://github.com/replit/kaboom/blob/master/CHANGELOG.md)\n\n## Migration Guide\n\n- The kaboom template now will not generate the initializing and assets loading code (`kaboom()`, `loadSprite()` etc.) for you, allowing more customized setup, and making it more portable with using kaboom outside replit.\n\n```js\nimport kaboom from "kaboom";\n\n// initialize context\nkaboom();\n\n// load assets\nloadSprite("bean", "sprites/bean.png");\nloadSound("coin", "sounds/coin.mp3");\n\n// the rest is the same\nconst player = add([\n\tsprite("bean"),\n\tarea(),\n]);\n```\n\nFor easier assets loading, use the "Insert load code" option in the asset entry option menu.\n\n- The template by default is running `kaboom@next`, which is currently the beta version of kaboom2000. It contains breaking changes, all listed in [CHANGELOG.md](https://github.com/replit/kaboom/blob/master/CHANGELOG.md). If you don\'t feel like migrating now, you can always `npm install kaboom@5.1`\n'})})})]})}},67542:function(e,t,n){n.d(t,{Z:function(){return j}});var r=n(35944),i=n(67294),o=n(44054),a=n(23589),c=n(98184),l=n(92594),s=n(30617);n(90652);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(){var e=(0,s.Z)().session,t=d(i.useState(e.getCursorPosition()),2),n=t[0],r=t[1];return i.useEffect((function(){return r(e.getCursorPosition()),e.onCursorPositionChanged(r)}),[e]),n}var p=n(85252),h=n(32537),m=n(67289),b=n(24931),v=n(23139),g=n(46846),y=n(93577);function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var k=(0,h.Z)((function(e){e.scrollIntoView({behavior:"smooth",block:"center"})}),100),Z=i.memo(b.Z);function j(e){var t=e.style,n=(0,s.Z)().fs,a=f(),u=(0,y.Z)(),d=(0,s.Z)().session,h=w(i.useState(!1),2),b=h[0],x=h[1],j=(0,l.Z)();i.useEffect((function(){u&&j&&j!==u&&"md"===(0,m.r6)(u)&&d.setPreviewedFile(u)}),[j,u,d]);var E=i.useRef(null),C=(0,p.Z)((function(){x(!0),E.current&&clearTimeout(E.current),E.current=setTimeout((function(){x(!1)}),150)}),{type:"throttle",wait:37.5});i.useLayoutEffect((function(){if(!b&&u===j){var e=document.querySelectorAll(".rendered-markdown [data-sourcepos]"),t=Array.from(e).reverse();if(t){var n=a.lineNumber,r=a.column,i=!0,o=!1,c=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var d=l.value,f=d.dataset.sourcepos;if(!f)throw new Error("Expected data source pos on selected element");var p=w(f.split("-"),2),h=p[0],m=p[1],v=w(h.split(":").map(Number),2),g=v[0],y=v[1],x=w(m.split(":").map(Number),2),Z=x[0],S=x[1];if(n>=g&&r>=y&&(n<Z||n===Z&&r<=S))return void k(d)}}catch(E){o=!0,c=E}finally{try{i||null==s.return||s.return()}finally{if(o)throw c}}}}}),[a,b,u,j]);var _,O,T,I=w(i.useState(null),2),A=I[0],P=I[1];return i.useEffect((function(){if(P(null),j&&(0,m.Mb)(j))return n.watchOtFile(j,{onReady:function(e){var t=e.initialContent;P(t.toString())},onChange:function(e){var t=e.latestContent;P(t)},onMoveOrDelete:function(e){e.eventType===g.kS.Delete&&d.setPreviewedFile(null)}})}),[j,n,d]),j?null===A?(0,r.tZ)(c.Z,{preventHighlightBorder:!0}):(0,r.BX)(v.G7,{css:[v.l0.colWithGap(8),v.l0.height("100%"),v.l0.width("100%"),v.l0.overflow("auto"),v.l0.backgroundColor.backgroundDefault,v.l0.zIndex(2),v.l0.align.center,v.l0.py(16),v.l0.px(16),(_={margin:"0 auto"},O="@media only screen and (min-width: ".concat(o.j.tabletMin,"px)"),T=v.l0.px(32),O in _?Object.defineProperty(_,O,{value:T,enumerable:!0,configurable:!0,writable:!0}):_[O]=T,_)],tag:"div",innerRef:C,children:[(0,r.tZ)(v.G7,{css:[v.l0.rowWithGap(0),v.l0.height(30),v.l0.width("100%"),v.l0.justify.spaceBetween,v.l0.align.center,v.l0.backgroundColor.backgroundDefault],children:(0,r.tZ)(S,{})}),(0,r.tZ)(v.G7,{css:[v.l0.width("100%"),{"& .rendered-markdown":[v.l0.flex.column,v.l0.center],"& .rendered-markdown > *":[v.l0.maxWidth(840),v.l0.width("100%")],"& .rendered-markdown > table":v.l0.maxWidth("100%")}],children:(0,r.tZ)(Z,{path:j,source:A,fs:n,sourcePos:!0})})]}):(0,r.tZ)("div",{style:t,children:"No current file"})}var S=function(){var e=(0,l.Z)();return(0,r.BX)(v.G7,{css:[v.l0.rowWithGap(2),v.l0.color.foregroundDimmer,v.l0.width("calc(100% - ".concat(v.TV.space16,")")),v.l0.align.center],children:[(0,r.tZ)(a.Z,{}),(0,r.BX)(v.xv,{css:v.l0.m(4),color:"dimmer",children:["Preview of ",(0,r.tZ)("a",{href:"#".concat(e),children:e})]})]})}},20370:function(e,t,n){n.d(t,{Z:function(){return be}});var r=n(35944),i=n(71227),o=n(79547),a=n.n(o),c=n(67294),l=n(94184),s=n.n(l),u=n(35060),d=n(94157),f=n(50553),p=n(30617),h=n(51281),m=n(57923),b=n(43552),v=n(34051),g=n.n(v),y=n(56834);function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){w(o,r,i,a,c,"next",e)}function c(e){w(o,r,i,a,c,"throw",e)}a(void 0)}))}}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){return t.some((function(t){var n,r;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===(null===(r=e.name)||void 0===r?void 0:r.toLowerCase())}))}var S=n(50658),E=n(90652);function C(e){var t=e.searchPackagesFn,n=e.query,r=e.packagerType,i=(0,c.useState)([]),o=i[0],a=i[1],l=(0,c.useState)(),s=l[0],u=l[1],d=(0,c.useState)(!1),f=d[0],p=d[1],h=(0,E.Z)(n,400);return(0,c.useEffect)((function(){if(u(null),""===h)return p(!1),void a([]);p(!0),(0,y.j)(y.U3.PACKAGE_MANAGER_USED,{action:"searched",query:h,packagerType:r});var e=!1;return t(h).then((function(t){e||a(t)})).catch((function(t){S.Tb(t),e||u(t)})).finally((function(){e||p(!1)})),function(){e=!0}}),[t,h,r]),{searchResults:o,isLoading:f,error:s}}var _=n(88503);function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){T(e,t,n[t])}))}return e}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e){var t=e.combobox,n=e.inputValue,i=e.setInputValue,o=e.isLoading,l=e.isDisplayingInstalledPackages,u=A(c.useState(!1),2),d=u[0],f=u[1];return(0,r.BX)("div",I({},t.getComboboxProps(),{className:"jsx-2d4a219fe90c6295 "+(s()("pkgsearch-search-bar",{focused:d})||""),children:[(0,r.tZ)("input",I({},t.getInputProps({type:"text",placeholder:"search to install packages",value:n,onFocus:function(){f(!0)},onBlur:function(){f(!1)},onChange:function(e){i(e.currentTarget.value)},autoFocus:!0}),{className:"jsx-2d4a219fe90c6295"})),(0,r.tZ)("div",{className:"jsx-2d4a219fe90c6295 pkgsearch-search-bar-icon",children:(0,r.tZ)(N,{onXIcon:function(){return i("")},isDisplayingInstalledPackages:l,isSearchLoading:o})}),(0,r.tZ)(a(),{id:"2d4a219fe90c6295",children:".pkgsearch-search-bar.jsx-2d4a219fe90c6295{width:-webkit-calc(100% - 24px);width:-moz-calc(100% - 24px);width:calc(100% - 24px);margin:0 12px 12px 12px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;overflow:hidden;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;border:1px solid var(--foreground-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.pkgsearch-search-bar.focused.jsx-2d4a219fe90c6295{border-color:var(--accent-primary-default)}.pkgsearch-search-bar.jsx-2d4a219fe90c6295 input.jsx-2d4a219fe90c6295::-webkit-input-placeholder{color:var(--foreground-dimmer)}.pkgsearch-search-bar.jsx-2d4a219fe90c6295 input.jsx-2d4a219fe90c6295:-moz-placeholder{color:var(--foreground-dimmer)}.pkgsearch-search-bar.jsx-2d4a219fe90c6295 input.jsx-2d4a219fe90c6295::-moz-placeholder{color:var(--foreground-dimmer)}.pkgsearch-search-bar.jsx-2d4a219fe90c6295 input.jsx-2d4a219fe90c6295:-ms-input-placeholder{color:var(--foreground-dimmer)}.pkgsearch-search-bar.jsx-2d4a219fe90c6295 input.jsx-2d4a219fe90c6295::-ms-input-placeholder{color:var(--foreground-dimmer)}.pkgsearch-search-bar.jsx-2d4a219fe90c6295 input.jsx-2d4a219fe90c6295::placeholder{color:var(--foreground-dimmer)}.pkgsearch-search-bar.jsx-2d4a219fe90c6295 input.jsx-2d4a219fe90c6295{padding:var(--space-8);font-size:var(--font-size-default);border:0;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;outline:none;background-color:transparent;color:var(--foreground-default)}.pkgsearch-search-bar-icon.jsx-2d4a219fe90c6295{padding-right:var(--space-8);margin-right:8px;width:14px;height:14px;vertical-align:middle}"})]}))}function N(e){var t=e.isDisplayingInstalledPackages,n=e.isSearchLoading,i=e.onXIcon;return n?(0,r.BX)("div",{className:"jsx-72a78eaf553adb92",children:[(0,r.tZ)("div",{className:"jsx-72a78eaf553adb92 pkgsearch-search-loading"}),(0,r.tZ)(a(),{id:"72a78eaf553adb92",children:".pkgsearch-search-loading.jsx-72a78eaf553adb92{display:block;width:14px!important;height:14px!important;background-image:url(/public/images/loading_dots.gif);background-position:center center;background-repeat:no-repeat;-webkit-background-size:contain;-moz-background-size:contain;-o-background-size:contain;background-size:contain}"})]}):t?(0,r.tZ)(_.Z,{color:"var(--foreground-dimmer)",style:{display:"block"}}):(0,r.BX)("div",{onClick:i,className:"jsx-a8c1e8780f7b9ee0",children:[(0,r.tZ)(u.Z,{color:"var(--foreground-dimmer)",style:{display:"block"}}),(0,r.tZ)(a(),{id:"a8c1e8780f7b9ee0",children:"div.jsx-a8c1e8780f7b9ee0{cursor:pointer}"})]})}var R=n(94590),z=n(58375),B=n(1517);function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e){var t=e.focused,n=e.searching,i=e.onActionClick,o=e.actionAltText,l=e.isAlreadyInstalled,u=e.isPackagerRunning,d=e.isIconLoading,p=e.statusComponent,m=e.itemName,b=e.itemDescription,v=void 0===b?"This package has no description.":b,g=e.itemVersion,y=e.itemHomepageURL,x=e.itemLicense,w=e.itemAuthor,k=e.itemDependencies,Z=U(c.useState(!1),2),j=Z[0],S=Z[1];return(0,r.BX)("div",{className:"jsx-209430e794998c42 "+(s()("pkgsearch-details",t&&"pkgsearch-details-hover")||""),children:[(0,r.BX)("div",{className:"jsx-209430e794998c42 pkgsearch-details-header",children:[(0,r.BX)("div",{onClick:function(){return S(!j)},className:"jsx-209430e794998c42 pkgsearch-details-header-title",children:[(0,r.tZ)("div",{className:"jsx-209430e794998c42 pkgsearch-details-libname",children:m}),g&&!j&&!n&&(0,r.tZ)("div",{className:"jsx-209430e794998c42 pkgsearch-details-header-version",children:g}),j&&(0,r.tZ)(h.Z,{border:!1,className:"collapse",textColor:"var(--foreground-dimmer)",backgroundColor:"var(--background-default)","aria-label":"Collapse","data-microtip-position":"bottom",role:"tooltip",onClick:function(){return S(!j)},children:(0,r.tZ)(f.Z,{})})]}),(0,r.tZ)("div",{className:"jsx-209430e794998c42 pkgsearch-details-cta",children:(0,r.tZ)(h.Z,{border:!1,"aria-label":o,className:"add-button",textColor:"var(--foreground-dimmer)",backgroundColor:"var(--background-default)","data-microtip-position":"bottom-left",role:"tooltip",onClick:function(e){e.currentTarget.blur(),i()},children:(0,r.tZ)(X,{isAlreadyInstalled:l,isPackagerRunning:u,isIconLoading:d})})})]}),p,(0,r.BX)("div",{className:"jsx-209430e794998c42 pkgsearch-details-metadata",children:[(0,r.BX)("div",{onClick:function(){n&&!j&&S(!0)},className:"jsx-209430e794998c42 "+("details-meta-item "+(j?"":"closed ")+(n?"show-in-search ":"")||0),children:[g&&(0,r.BX)("div",{className:"jsx-209430e794998c42 label",children:["version ",g]}),(0,r.tZ)("div",{className:"jsx-209430e794998c42 value",children:u&&!v?"loading...":v})]}),y&&(0,r.BX)("div",{className:"jsx-209430e794998c42 "+("details-meta-item "+(j?"":"closed ")||0),children:[(0,r.tZ)("div",{className:"jsx-209430e794998c42 label",children:"Website"}),(0,r.tZ)("div",{className:"jsx-209430e794998c42 value",children:(0,r.tZ)("a",{href:y,rel:"noreferer noopener",target:"_blank",className:"jsx-209430e794998c42",children:y})})]}),x&&(0,r.BX)("div",{className:"jsx-209430e794998c42 "+("details-meta-item "+(j?"":"closed ")||0),children:[(0,r.tZ)("div",{className:"jsx-209430e794998c42 label",children:"License"}),(0,r.tZ)("div",{className:"jsx-209430e794998c42 value",children:x})]}),w&&(0,r.BX)("div",{className:"jsx-209430e794998c42 "+("details-meta-item "+(j?"":"closed ")||0),children:[(0,r.tZ)("div",{className:"jsx-209430e794998c42 label",children:"Author"}),(0,r.tZ)("div",{className:"jsx-209430e794998c42 value",children:w})]}),k&&k.length>0?(0,r.BX)("div",{className:"jsx-209430e794998c42 "+("details-meta-item pkgsearch-details-deps"+(j?"":"closed ")||0),children:[(0,r.BX)("div",{className:"jsx-209430e794998c42 label",children:[k.length," dependencies"]}),(0,r.tZ)("div",{className:"jsx-209430e794998c42 value",children:(0,r.tZ)("ul",{className:"jsx-209430e794998c42 pkgsearch-details-deps-list",children:k.map((function(e){return(0,r.tZ)("li",{className:"jsx-209430e794998c42",children:e},e||"")}))})})]}):null]}),(0,r.tZ)(a(),{id:"209430e794998c42",children:".pkgsearch-details.jsx-209430e794998c42{padding:var(--space-8)var(--space-8)var(--space-8)12px;height:100%;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1;overflow:visible;color:var(--foreground-dimmer);cursor:pointer;border-top:1px solid var(--background-highest);position:relative}.pkgsearch-details-hover.jsx-209430e794998c42{z-index:99}.pkgsearch-details-header.jsx-209430e794998c42{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.pkgsearch-details-header-title.jsx-209430e794998c42{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-flex:2;-webkit-flex-grow:2;-moz-box-flex:2;-ms-flex-positive:2;flex-grow:2;height:32px;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.pkgsearch-details-libname.jsx-209430e794998c42{color:var(--foreground-default);font-size:var(--font-size-small);font-weight:var(--font-weight-medium);word-wrap:break-word}.pkgsearch-details-header-version.jsx-209430e794998c42{padding-left:4px;vertical-align:text-bottom;color:var(--foreground-dimmer);font-size:var(--font-size-small)}.pkgsearch-details-metadata.jsx-209430e794998c42:not(:empty){}.details-meta-item.jsx-209430e794998c42{padding:var(--space-8)0;width:100%}.details-meta-item.closed.jsx-209430e794998c42{display:none}.details-meta-item.closed.show-in-search.jsx-209430e794998c42{display:block;padding:var(--space-8)0}.details-meta-item.jsx-209430e794998c42 .label.jsx-209430e794998c42{margin-bottom:4px;color:var(--foreground-dimmer);font-size:var(--font-size-small)}.details-meta-item.jsx-209430e794998c42 .value.jsx-209430e794998c42{line-height:20px;word-wrap:break-word;font-size:var(--font-size-default);color:var(--foreground-default);overflow:hidden}.pkgsearch-details-deps-list.jsx-209430e794998c42{list-style:none}.pkgsearch-search-result-li.jsx-209430e794998c42{overflow:visible;position:relative;z-index:99}"})]})}function X(e){var t=e.isPackagerRunning,n=e.isAlreadyInstalled;return e.isIconLoading?(0,r.BX)("div",{className:"jsx-465bfe593a07b572 loadingIconRotate",children:[(0,r.tZ)(B.Z,{}),(0,r.tZ)(a(),{id:"465bfe593a07b572",children:".loadingIconRotate.jsx-465bfe593a07b572{-webkit-animation:rotate 1s linear infinite;-moz-animation:rotate 1s linear infinite;-o-animation:rotate 1s linear infinite;animation:rotate 1s linear infinite}@-webkit-keyframes rotate{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes rotate{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes rotate{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]}):n?t?(0,r.tZ)(z.Z,{color:"var(--foreground-dimmest)"}):(0,r.tZ)(z.Z,{}):t?(0,r.tZ)(R.Z,{color:"var(--foreground-dimmest)"}):(0,r.tZ)(R.Z,{})}var M=n(96594),F=n(11935),G=n(54929),W=n(3204);function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){V(e,t,n[t])}))}return e}function $(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e){var t=e.filesAffected,n=q(c.useState(""),2),i=n[0],o=n[1],l=(0,p.Z)(),s=l.packager,u=l.session,f=function(e){var t=e.packager,n=Z(c.useState(!1),2),r=n[0],i=n[1],o=Z(c.useState(!1),2),a=o[0],l=o[1],s=Z(c.useState("package name"),2),u=s[0],d=s[1],f=Z(c.useState([]),2),p=f[0],h=f[1];c.useEffect((function(){i(!0);var e=!1;return t.listSpecfile().then((function(t){e||(t.error?h([]):t.packages&&h(t.packages),i(!1))})),function(){e=!0}}),[t]);var m=c.useCallback(function(){var e=k(g().mark((function e(n){var o,a,c;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt("return");case 2:if((0,y.j)(y.U3.PACKAGE_MANAGER_USED,{action:"installed",packageId:n.name}),n.name){e.next=5;break}throw new Error("Package has no name");case 5:if(!j(n,p)){e.next=7;break}return e.abrupt("return");case 7:return i(!0),e.next=10,t.addPackages([{name:n.name}]);case 10:return e.next=12,t.listSpecfile();case 12:o=e.sent,a=o.packages,c=o.error,a&&h(a),c&&h([]),i(!1);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,p,r]),b=c.useCallback(function(){var e=k(g().mark((function e(n){var o,a,c;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt("return");case 2:if(n.name){e.next=4;break}return e.abrupt("return");case 4:if(j(n,p)){e.next=6;break}return e.abrupt("return");case 6:return(0,y.j)(y.U3.PACKAGE_MANAGER_USED,{action:"removed",packageId:n.name}),i(!0),e.next=10,t.removePackages([n.name]);case 10:return e.next=12,t.listSpecfile();case 12:o=e.sent,a=o.packages,c=o.error,a&&(h(a),l(!0),d(n.name)),c&&h([]),i(!1);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,p,r]),v=c.useCallback((function(e){return j(e,p)}),[p]);return{install:m,uninstall:b,installedPackages:p,isInstalled:v,isRunning:r,showDeletedTooltip:a,packageDeletedName:u,setDeletedTooltip:l}}({packager:s}),m=C({searchPackagesFn:s.searchPackages,query:i,packagerType:"upm"}),v=m.searchResults,x=m.isLoading,w=""===i,S=w?f.installedPackages:v,E=(0,M.Kb)({inputValue:i,items:S,defaultHighlightedIndex:0,itemToString:function(e){return(null===e||void 0===e?void 0:e.name)?e.name:""}}),_=(0,b.Z)("packager","show_packager_about_tooltip"),O=_.shouldDisplay,T=_.register,I=_.dismiss;c.useEffect((function(){T()}),[T]);var A=(0,b.Z)("packager","show_packager_import_tooltip"),N=A.shouldDisplay,R=A.register,z=A.dismiss;c.useEffect((function(){R()}),[R]);return(0,r.BX)("div",{className:"jsx-97a1ea8580a20cde pkgsearch-search",children:[(0,r.tZ)(P,{combobox:E,inputValue:i,setInputValue:o,isLoading:x,isDisplayingInstalledPackages:w}),f.showDeletedTooltip&&(0,r.tZ)(G.Z,{css:W.l0.p(8),children:(0,r.tZ)(F.Z,{colorway:"positive",closable:!0,closeAction:function(){return f.setDeletedTooltip(!1)},text:"Uninstalled "+f.packageDeletedName+"."})}),(0,r.BX)("div",{className:"jsx-97a1ea8580a20cde pkgsearch-installed-header",children:[x?"Working\u2026":w?0===S.length?"No packages installed.":"Installed packages":""!==i?0===S.length?"No packages found":S.length+" packages found":" ",w&&S.length>0&&t.length>0&&(0,r.tZ)(h.Z,{border:!1,Icon:d.Z,className:"package-button",textColor:"var(--foreground-dimmer)",backgroundColor:"var(--background-default)","aria-label":"Open "+t[0],"data-microtip-position":"bottom-left",role:"tooltip",onClick:function(){u.openFile(t[0])}})]}),w&&0===S.length&&(0,r.BX)("div",{className:"jsx-97a1ea8580a20cde no-packages-text",children:["You don\u2019t have any packages installed. Try searching for a package to install, or ","",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",className:"jsx-97a1ea8580a20cde",children:"learn more about packages here."})]}),(0,r.tZ)("div",K({},E.getMenuProps(),{className:"jsx-97a1ea8580a20cde",children:S.length>0&&(0,r.tZ)("ul",{className:"jsx-97a1ea8580a20cde "+("pkgsearch-search-result "+(!w&&"pkgsearch-search-result-searching")||0),children:S.map((function(e,n){return(0,r.tZ)("li",K({},E.getItemProps({item:e,index:n}),{className:"jsx-97a1ea8580a20cde",children:(0,r.tZ)(Q,{packager:s,pkg:e,filesAffected:t,focused:E.highlightedIndex===n,searching:!w,isPackagerRunning:f.isRunning,isAlreadyInstalled:f.isInstalled(e),installPackage:f.install,uninstallPackage:f.uninstall})}),e.name||"Unknown"+n)}))})})),O&&""===i&&(0,r.BX)(J,{title:"What are Packages?",expandable:!0,expanded:!1,needsMargin:!0,backgroundColor:"var(--background-default)",foregroundColor:"var(--foreground-default)",strokeColor:"var(--foreground-dimmest)",onClose:function(){return I()},children:["Packages are collections of code that can extend the functionality of your programs. For example, you could add a package to make adding image carousels easier on websites, or a package to manage currency comparisons."," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",className:"jsx-97a1ea8580a20cde",children:"Learn more about packages"})]}),w&&N&&""===i&&(0,r.tZ)(J,{title:"Tip\u2014Auto Import",expandable:!0,expanded:!1,needsMargin:!0,backgroundColor:"var(--background-default)",foregroundColor:"var(--foreground-default)",strokeColor:"var(--foreground-dimmest)",onClose:function(){return z()},children:"If you know which packages you want to use, you can just import and use them in your files as if they were already installed, and they will be installed automatically the next time you run the repl."}),(0,r.tZ)(a(),{id:"97a1ea8580a20cde",children:".pkgsearch-search.jsx-97a1ea8580a20cde{position:relative;width:100%;height:100%;overflow-y:scroll;min-height:0;color:var(--foreground-default)}.no-packages-text.jsx-97a1ea8580a20cde{margin:0 12px;font-size:var(--font-size-default);line-height:20px}.pkgsearch-installed-header.jsx-97a1ea8580a20cde{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:0px var(--space-8)12px 12px;font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-medium)}.pkgsearch-search-result.jsx-97a1ea8580a20cde{list-style:none;position:relative;overflow:visible;z-index:2;border-bottom:1px solid var(--background-highest);-webkit-overflow-scrolling:touch;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1;min-height:0}.pkgsearch-search-result-searching.jsx-97a1ea8580a20cde{overflow:scroll}"})]})}function Q(e){var t=e.isPackagerRunning,n=e.isAlreadyInstalled,i=e.installPackage,o=e.uninstallPackage,a=e.packager,l=e.focused,s=e.searching,u=e.filesAffected,d=$(e,["isPackagerRunning","isAlreadyInstalled","installPackage","uninstallPackage","packager","focused","searching","filesAffected"]),f=function(e){var t=e.packager,n=e.pkg,r=Z(c.useState(!1),2),i=r[0],o=r[1],a=Z(c.useState(null),2),l=a[0],s=a[1];return c.useEffect((function(){if(n.name){var e=!1;return t.fetchPackageInfo(n.name).then((function(t){e||(s(t||null),o(!1))})),function(){e=!0}}s(null)}),[t,n.name]),{isLoading:i,packageInfo:l}}({packager:a,pkg:d.pkg}).packageInfo,p=(0,m.Z)(),h=q(c.useState(!1),2),b=h[0],v=h[1],g=q(c.useState(!1),2),y=g[0],x=g[1],w=f||d.pkg,k=function(){if(t)return{colorway:void 0,text:"Packager is working on "+w.name+". Check the Console tab for details",status:"Working\u2026"};if(n){var e=u[0];return{colorway:"positive",text:"".concat(w.name," was successfully installed").concat(e?" to ".concat(e):""),status:"Remove Package"}}return{colorway:"negative",text:w.name+" was not installed. There may have been an error \u2014\xa0check the Console tab for details.",status:"Install Package"}},j=y?(0,r.tZ)(F.Z,{colorway:k().colorway,closable:!0,closeAction:function(){return x(!1)},text:k().text}):null,S="dependencies"in w&&w.dependencies&&w.dependencies.length>0?w.dependencies.map((function(e){return e.name})):null;return(0,r.tZ)(L,{focused:l,searching:s,onActionClick:function(){t||(x(!0),v(!0),n?o(w).then((function(){p.current&&(v(!1),x(!1))})):i(w).then((function(){p.current&&(v(!1),x(!0))})))},actionAltText:k().status,isAlreadyInstalled:n,isPackagerRunning:t,isIconLoading:b,statusComponent:j,itemName:w.name,itemDescription:w.description,itemVersion:w.version,itemHomepageURL:w.homepageURL,itemLicense:w.license,itemAuthor:w.author,itemDependencies:S})}function J(e){var t=e.title,n=e.children,i=e.expanded,o=e.expandable,l=e.needsMargin,d=e.backgroundColor,p=e.strokeColor,h=e.foregroundColor,m=e.onClose,b=q(c.useState(i),2),v=b[0],g=b[1];return(0,r.BX)("div",{style:{backgroundColor:d},className:a().dynamic([["c40e6a57f0bf13ab",[p,h,h]]])+" "+(s()("pkgsearch-tooltip",l&&"needs-margin")||""),children:[(0,r.BX)("div",{className:a().dynamic([["c40e6a57f0bf13ab",[p,h,h]]])+" pkgsearch-tooltip-header",children:[(0,r.BX)("div",{onClick:function(){o&&g(!v)},className:a().dynamic([["c40e6a57f0bf13ab",[p,h,h]]])+" "+(s()("pkgsearch-tooltip-title",o&&"expandable")||""),children:[(0,r.tZ)("span",{className:a().dynamic([["c40e6a57f0bf13ab",[p,h,h]]])+" pkgsearch-tooltip-title-text",children:t}),o&&(0,r.tZ)(f.Z,{color:h,rotate:v?0:-90})]}),(0,r.tZ)("div",{className:a().dynamic([["c40e6a57f0bf13ab",[p,h,h]]])+" pkgsearch-tooltip-close",children:(0,r.tZ)(u.Z,{onClick:m,color:h})})]}),v&&(0,r.tZ)("p",{className:a().dynamic([["c40e6a57f0bf13ab",[p,h,h]]])+" pkgsearch-tooltip-content",children:n}),(0,r.tZ)(a(),{id:"c40e6a57f0bf13ab",dynamic:[p,h,h],children:".pkgsearch-tooltip.__jsx-style-dynamic-selector{-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:-webkit-calc(100%);width:-moz-calc(100%);width:calc(100%);padding:var(--space-8);margin:var(--space-4)0;border:1px solid ".concat(p,"}.pkgsearch-tooltip.needs-margin.__jsx-style-dynamic-selector{width:-webkit-calc(100% - 24px);width:-moz-calc(100% - 24px);width:calc(100% - 24px);margin:12px}.pkgsearch-tooltip-header.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:top;-webkit-align-items:top;-moz-box-align:top;-ms-flex-align:top;align-items:top}.pkgsearch-tooltip-title.__jsx-style-dynamic-selector{font-size:var(--font-size-small);font-weight:var(--font-weight-medium);-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;opacity:.85}.expandable.__jsx-style-dynamic-selector{cursor:pointer}.pkgsearch-tooltip-title-text.__jsx-style-dynamic-selector{padding-right:4px;color:").concat(h,"}.pkgsearch-tooltip-close.__jsx-style-dynamic-selector{cursor:pointer;opacity:.7;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding-left:8px}.pkgsearch-tooltip-content.__jsx-style-dynamic-selector:not(:empty){padding-top:var(--space-8);line-height:20px;font-size:var(--font-size-default);color:").concat(h,";opacity:.85}")})]})}var ee=n(54098),te=n.n(ee),ne=n(46846);function re(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function ie(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){re(o,r,i,a,c,"next",e)}function c(e){re(o,r,i,a,c,"throw",e)}a(void 0)}))}}var oe,ae="index.html";function ce(e){return le.apply(this,arguments)}function le(){return(le=ie(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",te()("/data/cdnjs/search/".concat(encodeURIComponent(t)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e){return ue.apply(this,arguments)}function ue(){return ue=ie(g().mark((function e(t){var n,r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fs,r=t.session,i=t.lib,e.abrupt("return",new Promise(function(){var e=ie(g().mark((function e(t){var o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.stat(ae);case 2:if(e.sent.exists){e.next=5;break}return e.abrupt("return",t(oe.IndexNotFound));case 5:o=n.watchOtFile(ae,{onReady:function(e){var a=e.initialContent,c=e.writeOps;if(!i.include)return o(),void t(oe.InvalidLib);var l='<script src="'.concat(i.include,'"><\/script>'),s=a.toString("utf8"),u=!0,d=!1,f=void 0;try{for(var p,h=s.split("\n")[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){if(p.value.includes(l))return o(),void t(oe.AlreadyInstalled)}}catch(v){d=!0,f=v}finally{try{u||null==h.return||h.return()}finally{if(d)throw f}}var m=s.indexOf("<script");-1===m&&(m=s.indexOf("</body>"));var b=[l+"\n"];m>0&&b.unshift(m),c(b),n.flush().then((function(){t(oe.Success)})).catch((function(){t(oe.UnknownError)})).finally((function(){o(),r.openFile(ae)}))},onError:function(e){t(e.code===ne.Df.NotFound?oe.IndexNotFound:oe.UnknownError)}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),ue.apply(this,arguments)}function de(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){fe(e,t,n[t])}))}return e}function he(){var e=(0,p.Z)(),t=e.fs,n=e.session,i=(0,c.useState)(""),o=i[0],l=i[1],s=(0,c.useState)(!1),u=s[0],d=s[1],f=C({searchPackagesFn:ce,query:o,packagerType:"html"}),h=f.searchResults,m=f.isLoading,b=f.error,v=(0,M.Kb)({inputValue:o,items:h,defaultHighlightedIndex:0,itemToString:function(e){return(null===e||void 0===e?void 0:e.name)?e.name:""}});return(0,r.BX)("div",{className:"jsx-cccac1ca9eaa7559 pkgsearch-search",children:[(0,r.tZ)(P,{combobox:v,inputValue:o,setInputValue:l,isLoading:m,isDisplayingInstalledPackages:!0}),(0,r.tZ)("div",{className:"jsx-cccac1ca9eaa7559 pkgsearch-installed-header",children:m?"Working\u2026":""!==o?b?"Sorry, there was a problem searching. Try again.":0===h.length?"No packages found":h.length+" packages found":" "}),(0,r.tZ)("div",pe({},v.getMenuProps(),{className:"jsx-cccac1ca9eaa7559",children:h.length>0&&(0,r.tZ)("ul",{className:"jsx-cccac1ca9eaa7559 pkgsearch-search-result pkgsearch-search-result-searching",children:h.map((function(e,i){return(0,r.tZ)("li",pe({},v.getItemProps({key:e.name||"Unknown"+i,item:e,index:i}),{className:"jsx-cccac1ca9eaa7559",children:(0,r.tZ)(me,{lib:e,focused:v.highlightedIndex===i,install:(o=g().mark((function r(){return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return d(!0),r.abrupt("return",se({fs:t,session:n,lib:e}).finally((function(){d(!1)})));case 2:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){de(i,n,r,a,c,"next",e)}function c(e){de(i,n,r,a,c,"throw",e)}a(void 0)}))}),isInstalling:u})}));var o}))})})),(0,r.tZ)(a(),{id:"cccac1ca9eaa7559",children:".pkgsearch-search.jsx-cccac1ca9eaa7559{position:relative;width:100%;height:100%;overflow-y:scroll;min-height:0;color:var(--foreground-default)}.pkgsearch-installed-header.jsx-cccac1ca9eaa7559{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:0px var(--space-8)12px 12px;font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-medium)}.pkgsearch-search-result.jsx-cccac1ca9eaa7559{list-style:none;position:relative;overflow:visible;z-index:2;border-bottom:1px solid var(--background-highest);-webkit-overflow-scrolling:touch;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1;min-height:0}.pkgsearch-search-result-searching.jsx-cccac1ca9eaa7559{overflow:scroll}"})]})}function me(e){var t=e.lib,n=e.focused,i=e.install,o=e.isInstalling,a=(0,c.useState)(null),l=a[0],s=a[1],u=(0,c.useState)(!1),d=u[0],f=u[1],p=(0,m.Z)(),h=l?(0,r.tZ)("div",{children:l}):null;return(0,r.tZ)(L,{focused:n,searching:!0,onActionClick:function(){o||d||(f(!0),i(t).then((function(e){p.current&&(e===oe.Success?s("".concat(t.name," was successfully added to index.html")):e===oe.IndexNotFound?s("".concat(t.name," was not added. There is no index.html file.")):e===oe.AlreadyInstalled?s("".concat(t.name," was already added to index.html.")):s("".concat(t.name," was not added. Try adding it manually.")))})).catch((function(e){S.Tb(e),p.current&&s("".concat(t.name," was not added. Try adding it manually."))})).finally((function(){f(!1)})))},actionAltText:"Add Library",isAlreadyInstalled:!1,isPackagerRunning:o,isIconLoading:d,statusComponent:h,itemName:t.name,itemDescription:t.description,itemVersion:t.version,itemHomepageURL:t.link})}function be(){var e=(0,i.x)();return e?"html"===e.language?(0,r.tZ)(he,{}):(0,r.tZ)(Y,{filesAffected:e.packagerFiles}):null}!function(e){e[e.Success=0]="Success",e[e.IndexNotFound=1]="IndexNotFound",e[e.AlreadyInstalled=2]="AlreadyInstalled",e[e.InvalidLib=3]="InvalidLib",e[e.UnknownError=4]="UnknownError"}(oe||(oe={}))},71227:function(e,t,n){n.d(t,{x:function(){return m}});var r=n(67294),i=n(62991),o=n.n(i),a=n(27740),c=n.n(a),l=n(85133),s=n(90361),u=n(30617);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f={nodejs:["package.json","package-lock.json","yarn.lock","node_modules"],python:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};function p(e){return["python3_classroom","python3_classroom_beta","python3","python3_beta","pygame","pygame_beta"].includes(e)?"python":["nodejs","nodejs_beta","nodejs_prybar","nodejs_prybar_beta","reason_nodejs","nodejs_static"].includes(e)?"nodejs":["ruby","ruby_beta","ruby_classroom","ruby_classroom_beta","rails","rails_beta"].includes(e)?"ruby":c().supportsPackager3(e)?e:null}function h(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}({},e,{packagerFiles:f[e.language]||[]})}function m(){var e=(0,r.useState)(null),t=e[0],n=e[1],i=(0,l.Z)(),a=(0,u.Z)().dotReplit;return(0,r.useEffect)((function(){if(i)if("html"!==i.language&&"html_beta"!==i.language){var e=p(i.language);if(e)n(h({language:e,packageSearch:!0,guessImports:!0}));else if(("nix"===i.language||"nix_beta"===i.language)&&i.flagOwnerDotReplitPackager)return a.watch((function(e){e.error?e.error===s.Yt.NotFound&&n(null):n((function(t){var n,r,i;if(!(null===(n=e.config.packager)||void 0===n?void 0:n.language))return null;var a=e.config.packager.language,c=h({language:p(a)||a,guessImports:Boolean(null===(r=e.config.packager.features)||void 0===r?void 0:r.guessImports),packageSearch:Boolean(null===(i=e.config.packager.features)||void 0===i?void 0:i.packageSearch)});return o()(t,c)?t:c}))}))}else n(h({language:"html",packageSearch:!0,guessImports:!1}))}),[i,a]),t}},82221:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(35944),i=n(9008),o=n.n(i),a=n(5560),c=n(93577),l=n(88768);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(){var e,t=(0,c.Z)(),n=(0,a.Z)(),i=(0,l.I1C)({variables:{replId:n}}),s=i.data||i.previousData,d="Repl"===(null===s||void 0===s||null===(e=s.repl)||void 0===e?void 0:e.__typename)?s.repl:null,f=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u(t.filter(Boolean)).concat(["Replit"]).join(" - ")}(t,null===d||void 0===d?void 0:d.title);return(0,r.tZ)(o(),{children:(0,r.tZ)("title",{children:f},"title")})}},89731:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(34051),i=n.n(r),o=n(35944),a=n(79547),c=n.n(a),l=n(67294),s=n(34837),u=n.n(s),d=n(93770),f=n(85252),p=n(30617),h=n(89431),m=n(38880),b=n(7177),v=n(67952),g=n(51409),y=n(90039),x=n(19689);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function Z(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){k(o,r,i,a,c,"next",e)}function c(e){k(o,r,i,a,c,"throw",e)}a(void 0)}))}}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e){var t=e.style,n=e.activeFile,r=l.useRef(null),a=l.useRef(null),s=(0,p.Z)().fs,w=(0,m.Z)(),k=w.showError,S=w.showConfirm,E=(0,y.Z)(),C=j(l.useState(!1),2),_=C[0],O=C[1],T=(0,h.Z)("flag-pedit-multiplayer"),I=(0,f.Z)((function(){var e=r.current;if(!e)return null;e.width=e.offsetWidth,e.height=e.offsetHeight;var t=e.getContext("2d");t&&(t.imageSmoothingEnabled=!1)}),{type:"debounce",wait:100});return l.useEffect((function(){var e=function(){if(!l)throw new Error("Tried to export png but peditCtxRef was null");var e=window.prompt("Export as:");if(e){var t="".concat(e,".png"),n=l.curFrame().toPNG();s.writeFile(t,d.Z.from(n)).then((function(){S("Successfully exported to ".concat(t))}))}},t=!1;if(n&&r.current){var o=r.current,c=n,l=null,f=c.endsWith(".kbmsprite"),p=function(){};return T&&(p=s.watchFile(c,{onChange:function(e){var n=e.toString(),r=n&&JSON.parse(n);r&&l&&!t&&l.load(f?(0,g.C)(r):r)}})),function(){h.apply(this,arguments)}(),function(){t=!0,l&&(l.cleanUp(),l=null),a.current&&(a.current=null),p()}}function h(){return(h=Z(i().mark((function n(){var r,d,p;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.readFile(c);case 2:if(r=n.sent,!t){n.next=5;break}return n.abrupt("return");case 5:if(!r.error){n.next=8;break}return k("failed to read ".concat(c)),n.abrupt("return");case 8:d=r.content.toString(),p=d&&JSON.parse(d),o.width=o.offsetWidth,o.height=o.offsetHeight,(l=u()(p?p.fromKaboom?{canvas:o,width:p.width,height:p.height}:{canvas:o,data:f?(0,g.C)(p):p}:{canvas:o,width:64,height:64})).on("change",m),l.on("save",m),l.on("export",e),a.current=l.save,o.focus();case 18:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function m(){return b.apply(this,arguments)}function b(){return(b=Z(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:if(l){e.next=4;break}throw new Error("Expected peditCtx");case 4:if(n=l.save(),!f){e.next=9;break}return e.next=8,(0,g.u)(n);case 8:n=e.sent;case 9:return e.next=11,s.writeFile(c,d.Z.from(JSON.stringify(n)));case 11:e.sent.error&&t&&k("Failed to save ".concat(c,", please try again"));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),[s,n,r]),(0,o.BX)("div",{style:t,className:c().dynamic([["9c48df7359622be1",[E?"0 3px 0 3px ".concat(E):"0"]]])+" pedit",children:[(0,o.tZ)(c(),{id:"9c48df7359622be1",dynamic:[E?"0 3px 0 3px ".concat(E):"0"],children:".pedit.__jsx-style-dynamic-selector{width:100%;height:100%;position:relative;z-index:3;-webkit-box-shadow:".concat(E?"0 3px 0 3px ".concat(E):"0",";-moz-box-shadow:").concat(E?"0 3px 0 3px ".concat(E):"0",";box-shadow:").concat(E?"0 3px 0 3px ".concat(E):"0","}canvas.__jsx-style-dynamic-selector{width:100%;height:100%;outline:none;position:absolute;top:0;left:0}.upgrade-button.__jsx-style-dynamic-selector{position:absolute;bottom:0;left:0;z-index:100;padding:var(--space-4);border:solid 2px var(--foreground-default);background:var(--background-default);font-weight:700;outline:none}.upgrade-button.__jsx-style-dynamic-selector:hover{cursor:pointer;background:var(--background-higher)}.upgrade-modal.__jsx-style-dynamic-selector{background:var(--background-default);padding:var(--space-32)}")}),(0,o.tZ)("canvas",{ref:function(e){r.current=e,I(e)},tabIndex:0,className:c().dynamic([["9c48df7359622be1",[E?"0 3px 0 3px ".concat(E):"0"]]])},n),n&&n.endsWith(".kbmsprite")&&(0,o.tZ)("button",{onClick:function(){return O(!0)},className:c().dynamic([["9c48df7359622be1",[E?"0 3px 0 3px ".concat(E):"0"]]])+" upgrade-button",children:"Upgrade"}),(0,o.tZ)(b.Z,{isOpen:_,onRequestClose:function(){return O(!1)},maxWidth:512,children:(0,o.tZ)(v.Z,{prompt:"Upgrade to '.pedit'?",desc:"You\u2019re using '.kbmsprite' which is recently deprecated. Do you want to upgrade to the new '.pedit' format? It\u2019ll create a new '.pedit' file with the same content. If you\u2019re using it with Kaboom, the new '.pedit' format won't work with kaboom before v0.4.0.",onCancel:function(){return O(!1)},confirmText:"Upgrade",icon:(0,o.tZ)(x.Z,{}),onConfirm:function(){if(a.current)if(n){var e=n.replace(/\.kbmsprite$/,".pedit"),t=d.Z.from(JSON.stringify(a.current()));s.writeFile(e,t).then((function(t){t.error?k("Failed to write to ".concat(e)):S("Successfully written to ".concat(e))})),O(!1)}else k("failed to get active file");else k("Please try again after the file loads")}})})]})}},74661:function(e,t,n){n.d(t,{Z:function(){return _}});var r=n(35944),i=n(67294),o=n(31162),a=n(17632),c=n(36793),l=n(66552),s=n(3204),u=n(54929),d=n(67938),f=n(37424),p=n(88341),h=n(56834);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v=[{value:"side-by-side",title:"side-by-side"},{value:"stacked",title:"stacked"}],g=[{value:10,title:"tiny"},{value:14,title:"normal"},{value:18,title:"large"},{value:24,title:"huge"}],y=[{value:"spaces",title:"spaces"},{value:"tabs",title:"tabs"}],x=[{value:2,title:"2"},{value:4,title:"4"},{value:8,title:"8"}],w=[{value:"default",title:"default"},{value:"emacs",title:"emacs"},{value:"vim",title:"vim"}],k=[{value:"none",title:"none"},{value:"soft",title:"soft wrap"}],Z=[{value:"disabled",title:"disabled"},{value:"enabled",title:"enabled"}],j=[{value:"disabled",title:"disabled"},{value:"enabled",title:"enabled"}];function S(e){var t=e.id,n=e.title,o=e.children,a=(0,f.H)()(t);return(0,r.BX)(u.Z,{css:[s.l0.colWithGap(8)],children:[(0,r.tZ)(u.Z,{tag:"label",htmlFor:a,children:"string"===typeof n?(0,r.tZ)(d.x,{children:n}):n}),i.cloneElement(o,{id:a})]})}var E=(0,u.K)("div");function C(){var e=(0,i.useState)(!1),t=e[0],n=e[1],o=(0,i.useState)(!1),c=o[0],l=o[1],f=(0,i.useRef)(!1);return(0,i.useEffect)((function(){f.current=!0;var e=setTimeout((function(){l(t)}),200);return function(){clearTimeout(e)}}),[t]),(0,r.BX)(u.Z,{css:[s.l0.rowWithGap(8),s.l0.justify.start],onMouseEnter:function(){return n(!0)},onMouseLeave:function(){return n(!1)},children:[(0,r.tZ)(d.x,{children:"Code intelligence"}),(0,r.BX)(p.Z,{isOpen:c,onClickOutside:function(){return l(!1)},children:[(0,r.tZ)(E,{children:(0,r.tZ)(a.Z,{})}),(0,r.tZ)(u.Z,{css:[s.l0.maxWidth(240),s.l0.p(8)],children:(0,r.BX)(d.x,{multiline:!0,children:["Code intelligence gives you autocomplete, helpful info, and hints as you type. See more"," ",(0,r.tZ)("a",{href:"https://replit.com/site/blog/intel",target:"_blank",rel:"noreferrer noopener",children:"here."})]})})]})]})}function _(e){var t=e.onBeforePreferencesUpdate,n=e.hideLayoutControl,i=e.className,a=(0,c.Z)(),u=a.preferences,f=a.update,p=function(e){t&&t(e),Object.keys(e).forEach((function(t){var n=e[t];(0,h.j)(h.U3.SETTINGS_TOGGLED,{settingChanged:t,updatedValue:n})})),f(e)};return u?(0,r.BX)(l.Z,{className:i,background:"default",css:[s.l0.p(16),s.l0.colWithGap(32),{paddingBottom:"5em"}],children:[n?null:(0,r.tZ)(S,{id:"layout",title:"Layout",children:(0,r.tZ)(o.Z,{initialSelectedItem:v.find((function(e){return u.isLayoutStacked?"stacked"===e.value:"side-by-side"===e.value})),onChange:function(e){var t="stacked"===(null===e||void 0===e?void 0:e.value);p({isLayoutStacked:t})},items:b(v)})}),(0,r.tZ)(S,{id:"fontSize",title:"Font size",children:(0,r.tZ)(o.Z,{initialSelectedItem:g.find((function(e){return e.value===u.fontSize})),onChange:function(e){var t="number"===typeof(null===e||void 0===e?void 0:e.value)?e.value:14;p({fontSize:t})},items:b(g)})}),(0,r.tZ)(S,{id:"indentType",title:"Indent type",children:(0,r.tZ)(o.Z,{initialSelectedItem:y.find((function(e){return e.value===(u.indentIsSpaces?"spaces":"tabs")})),onChange:function(e){var t="spaces"===(null===e||void 0===e?void 0:e.value);p({indentIsSpaces:t})},items:b(y)})}),(0,r.tZ)(S,{id:"indentSize",title:"Indent size",children:(0,r.tZ)(o.Z,{initialSelectedItem:x.find((function(e){return e.value===u.indentSize})),onChange:function(e){var t="number"===typeof(null===e||void 0===e?void 0:e.value)?e.value:2;p({indentSize:t})},items:b(x)})}),(0,r.tZ)(S,{id:"keybinds",title:"Keybinds",children:(0,r.tZ)(o.Z,{initialSelectedItem:w.find((function(e){return["vim","emacs"].includes(e.value)?e.value===u.keyboardHandler:"default"===e.value&&!u.keyboardHandler})),onChange:function(e){var t=["vim","emacs"].includes(e.value)?e.value:null;p({keyboardHandler:t})},items:b(w)})}),(0,r.tZ)(S,{id:"wrapping",title:"Wrapping",children:(0,r.tZ)(o.Z,{initialSelectedItem:k.find((function(e){return e.value===(u.wrapping?"soft":"none")})),onChange:function(e){var t="soft"===(null===e||void 0===e?void 0:e.value);p({wrapping:t})},items:b(k)})}),(0,r.tZ)(S,{id:"codeIntelligence",title:(0,r.tZ)(C,{}),children:(0,r.tZ)(o.Z,{initialSelectedItem:Z.find((function(e){return e.value===(u.codeIntelligence?"enabled":"disabled")})),onChange:function(e){var t="enabled"===(null===e||void 0===e?void 0:e.value);p({codeIntelligence:t})},items:b(Z)})}),(0,r.tZ)(S,{id:"accessibleTerminal",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(d.x,{children:"Accessible Terminal Output"}),(0,r.tZ)(d.x,{multiline:!0,children:"enable this setting to use a screen reader. Warning: this can affect performance."})]}),children:(0,r.tZ)(o.Z,{initialSelectedItem:j.find((function(e){return e.value===(u.accessibleTerminal?"enabled":"disabled")})),onChange:function(e){var t="enabled"===(null===e||void 0===e?void 0:e.value);p({accessibleTerminal:t})},items:b(j)})}),(0,r.tZ)(d.x,{multiline:!0,children:"Themes now apply across the whole site. Switch themes using the sun/moon icon in the site sidebar."})]}):null}},83347:function(e,t,n){n.d(t,{Sq:function(){return pe}});var r=n(34051),i=n.n(r),o=n(35944),a=n(79547),c=n.n(a),l=n(67294),s=n(50658),u=(n(7163),n(41664),n(39155),n(44054)),d=n(56834),f=n(16124),p=n(11163),h=n(8849),m=n(88768),b=n(57541),v=n(54929),g=n(42122),y=n(38880),x=n(92704),w=n(58375),k=n(7177),Z=n(63292),j=n(13475),S=n(23589),E=n(66552),C=n(3204),_=n(74302),O=n(23139),T=n(69780),I=n(15866),A=n(81736),P=n(37424),N=n(57923),R=n(22546),z=n(73248),B=n(28747),D=(n(534),n(62424)),U=n(38657),L=n(44195),X=n(59339),M=n(90309),F=n(29698),G=n(44327),W=n(50876),H=n(88897),V=n(70294),K=n(63735),$=n(76695),q=n(584);function Y(e){var t=e.isAlwaysOn,n=e.isBoosted,r=e.onBoostChange,i=e.onAlwaysOnChange;return(0,o.BX)(O.G7,{css:[C.l0.colWithGap(16)],children:[(0,o.BX)(O.G7,{css:[C.l0.display.flex,C.l0.flex.row,C.l0.align.center,C.l0.justify.spaceBetween],children:[(0,o.BX)(O.G7,{css:[C.l0.colWithGap(8)],children:[(0,o.BX)(O.G7,{css:[C.l0.rowWithGap(8),C.l0.align.center],children:[(0,o.tZ)($.Z,{size:16})," ",(0,o.tZ)(O.xv,{variant:"subheadDefault",children:q.S["always-on"].name})]}),(0,o.tZ)(O.xv,{color:"dimmer",children:q.S["always-on"].description})]}),(0,o.tZ)(V.Z,{isOn:t,onChange:i})]}),(0,o.BX)(O.G7,{css:[C.l0.display.flex,C.l0.flex.row,C.l0.align.center,C.l0.justify.spaceBetween],children:[(0,o.BX)(O.G7,{css:[C.l0.colWithGap(8)],children:[(0,o.BX)(O.G7,{css:[C.l0.rowWithGap(8),C.l0.align.center],children:[(0,o.tZ)(K.Z,{size:16})," ",(0,o.tZ)(O.xv,{variant:"subheadDefault",children:q.S.boost.name})]}),(0,o.tZ)(O.xv,{color:"dimmer",children:q.S.boost.description})]}),(0,o.tZ)(V.Z,{isOn:n,onChange:r})]})]})}var Q=n(41058),J=n(82984),ee=n(43303),te=n(73345),ne=n(90213),re=n(35987);function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oe(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ae(e,t,n[t])}))}return e}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var se,ue,de="CyclesBalance",fe="ReplPowerUpCosts";function pe(e){var t,n,r=e.repl,a=e.onUpdateRepl,V=e.setIsEditing,K=(0,p.useRouter)(),$=le(l.useState(!1),2),q=$[0],ie=$[1],ae=le(l.useState(null),2),pe=ae[0],he=ae[1],me=le(l.useState(null),2),be=me[0],ve=me[1],ge=le(l.useState(r.isBoosted),2),ye=ge[0],xe=ge[1],we=le(l.useState(r.isRenamed?r.title:""),2),ke=we[0],Ze=we[1],je=le(l.useState(r.description||""),2),Se=je[0],Ee=je[1],Ce=le(l.useState(r.rawTemplateLabel),2),_e=Ce[0],Oe=Ce[1],Te=(0,re.Z)({forceFetch:!1}).cycles,Ie=(0,m.iWG)().data,Ae=(0,y.Z)().showError,Pe=r.publishedAs===m.O2h.Template,Ne=Boolean(r.publishedAs);l.useEffect((function(){Ee(r.description||"")}),[r.description]);var Re=(0,N.Z)(),ze=l.useRef(r),Be=le((0,m.ap1)({variables:{id:r.id},onCompleted:function(){return K.push("/home","/~")},update:(0,f.t)({id:r.id}),onError:function(e){return Ae((0,h.Z)(e.message))}}),1)[0],De=le((0,m.vib)({onError:function(e){return Ae((0,h.Z)(e.message))},onCompleted:function(e){var t=e.updateRepl.repl,n=ze.current,i={};n.description!==t.description&&(i.description=t.description),n.title!==t.title&&(i.title=t.title),n.url!==t.url&&(i.url=t.url),n.isRenamed!==t.isRenamed&&(i.isRenamed=!!t.isRenamed),ze.current=r,Object.keys(i).length>0&&(a(i),V(!1))}}),2),Ue=De[0],Le=De[1].loading,Xe=le((0,B.Z)(),2),Me=Xe[0],Fe=Xe[1].loading,Ge=le((0,m.prL)({onCompleted:function(e){"UserError"===e.setAlwaysOn.__typename&&Ae(e.setAlwaysOn.message)},onError:function(e){return Ae((0,h.Z)(e.message))},refetchQueries:[de,fe]}),2),We=Ge[0],He=Ge[1].loading,Ve=le((0,m.BjH)({variables:{replId:r.id},onCompleted:function(e){var t=e.boostRepl;"UserError"!==t.__typename?((0,H.Z)(r.id).catch((function(e){s.Tb(e),Re.current&&Ae("Something went wrong when boosting your repl. Please refresh or try again.")})),Re.current&&xe(!0)):Ae(t.message)},onError:function(e){s.Tb(e),Ae((0,h.Z)(e.message))},refetchQueries:[de,fe]}),2),Ke=Ve[0],$e=Ve[1].loading,qe=r.currentUserPermissions.publish,Ye=le((0,m.gFT)({variables:{input:{replId:r.id}},onError:function(e){s.Tb(e),Ae((0,h.Z)(e.message))}}),2),Qe=Ye[0],Je=Ye[1],et=le((0,m.cry)({variables:{replId:r.id},onCompleted:function(e){var t=e.unboostRepl;"UserError"!==t.__typename?((0,H.Z)(r.id).catch((function(e){s.Tb(e),Re.current&&Ae("Something went wrong when unboosting your Repl. Please refresh or try again.")})),Re.current&&xe(!1)):Ae(t.message)},onError:function(e){s.Tb(e),Ae((0,h.Z)(e.message))},refetchQueries:[fe]}),2),tt=et[0],nt=et[1].loading,rt=(0,m.U50)({variables:{replId:r.id}}),it=rt.data,ot=rt.loading,at=l.useMemo((function(){return!(!ke||ke===r.title)||(_e!==r.rawTemplateLabel||!(""===Se&&!r.description)&&Se!==r.description)}),[r,ke,Se,_e]),ct=l.useCallback((function(){if(at){var e={id:r.id,title:ke||r.title,description:Se,templateLabel:r.currentUserPermissions.changeTemplateLabel?_e:void 0};Ue({variables:{input:e}})}}),[at,Ue,r,ke,Se,_e]),lt=q||null!==pe||Fe,st=(0,j.Z)((function(){lt||(at?ct():V(!1))}),[lt,at,ct]),ut=l.useContext(L.G).usesDigitalGoodsService,dt=function(e){switch(e){case"boost":return"Repl"===(null===it||void 0===it?void 0:it.repl.__typename)&&"PowerUpCostsType"===it.repl.powerUpCosts.__typename?it.repl.powerUpCosts.boost.explanation:null;case"always-on":return"Repl"===(null===it||void 0===it?void 0:it.repl.__typename)&&"PowerUpCostsType"===it.repl.powerUpCosts.__typename?it.repl.powerUpCosts.alwaysOn.explanation:null;case"private":var t;return"CurrentUser"===(null===it||void 0===it||null===(t=it.currentUser)||void 0===t?void 0:t.__typename)?it.currentUser.powerUpCosts.private.explanation:null;default:(0,ne.Z)(e)}},ft=function(){return Ue({variables:{input:{id:r.id,isPrivate:!r.isPrivate}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:ce({},r,{isPrivate:!r.isPrivate})}},refetchQueries:[de,fe]})},pt=function(){if(!He){var e=!r.isAlwaysOn;We({variables:{replId:r.id,enabled:e},optimisticResponse:{setAlwaysOn:ce({__typename:"Repl"},r,{isAlwaysOn:e})}})}},ht=function(){(0,d.j)(d.U3.BOOST_TOGGLED,{enabled:!ye}),ye?tt():Ke()},mt=r.isRenamed?"name your repl":"default name: ".concat(r.title),bt=[m.Sy.Submit,m.Sy.PublishTemplate,m.Sy.EditTemplate].includes(r.workspaceCta),vt=[];r.currentUserPermissions.fork&&vt.push({value:se.Fork,label:"Fork",icon:(0,o.tZ)(z.Z,{})}),r.publishedAs===m.O2h.RegularRepl&&qe&&vt.push({value:se.Unpublish,label:"Unpublish",icon:(0,o.tZ)(A.Z,{})}),Pe&&qe&&vt.push({value:se.UnpublishTemplate,label:"Unpublish template",icon:(0,o.tZ)(A.Z,{})}),Ne&&qe&&vt.push({value:se.EditPublishSettings,label:"Edit Publish Settings",icon:(0,o.tZ)(F.Z,{})}),r.currentUserPermissions.delete&&vt.push({isDestructive:!0,value:se.Delete,label:"Delete",icon:(0,o.tZ)(w.Z,{})});var gt,yt=r.currentUserPermissions.changePrivacy===m.HA$.SubscriptionRequired,xt=r.currentUserPermissions.changeAlwaysOn===m.fnM.SubscriptionRequired,wt=(0,P.H)();return(0,o.BX)("div",{ref:st,className:c().dynamic([["f9c78b232f4a61b4",[r.currentUserPermissions.changeDescription?"auto":"not-allowed",u.j.mobileMax]]]),children:[(0,o.tZ)("form",{onSubmit:function(e){e.preventDefault(),ct()},className:c().dynamic([["f9c78b232f4a61b4",[r.currentUserPermissions.changeDescription?"auto":"not-allowed",u.j.mobileMax]]]),children:(0,o.BX)(v.Z,{css:[C.l0.align.stretch,C.l0.colWithGap(16)],children:[(0,o.BX)(v.Z,{css:[C.l0.colWithGap(8)],children:[(0,o.BX)(v.Z,{css:[C.l0.flex.row,C.l0.align.center,C.l0.justify.spaceBetween],children:[(0,o.tZ)(v.Z,{css:[C.l0.rowWithGap(8)],children:(0,o.tZ)(te.ZP,ce({prefetch:!1},(0,_.j3)(r),{iconLeft:(0,o.tZ)(S.Z,{}),colorway:"primary",text:"Cover page"}))}),(0,o.tZ)(R.Z,{items:vt,onItemClick:function(e){switch(e.value){case se.Unpublish:return void he(ue.Unpublish);case se.UnpublishTemplate:return void he(ue.UnpublishTemplate);case se.Fork:return void he(ue.ForkRepl);case se.Delete:return void he(ue.DeleteRepl);case se.EditPublishSettings:he(ue.EditPublishSettings)}},onOpenChange:ie})]}),r.lastPublishedAt&&qe?(0,o.BX)(O.xv,{variant:"small",color:"dimmest",children:["Last published on"," ",new Date(r.lastPublishedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null]}),r.currentUserPermissions.changeIconUrl&&Pe?(0,o.tZ)(D.Z,{value:r.iconUrl,onChange:function(e){return Ue({variables:{input:{id:r.id,iconUrl:e}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:ce({},r,{iconUrl:e})}}})}}):null,(0,o.BX)(v.Z,{css:[C.l0.flex.column,C.l0.align.end],children:[(0,o.tZ)(b.ZP,{style:{cursor:r.currentUserPermissions.changeTitle?"auto":"not-allowed"},disabled:!r.currentUserPermissions.changeTitle,maxLength:60,placeholder:mt,value:ke,onChange:function(e){return Ze(e.target.value)},spellCheck:!1}),(0,o.tZ)(g.Z,{maxLength:60,value:ke,hideLabel:!0})]}),(0,o.BX)(v.Z,{css:[C.l0.flex.column,C.l0.align.end],children:[(0,o.tZ)("textarea",{onKeyDown:function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)},disabled:!r.currentUserPermissions.changeDescription,maxLength:U.p,value:Se,onChange:function(e){return Ee(e.target.value)},placeholder:"What does this Repl do?",className:c().dynamic([["f9c78b232f4a61b4",[r.currentUserPermissions.changeDescription?"auto":"not-allowed",u.j.mobileMax]]])}),(0,o.tZ)(g.Z,{maxLength:U.p,value:Se,hideLabel:!0})]}),Pe&&r.currentUserPermissions.changeTemplateLabel&&(0,o.BX)(E.Z,{css:[C.l0.p(8),C.l0.borderRadius(8),C.l0.colWithGap(8)],children:[(0,o.BX)(v.Z,{css:[C.l0.rowWithGap(8)],children:[(0,o.tZ)(I.Z,{}),(0,o.tZ)(O.xv,{children:"Template Label"})]}),(0,o.tZ)(b.ZP,{value:_e,maxLength:60,placeholder:"Template Label",spellCheck:!1,onChange:function(e){return Oe(e.target.value)}})]})]})}),bt?null:(0,o.BX)(v.Z,{css:[C.l0.colWithGap(24),C.l0.p(24),C.l0.pt(0)],children:[xt&&ut?(0,o.BX)(v.Z,{css:[C.l0.textAlign.center,C.l0.p(4)],children:[(0,o.tZ)(O.xv,{color:"dimmer",children:yt?"Get access to Private Repls, Always On, and Boosts.":"Get access to Always On and Boosts."}),(0,o.BX)(O.xv,{color:"dimmer",children:["Go to"," ",(0,o.tZ)("a",{href:"https://replit.com/pricing",target:"_blank",className:c().dynamic([["f9c78b232f4a61b4",[r.currentUserPermissions.changeDescription?"auto":"not-allowed",u.j.mobileMax]]]),children:"replit.com"})," ","to upgrade your account."]})]}):null,0===Te&&!0!==(null===Ie||void 0===Ie||null===(t=Ie.currentUser)||void 0===t?void 0:t.isHacker)?(0,o.tZ)(x.ZP,{iconLeft:(0,o.tZ)(Q.Z,{}),type:"button",colorway:"primary",stretch:!0,onClick:function(){he(ue.BuyCycles)},text:"Power Up this Repl"}):null,r.currentUserPermissions.changePrivacy!==m.HA$.Disallowed&&(0,o.BX)(O.hE,{tag:"fieldset",name:wt("privacy"),value:r.isPrivate.toString(),onChange:function(){if(!Le)if(r.isPrivate)ft();else{var e=dt("private");if(null!=e&&!ot){if("NEEDS_CYCLES"===e||"SPEND_CYCLES"===e)return ve("private"),void he(ue.SpendCycles);if("INCLUDED_IN_SUBSCRIPTION"!==e&&"INCLUDED_IN_EXISTING_ORDER"!==e)throw new Error("Unexpected cost explanation for enabling private: ".concat(e));ft()}}},row:!0,primary:!0,stretch:!0,children:[(0,o.tZ)(O.rK,{id:wt("false"),value:"false",text:"Public",icon:(0,o.tZ)(T.Z,{})}),(0,o.tZ)(O.rK,{id:wt("true"),value:"true",text:"Private",icon:(0,o.tZ)(I.Z,{})})]}),r.currentUserPermissions.changeAlwaysOn!==m.fnM.Disallowed&&(0,o.tZ)(Y,{isAlwaysOn:r.isAlwaysOn,isBoosted:ye,onAlwaysOnChange:function(){var e=dt("always-on");if(null!=e&&!He&&!ot)return r.isAlwaysOn||"ACTIVATE_EXISTING_ORDER"===e||"INCLUDED_IN_SUBSCRIPTION"===e?void pt():(ve("always-on"),void he(ue.SpendCycles))},onBoostChange:function(){var e=dt("boost");if(!(null==e||$e||nt||ot))return ye||"ACTIVATE_EXISTING_ORDER"===e||"INCLUDED_IN_SUBSCRIPTION"===e?void ht():(ve("boost"),void he(ue.SpendCycles))}})]}),(0,o.tZ)(k.Z,{isOpen:pe===ue.DeleteRepl,onRequestClose:function(){return he(null)},maxWidth:512,children:(0,o.tZ)(Z.Z,{delete:Be,entityType:"Repl",hideModal:function(){return he(null)}})}),(0,o.tZ)(ee.Z,{isOpen:pe===ue.SpendCycles,onRequestClose:function(){return he(null)},onRequestBuyMore:function(){return he(ue.BuyCycles)},onRequestPowerUp:(gt=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=be,e.next=null===e.t0?3:"boost"===e.t0?4:"always-on"===e.t0?6:"private"===e.t0?8:10;break;case 3:return e.abrupt("break",12);case 4:return ht(),e.abrupt("break",12);case 6:return pt(),e.abrupt("break",12);case 8:return ft(),e.abrupt("break",12);case 10:return(0,ne.Z)(be),e.abrupt("break",12);case 12:return e.next=14,new Promise((function(e){return setTimeout(e,3e3)}));case 14:he(null);case 15:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var i=gt.apply(e,t);function o(e){oe(i,n,r,o,a,"next",e)}function a(e){oe(i,n,r,o,a,"throw",e)}o(void 0)}))}),canSpend:null!=be&&dt(be)!==m.ChQ.NeedsCycles,powerUp:null!==be&&void 0!==be?be:"boost"},pe),(0,o.tZ)(J.Z,{isOpen:pe===ue.BuyCycles,onRequestClose:function(){return he(null)},uponPurchaseGoTo:"workspace",replTitle:r.title}),(0,o.tZ)(k.Z,{isOpen:pe===ue.ForkRepl,onRequestClose:function(){return he(null)},maxWidth:512,children:(0,o.tZ)(M.Z,{onFork:function(e,t){Me({originId:r.id,teamId:e,title:t,forkToPersonal:!e,trackingData:{forkSource:"editReplPopoverMenuItem"}}),(0,d.j)(d.U3.REPLS_REPL_SELF_FORKED,{replId:r.id})},initialValue:r.title,hideModal:function(){return he(null)},teamContext:null===(n=r.user)||void 0===n?void 0:n.username})}),(0,o.tZ)(k.Z,{isOpen:pe===ue.Unpublish,onRequestClose:function(){return he(null)},maxWidth:512,children:(0,o.tZ)(G.Z,{repl:r,source:"replEnvironment",onDone:function(){he(null)}})}),(0,o.tZ)(k.Z,{isOpen:pe===ue.UnpublishTemplate,onRequestClose:function(){return he(null)},maxWidth:512,children:(0,o.tZ)(X.Z,{confirmLabel:"Yes, unpublish this Template",isDestructive:!0,title:"Unpublish Template",onCancel:function(){return he(null)},onConfirm:function(){Je.loading||(Qe(),he(null))},children:"Your Repl will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,o.tZ)(k.Z,{isOpen:pe===ue.EditPublishSettings,onRequestClose:function(){return he(null)},noPadding:!0,children:(0,o.tZ)(W.Z,{source:"replEnvironment",replId:r.id})}),(0,o.tZ)(c(),{id:"f9c78b232f4a61b4",dynamic:[r.currentUserPermissions.changeDescription?"auto":"not-allowed",u.j.mobileMax],children:"form.__jsx-style-dynamic-selector{padding:var(--space-16)}textarea.__jsx-style-dynamic-selector{min-height:42px;height:200px;resize:none;cursor:".concat(r.currentUserPermissions.changeDescription?"auto":"not-allowed",";font-size:var(--font-size-default);font-family:var(--font-family-default);padding:var(--space-8);display:block;width:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:1px solid var(--outline-dimmest);-webkit-transition:.2s border-color;-moz-transition:.2s border-color;-o-transition:.2s border-color;transition:.2s border-color;background-color:transparent;color:var(--foreground-default)}textarea.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}textarea.__jsx-style-dynamic-selector:disabled{opacity:.5}textarea.__jsx-style-dynamic-selector:focus,textarea.__jsx-style-dynamic-selector:active{outline:none;border-color:var(--accent-primary-default)}.edit-repl-actions.__jsx-style-dynamic-selector{padding:0 var(--space-16)}.menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--foreground-default)}.delete-menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--accent-negative-default)}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:0 var(--space-4)}.menu-text.__jsx-style-dynamic-selector{padding:0 var(--space-4)}.upgrade-button-container.__jsx-style-dynamic-selector{padding:0 var(--space-8)}.upgrade-button-container.__jsx-style-dynamic-selector .sentence-case{text-transform:none}.upgrade-text-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.always-on-indicator.__jsx-style-dynamic-selector{margin-left:var(--space-4);margin-right:var(--space-8);width:8px;height:8px;-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;background-color:var(--accent-green-default);-webkit-box-shadow:0 0 12px var(--accent-green-default);-moz-box-shadow:0 0 12px var(--accent-green-default);box-shadow:0 0 12px var(--accent-green-default)}@media screen and (max-width:").concat(u.j.mobileMax,"px){.edit-repl.__jsx-style-dynamic-selector{width:80vw}}")})]})}!function(e){e.Fork="Fork",e.Delete="Delete",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings"}(se||(se={})),function(e){e.DeleteRepl="DeleteRepl",e.SpendCycles="SpendCycles",e.BuyCycles="BuyCycles",e.ForkRepl="ForkRepl",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings"}(ue||(ue={}))},34461:function(e,t,n){n.d(t,{Z:function(){return k}});var r=n(34051),i=n.n(r),o=n(35944),a=n(67294),c=n(24931),l=n(23139),s=n(45734),u=n(92432),d=n(1517),f=n(86113),p=n(35060),h=n(67289),m=n(30617),b=n(46846);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x,w=".tutorial";function k(){var e=(0,m.Z)().fs,t=y(a.useState([]),2),n=t[0],r=t[1],s=y(a.useState(x.Loading),2),u=s[0],v=s[1],k=y(a.useState(0),2),Z=k[0],E=k[1],C=y(a.useState(!1),2),_=C[0],O=C[1],T=a.useRef(null),I=a.useCallback((function(){T.current&&(T.current.scrollTop=0)}),[T]);return a.useEffect((function(){var t=!1,n=function(){var n,o=(n=i().mark((function n(){var o,a,c,l,s,u,d,f,p,m,g,y,k,Z;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(x.Loading),n.next=3,e.readDir(w);case 3:if(o=n.sent,!t){n.next=6;break}return n.abrupt("return");case 6:if(!o.error){n.next=9;break}return v(x.Error),n.abrupt("return");case 9:a=[],c=!0,l=!1,s=void 0,n.prev=11,u=o.children[Symbol.iterator]();case 13:if(c=(d=u.next()).done){n.next=26;break}if((f=d.value).type!==b.Tv.File||"md"!==(0,h.r6)(f.filename)){n.next=23;break}return p="".concat(w,"/").concat(f.filename),n.next=19,e.readFile(p);case 19:if(m=n.sent,!t){n.next=22;break}return n.abrupt("return");case 22:m.error?v(x.Error):(y=m.content.toString(),k=RegExp("^#\\s(?<title>.*)"),Z=k.exec(y),a.push({title:null===Z||void 0===Z||null===(g=Z.groups)||void 0===g?void 0:g.title,content:y,path:p}));case 23:c=!0,n.next=13;break;case 26:n.next=32;break;case 28:n.prev=28,n.t0=n.catch(11),l=!0,s=n.t0;case 32:n.prev=32,n.prev=33,c||null==u.return||u.return();case 35:if(n.prev=35,!l){n.next=38;break}throw s;case 38:return n.finish(35);case 39:return n.finish(32);case 40:r(a),v(x.Ready);case 42:case"end":return n.stop()}}),n,null,[[11,28,32,40],[33,,35,39]])})),function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(e){g(o,r,i,a,c,"next",e)}function c(e){g(o,r,i,a,c,"throw",e)}a(void 0)}))});return function(){return o.apply(this,arguments)}}();return n(),function(){t=!0}}),[e]),u===x.Loading?(0,o.tZ)(l.G7,{css:[l.l0.flex.growAndShrink(1),l.l0.center],children:(0,o.tZ)(d.Z,{})}):u===x.Error?(0,o.tZ)(l.G7,{css:[l.l0.flex.growAndShrink(1),l.l0.center],children:(0,o.BX)(l.G7,{css:[l.l0.center,l.l0.colWithGap(4)],children:[(0,o.tZ)(p.Z,{color:l.TV.accentNegativeDefault}),(0,o.tZ)(l.xv,{color:"dimmer",children:"Failed to load tutorial"})]})}):_?(0,o.BX)(l.G7,{css:[l.l0.overflowY("scroll"),l.l0.flex.growAndShrink(1),l.l0.p(8),l.l0.colWithGap(16)],children:[(0,o.tZ)(l.xv,{variant:"headerDefault",children:"Table of Content"}),(0,o.tZ)(l.G7,{css:[l.l0.flex.growAndShrink(1),l.l0.colWithGap(8)],children:n.map((function(e,t){return(0,o.BX)(l.G7,{css:[l.l0.p(8),Z===t?l.l0.backgroundColor.backgroundHighest:l.l0.backgroundColor.backgroundHigher,l.l0.borderRadius(4),l.l0.rowWithGap(8),l.l0.align.center,l.l0.cursor.pointer,Z===t?{outline:"solid 2px var(--outline-dimmest)"}:{},{":hover":{outline:"solid 2px var(--outline-dimmest)"}}],onClick:function(){E(t),O(!1)},children:[(0,o.tZ)(l.G7,{css:[l.l0.backgroundColor.backgroundHighest,l.l0.width(20),l.l0.height(20),l.l0.borderRadius("full"),l.l0.center,{outline:"solid 1px var(--outline-dimmest)"}],children:(0,o.tZ)(l.xv,{variant:"small",color:"dimmest",children:t+1})}),(0,o.tZ)(l.xv,{css:[l.l0.maxWidth("80%")],children:e.title})]},e.title)}))})]}):(0,o.BX)(l.G7,{innerRef:T,css:[l.l0.overflowY("scroll"),l.l0.flex.growAndShrink(1),l.l0.p(16),l.l0.colWithGap(16)],children:[n.length>1&&(0,o.tZ)(l.zx,{text:"Table of Content",iconLeft:(0,o.tZ)(f.Z,{}),onClick:function(){return O(!0)}}),Z>0&&(0,o.tZ)(j,{previous:!0,onClick:function(){E((function(e){return e-1})),I()},title:n[Z-1].title}),(0,o.tZ)(c.Z,{fs:e,path:n[Z].path,source:n[Z].content,sourcePos:!1}),Z<n.length-1&&(0,o.tZ)(j,{onClick:function(){E((function(e){return e+1})),I()},title:n[Z+1].title}),n.length>1&&(0,o.tZ)(S,{current:Z,max:n.length-1})]})}!function(e){e.Ready="READY",e.Loading="LOADING",e.Error="ERROR"}(x||(x={}));var Z=(0,l.KD)("button"),j=function(e){var t=e.onClick,n=e.title,r=e.previous;return(0,o.BX)(Z,{onClick:t,css:[l.l0.cursor.pointer,l.l0.p(16),l.l0.width("100%"),l.l0.align.center,l.l0.justify.spaceBetween,l.l0.flex.row,l.l0.borderRadius(4),l.l0.color.foregroundDefault,l.l0.backgroundColor.backgroundHigher,{userSelect:"none"}],children:[(0,o.BX)(l.xv,{css:[l.l0.fontSize(16)],children:[(0,o.BX)("span",{css:[l.l0.color.foregroundDimmer],children:[r?"Previous":"Next",n?": ":" page"]}),n&&(0,o.tZ)("b",{children:n})]}),r?(0,o.tZ)(s.Z,{}):(0,o.tZ)(u.Z,{})]})},S=function(e){var t=e.current,n=e.max;return(0,o.tZ)(l.u,{tooltip:"Progress: ".concat(t," / ").concat(n),children:(0,o.tZ)(l.G7,{css:[l.l0.width("100%"),l.l0.height(4),l.l0.backgroundColor.backgroundHigher,l.l0.position.absolute,l.l0.left(0),l.l0.bottom(0)],children:(0,o.tZ)(l.G7,{css:[l.l0.width("".concat(n<=0?100:t/n*100,"%")),l.l0.height("100%"),l.l0.backgroundColor.purpleDefault]})})})}},57885:function(e,t,n){n.d(t,{Z:function(){return Pe}});var r=n(35944),i=n(79547),o=n.n(i),a=n(67294),c=n(88768),l=n(40425),s=n(58458),u=n(8996),d=n(51281),f=n(94590),p=n(5560),h=n(28593),m=n(81970),b=n(50553),v=n(45193),g=n(38880),y=n(72361),x=n(44262),w=n(38098),k=n(47421),Z=n(78120),j=Z.q6.define();function S(e){var t=e.editorRef,n=e.onChange,i=e.placeholder,c=e.skeleton,l=e.language,s=e.skeletonClosingBracket,u=e.indentSize,d=void 0===u?2:u,f=(0,w.Z)({language:l,indentIsSpaces:!0,indentSize:2,fontSize:14}),p=f.view,h=f.ref,m=a.useRef(c?"".concat(c,"\n"):""),b=s?"\n".concat(s):"",v=" ".repeat(d);return a.useEffect((function(){if(p&&p.state.doc.length){var e=m.current;m.current=c?"".concat(c,"\n"):"",p.dispatch({changes:{from:0,to:e.length-1,insert:c},annotations:[Z.YW.addToHistory.of(!1),j.of(!0)]})}}),[p,c]),a.useEffect((function(){if(p){var e=Z.yy.changeFilter.of((function(e){return!!e.annotation(j)||[-1,m.current.length,e.startState.doc.length-b.length,e.startState.doc.length+1]})),r=k.tk.updateListener.of((function(e){var t=e.state.doc.slice(m.current.length,e.state.doc.toString().length-b.length).toString();if(t!=="".concat(v).concat(i,"\n").concat(v)?n(t):n(""),e.docChanged&&e.state.doc.length===m.current.length+b.length){var r="\n"+v;p.dispatch({changes:{from:m.current.length-1,insert:"\n"+v},selection:{anchor:m.current.length+r.length-1},annotations:[j.of(!0)]})}})),o="".concat(m.current).concat(v).concat(i,"\n").concat(b);p.dispatch({changes:{from:0,to:p.state.doc.length,insert:o},effects:Z.Py.appendConfig.of([e,r]),selection:{anchor:o.length},annotations:Z.YW.addToHistory.of(!1)}),t({setValue:function(e){if(e){var t=p.state.doc.toString().length;p.dispatch({changes:{from:m.current.length,to:t-b.length,insert:e},annotations:Z.YW.addToHistory.of(!1)})}},focus:function(){return p.focus()}})}}),[n,l,p,b,t,i,v]),(0,r.BX)("div",{className:"jsx-c0a72647b9c20ef editor",children:[(0,r.tZ)("div",{ref:h,className:"jsx-c0a72647b9c20ef"}),(0,r.tZ)(o(),{id:"c0a72647b9c20ef",children:".editor.jsx-c0a72647b9c20ef{overflow:auto;position:absolute;width:100%;height:100%}.loader.jsx-c0a72647b9c20ef{height:100%;width:100%;z-index:5}"})]})}var E=n(56834);function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_(e,t,n[t])}))}return e}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e){var t,n,i,f,h=e.isOpen,m=e.meta,x=e.language,w=e.hasMetadata,k=e.onClose,Z=(0,p.Z)(),j=(0,g.Z)().showConfirm,S=T(a.useState(null),2),C=S[0],_=S[1],I=T(a.useState(!0),2),A=I[0],B=I[1],D=T(a.useState((null===m||void 0===m?void 0:m.initialization)||""),2),U=D[0],L=D[1],X=T(a.useState((null===m||void 0===m?void 0:m.imports)||""),2),M=X[0],F=X[1],G=T(a.useState((null===m||void 0===m?void 0:m.setup)||""),2),W=G[0],H=G[1],V=T(a.useState((null===m||void 0===m?void 0:m.tearDown)||""),2),K=V[0],$=V[1],q=T((0,c.rUq)({onError:function(e){return _(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTestMeta;r&&("UserError"===r.__typename?_(r.message):"ReplUnitTestMeta"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:Z}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:c.aAi});return t?O({},t,{meta:O({},n)}):{__typename:"ReplUnitTestsWithMeta",meta:n,tests:[]}}}}),j("Setup saved!"),k()))}}),2),Y=q[0],Q=q[1],J=T((0,c.AFf)({onError:function(e){return _(e.message)},onCompleted:function(e){var t=e.updateReplUnitTestMeta;t&&("UserError"===t.__typename?_(t.message):"ReplUnitTestMeta"===t.__typename&&(j("Imports updated!"),k()))}}),2),ee=J[0],te=J[1],ne=(0,y.x)(x),re=M!==(null===m||void 0===m?void 0:m.imports)||U!==(null===m||void 0===m?void 0:m.initialization)||W!==(null===m||void 0===m?void 0:m.setup)||K!==(null===m||void 0===m?void 0:m.tearDown),ie=Q.loading||te.loading;return(0,r.tZ)(v.Z,{isOpen:h,preventClose:!0,onRequestClose:k,children:(0,r.BX)("div",{className:"jsx-5a7cee674f0a56c4 content",children:[(0,r.BX)(u.gC,{spacing:2,align:"stretch",children:[(0,r.tZ)(P,{unitTestsLib:ne,onChange:F,language:x,initialValue:null!==(t=null===m||void 0===m?void 0:m.imports)&&void 0!==t?t:""}),(0,r.tZ)("div",{onClick:function(){return B(!A)},className:"jsx-5a7cee674f0a56c4 collapse",children:(0,r.BX)(u.Ug,{spacing:2,align:"baseline",children:[(0,r.tZ)(l.Z,{level:3,children:" Advanced"}),(0,r.tZ)(b.Z,{color:"var(--foreground-default)",size:20,rotate:A?270:0})]})}),A?null:(0,r.BX)(u.gC,{align:"stretch",spacing:1,children:[(0,r.tZ)(N,{unitTestsLib:ne,onChange:L,language:x,initialValue:null!==(n=null===m||void 0===m?void 0:m.initialization)&&void 0!==n?n:""}),(0,r.tZ)(R,{unitTestsLib:ne,onChange:H,language:x,initialValue:null!==(i=null===m||void 0===m?void 0:m.setup)&&void 0!==i?i:""}),(0,r.tZ)(z,{unitTestsLib:ne,onChange:$,language:x,initialValue:null!==(f=null===m||void 0===m?void 0:m.tearDown)&&void 0!==f?f:""})]}),(0,r.BX)(u.Ug,{justify:"space-between",children:[(0,r.tZ)(s.Z,{style:{color:"var(--accent-negative-default"},children:C}),(0,r.BX)(u.Ug,{spacing:2,justify:"end",children:[(0,r.tZ)(d.Z,{loading:ie,onClick:k,children:"Close"}),(0,r.tZ)(d.Z,{color:"primary",disabled:!re,loading:ie,onClick:function(){(0,E.j)(E.U3.REPL_UNIT_TEST_USED,{action:"modifiedSetup"}),w?ee({variables:{input:{initialization:U,imports:M,setup:W,tearDown:K,replId:Z}}}):Y({variables:{input:{initialization:U,imports:M,setup:W,tearDown:K,replId:Z}}})},children:"Save"})]})]})]}),(0,r.tZ)(o(),{id:"5a7cee674f0a56c4",children:".content.jsx-5a7cee674f0a56c4{height:100%;width:100%;padding:var(--space-24)}.editable-area.jsx-5a7cee674f0a56c4{width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;border:1px solid var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8)0}.editor.jsx-5a7cee674f0a56c4{height:150px;padding-bottom:var(--space-8);-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.collapse.jsx-5a7cee674f0a56c4{cursor:pointer}"})]})})}var A=new String(".content.jsx-d4acab3f10ffaa49{height:100%;width:100%;padding:var(--space-24)}.editable-area.jsx-d4acab3f10ffaa49{width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;border:1px solid var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8)0}.editor.jsx-d4acab3f10ffaa49{height:150px;padding-bottom:var(--space-8);-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;position:relative}");function P(e){var t=e.unitTestsLib,n=e.onChange,i=e.language,c=e.initialValue,s=T(a.useState(null),2),f=s[0],p=s[1];a.useEffect((function(){f&&(f.setValue(c),f.focus())}),[f,c]);var h=t.defaultImports().trim();return(0,r.BX)(u.gC,{spacing:1,align:"stretch",children:[(0,r.BX)(u.Ug,{justify:"space-between",children:[(0,r.tZ)(l.Z,{level:3,children:"Imports"}),(0,r.tZ)("a",{href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",className:"jsx-".concat(A.__hash),children:(0,r.tZ)(d.Z,{Icon:x.Z,children:"Docs"})})]}),(0,r.tZ)("div",{className:"jsx-".concat(A.__hash)+" editable-area",children:(0,r.tZ)("div",{className:"jsx-".concat(A.__hash)+" editor",children:(0,r.tZ)(S,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add imports here!"),editorRef:p,language:i,skeleton:h,skeletonClosingBracket:"",indentSize:0})})}),(0,r.tZ)(o(),{id:A.__hash,children:A})]})}function N(e){var t=e.unitTestsLib,n=e.onChange,i=e.language,c=e.initialValue,f=T(a.useState(null),2),p=f[0],h=f[1];a.useEffect((function(){p&&p.setValue(c)}),[p,c]);var m=t.classConstructorName();return(0,r.BX)(u.gC,{spacing:1,align:"stretch",children:[(0,r.BX)(u.Ug,{justify:"space-between",children:[(0,r.tZ)(l.Z,{level:4,children:"Initialization"}),(0,r.tZ)("a",{href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",className:"jsx-".concat(A.__hash),children:(0,r.tZ)(d.Z,{Icon:x.Z,children:"Docs"})})]}),m&&(0,r.tZ)(u.Ug,{children:(0,r.BX)(s.Z,{children:["Hint: constructor name is ",(0,r.tZ)("code",{className:"jsx-".concat(A.__hash),children:m}),"."]})}),(0,r.tZ)("div",{className:"jsx-".concat(A.__hash)+" editable-area",children:(0,r.tZ)("div",{className:"jsx-".concat(A.__hash)+" editor",children:(0,r.tZ)(S,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add initialization code here!"),editorRef:h,language:i,skeleton:"",skeletonClosingBracket:"",indentSize:0})})}),(0,r.tZ)(o(),{id:A.__hash,children:A})]})}function R(e){var t=e.unitTestsLib,n=e.onChange,i=e.language,c=e.initialValue,s=T(a.useState(null),2),f=s[0],p=s[1];a.useEffect((function(){f&&f.setValue(c)}),[f,c]);var h=t.setupIntro().trim();return(0,r.BX)(u.gC,{spacing:1,align:"stretch",children:[(0,r.BX)(u.Ug,{justify:"space-between",children:[(0,r.tZ)(l.Z,{level:4,children:"Setup"}),(0,r.tZ)("a",{href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",className:"jsx-".concat(A.__hash),children:(0,r.tZ)(d.Z,{Icon:x.Z,children:"Docs"})})]}),(0,r.tZ)("div",{className:"jsx-".concat(A.__hash)+" editable-area",children:(0,r.tZ)("div",{className:"jsx-".concat(A.__hash)+" editor",children:(0,r.tZ)(S,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add setup code here!"),editorRef:p,language:i,skeleton:h,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})}),(0,r.tZ)(o(),{id:A.__hash,children:A})]})}function z(e){var t=e.unitTestsLib,n=e.onChange,i=e.language,c=e.initialValue,s=T(a.useState(null),2),f=s[0],p=s[1];a.useEffect((function(){f&&f.setValue(c)}),[f,c]);var h=t.tearDownIntro().trim();return(0,r.BX)(u.gC,{spacing:1,align:"stretch",children:[(0,r.BX)(u.Ug,{justify:"space-between",children:[(0,r.tZ)(l.Z,{level:4,children:"Teardown"}),(0,r.tZ)("a",{href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",className:"jsx-".concat(A.__hash),children:(0,r.tZ)(d.Z,{Icon:x.Z,children:"Docs"})})]}),(0,r.tZ)("div",{className:"jsx-".concat(A.__hash)+" editable-area",children:(0,r.tZ)("div",{className:"jsx-".concat(A.__hash)+" editor",children:(0,r.tZ)(S,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add teardown code here!"),editorRef:p,language:i,skeleton:h,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})}),(0,r.tZ)(o(),{id:A.__hash,children:A})]})}A.__hash="d4acab3f10ffaa49";var B=function(e){var t=e.language,n=e.meta,i=T(a.useState(!1),2),c=i[0],l=i[1];return(0,r.BX)(r.HY,{children:[(0,r.tZ)(d.Z,{Icon:m.Z,filled:!0,fullWidth:!0,onClick:function(){return l(!0)},children:"Setup"}),(0,r.tZ)(I,{language:t,isOpen:c,onClose:function(){return l(!1)},hasMetadata:Boolean(null===n||void 0===n?void 0:n.id),meta:n}),(0,r.tZ)(o(),{id:"899d4d8669179c5d",children:".collapse.jsx-899d4d8669179c5d{cursor:pointer}"})]})},D=n(92704),U=n(57541),L=n(86072),X=n(29698),M=n(58375),F=n(8286),G=n(35060),W=n(19826),H=n(33108),V=n(34051),K=n.n(V),$=n(50658),q=n(30617),Y=n(42723),Q=n(16108),J=n(92694);function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function te(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){te(o,r,i,a,c,"next",e)}function c(e){te(o,r,i,a,c,"throw",e)}a(void 0)}))}}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){re(e,t,n[t])}))}return e}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||ce(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e){return function(e){if(Array.isArray(e))return ee(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ce(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){if(e){if("string"===typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}var le="\x1b[0;31m",se="\x1b[0m",ue=["\u28fe","\u28fd","\u28fb","\u28bf","\u287f","\u28df","\u28ef","\u28f7","\u2801","\u2802","\u2804","\u2840","\u2880","\u2820","\u2810","\u2808"];function de(e){var t=e.name,n=e.failureMessage,r=e.stack;return"\u274c\t".concat(le).concat(t).concat(se,"\r").concat(n?"\nMessage: ".concat(n,"\r"):"","\nStack Trace:\r\n").concat(r.replace(/\n/g,"\r\n"),"\n\r\n\r\n")}var fe=function(e){var t=e.language,n=e.unitTests,i=e.onResult,o=e.trackingContext,c=function(e){(h.writeToTerminal(e),window.store)&&(0,window.store.dispatch)((0,Y.yY)({wid:"",type:"",raw:!0,message:e}))},l=function(){(h.clearTerminal(),window.store)&&((0,window.store.dispatch)({type:"CLEAR_CONSOLE"}),c("\r\n"))},s=oe(a.useState(!1),2),u=s[0],f=s[1],p=(0,q.Z)(),h=p.session,m=p.container,b=p.packager,v=p.fs,g=null,x=function(){f(!1),(0,J.WT)(v),g&&(g.stopLogSpinner(),g=null)},w=function(){var e=ne(K().mark((function e(){var r,a,s,d,p,h,w,k,Z,j,S,C,_,O,T,I,A,P,N,R,z,B;return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return");case 2:if(r=null,g={startLogSpinner:function(e){if(r)throw new Error("A spinner is already active! call stopSpinner first or use the update callback to update the active spinner's message.");var t=e,n=0;return r=setInterval((function(){n++;var e=ue[n%ue.length];if(!g)throw new Error("Expected logger");g.clearLine(),g.logMessage(e+" "+t)}),100),function(e){t=e}},stopLogSpinner:function(){r&&clearInterval(r),r=null},logMessage:c,clearLogs:l,clearLine:function(){if(!g)throw new Error("Expected logger");g.logMessage("\x1b[1K\r")}},n){e.next=6;break}throw new Error("Run button should not be active if there are no tests");case 6:return f(!0),(0,E.j)(E.U3.REPL_UNIT_TEST_USED,{trackingData:{context:o},action:"ranTests"}),g.clearLogs(),a=(0,y.x)(t),e.next=12,a.buildAndRunTests(ie({container:m,fs:v,packager:b,logger:g},n));case 12:if(s=e.sent,g.stopLogSpinner(),g.clearLine(),g.clearLogs(),null===s.error){e.next=21;break}return g.logMessage("".concat(le).concat(s.error).concat(se,"\r\n")),x(),n.tests.map((function(e){return{testId:e.id,didPass:!1}})),e.abrupt("return");case 21:if(d=s.result.passed?[]:s.result.failures.map((function(e){return a.parseTestResultName(e.name)})),p=[],h=n.tests.map((function(e){return a.getProperTestName(e.name)})),!(w=d.filter((function(e){return!h.includes(e)}))).length){e.next=29;break}Z=w[0],j=s.result.failures[0].stack,g.logMessage(de({name:Z,failureMessage:"The following error occurred but was not related to a single unit test",stack:j})),(k=p).push.apply(k,ae(n.tests.map((function(e){return{testId:e.id,didPass:!1}})))),e.next=60;break;case 29:S=!0,C=!1,_=void 0,e.prev=30,O=n.tests[Symbol.iterator]();case 32:if(S=(T=O.next()).done){e.next=46;break}if(I=T.value,A=a.getProperTestName(I.name),P=d.indexOf(A),N=-1===P,p.push({testId:I.id,didPass:N}),!N){e.next=41;break}return g.logMessage((D=A,"\u2705\t".concat("\x1b[0;32m").concat(D).concat(se,"\r\n\r\n"))),e.abrupt("continue",43);case 41:R=s.result.failures[P].stack,g.logMessage(de({name:A,failureMessage:I.failureMessage,stack:R}));case 43:S=!0,e.next=32;break;case 46:e.next=52;break;case 48:e.prev=48,e.t0=e.catch(30),C=!0,_=e.t0;case 52:e.prev=52,e.prev=53,S||null==O.return||O.return();case 55:if(e.prev=55,!C){e.next=58;break}throw _;case 58:return e.finish(55);case 59:return e.finish(52);case 60:if(i(p),z=n.tests.length,!s.result.passed){e.next=66;break}return g.logMessage("".concat("\x1b[48;5;22m","  All tests have passed ").concat(z,"/").concat(z,"  ").concat(se,"\r\n")),x(),e.abrupt("return");case 66:B=z-s.result.failures.length,g.logMessage("".concat("\x1b[48;5;88m","  ").concat(B,"/").concat(z," passed, see errors above  ").concat(se)),x();case 69:case"end":return e.stop()}var D}),e,null,[[30,48,52,60],[53,,55,59]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=ne(K().mark((function e(){return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{w()}catch(t){$.$e((function(e){e.setTag("unittestsrun","true"),$.Tb(t)})),g&&g.logMessage("\r\n".concat(le," Sorry, we have failed to run your tests. Please try again or contact support. ").concat(se,"\r\n")),x()}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Boolean(n&&n.tests.length>0)?(0,r.tZ)("div",{className:"run-button",children:(0,r.tZ)(d.Z,{loading:u,fullWidth:!0,color:"blue",filled:!0,Icon:Q.Z,onClick:k,children:u?"Running":"Run tests"})}):null},pe=n(88341),he=n(54929),me=n(3204),be=n(73345),ve=n(23139);function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ye(e,t,n[t])}))}return e}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||Ze(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e){return function(e){if(Array.isArray(e))return ge(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ze(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){if(e){if("string"===typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ge(e,t):void 0}}function je(e){var t=e.isOpen,n=e.test,i=e.language,d=e.onClose,f=e.trackingContext,h=(0,p.Z)(),m=(0,g.Z)().showConfirm,b=we(a.useState(null),2),x=b[0],w=b[1],k=we(a.useState(""),2),Z=k[0],j=k[1],C=we(a.useState(""),2),_=C[0],O=C[1],T=we(a.useState(""),2),I=T[0],A=T[1],P=we((0,c.Hd4)({onError:function(e){return A(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTest;r&&("UserError"===r.__typename?A(r.message):"ReplUnitTest"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:h}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:c.Rbd});return t?xe({},t,{tests:ke(t.tests).concat([n])}):{__typename:"ReplUnitTestsWithMeta",meta:null,tests:[n]}}}}),m("Test created!"),d()))}}),2),N=P[0],R=P[1],z=we((0,c.kOV)({onError:function(e){return A(e.message)},onCompleted:function(e){var t=e.updateReplUnitTest;t&&("UserError"===t.__typename?A(t.message):"ReplUnitTest"===t.__typename&&(m("Test updated!"),d()))}}),2),B=z[0],X=z[1],M=(0,H.Y)("",(function(e){return e.length<=0?{message:"Must include test name"}:e.trim().split(" ").length>1?{message:"Test name must only be one word"}:void 0})),V=we(a.useState(!1),2),K=V[0],$=V[1];a.useEffect((function(){t||$(!1)}),[t]),a.useEffect((function(){M.setValue((null===n||void 0===n?void 0:n.name)||""),O((null===n||void 0===n?void 0:n.failureMessage)||""),j((null===n||void 0===n?void 0:n.code)||""),x&&x.setValue((null===n||void 0===n?void 0:n.code)||"")}),[n,x]),a.useEffect((function(){A("")}),[Z,A]);var q=(0,y.x)(i),Y="".concat(q.getCommentChar()," Enter code here"),Q=!n||n.name!==M.value||n.code!==Z||n.failureMessage!==_,J=R.loading||X.loading,ee=q.testIntro(M.value||""),te=q.hasClosingBrackets()?q.getClosingBrackets():"",ne=we(a.useState(!1),2),re=ne[0],ie=ne[1],oe=function(){x&&(x.setValue("  "+q.exampleTest.code),x.focus()),j(q.exampleTest.code)};return(0,r.tZ)(v.Z,{isOpen:t,preventClose:!0,onRequestClose:d,children:(0,r.BX)("div",{className:"jsx-fe00344cc28ffe12 content",children:[(0,r.BX)(u.gC,{spacing:2,align:"stretch",children:[(0,r.BX)(u.Ug,{spacing:2,wrap:"nowrap",children:[(0,r.tZ)(l.Z,{style:{flexShrink:0},level:3,children:"Name"}),(0,r.tZ)(U.ZP,{autoFocus:!0,large:!0,required:!0,onChange:function(e){M.setValue(e.target.value),$(!0)},value:M.value,validationResults:K&&M.error?[{message:M.error.message,state:"error"}]:void 0,placeholder:"Enter test name here!"})]}),(0,r.BX)(u.Ug,{align:"baseline",justify:"space-between",children:[(0,r.tZ)(l.Z,{level:3,children:"Code"}),(0,r.BX)(he.Z,{css:[me.l0.rowWithGap(4)],children:[(0,r.BX)(pe.Z,{isOpen:re,onClickOutside:function(){return ie(!1)},placement:"bottom-end",children:[(0,r.tZ)(D.ZP,{iconLeft:(0,r.tZ)(L.Z,{}),small:!0,text:"View an example",onClick:function(){[Y,q.exampleTest.code].includes(Z.trim())?oe():ie(!0)}}),(0,r.BX)(he.Z,{children:["This will overwrite your current test. Are you sure?",(0,r.BX)(he.Z,{css:[me.l0.rowWithGap(4),me.l0.pt(8)],children:[" ",(0,r.tZ)(D.ZP,{text:"No, go back",small:!0,iconLeft:(0,r.tZ)(G.Z,{}),onClick:function(){ie(!1)}}),(0,r.tZ)(D.ZP,{text:"Yes, delete test",colorway:"negative",small:!0,iconLeft:(0,r.tZ)(F.Z,{}),onClick:function(){oe(),ie(!1)}})]})]})]}),(0,r.tZ)(be.ZP,{iconLeft:(0,r.tZ)(W.Z,{}),small:!0,text:"View the docs",target:"_blank",href:"https://docs.replit.com/teams-edu/unit-testing"})]})]}),(0,r.tZ)("section",{className:"jsx-fe00344cc28ffe12",children:(0,r.tZ)("div",{className:"jsx-fe00344cc28ffe12 editable-area",children:(0,r.tZ)("div",{className:"jsx-fe00344cc28ffe12 editor",children:(0,r.tZ)(S,{skeleton:ee,skeletonClosingBracket:te,language:i,editorRef:w,onChange:j,placeholder:Y})})})}),(0,r.tZ)("div",{className:"jsx-fe00344cc28ffe12 test-heading",children:(0,r.tZ)(l.Z,{level:3,children:"Failure message"})}),(0,r.tZ)("section",{className:"jsx-fe00344cc28ffe12",children:(0,r.tZ)(U.ZP,{value:_,onChange:function(e){return O(e.target.value)},placeholder:"This will be displayed on test failure"})}),(0,r.BX)(u.Ug,{justify:"space-between",align:"center",children:[(0,r.tZ)(s.Z,{style:{color:"var(--accent-negative-default"},children:I}),(0,r.BX)(u.Ug,{spacing:2,justify:"end",children:[(0,r.tZ)(D.ZP,{text:"Close",onClick:d}),(0,r.tZ)(D.ZP,{text:"Save",colorway:"primary",disabled:!Q||J,onClick:function(){M.validate()?$(!0):Z.length<=0?A("Test cannot be empty"):n?(B({variables:{input:{name:M.value,code:Z,failureMessage:_,testId:n.id}}}),(0,E.j)(E.U3.REPL_UNIT_TEST_USED,{trackingData:{context:f},action:"modifiedTest"})):(N({variables:{input:{name:M.value,code:Z,failureMessage:_,replId:h}}}),(0,E.j)(E.U3.REPL_UNIT_TEST_USED,{trackingData:{context:f},action:"addedTest"}))}})]})]})]}),(0,r.tZ)(o(),{id:"fe00344cc28ffe12",children:".content.jsx-fe00344cc28ffe12{padding:var(--space-24)}.editable-area.jsx-fe00344cc28ffe12{border:1px solid var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8)0}.editor.jsx-fe00344cc28ffe12{height:200px;padding-bottom:var(--space-8);position:relative}"})]})})}function Se(e){var t=e.testId,n=e.onClose,i=(0,g.Z)().showConfirm,d=(0,p.Z)(),f=we((0,c.IVR)({onError:function(e){return x(e.message)},update:function(e,r){var o,a=null===(o=r.data)||void 0===o?void 0:o.deleteReplUnitTest;a&&("UserError"===a.__typename?x(a.message):"ReplUnitTest"===a.__typename&&t&&(e.modify({id:e.identify({__typename:"Repl",id:d}),fields:{unitTests:function(e,n){var r=n.readField,i=e.tests.filter((function(e){return r("id",e)!==t}));return xe({},e,{tests:ke(i)})}}}),(0,E.j)(E.U3.REPL_UNIT_TEST_USED,{action:"removedTest"}),i("Test deleted!"),n()))}}),2),h=f[0],m=f[1],b=we(a.useState(""),2),y=b[0],x=b[1];return(0,r.tZ)(v.Z,{isOpen:Boolean(t),onRequestClose:n,children:(0,r.BX)("div",{className:"jsx-192315c7792e5695 content",children:[(0,r.BX)(u.gC,{spacing:2,align:"stretch",children:[(0,r.tZ)(l.Z,{level:2,children:" Delete test "}),(0,r.tZ)(s.Z,{children:"Are you sure you want to delete this test? This cannot be undone."}),(0,r.BX)(u.Ug,{justify:"space-between",align:"center",children:[(0,r.tZ)(s.Z,{style:{color:"var(--accent-negative-default"},children:y}),(0,r.BX)(u.Ug,{spacing:2,justify:"end",children:[(0,r.tZ)(D.ZP,{text:"Cancel",disabled:m.loading,onClick:n}),(0,r.tZ)(D.ZP,{text:"Yes, delete this test",colorway:"negative",disabled:m.loading,onClick:function(){if(!t)throw new Error("Expected a testId");h({variables:{testId:t}})}})]})]})]}),(0,r.tZ)(o(),{id:"192315c7792e5695",children:".content.jsx-192315c7792e5695{padding:var(--space-24)}"})]})})}var Ee=function(e){var t=e.unitTests,n=e.isAddingTest,i=e.onClose,l=e.language,d=e.canWrite,h=e.trackingContext,m=void 0===h?"default":h,b=we(a.useState(n),2),v=b[0],g=b[1],y=we(a.useState(null),2),x=y[0],w=y[1],k=we(a.useState(null),2),Z=k[0],j=k[1],S=(0,p.Z)(),E=we((0,c.lQq)(),1)[0],C=(null===t||void 0===t?void 0:t.tests)||[];return(0,r.BX)(u.gC,{spacing:2,align:"stretch",children:[(0,r.tZ)("div",{className:"jsx-a2df1ed8108a6cad run-wrapper",children:(0,r.tZ)(fe,{language:l,unitTests:t,onResult:function(e){E({variables:{input:{replId:S,results:e},replId:S}})},trackingContext:m})}),(0,r.tZ)("div",{className:"jsx-a2df1ed8108a6cad tests-wrapper",children:C.length>0?(0,r.tZ)(u.gC,{spacing:1,align:"stretch",children:C.map((function(e){var t,n;return"ReplUnitTestLastRun"===(null===(t=e.lastRun)||void 0===t?void 0:t.__typename)&&(e.lastRun.status===c.$I7.Passed?n="passed-test":e.lastRun.status===c.$I7.Failed&&(n="failed-test")),(0,r.tZ)("div",{className:"jsx-a2df1ed8108a6cad "+"test ".concat(n),children:(0,r.BX)(u.Ug,{wrap:"nowrap",justify:"space-between",align:"center",children:[(0,r.tZ)(s.Z,{truncate:!0,children:e.name}),d?(0,r.BX)(he.Z,{css:[me.l0.rowWithGap(8)],children:[(0,r.tZ)(ve.hU,{onClick:function(){w(e)},alt:"Edit",children:(0,r.tZ)(X.Z,{})}),(0,r.tZ)(ve.hU,{onClick:function(){j(e.id)},alt:"Delete",children:(0,r.tZ)(M.Z,{})})]}):null]})},e.id)}))}):(0,r.tZ)("div",{className:"jsx-a2df1ed8108a6cad",children:(0,r.BX)(u.gC,{align:"center",spacing:2,children:[(0,r.tZ)(s.Z,{align:"center",children:"Looks like you don\u2019t have any tests yet!"}),d&&(0,r.tZ)(D.ZP,{text:"Add test",onClick:function(){return g(!0)},iconLeft:(0,r.tZ)(f.Z,{})})]})})}),(0,r.tZ)(je,{isOpen:v||Boolean(x)||n,test:x,language:l,onClose:function(){w(null),g(!1),i&&i()},trackingContext:m}),(0,r.tZ)(Se,{testId:Z,onClose:function(){return j(null)}}),(0,r.tZ)(o(),{id:"a2df1ed8108a6cad",children:".tests-wrapper.jsx-a2df1ed8108a6cad{-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-16)0;width:100%}.test.jsx-a2df1ed8108a6cad{padding:var(--space-8)var(--space-8);border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.passed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-positive-default);background:var(--accent-positive-dimmer)}.failed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-negative-default);background:var(--accent-negative-dimmer)}"})]})},Ce=n(64758);function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oe=function(e){var t=e.onClick,n=e.hasTests,i=n?{"aria-label":"Delete all tests to switch test type","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip"}:{};return(0,r.BX)("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_e(e,t,n[t])}))}return e}({},i,{className:"jsx-44786ca38dd3aa42 "+(i&&null!=i.className&&i.className||"back-button"),children:[(0,r.tZ)(d.Z,{filled:!1,border:!1,size:"small",Icon:Ce.Z,onClick:t,disabled:n,children:"Switch test type"}),(0,r.tZ)(o(),{id:"44786ca38dd3aa42",children:".back-button.jsx-44786ca38dd3aa42{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]}))},Te=n(45620);function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Pe=function(e){var t,n,i,m,b=e.onBack,v=(0,p.Z)(),g=Ae(a.useState(!1),2),y=g[0],x=g[1],w=(0,Te.Z)(),k=w.language,Z=w.isLoading,j=(0,c.CHr)({variables:{replId:v}}),S=null===(t=j.data)||void 0===t?void 0:t.repl;if(j.loading||Z)return(0,r.BX)("div",{className:"jsx-1652fb32f8a812d3",children:[(0,r.tZ)(h.Z,{}),(0,r.tZ)(o(),{id:"1652fb32f8a812d3",children:"div.jsx-1652fb32f8a812d3{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]});if(!S||"Repl"!==S.__typename)return(0,r.BX)("div",{className:"jsx-20824b07e103a23",children:[(0,r.tZ)(s.Z,{children:"Unable to fetch tests, please try again"}),(0,r.tZ)(o(),{id:"20824b07e103a23",children:"div.jsx-20824b07e103a23{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-16)}"})]});if(!k)return(0,r.BX)("div",{className:"jsx-20824b07e103a23",children:[(0,r.tZ)(s.Z,{align:"center",children:"Unit tests are currently only supported in Java, Python, and Node.js repls."}),(0,r.tZ)(o(),{id:"20824b07e103a23",children:"div.jsx-20824b07e103a23{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-16)}"})]});var E="default";(null===S||void 0===S?void 0:S.isProject)?E="project_repl":(null===S||void 0===S?void 0:S.isProjectFork)&&(E="submission_repl");var C=Boolean((null===(n=S.unitTests)||void 0===n?void 0:n.tests)&&S.unitTests.tests.length>0);return(null===S||void 0===S||null===(i=S.currentUserPermissions)||void 0===i?void 0:i.writeTests)?(0,r.BX)(u.gC,{align:"center",spacing:2,children:[(0,r.tZ)("header",{className:"jsx-d544bba35c5bcebb",children:(0,r.BX)(u.Ug,{wrap:"nowrap",justify:"space-between",align:"baseline",children:[(0,r.tZ)(l.Z,{truncate:!0,level:4,children:"Unit tests"}),(0,r.tZ)(d.Z,{role:"tooltip","data-microtip-position":"left","aria-label":"Add test",filled:!1,border:!1,Icon:f.Z,onClick:function(){return x(!0)}})]})}),(0,r.tZ)("section",{className:"jsx-d544bba35c5bcebb",children:(0,r.BX)(u.gC,{spacing:1,align:"stretch",children:[(0,r.tZ)(B,{language:k,meta:(null===(m=S.unitTests)||void 0===m?void 0:m.meta)||null}),(0,r.tZ)(Ee,{isAddingTest:y,unitTests:(null===S||void 0===S?void 0:S.unitTests)||null,onClose:function(){return x(!1)},language:k,canWrite:!0,trackingContext:E}),b?(0,r.tZ)(Oe,{hasTests:C,onClick:b}):null]})}),(0,r.tZ)(o(),{id:"d544bba35c5bcebb",children:"header.jsx-d544bba35c5bcebb{width:100%}section.jsx-d544bba35c5bcebb{max-width:275px;width:100%;overflow-y:auto}"})]}):(0,r.BX)(u.gC,{spacing:2,align:"center",children:[(0,r.tZ)("header",{className:"jsx-b80a7b783b8eaad8",children:(0,r.tZ)(l.Z,{truncate:!0,level:4,children:"Unit tests"})}),(0,r.tZ)("section",{className:"jsx-b80a7b783b8eaad8",children:(0,r.tZ)(Ee,{unitTests:(null===S||void 0===S?void 0:S.unitTests)||null,language:k,isAddingTest:!1,canWrite:!1,trackingContext:E})}),(0,r.tZ)(o(),{id:"b80a7b783b8eaad8",children:"header.jsx-b80a7b783b8eaad8{width:100%}section.jsx-b80a7b783b8eaad8{width:100%;max-width:275px;overflow-y:auto}"})]})}},72361:function(e,t,n){n.d(t,{x:function(){return P},y:function(){return A}});var r=n(34051),i=n.n(r),o=n(50658),a=n(56834);var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code="",this.currentIndent=0,this.lib=t}var t=e.prototype;return t.indent=function(){this.currentIndent+=1},t.dedent=function(){if(0===this.currentIndent)throw new Error("indent at zero");this.currentIndent-=1},t.addIndents=function(){for(var e=0;e<this.currentIndent;e++)this.code+="  "},t.push=function(e){var t=e.split("\n"),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var c=o.value;this.addIndents(),this.code+=c,this.newLine()}}catch(l){r=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},t.newLine=function(){this.code+="\n"},t.closeCurly=function(){this.addIndents(),this.code+=this.lib.getClosingBrackets()},t.toString=function(){return this.code},e}(),l=n(92694);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){u(o,r,i,a,c,"next",e)}function c(e){u(o,r,i,a,c,"throw",e)}a(void 0)}))}}function f(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p={testRunnerName:function(){return"TestRunner"},testSuiteName:function(){return"TestSuite"},defaultImports:function(){return"import org.junit.Before;\nimport org.junit.After;\nimport org.junit.Test;\nimport static org.junit.Assert.*;"},classIntro:function(){return"public class ".concat((0,l.Og)(p.testSuiteName())," {")},classConstructorName:function(){return(0,l.Og)(p.testSuiteName())},setupIntro:function(){return"@Before\npublic void setUp() {"},tearDownIntro:function(){return"@After\npublic void tearDown() {"},testIntro:function(e){return"".concat(p.testIntroPreName()).concat(e).concat(p.testIntroPostName())},testIntroPreName:function(){return"@Test\npublic void "},testIntroPostName:function(){return"() {"},getProperTestName:function(e){return e},parseTestResultName:function(e){return e.replace("(".concat((0,l.Og)(p.testSuiteName()),")"),"")},buildSuite:function(e){var t=e.tests,n=e.meta,r=new c(p);r.push(p.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(p.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(p.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(p.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var u=l.value;u.code&&(r.push(p.testIntro(u.name)),r.indent(),r.push(u.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(d){o=!0,a=d}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return v.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,c=p.buildSuite({tests:o,meta:a});return p.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:c})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"}"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react in this bitch either"},captureSetupError:function(e){var t=e.tag,n=e.raw;o.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","java10"),o.Tb(t)}))},exampleTest:{id:-1,failureMessage:"An Adder class should have an add method that adds two ints and returns the result",name:"add",code:"Adder adder = new Adder();\nint result = adder.add(1, 2);\nassertEquals(3, result);\n"}},h="__UNIT_TEST_RESULT_START__",m="__UNIT_TEST_RESULT_END__",b="import org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.junit.runner.JUnitCore;\nimport org.junit.runner.Result;\nimport org.junit.runner.notification.Failure;\n\npublic class ".concat((0,l.Og)(p.testRunnerName())," {\n    public static void main(String[] args) {\n      Result result = JUnitCore.runClasses(").concat((0,l.Og)(p.testSuiteName()),'.class);\n      JSONArray failures = new JSONArray();\n\n        for (Failure failure : result.getFailures()) {\n            JSONObject obj = new JSONObject();\n            obj.put("name", failure.getTestHeader());\n            obj.put("stack", failure.getTrace());\n            failures.add(obj);\n        }\n        JSONObject out = new JSONObject();\n        out.put("passed", result.wasSuccessful());\n        out.put("failures", failures);\n        System.out.println();\n        System.out.println("').concat(h,'");\n        System.out.println(out);\n        System.out.println("').concat(m,'");\n    }\n}');function v(){return(v=d(i().mark((function e(t){var n,r,o,c,s,u,d,v,g,y,x,w,k,Z,j,S,E,C,_,O,T,I,A,P,N;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.container,r=t.fs,o=t.packager,c=t.logger,s=t.suiteCode,d=c.startLogSpinner("Setting up the environment"),e.next=5,(0,l.WT)(r);case 5:return d("Creating your test files 1/2"),e.next=8,(0,l.e3)({fs:r,code:s,filename:"".concat(p.testSuiteName(),".java")});case 8:if(v=e.sent,!(g=v.error)){e.next=14;break}return"Failed to create suite code file",p.captureSetupError({tag:"Failed to create suite code file",raw:g}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 14:return d("Creating your test files 2/2"),e.next=17,(0,l.e3)({fs:r,code:b,filename:"".concat(p.testRunnerName(),".java")});case 17:if(y=e.sent,!(x=y.error)){e.next=23;break}return"Failed to create test runner file",p.captureSetupError({tag:"Failed to create test runner file",raw:x}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 23:return c.stopLogSpinner(),c.clearLine(),c.logMessage("Installing imported packages\r\n"),e.next=28,o.addPackages([{name:"junit:junit",version:"4.12"},{name:"com.googlecode.json-simple:json-simple",version:"1.1.1"},{name:"org.hamcrest:hamcrest-core",version:"1.3"}]);case 28:return e.next=30,o.installPackages();case 30:if(e.sent){e.next=33;break}return e.abrupt("return",{error:"Failed to install packages\r\n"});case 33:return c.clearLogs(),d=c.startLogSpinner("Compiling your files"),e.next=37,n.exec("find",".","-type","f","-name","*.java","-print0");case 37:if(w=e.sent,k=w.output,!(Z=w.error)){e.next=44;break}return j="Failed to fetch working directory java files",p.captureSetupError({tag:j,raw:Z}),e.abrupt("return",{error:"".concat(j,"\r\n\r\n")+(null===k||void 0===k?void 0:k.replace(/\n/g,"\n\r"))+"\r\n\r\n"+Z});case 44:if("string"===typeof k){e.next=46;break}throw new Error("expected working directory files to be a string");case 46:return S=k.slice(0,-1).split("\0"),E=".:./target/dependency/*",e.next=50,(u=n).exec.apply(u,["javac","-classpath",E,"-d","."].concat(f(S)));case 50:if(C=e.sent,_=C.output,!(O=C.error)){e.next=57;break}return T="Failed to compile test runner file",p.captureSetupError({tag:T,raw:O}),e.abrupt("return",{error:"".concat(T,"\r\n\r\n")+(null===_||void 0===_?void 0:_.replace(/\n/g,"\n\r"))+"\r\n\r\n"+O});case 57:return d("Running your tests"),e.next=60,n.exec("java","-classpath",E,(0,l.Og)(p.testRunnerName()));case 60:if(I=e.sent,A=I.output,!(P=I.error)){e.next=66;break}return(0,a.j)(a.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),e.abrupt("return",{error:"Running tests failed\r\n\r\n"+(null===A||void 0===A?void 0:A.replace(/\n/g,"\n\r"))+"\r\n\r\n"+P});case 66:if("string"===typeof A){e.next=68;break}throw new Error("expected runOutput to be a string");case 68:return N=JSON.parse(A.slice(A.indexOf(h)+h.length,A.lastIndexOf(m))),e.abrupt("return",{result:N,error:null});case 70:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=p;function y(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){y(o,r,i,a,c,"next",e)}function c(e){y(o,r,i,a,c,"throw",e)}a(void 0)}))}}var w=function(e){return!!e&&e.trim().length>0&&e.split("\n").some((function(e){return!(e.trim().startsWith("#")||""===e.trim())}))},k={testRunnerName:function(){return"test_runner"},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"import unittest\nfrom main import *\n"},classIntro:function(){return"class UnitTests(unittest.TestCase):"},classConstructorName:function(){return"__init__"},setupIntro:function(){return"def setUp(self):"},tearDownIntro:function(){return"def tearDown(self):"},testIntro:function(e){return k.testIntroPreName()+e+k.testIntroPostName()},testIntroPreName:function(){return"def test_"},testIntroPostName:function(){return"(self):"},getProperTestName:function(e){return"test_".concat(e)},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new c(k);r.push(k.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(k.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),w(n.setup)&&(r.push(k.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.newLine()),w(n.tearDown)&&(r.push(k.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var u=l.value;r.push(k.testIntro(u.name)),r.indent(),r.push(u.code||"pass"),r.dedent(),r.newLine()}}catch(d){o=!0,a=d}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return r.toString()},runSuite:function(e){return E.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,c=k.buildSuite({tests:o,meta:a});return k.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:c})},hasClosingBrackets:function(){return!1},getClosingBrackets:function(){throw new Error("This language does not have closing brackets, check `hasClosingBrackets` first")},hasSemicolon:function(){return!1},getCommentChar:function(){return"#"},getHelpText:function(){return"no react in this bitch"},captureSetupError:function(e){var t=e.tag,n=e.raw;o.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","python3"),o.Tb(t)}))},exampleTest:{id:-1,failureMessage:"In main.py you should have an add functions that adds two numbers and returns the result",name:"add",code:"self.assertEquals(add(1, 2), 3)"}},Z="__UNIT_TEST_RESULT_START__",j="__UNIT_TEST_RESULT_END__",S="import unittest\nimport ".concat((0,l.Og)(k.testSuiteName()),"\nimport os\nimport json\nfrom time import sleep\n\nsuite = unittest.TestLoader().loadTestsFromTestCase(\n  ").concat((0,l.Og)(k.testSuiteName()),'.UnitTests)\nf = open(os.devnull,"w")\ntest_res = unittest.TextTestRunner(stream=f).run(suite)\n\n# Merge errors and failures and normalize to {name, stack}\nfailures = [\n    {\n        "name": r[0]._testMethodName,\n        "stack": r[1],\n    } for r in test_res.errors + test_res.failures\n]\nprint()\nprint(\'').concat(Z,'\')\nsleep(1)\nprint(json.dumps({\n    "passed": test_res.wasSuccessful(),\n    "failures": failures,\n}))\nprint()\nprint(\'').concat(j,"');");function E(){return(E=x(i().mark((function e(t){var n,r,o,c,s,u,d,f,p,h,m,b,v,g;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.container,r=t.fs,o=t.packager,c=t.logger,s=t.suiteCode,u=c.startLogSpinner("Setting up the environment"),e.next=4,(0,l.WT)(r);case 4:return u("Creating your test files 1/2"),e.next=7,(0,l.e3)({fs:r,code:s,filename:"".concat(k.testSuiteName(),".py")});case 7:if(d=e.sent,!(f=d.error)){e.next=13;break}return"Failed to create suite code file",k.captureSetupError({tag:"Failed to create suite code file",raw:f}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 13:return u("Creating your test files 2/2"),e.next=16,(0,l.e3)({fs:r,code:S,filename:"".concat(k.testRunnerName(),".py")});case 16:if(p=e.sent,!(h=p.error)){e.next=22;break}return"Failed to create test runner file",k.captureSetupError({tag:"Failed to create test runner file",raw:h}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 22:return c.stopLogSpinner(),c.clearLine(),c.logMessage("Installing imported packages\r\n"),e.next=27,o.installPackages();case 27:if(e.sent){e.next=30;break}return e.abrupt("return",{error:"Failed to install packages\r\n"});case 30:return c.clearLogs(),c.startLogSpinner("Running your tests"),e.next=34,n.exec("python","-B",(0,l.Og)("".concat(k.testRunnerName(),".py")));case 34:if(m=e.sent,b=m.output,!(v=m.error)){e.next=40;break}return(0,a.j)(a.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),e.abrupt("return",{error:"Running tests failed\r\n\r\n"+(null===b||void 0===b?void 0:b.replace(/\n/g,"\n\r"))+"\r\n"+v});case 40:if("string"===typeof b){e.next=42;break}throw new Error("expected runoutput to be a string");case 42:return g=JSON.parse(b.slice(b.indexOf(Z)+Z.length,b.lastIndexOf(j))),e.abrupt("return",{result:g,error:null});case 44:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){C(o,r,i,a,c,"next",e)}function c(e){C(o,r,i,a,c,"throw",e)}a(void 0)}))}}var O={testRunnerName:function(){throw new Error("Node test runner uses jest directly")},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"const index = require('./index.js');"},classIntro:function(){return'describe("UnitTests", function() {'},classConstructorName:function(){return null},setupIntro:function(){return"beforeAll(async function() {"},tearDownIntro:function(){return"afterAll(async function() {"},testIntro:function(e){return O.testIntroPreName()+e+O.testIntroPostName()},testIntroPreName:function(){return'test("'},testIntroPostName:function(){return'", async function() {'},getProperTestName:function(e){return e},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new c(O);r.push(O.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(O.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(O.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(O.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var u=l.value;u.code&&(r.push(O.testIntro(u.name)),r.indent(),r.push(u.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(d){o=!0,a=d}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return T.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,c=O.buildSuite({tests:o,meta:a});return O.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:c})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"});"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react yet"},captureSetupError:function(e){var t=e.tag,n=e.raw;o.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","nodejs"),o.Tb(t)}))},exampleTest:{id:-1,failureMessage:"",name:"add",code:"expect(index.add(1, 2)).toBe(3);"}};function T(){return(T=_(i().mark((function e(t){var n,r,o,c,s,u,d,f,p,h,m,b,v,g,y,x,w,k,Z,j,S,E;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.container,r=t.fs,o=t.packager,c=t.logger,s=t.suiteCode,u=c.startLogSpinner("Setting up the environment"),e.next=4,(0,l.WT)(r);case 4:return u("Creating your test files 1/2"),e.next=7,(0,l.e3)({fs:r,code:s,filename:"".concat(O.testSuiteName(),".js")});case 7:if(d=e.sent,!(f=d.error)){e.next=13;break}return"Failed to create suite code file",O.captureSetupError({tag:"Failed to create suite code file",raw:f}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 13:return u("Creating your test files 2/2"),p=69,h="jest.config.json",m={testRegex:(0,l.Og)("".concat(O.testSuiteName(),".js")),testEnvironment:"node",testFailureExitCode:p},e.next=19,(0,l.e3)({fs:r,code:JSON.stringify(m),filename:h});case 19:if(b=e.sent,!(v=b.error)){e.next=25;break}return"Failed to create config file",O.captureSetupError({tag:"Failed to create config file",raw:v}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 25:return c.stopLogSpinner(),c.clearLine(),c.logMessage("Installing imported packages\r\n"),e.next=30,o.installPackages();case 30:if(e.sent){e.next=33;break}return e.abrupt("return",{error:"Failed to install packages\r\n"});case 33:return c.clearLogs(),u=c.startLogSpinner("Running your tests"),g=(0,l.Og)("output.json"),e.next=38,n.exec("jest","--json","--outputFile",g,"--config",(0,l.Og)(h),"--forceExit","--passWithNoTests");case 38:if(y=e.sent,x=y.output,!(w=y.error)||w.endsWith(p.toString())){e.next=44;break}return(0,a.j)(a.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),e.abrupt("return",{error:"Running tests failed\r\n\r\n"+(null===x||void 0===x?void 0:x.replace(/\n/g,"\n\r"))+"\r\n"+w});case 44:return u("Parsing your test results"),e.next=47,r.readFile(g);case 47:if(!(k=e.sent).error){e.next=52;break}return"Error reading test results",O.captureSetupError({tag:"Error reading test results",raw:k.error}),e.abrupt("return",{error:"There was an error getting test results, if this happens please contact support."});case 52:if(Z=k.content.toString(),!(j=JSON.parse(Z)).success){e.next=56;break}return e.abrupt("return",{error:null,result:{passed:!0,failures:[]}});case 56:if(S=j.testResults[0],(E=S.assertionResults.filter((function(e){return"passed"!==e.status})).map((function(e){return{name:e.title,stack:e.failureMessages[0]}}))).length){e.next=60;break}return e.abrupt("return",{error:S.message.replace(/\n/g,"\r\n")});case 60:return e.abrupt("return",{error:null,result:{passed:!1,failures:E}});case 61:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I={java10:g,java10_beta:g,java:g,python3:k,python3_beta:k,python:k,nodejs:O,javascript:O,nodejs_beta:O};function A(e){return e in I}function P(e){if(!A(e))throw new Error("".concat(e," is not a supported unit testing language, it has to be one of ").concat(Object.keys(I)));return I[e]}},92694:function(e,t,n){n.d(t,{Og:function(){return f},WT:function(){return m},e3:function(){return p}});var r=n(34051),i=n.n(r),o=n(50658),a=n(41045),c=n(46846),l=n(93770);function s(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){s(o,r,i,a,c,"next",e)}function c(e){s(o,r,i,a,c,"throw",e)}a(void 0)}))}}var d="_test_runner";function f(e){return d+e}function p(e){return h.apply(this,arguments)}function h(){return(h=u(i().mark((function e(t){var n,r,o,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fs,r=t.code,o=t.filename,a=f(o),c=l.Z.from(r,"utf8"),e.abrupt("return",n.writeFile(a,c));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return b.apply(this,arguments)}function b(){return(b=u(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.readDir(a.Q);case 3:if(!(n=e.sent).error){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,Promise.all(n.children.map((function(e){return e.filename.startsWith(d)?e.type===c.Tv.File?t.deleteFile(e.filename):t.deleteDir(e.filename):Promise.resolve(null)})));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),o.$e((function(t){t.setTag("unitTestLib","true"),o.Tb(e.t0)}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}},45620:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(85133),i=n(90361),o=n(30617),a=n(67294),c=n(72361);function l(){var e=(0,r.Z)(),t=(0,o.Z)().dotReplit,n=null===e||void 0===e?void 0:e.language,l=(0,a.useState)(null),s=l[0],u=l[1],d=(0,a.useState)(!0),f=d[0],p=d[1];return(0,a.useEffect)((function(){if(n){if((0,c.y)(n))return u(n),void p(!1);var e=!1,r=t.watch((function(t){var n,r;if(e||(e=!0,p(!1)),t.error)t.error===i.Yt.NotFound&&u(null);else{var o=null===(n=t.config.unitTest)||void 0===n||null===(r=n.language)||void 0===r?void 0:r.toLowerCase();o&&(0,c.y)(o)?u(o):u(null)}}));return function(){r()}}}),[n,t]),{language:s,isLoading:f}}},25978:function(e,t,n){n.d(t,{Y:function(){return f},r:function(){return p}});var r=n(35944),i=n(67294),o=n(93577),a=n(88353),c=n(5560),l=n(12603),s=n(26483),u=n(86677),d=new Set(["draw.js"]);function f(e,t){var n=(0,l.f6)(),r=(0,o.Z)(),a=i.useCallback((function(e,n){var r,i;null===(r=t.current)||void 0===r||null===(i=r.contentWindow)||void 0===i||i.postMessage({action:"FILE_UPDATE",file:e,content:n},"*")}),[t]);i.useEffect((function(){if(t.current&&n){var r=!0,i=!1,o=void 0;try{for(var c,l=function(n,r){var i=r.value;t.current.onload=function(){e.readFile(i).then((function(e){e.error||a(i,e.content.toString())}))}},s=d[Symbol.iterator]();!(r=(c=s.next()).done);r=!0)l(0,c)}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}}),[e,a,t,n]),i.useEffect((function(){if(n&&r&&d.has(r))return e.watchOtFile(r,{onReady:function(e){var t=e.initialContent;return a(r,t.toString())},onChange:function(e){var t=e.latestContent;return a(r,t)}})}),[e,r,a,n])}var p=function(e){var t=e.iframe,n=(0,c.Z)();return i.useEffect((function(){var e="https://".concat(n,".id.repl.co"),t=function(t){if(t.origin===e&&"DOWNLOAD"===t.data.action){var n=document.createElement("a");document.body.appendChild(n),n.setAttribute("style","display: none"),n.href=t.data.url,n.download=t.data.filename,n.click(),document.body.removeChild(n)}};return window.addEventListener("message",t),function(){window.removeEventListener("message",t)}}),[n]),(0,r.BX)(r.HY,{children:[(0,r.tZ)(s.J,{alt:"Save image",onClick:function(){var e,n;null===(e=t.current)||void 0===e||null===(n=e.contentWindow)||void 0===n||n.postMessage({action:"REQUEST_SCREENSHOT"},"*")},children:(0,r.tZ)(a.Z,{})}),(0,r.tZ)(s.J,{alt:"Toggle Record",onClick:function(){var e,n;null===(e=t.current)||void 0===e||null===(n=e.contentWindow)||void 0===n||n.postMessage({action:"REQUEST_TOGGLE_RECORD"},"*")},children:(0,r.tZ)(u.Z,{})})]})}},26483:function(e,t,n){n.d(t,{J:function(){return Y},Z:function(){return J}});var r=n(35944),i=n(67294),o=n(29698),a=n(28774),c=n(34860),l=n(35060),s=n(79547),u=n.n(s),d=n(94184),f=n.n(d),p=n(88768),h=n(51281),m=n(57541);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){var t=e.repl,n=e.onCancel,o=e.onLink,a=(0,i.useState)(null),c=a[0],l=a[1],s=v((0,p.T9I)(),2),d=s[0],b=s[1],g=(0,i.useRef)(null),x=(0,i.useState)(""),w=x[0],k=x[1];(0,i.useEffect)((function(){b.data&&"Repl"===b.data.linkReplDomain.__typename&&o()}),[b.data,o]);var Z=w.includes(".")&&w.split(".")[0].length>0&&w.split(".")[1].length>0,j=t.hostedUrl.replace(/^https:\/\//,"");return(0,r.BX)("div",{className:"jsx-6505cf76223b0e60 edit-domain",children:[(0,r.tZ)("div",{className:"jsx-6505cf76223b0e60 title",children:"Link An Existing Domain"}),(0,r.BX)("div",{className:"jsx-6505cf76223b0e60 subtitle",children:["Learn more"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/hosting-web-pages#custom-domains",target:"_blank",className:"jsx-6505cf76223b0e60",children:"here"}),"."]}),(0,r.BX)("ol",{className:"jsx-6505cf76223b0e60 steps",children:[(0,r.tZ)("li",{className:"jsx-6505cf76223b0e60",children:(0,r.BX)("div",{className:"jsx-6505cf76223b0e60",children:[(0,r.tZ)("label",{className:"jsx-6505cf76223b0e60",children:"Enter Your Domain:"}),(0,r.tZ)(m.ZP,{disabled:"loading"===c,required:!0,value:w,onChange:function(e){k(e.target.value)},placeholder:"example.com"})]})}),Z?(0,r.tZ)("li",{className:"jsx-6505cf76223b0e60",children:(0,r.BX)("div",{className:"jsx-6505cf76223b0e60",children:[(0,r.BX)("div",{className:"jsx-6505cf76223b0e60",children:["Add a ",(0,r.tZ)("code",{className:"jsx-6505cf76223b0e60",children:"CNAME"})," record to your domain pointing at:"]}),(0,r.BX)("div",{className:"jsx-6505cf76223b0e60 cname-url",children:[(0,r.tZ)(m.ZP,{readOnly:!0,ref:g,onChange:function(){return null},value:j,onClick:function(){g.current&&g.current.select()}}),(0,r.tZ)(h.Z,{onClick:function(){g.current&&(g.current.select(),document.execCommand("copy"))},children:"Copy"})]})]})}):null,"loading"===c||"error"===c?(0,r.tZ)("li",{className:"jsx-6505cf76223b0e60",children:(0,r.tZ)("div",{className:"jsx-6505cf76223b0e60",children:(0,r.tZ)(y,{replId:t.id,domain:w,onVerified:function(){return l("verified")},onError:function(){return l("error")}})})}):null,"verified"===c?(0,r.tZ)("li",{className:"jsx-6505cf76223b0e60",children:"Your domain is configured correctly. Linking could take a few minutes. Please don\u2019t leave this page."}):null]}),(0,r.BX)("div",{className:"jsx-6505cf76223b0e60 controls",children:[(0,r.tZ)(h.Z,{onClick:n,children:"Close"}),(0,r.tZ)("div",{className:"jsx-6505cf76223b0e60 "+(f()("next",{"show-next":Z&&"loading"!==c})||""),children:"verified"===c?(0,r.tZ)(h.Z,{color:"primary",loading:b.loading,onClick:function(){b.loading||d({variables:{replId:t.id,domain:w}})},children:b.loading?"Linking...":"Link Domain"}):(0,r.tZ)(h.Z,{color:"primary",onClick:function(){return l("loading")},children:"Next"})})]}),(0,r.tZ)(u(),{id:"6505cf76223b0e60",children:".edit-domain.jsx-6505cf76223b0e60{display:grid;grid-row-gap:var(--space-16)}.title.jsx-6505cf76223b0e60{font-size:20px}.subtitle.jsx-6505cf76223b0e60,.label.jsx-6505cf76223b0e60{font-size:18px}li.jsx-6505cf76223b0e60{margin-bottom:var(--space-16)}li.jsx-6505cf76223b0e60>div.jsx-6505cf76223b0e60{display:grid;grid-row-gap:var(--space-8)}.cname-url.jsx-6505cf76223b0e60{display:grid;grid-column-gap:var(--space-8);grid-template-columns:1fr auto}.controls.jsx-6505cf76223b0e60{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.next.jsx-6505cf76223b0e60{visibility:hidden}.next.show-next.jsx-6505cf76223b0e60{visibility:visible}"})]})}function y(e){var t,n,o=e.domain,a=e.replId,c=e.onVerified,l=e.onError,s=(0,p.ZUY)({variables:{replId:a,domain:o},pollInterval:1e3}),d=s.data,f=s.stopPolling;return(0,i.useEffect)((function(){if(d&&"Repl"===d.repl.__typename){var e=d.repl;if(e.checkDomain){var t=e.checkDomain,n=t.retry,r=t.verified;r||n?(!r&&n||f(),r&&c()):l()}}}),[d,f,c,l]),"Repl"===(null===d||void 0===d?void 0:d.repl.__typename)&&(null===(t=d.repl.checkDomain)||void 0===t?void 0:t.status)&&d.repl.checkDomain.retry?(0,r.BX)("div",{className:"jsx-2c30d385bf371d24 verify-domain",children:[(0,r.tZ)("div",{className:"jsx-2c30d385bf371d24 loading"}),(0,r.tZ)("div",{className:"jsx-2c30d385bf371d24",children:d.repl.checkDomain.status}),(0,r.tZ)(u(),{id:"2c30d385bf371d24",children:".verify-domain.jsx-2c30d385bf371d24{display:grid;grid-template-columns:auto 1fr;grid-column-gap:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.loading.jsx-2c30d385bf371d24{width:20px;height:20px;-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;border:solid 3px#eee;border-top:solid 3px#888;-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg);-webkit-animation:linear domain-loading 1s infinite;-moz-animation:linear domain-loading 1s infinite;-o-animation:linear domain-loading 1s infinite;animation:linear domain-loading 1s infinite}@-webkit-keyframes domain-loading{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes domain-loading{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes domain-loading{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes domain-loading{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]}):"Repl"!==(null===d||void 0===d?void 0:d.repl.__typename)||(null===(n=d.repl.checkDomain)||void 0===n?void 0:n.retry)?null:(0,r.tZ)(r.HY,{children:"We ran into an internal error while checking the domain. Please try again later."})}function x(e){var t=e.replId,n=e.domain,o=e.onCancel,a=e.onUnlink,c=v((0,p.pCu)({variables:{input:{id:t,domain:null}}}),2),l=c[0],s=c[1];return(0,i.useEffect)((function(){s.data&&s.data.updateRepl.repl&&a()}),[s.data,a]),(0,r.BX)("div",{className:"jsx-9c9f3ce2c14a8eb1 unlink-domain",children:[(0,r.BX)("div",{className:"jsx-9c9f3ce2c14a8eb1",children:["Your repl is being served at"," ",(0,r.tZ)("a",{target:"_blank",rel:"noopener",href:"https://"+n,className:"jsx-9c9f3ce2c14a8eb1",children:n})]}),(0,r.BX)("div",{className:"jsx-9c9f3ce2c14a8eb1 controls",children:[(0,r.tZ)(h.Z,{onClick:o,children:"Close"}),(0,r.tZ)(h.Z,{color:"negative",onClick:function(){s.loading||l()},children:s.loading?"Unlinking...":"Unlink Domain"})]}),(0,r.tZ)(u(),{id:"9c9f3ce2c14a8eb1",children:".unlink-domain.jsx-9c9f3ce2c14a8eb1{display:grid;grid-row-gap:var(--space-24)}.controls.jsx-9c9f3ce2c14a8eb1{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}"})]})}function w(e){var t=e.replId,n=e.onCancel,i=e.onUnlink,o=e.onLink,a=(0,p.KG0)({variables:{replId:t}}),c=a.data,l=null;if(a.loading)l=(0,r.tZ)(r.HY,{children:"loading..."});else if(c&&"Repl"===c.repl.__typename){var s=c.repl;l=s.config.domain?(0,r.tZ)(x,{replId:s.id,domain:s.config.domain,onUnlink:i,onCancel:n}):(0,r.tZ)(g,{repl:s,onLink:o,onCancel:n})}else c&&"ReplRedirect"===c.repl.__typename?l=(0,r.BX)("div",{children:["This Repl has moved to"," ",(0,r.tZ)("a",{href:c.repl.replUrl,children:c.repl.replUrl})]}):c&&"SubscriptionExpiredError"===c.repl.__typename&&(l=(0,r.tZ)("div",{children:"Subscription expired"}));return(0,r.BX)("div",{className:"jsx-942ea2263fe0260d",children:[l,(0,r.tZ)(u(),{id:"942ea2263fe0260d",children:"div.jsx-942ea2263fe0260d{padding:var(--space-16);color:var(--foreground-default)}"})]})}var k=n(23139),Z=n(98647),j=n(50658),S=n(48966),E=n.n(S);function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e){var t=e.repl,n=e.existingDomain,o=e.onLink,a=e.onGoBack,c=e.onLinkStarted,l=e.onStateChanged,s=(0,i.useState)(n?"loading":null),u=s[0],d=s[1],f=(0,i.useState)(!1),h=f[0],b=f[1],v=(0,i.useState)(null),g=v[0],y=v[1],x=(0,i.useState)(!1),w=x[0],S=x[1],C=O((0,p.h3V)(),2),_=C[0],T=C[1],A=(0,i.useRef)(null),P=(0,i.useRef)(null),N=(0,i.useRef)(null),R=function(e){(null===e||void 0===e?void 0:e.current)&&e.current.select()},z=function(e){var t;(null===e||void 0===e||null===(t=e.current)||void 0===t?void 0:t.value)&&(0,Z.Z)(e.current.value).catch((function(e){j.$e((function(t){t.setTag("domain-link",!0),t.setExtra("type","copy"),j.Tb(e)}))}))},B=(0,i.useState)(n||""),D=B[0],U=B[1];(0,i.useEffect)((function(){T.data&&"Repl"===T.data.linkReplDomain2.__typename&&o()}),[T.data,o]);var L=function(e){d(e),l()},X=E().isURL(D,{require_valid_protocol:!1})&&D.split(".").length>=2,M=X&&2===D.split(".").length,F=t.hostedUrl.replace(/^https:\/\//,""),G=t.apexProxy,W="replit-verify=".concat(t.id);return(0,r.BX)(k.G7,{children:[(0,r.tZ)(k.G7,{css:[k.l0.pt(8),k.l0.flex.row,k.l0.justify.spaceBetween,k.l0.align.center],children:(0,r.tZ)(k.h4,{level:3,variant:"subheadDefault",children:"New Domain Link"})}),(0,r.BX)(k.xv,{multiline:!0,children:["Learn more"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/hosting-web-pages#custom-domains",target:"_blank",children:"here"}),"."]}),(0,r.BX)(k.G7,{css:[k.l0.colWithGap(12),k.l0.pt(16)],children:[(0,r.tZ)("label",{children:"Step 1: Enter Your Domain"}),(0,r.tZ)(m.ZP,{className:"cname-url",readOnly:"loading"===u,value:D,onChange:function(e){U(e.target.value)},onBlur:function(){!function(){try{var e=new URL("/",D);U(e.hostname)}catch(t){}}()},placeholder:"example.com"})]}),M&&!w?(0,r.BX)(k.G7,{css:[k.l0.colWithGap(12),k.l0.pt(8)],children:[(0,r.BX)("label",{children:["Step 2: Add an ",(0,r.tZ)("code",{children:"A"})," Record"]}),(0,r.BX)(k.G7,{css:[k.l0.rowWithGap(12),k.l0.align.center],children:[(0,r.tZ)(k.xv,{css:{fontFamily:k.TV.fontFamilyCode,maxWidth:"40%"},children:D}),(0,r.tZ)(k.xv,{css:{fontFamily:k.TV.fontFamilyCode},children:"A"}),(0,r.tZ)(m.ZP,{readOnly:!0,ref:A,onChange:function(){return null},value:G,onFocus:function(){return R(A)}}),(0,r.tZ)(k.zx,{onClick:function(){return z(A)},text:"Copy"})]}),(0,r.tZ)(k.G7,{children:(0,r.tZ)(k.zx,{onClick:function(){return S(!0)},text:"I\u2019d like to use a CNAME record instead."})})]}):null,!X||!w&&M?null:(0,r.BX)(k.G7,{css:[k.l0.colWithGap(12),k.l0.pt(8)],children:[(0,r.BX)("label",{children:["Step 2: Add a ",(0,r.tZ)("code",{children:"CNAME"})," Record"]}),(0,r.BX)(k.G7,{css:[k.l0.rowWithGap(12),k.l0.align.center],children:[(0,r.tZ)(k.xv,{css:{fontFamily:k.TV.fontFamilyCode,maxWidth:"40%"},children:D}),(0,r.tZ)(k.xv,{css:{fontFamily:k.TV.fontFamilyCode},children:"CNAME"}),(0,r.tZ)(m.ZP,{readOnly:!0,ref:N,onChange:function(){return null},value:F,onFocus:function(){return R(N)}}),(0,r.tZ)(k.zx,{onClick:function(){return z(N)},text:"Copy"})]}),M?(0,r.BX)(k.G7,{children:[(0,r.tZ)(k.xv,{variant:"small",multiline:!0,children:'Note: this CNAME record requires that your DNS provider supports CNAMEs for apex domains - for example Cloudflare with "CNAME Flattening".'}),(0,r.tZ)(k.G7,{css:[k.l0.pt(8)],children:(0,r.tZ)(k.zx,{onClick:function(){return S(!1)},text:"I\u2019d like to use an A record instead."})})]}):null]}),X?(0,r.BX)(k.G7,{css:[k.l0.colWithGap(12),k.l0.pt(8)],children:[M?(0,r.BX)("label",{children:["This domain also requires a ",(0,r.tZ)("code",{children:"TXT"})," Record."]}):(0,r.BX)("label",{children:['If you are using a service like Cloudflare (with "orange cloud") that rewrites domain records, you can add a ',(0,r.tZ)("code",{children:"TXT"})," ","Record for verification purposes."]}),(0,r.BX)(k.G7,{css:[k.l0.rowWithGap(12),k.l0.align.center],children:[(0,r.tZ)(k.xv,{css:{fontFamily:k.TV.fontFamilyCode,maxWidth:"40%"},children:D}),(0,r.tZ)(k.xv,{css:{fontFamily:k.TV.fontFamilyCode},children:"TXT"}),(0,r.tZ)(m.ZP,{readOnly:!0,ref:P,onChange:function(){return null},value:W,onClick:function(){return R(P)}}),(0,r.tZ)(k.zx,{onClick:function(){return z(P)},text:"Copy"})]})]}):null,"loading"===u?(0,r.tZ)(k.G7,{css:[k.l0.colWithGap(12),k.l0.pt(16)],children:(0,r.tZ)(I,{replId:t.id,domain:D,onVerified:function(){return L("verified")},onError:function(){return L("error")}})}):null,"verified"===u?(0,r.tZ)(k.G7,{css:[k.l0.colWithGap(12),k.l0.pt(16)],children:(0,r.tZ)(k.xv,{children:"Your domain has been verified."})}):null,"error"===u||g?(0,r.tZ)(k.G7,{css:[k.l0.colWithGap(12),k.l0.pt(16)],children:(0,r.BX)(k.xv,{children:["Creating the domain link failed",g?": "+g:"","."]})}):null,(0,r.BX)(k.G7,{css:[k.l0.flex.row,k.l0.justify.spaceBetween,k.l0.pt(16)],children:[(0,r.tZ)(k.zx,{onClick:a,text:"Close"}),X&&null===u?(0,r.tZ)(k.zx,{big:!0,disabled:h,onClick:function(){b(!0),y(null),_({variables:{replId:t.id,domain:D}}).then((function(e){var t,n=(null===(t=e.data)||void 0===t?void 0:t.linkReplDomain2)||null;"Repl"===(null===n||void 0===n?void 0:n.__typename)||"ServiceUnavailable"===(null===n||void 0===n?void 0:n.__typename)?(y(null),L("loading")):("NotFoundError"!==(null===n||void 0===n?void 0:n.__typename)&&"UnauthorizedError"!==(null===n||void 0===n?void 0:n.__typename)||y(null===n||void 0===n?void 0:n.message),L("error")),b(!1),c()})).catch((function(e){b(!1),y(e.message)}))},text:h?"Linking...":"Next"}):null]})]})}function I(e){var t,n=e.domain,o=e.replId,a=e.onVerified,c=e.onError,l=(0,p.bxH)({variables:{replId:o,domain:n},pollInterval:1e3}),s=l.data,d=l.stopPolling;if((0,i.useEffect)((function(){var e,t;if(s&&"Repl"===s.repl.__typename){var n=s.repl;if("NotFoundError"!==(null===(e=n.checkDomain2)||void 0===e?void 0:e.__typename)){if("DomainStatus2"===(null===(t=n.checkDomain2)||void 0===t?void 0:t.__typename)){var r=n.checkDomain2,i=r.retry,o=r.verified;o||i?(!o&&i||d(),o&&a()):c()}}else c()}}),[s,d,a,c]),"Repl"===(null===s||void 0===s?void 0:s.repl.__typename)&&s.repl.checkDomain2){var f,h,m,b="DomainStatus2"===s.repl.checkDomain2.__typename?s.repl.checkDomain2:null,v=null;if(null===b||void 0===b?void 0:b.records){var g=b.records;g.__typename;v=_(g,["__typename"])}var y,x=null;if(!(null===b||void 0===b?void 0:b.status))"ServiceUnavailable"===(null===(y=s.repl.checkDomain2)||void 0===y?void 0:y.__typename)&&(x=s.repl.checkDomain2.message),x||(x="DNS updates can take up to 48 hours to fully synchronize. Feel free to check back later.");return(0,r.BX)(k.G7,{css:[k.l0.colWithGap(16),k.l0.justify.spaceBetween],children:[(0,r.BX)(k.G7,{css:[k.l0.rowWithGap(16),k.l0.align.center],children:[(0,r.tZ)("div",{css:[k.l0.width("20px"),k.l0.height("20px"),{aspectRatio:"1 / 1"},{borderRadius:"100%"},{borderRadius:"100%"},{borderStyle:"solid"},{borderWidth:"3px"},{borderColor:k.TV.accentPrimaryDimmer},{borderTopColor:k.TV.accentPrimaryDefault},{transform:"rotate(0deg)"},{animation:"linear domain-loading 1s infinite"}],className:"jsx-4e6cc6caecb799c9"}),(0,r.tZ)("div",{className:"jsx-4e6cc6caecb799c9",children:x})]}),v||"DomainStatus2"===(null===(f=s.repl.checkDomain2)||void 0===f?void 0:f.__typename)&&(null===(h=s.repl.checkDomain2)||void 0===h?void 0:h.retry)||"ServiceUnavailable"===(null===(m=s.repl.checkDomain2)||void 0===m?void 0:m.__typename)?(0,r.BX)(k.G7,{children:[(0,r.tZ)("br",{className:"jsx-4e6cc6caecb799c9"}),v?(0,r.BX)(k.G7,{children:["Currently, your domain\u2019s records show:",(0,r.tZ)("pre",{css:[k.l0.overflow("scroll")],className:"jsx-4e6cc6caecb799c9",children:Object.entries(v).map((function(e){var t=O(e,2),i=t[0],o=t[1];return null===o||void 0===o?void 0:o.map((function(e){return(0,r.BX)("div",{className:"jsx-4e6cc6caecb799c9",children:[n," ",i," ",e]},"{domain}-{dnsType}")}))}))})]}):(0,r.tZ)(k.xv,{multiline:!0,children:"Currently, your domain is either not returning any records, or something is getting in the way of our verification process."})]}):null,(0,r.tZ)(u(),{id:"4e6cc6caecb799c9",children:"@-webkit-keyframes domain-loading{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes domain-loading{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes domain-loading{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes domain-loading{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})}return"Repl"===(null===s||void 0===s?void 0:s.repl.__typename)&&"NotFoundError"===(null===(t=s.repl.checkDomain2)||void 0===t?void 0:t.__typename)?(0,r.tZ)(r.HY,{children:"We ran into an internal error while checking the domain. Please try again later."}):null}function A(e){var t=e.replId,n=e.domain,o=e.onUnlink,a=e.onGoBack,c=O((0,p.pCu)({variables:{input:{id:t,removeDomain:n}}}),2),l=c[0],s=c[1];return(0,i.useEffect)((function(){s.data&&s.data.updateRepl.repl&&o()}),[s.data,o]),(0,r.BX)(k.G7,{children:[(0,r.tZ)(k.G7,{css:[k.l0.pt(8),k.l0.flex.row,k.l0.justify.spaceBetween,k.l0.align.center],children:(0,r.tZ)(k.h4,{level:3,variant:"subheadDefault",children:"Domain Unlinking"})}),(0,r.BX)(k.xv,{multiline:!0,css:[k.l0.pt(8)],children:["Are you sure you want to unlink"," ",(0,r.tZ)("a",{target:"_blank",rel:"noopener",href:"https://"+n,children:n}),"?"]}),(0,r.BX)(k.G7,{css:[k.l0.rowWithGap(16),k.l0.pt(16),k.l0.justify.spaceBetween],children:[(0,r.tZ)(k.zx,{onClick:a,text:"Back"}),(0,r.tZ)(k.zx,{onClick:function(){s.loading||l()},text:s.loading?"Unlinking...":"Yes, Unlink Domain"})]})]})}function P(e){var t=e.replId,n=e.onUnlink,o=e.onLink,a=(0,p.KG0)({variables:{replId:t}}),c=a.data,l=a.loading,s=a.refetch,u=(0,i.useState)("listing"),d=u[0],f=u[1],h=(0,i.useState)(null),m=h[0],b=h[1],v=null;if(l)v=(0,r.tZ)(r.HY,{children:"loading..."});else if(c&&"Repl"===c.repl.__typename){var g=c.repl;"listing"===d?v=(0,r.BX)(k.G7,{children:[g.domains&&(0===g.domains.length?(0,r.tZ)(k.G7,{css:[k.l0.pt(8)],children:(0,r.tZ)(k.h4,{level:3,variant:"subheadDefault",children:"No domains are currently linked."})}):(0,r.BX)(k.G7,{css:[k.l0.pt(8)],children:[(0,r.tZ)(k.h4,{level:3,variant:"subheadDefault",children:"Currently Linked Domains"}),g.domains.map((function(e){return e?(0,r.tZ)(k.G7,{css:[k.gU.listItem,{background:"transparent",":hover":{cursor:"pointer"}}],children:(0,r.BX)(k.G7,{css:[k.l0.rowWithGap(12),k.l0.justify.spaceBetween,k.l0.align.center],children:[(0,r.BX)(k.xv,{children:[e.domain,": ",e.state]}),(0,r.BX)(k.G7,{css:[k.l0.rowWithGap(12),k.l0.justify.end,k.l0.align.center],children:[(0,r.tZ)(k.zx,{text:"Unlink",onClick:function(){b(e.domain),f("unlinking")}}),"verified"!==e.state?(0,r.tZ)(k.zx,{text:"Check Status",onClick:function(){b(e.domain),f("linking")}}):null]})]})},e.domain):null}))]})),(0,r.tZ)(k.G7,{css:[k.l0.pt(8)],children:(0,r.tZ)(k.zx,{text:"Create Domain Link",onClick:function(){return f("linking")}})})]}):"linking"===d?v=(0,r.tZ)(T,{repl:g,existingDomain:m,onLink:o,onGoBack:function(){f("listing"),b(null)},onLinkStarted:s,onStateChanged:s}):"unlinking"===d&&null!==m&&(v=(0,r.tZ)(A,{replId:g.id,domain:m,onUnlink:function(){s(),n()},onGoBack:function(){f("listing"),b(null)}}))}else c&&"ReplRedirect"===c.repl.__typename?v=(0,r.BX)("div",{children:["This repl has moved to"," ",(0,r.tZ)("a",{href:c.repl.replUrl,children:c.repl.replUrl})]}):c&&"SubscriptionExpiredError"===c.repl.__typename&&(v=(0,r.tZ)("div",{children:"Subscription expired"}));return(0,r.BX)(k.G7,{css:[k.l0.p(k.TV.space16)],children:[(0,r.tZ)(k.G7,{css:[k.l0.rowWithGap(0),k.l0.justify.spaceBetween],children:(0,r.tZ)(k.h4,{level:2,variant:"headerDefault",children:"Domain Linking"})}),v]})}var N=n(21130),R=n(54929),z=n(3204),B=n(25978),D=n(13494),U=n(88341),L=n(89957),X=n(70917),M=n(43552),F=n(14646),G=n(26535);var W={id:"DevToolsIntro",title:"Try our new devtools",content:function(){return(0,r.BX)(R.Z,{css:z.l0.m(2),children:["No need to reach for your browser\u2019s console. You can now:",(0,r.BX)(R.Z,{tag:"ul",css:[z.l0.px(16),z.l0.py(8),{listStyle:"disc",lineHeight:1.7}],children:[(0,r.tZ)("li",{children:"Explore the DOM tree"}),(0,r.tZ)("li",{children:"View console logs"}),(0,r.tZ)("li",{children:"Run JavaScript"}),(0,r.tZ)("li",{children:"Inspect localStorage"}),(0,r.tZ)("li",{children:"and more!"})]}),"\u2026directly from our brand new devtools. Press this button to toggle it."]})}};function H(e){var t=e.targetElement,n=function(e){var t=(0,p.PpL)({variables:{tours:e}}).data;return i.useMemo((function(){var n,r,i;return null===(i=null===t||void 0===t||null===(n=t.currentUser)||void 0===n||null===(r=n.toursSeen)||void 0===r?void 0:r.find((function(t){return t.id===e})))||void 0===i?void 0:i.seen}),[t,e])}("workspace-desktop-tour"),o=(0,M.Z)("workspace","devtools-intro"),a=o.shouldDisplay,c=o.register,l=o.dismiss;return i.useEffect((function(){c()}),[c]),!0===n&&t&&a?(0,r.BX)(r.HY,{children:[(0,r.tZ)(F.w,{targetElement:t}),(0,r.tZ)(G.k,{placement:"bottom-start",targetElement:t,activeStep:W,currentStepIndex:0,done:l,goto:function(){},totalSteps:1,disableAnimation:!0})]}):null}var V=n(89431);function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Y=i.forwardRef((function(e,t){return(0,r.tZ)(N.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$(e,t,n[t])}))}return e}({ref:t,className:e.className,css:[{color:"var(--foreground-dimmest)",":hover":{color:"var(--foreground-default)"}},e.css]},e))})),Q=(0,X.F4)("from{transform:rotate(0deg);}to{transform:rotate(359deg);}");function J(e){var t=e.refreshing,n=e.devToolsBadge,s=e.url,u=e.onToggleDevtools,d=i.useRef(null),f=(0,V.Z)("flag-domain-linking-v2"),p=q(i.useState(!1),2),h=p[0],m=p[1];return(0,r.BX)(R.Z,{css:[z.l0.rowWithGap(8),z.l0.p(8),z.l0.align.center],children:[(0,r.tZ)(Y,{alt:t?"Refreshing...":"Refresh",onClick:e.onRefresh,css:t&&{animation:"".concat(Q," infinite 0.5s")},children:(0,r.tZ)(a.Z,{})}),(0,r.tZ)(L.ZP,{css:[z.l0.px(4),z.l0.py(2),z.l0.flex.growAndShrink(1),z.l0.fontSize(12)],value:s,type:"text",onFocus:function(t){e.trackUrlSelect(),t.currentTarget.select()},readOnly:!0}),(0,r.BX)(R.Z,{css:[z.l0.rowWithGap(4)],children:[e.canEditDomain&&(0,r.BX)(U.Z,{showArrow:!0,maxWidth:520,isOpen:h,onClickOutside:function(){return m(!1)},growToMaxWidth:!0,children:[(0,r.tZ)(Y,{alt:"Custom domain",onClick:function(){return m(!h)},children:(0,r.tZ)(o.Z,{})}),f?(0,r.tZ)(P,{onLink:function(){return m(!1)},onUnlink:function(){return m(!1)},replId:e.replId}):(0,r.tZ)(w,{onCancel:function(){return m(!1)},onLink:function(){return m(!1)},onUnlink:function(){return m(!1)},replId:e.replId})]}),u&&(0,r.tZ)(Y,{alt:"Toggle developer tools",ref:d,onClick:u,css:{position:"relative"},suffix:!!n&&(0,r.tZ)("span",{css:{position:"absolute",color:z.TV.accentNegativeStrongest,borderRadius:z.TV.borderRadiusRound,padding:"".concat(z.TV.space2," ").concat(z.TV.space4),backgroundColor:z.TV.accentNegativeDimmer,top:-5,right:-3,fontSize:9},children:n}),children:(0,r.tZ)(D.Z,{})}),(0,r.tZ)("a",{href:s,css:{color:"inherit"},target:"_blank",children:(0,r.tZ)(Y,{alt:"Open in a new tab",children:(0,r.tZ)(c.Z,{})})}),e.isKaboomDraw&&e.iframe&&(0,r.tZ)(B.r,{iframe:e.iframe}),e.closeCallback&&(0,r.tZ)(Y,{alt:"Close web view",onClick:e.closeCallback,children:(0,r.tZ)(l.Z,{})})]}),u&&e.isVisible?(0,r.tZ)(H,{targetElement:d.current}):null]})}},43233:function(e,t,n){var r=n(35944),i=n(67294),o=n(50658),a=n(88768),c=n(5560),l=n(85264),s=n(54929),u=n(3204),d=n(12603),f=n(26483),p=n(25978),h=n(56834),m=n(6763),b=n(44660),v=n(84948),g=n(89431);function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e,t){var n,x,w=e.fs,k=e.session,Z=e.trackUrlSelect,j=e.onClose,S=e.isVisible,E=e.className,C=(0,c.Z)(),_=(0,a.I5$)({variables:{id:C}}).data,O="Repl"===(null===_||void 0===_?void 0:_.repl.__typename)?_.repl:null,T=(0,i.useContext)(l.F),I=(0,i.useRef)(null),A=(0,i.useState)(!1),P=A[0],N=A[1],R=(0,i.useState)(0),z=R[0],B=R[1],D=(0,d.f6)(),U=(0,g.Z)("flag-allow-camera-iframe");(0,p.Y)(w,I);var L=null!==(x=null===_||void 0===_||null===(n=_.currentUser)||void 0===n?void 0:n.hasFlagDevtoolsWebview)&&void 0!==x&&x,X="html"===(null===O||void 0===O?void 0:O.lang.id)||"html_beta"===(null===O||void 0===O?void 0:O.lang.id);(0,i.useEffect)((function(){var e=function(e){var t;if((new URL(e.origin).hostname.endsWith(".id.repl.co")||new URL(e.origin).hostname.endsWith(".id.firewalledreplit.co"))&&"object"===typeof e.data&&(null===(t=e.data)||void 0===t?void 0:t.type))switch(e.data.type){case"event":var n=e.data,r=n.event,i=n.payload;return void("error"===r?o.Tb(i):(0,h.j)(r,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){y(e,t,n[t])}))}return e}({},i,{replId:C,isHTML:X})));case"show-badge":return void B(e.data.count);case"ready":var a,c,l=e.data.wasShown;if(l||null==l&&X)null===(a=I.current)||void 0===a||null===(c=a.contentWindow)||void 0===c||c.postMessage({type:"toggleDevtools",source:"automatic"},"*");return;case"open-file":var s=(0,m.om)(e.data.fileName)||e.data.fileName;s&&k.updateDeeplink({path:s,line:e.data.lineNumber,col:e.data.columnNumber})}};if(L&&I.current)return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}),[L,C,X,I.current,k]);var M=function(){B(0),N(!0),w.flush().then((function(){I.current&&(I.current.src+="")})).finally((function(){N(!1)}))};(0,i.useImperativeHandle)(t,(function(){return{refresh:M}}));var F=(0,v.Z)(b.H.Output);return O?(0,r.BX)(s.Z,{className:E,css:[u.l0.backgroundColor.backgroundDefault,u.l0.height("100%"),u.l0.borderRadius(4),{overflow:"hidden"}],innerRef:X?F:function(){},children:[(0,r.tZ)(f.Z,{canEditDomain:O.currentUserPermissions.linkDomain,anon:O.devUrl.includes("--five-nine.repl.co"),url:O.config.domain?"https://".concat(O.config.domain):O.prodUrl,trackUrlSelect:function(){Z&&Z(O.devUrl)},replId:C,refreshing:P,onRefresh:M,isKaboomDraw:D,iframe:I,closeCallback:j,isVisible:S,devToolsBadge:z,onToggleDevtools:L?function(){var e,t;B(0),null===(e=I.current)||void 0===e||null===(t=e.contentWindow)||void 0===t||t.postMessage({type:"toggleDevtools",source:"manual"},"*")}:void 0}),T?(0,r.tZ)(l.Y,{}):(0,r.tZ)("iframe",{allow:U?"camera":void 0,title:"webview","data-cy":"ws-webview",sandbox:"allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-modals allow-downloads",ref:I,src:O.devUrl,css:[u.l0.flex.growAndShrink(1),{border:"none",display:"block",backgroundColor:u.TV.white}]})]}):null};t.Z=(0,i.forwardRef)(x)},5289:function(e,t,n){var r=n(11163),i=n.n(r);t.Z=function(){return Boolean(i().query.embed||i().query.lite)}},40079:function(e,t,n){n.d(t,{b:function(){return r}});var r="workspace-root"},37155:function(e,t,n){n.d(t,{u:function(){return h}});var r=n(34051),i=n.n(r),o=n(67294),a=n(57923),c=n(30617),l=n(83002),s=n(62996);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p=function(e){var t=e.split("/");if(1===t.length)return t;for(var n=[],r=0;r<t.length;r++)n.push(t.slice(0,r+1).join("/"));return n},h=function(){var e=(0,c.Z)().fs,t=(0,l.P)(),n=(0,a.Z)(),r=f(o.useState(null),2),u=r[0],h=r[1];return o.useEffect((function(){var r=function(){var r,o=(r=i().mark((function r(){var o,a,c;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,e.listFiles();case 4:if(o=r.sent,n.current){r.next=7;break}return r.abrupt("return");case 7:if(!o.error&&o.files){r.next=10;break}return h([]),r.abrupt("return");case 10:a=o.files,c=s.uP.concat(s.nh),h(a.filter((function(e){return!t.some((function(t){return p(e).some((function(e){return t.test(e)}))}))&&!c.includes(e)})));case 13:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){d(o,n,i,a,c,"next",e)}function c(e){d(o,n,i,a,c,"throw",e)}a(void 0)}))});return function(){return o.apply(this,arguments)}}();r()}),[t,e,n]),u}},45525:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(67289),i=n(70240),o=n(45421),a=new Map,c=function(e){var t=a.get(e);if(void 0!==t){var n=t.start,r=t.source,c=window.performance.now(),l=(0,o.V)(e);i.kg.time("time to load file",c-n,{from:r,fileViewerType:l}),a.delete(e)}};function l(e){return{trackTimeToLoadFileStart:function(t){return function(e,t){if((0,r.Mb)(e)){var n=window.performance.now();a.set(e,{start:n,source:t})}}(t,e)},trackTimeToLoadFileEnd:c}}},29987:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(32537),i=n(67294),o=n(63805),a=n(56834);function c(){return(0,i.useMemo)((function(){return(0,r.Z)((function(e){(0,a.j)(a.U3.WS_TYPED,{fileExt:e,isMobile:(0,o.isMobile)({tablet:!1})})}),6e4)}),[])}},60153:function(e,t,n){n.d(t,{Z:function(){return Ie}});var r=n(35944),o=n(67294),a=n(50658);var c=function(e,t,n,r){return function(i){return function(o){return function(a){o(a);var c=i.getState();if(c){var l=c.plugins,s=Object.keys(l),u=!0,d=!1,f=void 0;try{for(var p,h=function(o,l){var s=l.value;if(a.pud&&a.pud!==s)return"continue";var u=c.plugins[s];if(u.broken)return"continue";var d=u.type,f=n[d];if(f)try{var p=f(t,s,a);if(p){var h=e(s).dispatch(p);h&&"object"===typeof h&&"function"===typeof h.catch&&h.catch((function(e){i.dispatch({type:"PLUGIN_BROKE",pud:s,message:e.toString()}),r({error:e,pluginType:d,source:"receiver",pud:s})}))}}catch(m){i.dispatch({type:"PLUGIN_BROKE",pud:s,message:m.toString()}),r({error:m,pluginType:d,source:"receiver",pud:s})}},m=s[Symbol.iterator]();!(u=(p=m.next()).done);u=!0)h(0,p)}catch(b){d=!0,f=b}finally{try{u||null==m.return||m.return()}finally{if(d)throw f}}}}}}};function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function f(e){return function(e){if(Array.isArray(e))return e}(e)||u(e)||h(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return function(e){if(Array.isArray(e))return l(e)}(e)||u(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}var m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length)return e;var n=f(t),r=n[0],i=n.slice(1);return m(e[r],i)},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;if(0===t.length)return n;var r=f(t),i=r[0],o=r.slice(1);return Array.isArray(e)?(e[i]=b(e[i],o,n),e):d({},e,s({},i,b(e[i],o,n)))};var v=function(e,t,n){var r=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;for(var o in r)if(!i.pud||i.pud===o){var a=r[o];if(!a.broken){var c=t[a.type];if(c)if("PLUGIN_BROKE"!==i.type){var l=void 0;try{l=c(a.state,d({},i,{wid:e}))}catch(u){r=d({},r,s({},o,d({},a,{broken:!0,errorMessage:u.toString()}))),n({error:u,pluginType:a.type,source:"reducer",pud:o});continue}l!==a.state&&(r=d({},r,s({},o,d({},a,{state:l}))))}else r=d({},r,s({},o,d({},a,{broken:!0,errorMessage:i.message})))}}return r},i=function(e,t){switch(t.type){case"UPDATE_LAYOUT":return d({},e,b(e,t.path.concat(t.property||[]),t.to));case"SET_ACTIVE_TAB":return d({},e,b(e,t.path.concat("active"),t.tabIndex));case"SET_SPLIT_POSITION":return d({},e,b(e,t.path.concat("position"),t.position));case"NEW_TAB":if("tabs"!==m(e,t.path.concat("type"))){var r=new Error("trying to add tab to non tab component");return n({error:r,pluginType:"layout",pud:null,source:"reducer"}),e}var i=d({},e,b(e,t.path.concat("tabs"),p(m(e,t.path.concat("tabs"))).concat([t.layout])));if(!t.setActiveTab)return i;var o=m(i,t.path.concat("tabs")).findIndex((function(e){return e.pud===t.layout.pud}));return d({},i,b(i,t.path.concat("active"),o));case"CLOSE_TAB":var a=m(e,t.path.concat("tabs")),c=t.tabIndex||a.findIndex((function(e){return e.pud===t.tabPud}));if(!a[c]){var l=new Error("trying to remove nonexistent tab");return n({error:l,pluginType:"layout",pud:null,source:"reducer"}),e}var u=m(e,t.path.concat("active")),f=u===c?Math.max(u-1,0):u,h=d({},e,b(e,t.path.concat("active"),f));return d({},h,b(h,t.path.concat("tabs"),p(a.slice(0,c).concat(a.slice(c+1)))));case"LOAD_PLUGIN":return d({},e,{pluginTitles:d({},e.pluginTitles,s({},t.pluginPud,t.title))});default:return e}},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{plugins:{},layout:{}},n=arguments.length>1?arguments[1]:void 0,o=r(e.plugins,n);o!==e.plugins&&(e=d({},e,{plugins:o}));var a=i(e.layout,n);switch(a!==e.layout&&(e=d({},e,{layout:a})),n.type){case"OPEN_FILE":return d({},e,{activeFile:n.path});case"MOVE_FILE":return e.activeFile===n.path?d({},e,{activeFile:n.to}):e;case"LOAD_PLUGIN":var c=t[n.pluginType];c||(c=function(e,t){});var l=n.initialState||{},u=c(void 0,{type:"@@INIT",initialState:l});return d({},e,{plugins:d({},e.plugins,s({},n.pluginPud,{type:n.pluginType,state:u,isClosable:n.isClosable,isDraggable:n.isDraggable}))});case"UNLOAD_PLUGIN":return d({},e,{plugins:Object.keys(e.plugins).reduce((function(t,r){return r!==n.pud?d({},t,s({},r,e.plugins[r])):t}),{})});default:return e}};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_WORKSPACE":return t.state;case"CREATE_WORKSPACE":return{layout:t.layout,plugins:r(void 0,t),activeFile:t.activeFile};default:return o(e,t)}}},g=n(78135),y=n(85486),x=function(e){var t={strokeMiterlimit:10,fill:"none",stroke:e.color,strokeWidth:1};return(0,r.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:(0,r.BX)("g",{children:[(0,r.tZ)("line",{style:t,x1:"3",y1:"3",x2:"13",y2:"13"}),(0,r.tZ)("line",{style:t,x1:"13",y1:"3",x2:"3",y2:"13"})]})})};function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){w(e,t,n[t])}))}return e}var Z=function(e){var t=e.onClick,n=e.onMouseDown,i=e.Icon,o=e.color,a=e.style;return(0,r.tZ)("button",{onClick:t,onMouseDown:n,style:k({color:"var(--foreground-default)",backgroundColor:"transparent",border:"none",cursor:"pointer",margin:"0",outline:"none",padding:"0"},a),children:(0,r.tZ)(i,{color:o})})},j=function(e){var t=e.color;return(0,r.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8.467 10.583",children:(0,r.tZ)("path",{d:"M4.233.684L2.988 1.93l.374.374.607-.607V3.97H1.697l.607-.607-.374-.374L.684 4.233 1.93 5.48l.374-.374-.607-.607H3.97V6.77l-.607-.607-.374.374 1.245 1.245L5.48 6.537l-.374-.374-.607.607V4.498H6.77l-.607.607.374.374 1.245-1.246-1.245-1.245-.374.374.607.607H4.498V1.697l.607.607.374-.374z",fill:t,"white-space":"normal",overflow:"visible"})})},S={height:"12px",width:"12px",margin:"0 4px"},E=function(e){var t=e.isTabbed,n=e.isClosable,i=e.isDraggable,a=e.HeaderPlugin,c=e.onClose,l=e.onDrag;return(0,r.BX)(o.Fragment,{children:[a,(0,r.BX)("div",{style:{alignItems:"center",display:"flex",height:"100%",marginLeft:"auto"},children:[i&&!t&&(0,r.tZ)(Z,{Icon:j,onMouseDown:l,style:S}),n&&!t&&(0,r.tZ)(Z,{Icon:x,onClick:c,style:S})]})]})},C=n(56834);function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e){if(Array.isArray(e))return e}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return t&&A(e.prototype,t),n&&A(e,n),e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}function B(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){N(e,t,n[t])}))}return e}function L(e,t){return!t||"object"!==W(t)&&"function"!==typeof t?T(e):t}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e,t){return O(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||H(e,t)||D()}function F(e){return O(e)||B(e)||H(e,i)||D()}function G(e){return function(e){if(Array.isArray(e))return _(e)}(e)||B(e)||H(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var W=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function H(e,t){if(e){if("string"===typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function V(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var i=R(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return L(this,n)}}var K=1e5,$=32,q={width:"100%",height:"100%"},Y=function(e){return e.getBoundingClientRect()},Q=function(e,t){var n=t.px,r=t.pc;return{px:e.px+(n||0),pc:e.pc+(r||0)}},J=function(e,t){return{px:e.px*t,pc:e.pc*t}},ee={px:0,pc:0},te=function(e){return{px:e,pc:0}},ne=function(e){return{px:0,pc:e}},re=function(e){var t=e.px,n=e.pc;return 0===t&&0===n},ie=function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{x:ee,y:ee,w:ne(100),h:ne(100),p:[]};if("tabs"===r.type){var a=r.active||0;n.push(U({},o,{h:te($),tabs:r.tabs.map((function(e){return e.pud||e.type})),active:a}));for(var c=0;c<r.tabs.length;c++)ie(e,t,n,U({},r.tabs[c]),i,U({},o,{p:G(o.p).concat(["tabs",c.toString()]),y:Q(o.y,te($)),h:c===a?Q(o.h,te(-32)):ee,w:c===a?o.w:ee}))}if("split"===r.type){var l=void 0===r.position?50:r.position,s=!1;if("undefined"!==typeof r.fixed?s=r.fixed:("undefined"!==typeof r.leftSize||"undefined"!==typeof r.rightSize)&&(s=!0),"undefined"!==typeof r.leftSize&&"undefined"!==typeof r.rightSize)throw new Error("Cannot have both leftSize and rightSize specified");var u=null;if(0===l?u="left":100===l&&(u="right"),r.stacked){var d=!re(o.h)&&!s,f=J(o.h,l/100);r.rightSize?f=Q(o.h,te(-r.rightSize)):r.leftSize?f=te(r.leftSize):"left"===u||re(o.h)?f=ee:"right"===u&&(f=Q(f,te(-8))),ie(e,t,n,r.left,i,U({},o,{p:G(o.p).concat(["left"]),h:f}));var p=Q(o.y,J(o.h,l/100));r.rightSize?p=Q(o.y,f):r.leftSize?p=Q(o.y,te(r.leftSize)):"left"===u?p=o.y:"right"===u&&d&&(p=Q(p,te(-8)));var h=J(o.h,(100-l)/100);r.rightSize?h=te(r.rightSize):r.leftSize?h=Q(o.h,te(-r.leftSize)):("right"===u||re(o.h))&&(h=ee),ie(e,t,n,r.right,i,U({},o,{p:G(o.p).concat(["right"]),y:d?Q(p,te(8)):p,h:d?Q(h,te(-8)):h})),d&&t.push(U({},o,{y:p,snapped:u,h:te(8),stacked:r.stacked}))}else{var m=!re(o.w)&&!s,b=J(o.w,l/100);r.rightSize?b=Q(o.w,te(-r.rightSize)):r.leftSize?b=te(r.leftSize):"left"===u||re(o.w)?b=ee:"right"===u&&(b=Q(b,te(-8))),ie(e,t,n,r.left,i,U({},o,{p:G(o.p).concat(["left"]),w:b}));var v=Q(o.x,J(o.w,l/100));"left"===u?v=o.x:r.rightSize?v=Q(o.x,b):r.leftSize?v=Q(o.x,te(r.leftSize)):"right"===u&&(v=Q(v,te(-8)));var g=J(o.w,(100-l)/100);r.rightSize?g=te(r.rightSize):r.leftSize?g=Q(o.w,te(-r.leftSize)):("right"===u||re(o.w))&&(g=ee),ie(e,t,n,r.right,i,U({},o,{p:G(o.p).concat(["right"]),x:m?Q(v,te(8)):v,w:m?Q(g,te(-8)):g})),m&&t.push(U({},o,{x:v,snapped:u,w:te(8),stacked:r.stacked}))}}if("pane"===r.type){var x=r.header,w=r.pud,k=i[w]||{isDraggable:!1,isClosable:!1},Z=y.JU(o.p),j=x||!Z&&(k.isClosable||k.isDraggable),S=j?x&&x.height||32:0;e.push({header:j&&{pud:x&&x.pud,p:U({},o,{h:te(S)})},pud:w,p:U({},o,{y:Q(o.y,te(S)),h:Q(o.h,te(-S))}),isDraggable:k.isDraggable,isClosable:k.isClosable})}},oe=function(e){var t,n,i,o=e.stacked,a=e.onMouseDown,c=e.snapped,l=e.style,s=M(fe(),2),u=s[0],d=s[1],f=u?"var(--outline-default)":"var(--outline-dimmest)";c?(n="left"===c?o?"translate(0px, -2px) rotate(135deg)":"translate(-2px, 0px) rotate(45deg)":o?"translate(0px, 2px) rotate(-45deg)":"translate(2px, 0px) rotate(-135deg)",t={width:6,height:6,borderRight:"solid 1px ".concat(f),borderTop:"solid 1px ".concat(f),transition:"0.1s background-color",transform:n}):(N(i={backgroundColor:f,borderRadius:"var(--border-radius-4)"},o?"height":"width",2),N(i,o?"width":"height",25),N(i,"transition","0.1s background-color"),t=i);return(0,r.tZ)("div",U({},d,{onMouseDown:a,onTouchStart:a,style:U({position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",flex:"1 0 auto",overflow:"hidden",borderRadius:"var(--border-radius-4)",background:"var(--background-root)",cursor:o?"row-resize":"col-resize",zIndex:1},l),children:(0,r.tZ)("div",{style:t})}))},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;if(0===t.length)return n;var r=F(t),i=r[0],o=r.slice(1);return Array.isArray(e)?(e[i]=ae(e[i],o,n),e):U({},e,N({},i,ae(e[i],o,n)))},ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length)return e;var n=F(t),r=n[0],i=n.slice(1);return ce(e[r],i)},le=function(e){z(n,e);var t=V(n);function n(){var e;return I(this,n),N(T(e=t.apply(this,arguments)),"state",{protectEvents:!1,newLayout:null,debug:!1,dragging:null,resizing:null,layout:e.props.store.getState().layout,plugins:e.props.store.getState().plugins}),N(T(e),"getPluginComponent",(function(t,n){var i=e.state.plugins[n],o=e.props,a=o.pluginComponents,c=o.wid,l=null;return l=i?i.broken?(0,r.tZ)(ue,{handleError:function(t){return e.handleError({error:t,pluginType:i.type,source:"component",pud:n})},message:i.errorMessage||"Plugin broken with no error :/"}):(l=a[i.type])?(0,r.tZ)(l,{wid:c,pud:n,dimensions:e.getPluginDims(n,{w:t.w,h:t.h}),style:q}):(0,r.tZ)(ue,{handleError:function(t){return e.handleError({error:t,pluginType:i.type,source:"component",pud:n})},message:"No plugin component by the name ".concat(n)}):(0,r.tZ)(ue,{handleError:function(t){return e.handleError({error:t,pluginType:"none",source:"component",pud:n})},message:"No known plugin by the name ".concat(n)})})),N(T(e),"onResizerDown",(function(t,n,r){var i=t.target;e.setState({protectEvents:!0,resizing:{stacked:r}}),t.preventDefault(),t.stopPropagation();var o=0,a=function(t,n){if("pane"===t.type){var i=e.nodes[n.join(".")].ref;if(!i)return;o+=r?Y(i).height:Y(i).width}else if("split"===t.type)t.stacked===r?(a(t.left,G(n).concat(["left"])),a(t.right,G(n).concat(["right"]))):a(t.left,G(n).concat(["left"]));else if("tabs"===t.type){var c=t.active||0;a(t.tabs[c],G(n).concat(["tabs",c.toString()]))}};a(ce(e.state.layout,["tiling"].concat(G(n))),n),o+=8;var c=r?Y(i).top:Y(i).left,l=ce(e.state.layout,["tiling"].concat(G(n),["position"]));"number"!==typeof l&&(l=50);var s=function(t){t.preventDefault(),t.stopPropagation();var i,a=t.touches?t.touches[0]:t,s=(r?a.pageY:a.pageX)-c,u=o*(l/100)+s;i=u>o-32?100:u<32?0:u/o*100,e.setState({newLayout:ae(e.state.layout,["tiling"].concat(G(n),["position"]),i)})},u=function(){document.removeEventListener("touchmove",s),document.removeEventListener("mousemove",s),document.removeEventListener("touchend",u),document.removeEventListener("mouseup",u),e.setState({protectEvents:!1,resizing:null}),null!==e.state.newLayout&&(e.props.store.dispatch({type:"SET_SPLIT_POSITION",position:ce(e.state.newLayout,["tiling"].concat(G(n),["position"])),path:["tiling"].concat(G(n))}),e.setState({newLayout:null}))};document.addEventListener("touchmove",s),document.addEventListener("mousemove",s),document.addEventListener("touchend",u),document.addEventListener("mouseup",u)})),N(T(e),"onDrag",(function(t,n){t.stopPropagation(),t.preventDefault();var r=t.pageX,i=t.pageY,o=null,a=[];for(var c in e.nodes){var l=e.nodes[c];if(l.ref){var s=Y(l.ref),u=s.top,d=s.left,f=s.width,p=s.height,h={p:l.p,x:d,y:u,w:f,h:p,pud:l.pud};l.pud===n?o=h:a.push(h)}}e.setState({protectEvents:!0});var m=function(t){t.preventDefault(),t.stopPropagation();var c=t.pageX,l=t.pageY,s={target:null,side:"bottom",left:c,top:l},u=!0,d=!1,f=void 0;try{for(var p,h=a[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var m=p.value;if((e.state.plugins[m.pud]||{}).isDraggable&&(c>m.x&&c<m.x+m.w&&l>m.y&&l<m.y+m.h)){var b=c-m.x,v=m.x+m.w-c,g=l-m.y,y=m.y+m.h-l,x=Math.min(b,v,g,y);s.target=m.pud,x===b?s.side="left":x===v?s.side="right":x===g&&(s.side="top");break}}}catch(Z){d=!0,f=Z}finally{try{u||null==h.return||h.return()}finally{if(d)throw f}}var w=c-r,k=l-i;s.left=o.x+w,s.top=o.y+k,e.setState({dragging:U({pud:n,width:o.w,height:o.h},s)})},b=function(){e.state.dragging&&e.state.dragging.target&&e.props.store.dispatch(se({pud:n,side:e.state.dragging.side,target:e.state.dragging.target})),e.setState({protectEvents:!1,dragging:null}),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",b)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",b)})),N(T(e),"nodes",{}),N(T(e),"dimMap",{}),N(T(e),"getPluginDims",(function(t,n){var r=e.dimMap[t];return r&&r.h.pc===n.h.pc&&r.h.px===n.h.px&&r.w.pc===n.h.pc&&r.w.px===n.w.px?r:(e.dimMap[t]=n,n)})),e}return P(n,[{key:"cancelContextMenuIntercept",value:function(e){e.shiftKey&&e.altKey&&e.preventDefault()}},{key:"componentDidMount",value:function(){this.isWeMounted=!0,this.subscribe(),document.addEventListener("contextmenu",this.cancelContextMenuIntercept)}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe(),document.removeEventListener("contextmenu",this.cancelContextMenuIntercept),this.isWeMounted=!1}},{key:"subscribe",value:function(){var e=this,t=this.props.store;this.unsubscribe=t.subscribe((function(){var n=t.getState(),r=n.layout,i=n.plugins;e.isWeMounted&&e.setState((function(e){for(var t in e.plugins){if(!i[t])return{layout:r,plugins:i};if(i[t].broken!==e.plugins[t].broken)return{layout:r,plugins:i}}return e.layout===r?null:{layout:r,plugins:i}}))}))}},{key:"shouldComponentUpdate",value:function(e,t){if(this.state!==t)return!0;for(var n in this.props)if(this.props[n]!==e[n])return!0;return!1}},{key:"onMaybeDrag",value:function(e,t){var n=this.state.plugins[t]&&this.state.plugins[t].isDraggable;(e.altKey||e.shiftKey)&&n&&this.onDrag(e,t)}},{key:"closeTabbedPlugin",value:function(e){var t=e.path,n=e.tabIndex,r=e.activeTabIndex;return function(e,i){var o=i().layout,a=y.QK(o,t).tabs,c=a[n].pud;if(e({type:"CLOSE_TAB",path:t,tabIndex:n}),a.length-1===0)e(U({type:"UPDATE_LAYOUT"},y.Od({layout:o,nodePath:t})));else if(n<=r){e({type:"SET_ACTIVE_TAB",tabIndex:Math.max(r-1,0),path:t})}e({type:"PLUGIN_CLOSED",closedPud:c})}}},{key:"closePlugin",value:function(e){var t=e.pud;return function(e,n){var r=n().layout;e(U({type:"UPDATE_LAYOUT"},y.Od({layout:r,pud:t}))),e({type:"PLUGIN_CLOSED",closedPud:t})}}},{key:"getPaneStyles",value:function(e,t){var n=re(t.w)||re(t.h),r=t.p.includes("tabs");return e?{opacity:.75,overflow:"hidden",visibility:n?"hidden":void 0,height:this.state.dragging.height,position:"absolute",left:0,top:0,transform:"translate(".concat(this.state.dragging.left,"px, ").concat(this.state.dragging.top-(t.h.px>0?t.h.px:0),"px)"),width:this.state.dragging.width,zIndex:99999,transition:"opacity 0.2s, max-width 0.2s, max-height 0.2s",maxWidth:"100vw",maxHeight:"100vh"}:{position:"absolute",visibility:n&&!r?"hidden":void 0,display:n&&r?"none":void 0,height:"calc(".concat(t.h.pc,"% + ").concat(t.h.px,"px)"),width:"calc(".concat(t.w.pc,"% + ").concat(t.w.px,"px)"),left:"calc(".concat(t.x.pc,"% + ").concat(t.x.px,"px)"),top:"calc(".concat(t.y.pc,"% + ").concat(t.y.px,"px)"),opacity:"1",transition:"opacity 0.2s, max-width 0.2s, max-height 0.2s",maxWidth:"100vw",maxHeight:"100vh"}}},{key:"render",value:function(){var e=this,t=this.state.newLayout||this.state.layout,n=t.tiling,i=t.floating,a=this.state.plugins,c=[],l=[],s=[];ie(c,l,s,n,a);var u="default";return this.state.resizing?u=this.state.resizing.stacked?"row-resize":"col-resize":this.state.dragging&&(u="grabbing"),(0,r.BX)("div",{style:{height:"100%",width:"100%",position:"absolute"},children:[c.map((function(t){var n=t.pud,i=t.p,a=t.header,c=t.isClosable,l=t.isDraggable,s=e,u=e.state.plugins[n]||{},d=e.state.plugins[a&&a.pud]||{},f=a&&a.p.h.px,p=a&&a.pud&&(0,r.tZ)(ue,{handleError:function(e){return s.props.handleError({error:e,pluginType:d.type,source:"component",pud:n})},message:d.broken?d.errorMessage:void 0,children:(0,r.tZ)(g.zt,{store:e.props.classicStoreFor(n),children:e.getPluginComponent(a.p,a.pud)})}),h=e.state.dragging&&e.state.dragging.pud===n;return(0,r.BX)(o.Fragment,{children:[a&&(0,r.tZ)("div",{className:"WHO AM I??",style:U({},e.getPaneStyles(h,a.p),{backgroundColor:"var(--background-default)",color:"var(--foreground-default)",height:"".concat(f,"px"),alignItems:"center",display:"flex",justifyContent:"spaceBetween"}),children:(0,r.tZ)(E,{HeaderPlugin:p,isClosable:c,isDraggable:l,isTabbed:y.JU(i.p),onClose:function(){s.props.store.dispatch(s.closePlugin({pud:n}))},onDrag:function(e){return s.onDrag(e,n)}})}),(0,r.BX)("div",{ref:function(e){return s.nodes[i.p.join(".")]={ref:e,p:i,pud:n}},style:U({},e.getPaneStyles(h,i),{borderRadius:"var(--border-radius-4)",boxShadow:h?"var(--shadow-2)":"none"}),onMouseDown:function(e){return s.onMaybeDrag(e,n)},children:[e.state.debug?(0,r.BX)("div",{style:{backgroundColor:"hsl(".concat(n.split("").map((function(e){return e.charCodeAt(0)})).reduce((function(e,t){return e+t})),", 50%, 50%)"),width:"100%",height:"100%",border:"inset 5px"},children:[n,(0,r.BX)("pre",{children:["x: ","calc(".concat(i.x.pc,"% + ").concat(i.x.px,"px)"),(0,r.tZ)("br",{}),"y: ","calc(".concat(i.y.pc,"% + ").concat(i.y.px,"px)"),(0,r.tZ)("br",{}),"w: ","calc(".concat(i.w.pc,"% + ").concat(i.w.px,"px)"),(0,r.tZ)("br",{}),"h: ","calc(".concat(i.h.pc,"% + ").concat(i.h.px,"px)"),(0,r.tZ)("br",{}),"p: ",i.p.join(" ")]})]}):(0,r.tZ)(ue,{handleError:function(e){return s.props.handleError({error:e,pluginType:u.type,source:"component",pud:n})},message:u.broken?u.errorMessage:void 0,children:(0,r.tZ)(g.zt,{store:e.props.classicStoreFor(n),children:e.getPluginComponent(i,n)})}),e.state.dragging&&e.state.dragging.target===n?(0,r.tZ)("div",{style:{position:"absolute",top:0,left:0,bottom:0,right:0,background:"rgba(127, 127, 127, 0.6)",transition:"transform 0.2s",transformOrigin:"top left",transform:"translate(".concat("right"===e.state.dragging.side?"50%":0,", ").concat("bottom"===e.state.dragging.side?"50%":0,") ").concat("left"===e.state.dragging.side||"right"===e.state.dragging.side?"scaleX(.5)":"scaleY(.5)")}}):null]})]},n)})),this.state.protectEvents&&(0,r.tZ)("div",{style:{zIndex:K,position:"absolute",top:0,bottom:0,left:0,right:0,cursor:u}}),l.map((function(t,n){var i=t.x,o=t.y,a=t.w,c=t.h,l=t.p,s=t.snapped,u=t.stacked;return(0,r.tZ)(oe,{onMouseDown:function(t){return e.onResizerDown(t,l,u)},snapped:s,stacked:u,style:{left:"calc(".concat(i.pc,"% + ").concat(i.px,"px)"),top:"calc(".concat(o.pc,"% + ").concat(o.px,"px)"),width:"calc(".concat(a.pc,"% + ").concat(a.px,"px)"),height:"calc(".concat(c.pc,"% + ").concat(c.px,"px)")}},n)})),s.map((function(t,n){var i=t.x,o=t.y,a=t.w,c=t.h,l=t.p,s=t.tabs,u=t.active;return(0,r.tZ)(de,{tabsMetadata:s.map((function(t){if("split"===t){var r=ce(e.state.layout,["tiling"].concat(G(l),["tabs"]))[n];t=r.left.pud||r.right.pud}return{title:e.state.layout.pluginTitles[t]||"untitled",isClosable:e.state.plugins[t]&&e.state.plugins[t].isClosable}})),active:u,setActive:function(t){return e.props.store.dispatch((function(e,n){var r=n(),i=["tiling"].concat(G(l));"shell"===ce(r.layout,i.concat("tabs"))[t].pud&&(0,C.j)(C.U3.SHELL_OPENED),e({type:"SET_ACTIVE_TAB",tabIndex:t,path:i})}))},close:function(t){var n=["tiling"].concat(G(l));e.props.store.dispatch(e.closeTabbedPlugin({path:n,tabIndex:t,activeTabIndex:u}))},style:{position:"absolute",left:"calc(".concat(i.pc,"% + ").concat(i.px,"px)"),top:"calc(".concat(o.pc,"% + ").concat(o.px,"px)"),width:"calc(".concat(a.pc,"% + ").concat(a.px,"px)"),height:"calc(".concat(c.pc,"% + ").concat(c.px,"px)")}},n)})),i.map((function(t){var n=e;if(!e.state.plugins[t]){var i=e;return(0,r.tZ)(ue,{handleError:function(e){return i.props.handleError({error:e,pluginType:i.state.plugins[t].type,source:"component",pud:t})},message:"No plugin by the name ".concat(t)},t)}var o=e.props.pluginComponents[e.state.plugins[t].type];if(!o){var a=e;return(0,r.tZ)(ue,{handleError:function(e){return a.props.handleError({error:e,pluginType:a.state.plugins[t].type,source:"component",pud:t})},message:"No component found for plugin by the name ".concat(t)},t)}return(0,r.tZ)(ue,{handleError:function(e){return n.props.handleError({error:e,pluginType:n.state.plugins[t].type,source:"component",pud:t})},children:(0,r.tZ)(g.zt,{store:e.props.classicStoreFor(t),children:(0,r.tZ)(o,{wid:e.props.wid,pud:t},t)})},t)}))]})}}]),n}(o.Component);function se(e){var t=e.pud,n=e.side,r=e.target;return function(e,i){var o=i().layout,a=y.Bp(o,t),c=y.QK(o,a);e(U({type:"UPDATE_LAYOUT"},y.Od({layout:o,pud:t}))),o=i().layout;var l=y.Bp(o,r);if(l){y.JU(l)&&(l=y.Il(l));var s="leftOf";"right"===n?s="rightOf":"top"===n?s="above":"bottom"===n&&(s="below"),e(U({type:"UPDATE_LAYOUT"},y.$T(o,c.pud,s,l,{position:50})))}}}var ue=function(e){z(n,e);var t=V(n);function n(){var e;return I(this,n),N(T(e=t.apply(this,arguments)),"state",{hasError:!!e.props.message,error:new Error(e.props.message)}),e}return P(n,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,error:e,info:t}),this.props.handleError(e)}},{key:"render",value:function(){return this.state.hasError?(0,r.BX)("div",{style:{background:"red",color:"white",width:"100%",height:"100%",padding:"0",margin:"0",overflow:"hidden"},children:[(0,r.tZ)("h1",{children:"This Plugin Crashed!"}),this.state.info&&(0,r.tZ)("pre",{children:this.state.info.componentStack||JSON.stringify(this.state.info)}),this.state.error&&(0,r.tZ)("pre",{children:this.state.error.toString()})]}):this.props.children||null}}]),n}(o.Component);function de(e){var t=e.active,n=void 0===t?0:t,i=e.setActive,o=void 0===i?function(){}:i,a=e.close,c=void 0===a?function(){}:a,l=e.tabsMetadata,s=e.style;return(0,r.tZ)("div",{style:s,children:(0,r.tZ)("div",{style:{height:$,fontFamily:"'IBM Plex Sans', sansSerif",backgroundColor:"var(--background-root)",display:"flex",alignItems:"flex-end",position:"relative",zIndex:2},children:l.map((function(e,t){return(0,r.tZ)(he,{title:e.title,isClosable:e.isClosable,onClose:function(){return c(t)},onClick:function(){return o(t)},isActive:t===n},t)}))})})}function fe(){var e=M(o.useState(!1),2),t=e[0],n=e[1];return[t,{onMouseEnter:function(){n(!0)},onMouseLeave:function(){n(!1)}}]}function pe(e){return U({height:"100%",boxSizing:"border-box",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",padding:"var(--space-8)",backgroundColor:"var(--background-root)",color:"var(--foreground-dimmer)",fontSize:"var(--font-size-default)",fontFamily:"var(--font-family-default)",borderTopRightRadius:"var(--border-radius-4)",borderTopLeftRadius:"var(--border-radius-4)",cursor:"pointer",transition:"0.2s background-color"},e.isHovering?{backgroundColor:"var(--background-root)",color:"var(--foreground-default)"}:{},e.isActive?{backgroundColor:"var(--background-default)",color:"var(--foreground-default)"}:{})}function he(e){var t,n=e.isActive,i=e.onClick,o=e.title,a=e.isClosable,c=e.onClose,l=M(fe(),2),s=l[0],u=l[1];return(0,r.tZ)("div",U({},u,{style:pe({isHovering:s,isActive:n}),onClick:i,children:(0,r.BX)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[(t=o,t?t[0].toUpperCase()+t.slice(1):t),a&&(0,r.tZ)(Z,{onClick:function(e){e.stopPropagation(),c()},Icon:x,style:{height:"8px",width:"8px",padding:0,marginLeft:"7px"}})]})}))}var me=le,be=n(85106),ve=n(70240),ge=n(25108);function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t,n){return t&&xe(e.prototype,t),n&&xe(e,n),e}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ke(e,t,n[t])}))}return e}function Se(e,t){return!t||"object"!==Ce(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ce=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _e(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze(e);if(t){var i=Ze(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Se(this,n)}}var Oe=function(e){return function(t){return function(n){return"function"===typeof n?n(e.dispatch,e.getState):t(n)}}},Te=["activeFile"],Ie=function(){function e(){var t=this;ye(this,e),ke(this,"marshal",(function(){var e=t.store.getState();return JSON.stringify(e)})),ke(this,"unmarshal",(function(e){var n=JSON.parse(e);t.store.dispatch({type:"SET_WORKSPACE",state:n})})),ke(this,"bootstrap",(function(e){t.store.dispatch(function(e){var t=e.wid,n=e.config;return function(e){for(var r in e({wid:t,type:"CREATE_WORKSPACE",language:n.language,layout:n.layout,activeFile:n.activeFile}),n.plugins)e(Pe({wid:t,pluginPud:r,pluginType:n.plugins[r].type,title:n.plugins[r].title,initialState:n.plugins[r].state,isClosable:n.plugins[r].isClosable,isDraggable:n.plugins[r].isDraggable}))}}({config:e}))})),ke(this,"register",(function(e,n){t.reducers[e]=n.reducer,t.receivers[e]=n.receiver||n.receiver,t.components[e]=n.Component})),ke(this,"yikesInjectStore",(function(e){t.yikesExtraStore=e})),ke(this,"injectServices",(function(e){t.services=e})),ke(this,"handleError",(function(e){var n=e.error,r=e.pluginType,i=e.source,o=e.pud;if(0===t.errorHandlers.length)return ge.error("Plugin with type ",r," errored in ",i," error is: "),void ge.error(n);t.errorHandlers.forEach((function(e){return e({error:n,pluginType:r,source:i,pud:o})}))})),ke(this,"registerErrorHandler",(function(e){var n=t;return t.errorHandlers.push(e),function(){n.errorHandlers=n.errorHandlers.filter((function(t){return t!==e}))}})),window.performance.clearMarks("create-workspace"),window.performance.mark("create-workspace"),this.wid=""+Math.random(),this.reducers={},this.receivers={},this.components={},this.pluginStores={},this.yikesExtraStore={getState:function(){return{}},subscribe:function(){return function(){}},dispatch:function(){}},this.errorHandlers=[];var n=[];this.govalConnectionStarted=null,this.classicStoreFor=function(e){var i=t,o={};if(t.pluginStores[e])return t.pluginStores[e];var c=t,u={getState:function(){return{get user(){return o.user=!0,c.yikesExtraStore.getState().user},get banners(){return o.banners=!0,c.yikesExtraStore.getState().banners},get replEnvironment(){return o.replEnvironment=!0,c.yikesExtraStore.getState().replEnvironment},get repls(){throw new Error("Please use repl shared reducer")},get replsByUrl(){throw new Error("Please use repl shared reducer")},get replsByUser(){throw new Error("Please use repl shared reducer")},get files(){throw new Error("Please use files shared reducer")},get messages(){return o.messages=!0,c.yikesExtraStore.getState().messages},get plans(){return o.plans=!0,c.yikesExtraStore.getState().plans},workspace:ke({},i.wid,i.store.getState()),get services(){return c.services}}},subscribe:function(t){var n=i,r={},a={},c=Te.reduce((function(e,t){return e[t]=n.store.getState()[t],e}),{});return i.store.subscribe((function(){var i=n.store.getState().plugins[e];if(i!==r)return r=i,void t();var l=!1,s=n.yikesExtraStore.getState();for(var u in o)s[u]!==a[u]&&(a[u]=s[u],l=!0);var d=n.store.getState();for(var f in c)d[f]!==c[f]&&(c[f]=d[f],l=!0);l&&t()}))},dispatch:function(t){if(t.type){var o={};t.path&&(o={path:t.path}),a.n_({category:"redux",message:"workspace action",data:je({type:t?t.type:null},o)})}if(t.wid||"function"===typeof t){var c=Oe(i.classicStoreFor(e))(r(s)(l))(t),u=!0,d=!1,f=void 0;try{for(var p,h=n[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){p.value.cb()}}catch(m){d=!0,f=m}finally{try{u||null==h.return||h.return()}finally{if(d)throw f}}return c}return i.yikesExtraStore.dispatch(t)}};return t.pluginStores[e]=u,u};var r=c(this.classicStoreFor,this.wid,this.receivers,this.handleError),i=v(this.wid,this.reducers,this.handleError),o=i(void 0,{type:"@@INIT"}),l=function(e){o=i(o,e)},s={getState:function(){return o},subscribe:function(e){var t=function(){n=n.filter((function(e){return e.unsub!==t}))};return n.push({cb:e,unsub:t}),t},dispatch:function(e){if(e.type){var t={};e.path&&(t={path:e.path}),a.n_({category:"redux",message:"workspace action",data:je({type:e?e.type:null},t)})}var i=Oe(s)(r(s)(l))(e),o=!0,c=!1,u=void 0;try{for(var d,f=n[Symbol.iterator]();!(o=(d=f.next()).done);o=!0){d.value.cb()}}catch(p){c=!0,u=p}finally{try{o||null==f.return||f.return()}finally{if(c)throw u}}return i}};window.store=s,this.store=s}return we(e,[{key:"component",value:function(){var e=this;return function(){return(0,r.tZ)(be.Z.Provider,{value:e.wid,children:(0,r.tZ)(Ae,{store:e.store,classicStoreFor:e.classicStoreFor,wid:e.wid,pluginComponents:e.components,handleError:e.handleError,govalConnectionStarted:e.govalConnectionStarted})})}}}]),e}(),Ae=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(n,e);var t=_e(n);function n(){return ye(this,n),t.apply(this,arguments)}return we(n,[{key:"componentDidMount",value:function(){var e=this.props.govalConnectionStarted;if(e){var t=window.performance.now()-e;ve.kg.info(C.U3.GOVAL_TIME_TO_CONNECT,{time:t})}this.props.store.dispatch({type:"WORKSPACE_MOUNTED"})}},{key:"componentWillUnmount",value:function(){this.props.store.dispatch({type:"WORKSPACE_WILL_UNMOUNT"})}},{key:"render",value:function(){return(0,r.tZ)("div",{style:{height:"100%",position:"relative",display:"flex"},children:(0,r.tZ)(me,{wid:this.props.wid,store:this.props.store,classicStoreFor:this.props.classicStoreFor,pluginComponents:this.props.pluginComponents,handleError:this.props.handleError})})}}]),n}(o.Component);function Pe(e){var t=e.wid,n=e.pluginPud,r=e.pluginType,i=e.title,o=e.initialState,a=e.isClosable,c=void 0!==a&&a,l=e.isDraggable;return{type:"LOAD_PLUGIN",wid:t,pluginPud:n,pluginType:r,title:i,initialState:o,isClosable:c,isDraggable:void 0!==l&&l}}},68342:function(e,t,n){n.d(t,{ZP:function(){return x}});var r=n(35944),i=n(79547),o=n.n(i),a=n(67294),c=n(9917),l=n(35977),s=n(39155),u=n(5440);function d(e){var t=e.message,n=e.messageStyle,i=a.useMemo((function(){return"TextMessageContentType"===t.content.__typename?(0,u.kW)(t.content.text,{}):"PreviewMessageContentType"===t.content.__typename&&"string"===typeof t.content.preview?(0,u.kW)(t.content.preview,{}):null}),[t.content]),c="PreviewMessageContentType"===t.content.__typename&&"string"!==typeof t.content.preview;return t.user&&(i||c)?(0,r.BX)("div",{className:"jsx-e1dab5bcce309da6 "+(n||""),children:[(0,r.BX)("div",{className:"jsx-e1dab5bcce309da6 message",children:[i&&(0,r.tZ)(u.YI,{message:i,codeStyles:{color:"var(--accent-negative-default)",background:"var(--background-highest)"}}),c&&(0,r.BX)("span",{className:"jsx-e1dab5bcce309da6 typing-indicator",children:[(0,r.tZ)("span",{className:"jsx-e1dab5bcce309da6 dot"}),(0,r.tZ)("span",{className:"jsx-e1dab5bcce309da6 dot"}),(0,r.tZ)("span",{className:"jsx-e1dab5bcce309da6 dot"})]})]}),(0,r.tZ)(o(),{id:"e1dab5bcce309da6",children:".message.jsx-e1dab5bcce309da6{background:var(--background-higher);padding:var(--space-4)var(--space-8);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);font-size:var(--font-size-default);overflow-wrap:break-word;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;max-width:100%;white-space:pre-wrap}.userhighlight.jsx-e1dab5bcce309da6 .message.jsx-e1dab5bcce309da6{background:transparent}.typing-indicator.jsx-e1dab5bcce309da6{min-height:1em;display:grid;grid-auto-flow:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8)}.dot.jsx-e1dab5bcce309da6{width:6px;height:6px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;display:inline-block;background-color:var(--foreground-dimmest);-webkit-animation:pulse.6s infinite;-moz-animation:pulse.6s infinite;-o-animation:pulse.6s infinite;animation:pulse.6s infinite}.dot.jsx-e1dab5bcce309da6:nth-child(1){-webkit-animation-delay:0s;-moz-animation-delay:0s;-o-animation-delay:0s;animation-delay:0s}.dot.jsx-e1dab5bcce309da6:nth-child(2){-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s}.dot.jsx-e1dab5bcce309da6:nth-child(3){-webkit-animation-delay:.4s;-moz-animation-delay:.4s;-o-animation-delay:.4s;animation-delay:.4s}@-webkit-keyframes pulse{0%{background-color:var(--foreground-dimmest)}50%{background-color:var(--foreground-dimmest)}100%{background-color:var(--foreground-dimmest)}}@-moz-keyframes pulse{0%{background-color:var(--foreground-dimmest)}50%{background-color:var(--foreground-dimmest)}100%{background-color:var(--foreground-dimmest)}}@-o-keyframes pulse{0%{background-color:var(--foreground-dimmest)}50%{background-color:var(--foreground-dimmest)}100%{background-color:var(--foreground-dimmest)}}@keyframes pulse{0%{background-color:var(--foreground-dimmest)}50%{background-color:var(--foreground-dimmest)}100%{background-color:var(--foreground-dimmest)}}"})]}):null}var f=n(17847),p=n(58458),h=n(8286),m=n(8996);function b(e){var t=e.message,n=a.useMemo((function(){var e=t.timeCreated;return e?(0,f.Z)(new Date(e),"do MMM, hh:mm a"):""}),[t]),i=t.user;return(0,r.tZ)("div",{className:"resolved-message",children:(0,r.BX)(m.Ug,{align:"center",spacing:1,children:[i&&(0,r.tZ)(s.Z,{url:i.image,size:"m"}),(0,r.tZ)(h.Z,{color:"var(--foreground-default)",size:24}),(0,r.BX)(p.Z,{size:"xsmall",children:["Resolved ",n]})]})})}function v(e){var t=e.message,n=a.useMemo((function(){var e=t.timeCreated;return e?(0,f.Z)(new Date(e),"do MMM, hh:mm a"):""}),[t]),i=t.user;return(0,r.tZ)("div",{className:"resolved-message",children:(0,r.BX)(m.Ug,{align:"center",spacing:1,children:[i&&(0,r.tZ)(s.Z,{url:i.image,size:"m"}),(0,r.tZ)(h.Z,{size:24,color:"var(--foreground-dimmest)"}),(0,r.BX)(p.Z,{size:"xsmall",children:["Unresolved ",n]})]})})}var g=function(e){var t=new Date(e),n=new Date;return(0,l.Z)(n,t)<60?"now":(0,c.F)(t,!0)};function y(e){var t=e.messageGroup,n=t.messages,i=t.user,a=t.timeCreated;return i?(0,r.BX)("div",{className:"jsx-3469fc8bae278840 message-group",children:[(0,r.BX)("div",{className:"jsx-3469fc8bae278840 message-info",children:[(0,r.tZ)("div",{className:"jsx-3469fc8bae278840 avatar",children:(0,r.tZ)(s.Z,{url:i.image,size:"xs",style:{minHeight:"15px",minWidth:"15px",height:"15px",width:"15px"}})}),(0,r.tZ)("div",{className:"jsx-3469fc8bae278840 username",children:i.username}),(0,r.tZ)("div",{className:"jsx-3469fc8bae278840 time",children:g(a)})]}),(0,r.tZ)("div",{className:"jsx-3469fc8bae278840 messages",children:n.map((function(e){return(0,r.tZ)(d,{message:e},e.id)}))}),(0,r.tZ)(o(),{id:"3469fc8bae278840",children:".message-group.jsx-3469fc8bae278840{background-color:var(--background-default);color:var(--foreground-default);display:grid;position:relative;grid-template-rows:auto auto;grid-row-gap:var(--space-8);grid-template-columns:minmax(0,1fr)}.message-info.jsx-3469fc8bae278840{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;font-size:var(--font-size-small)}.messages.jsx-3469fc8bae278840{display:grid;grid-row-gap:var(--space-4);grid-template-columns:minmax(0,1fr)}.avatar.jsx-3469fc8bae278840{margin-right:5px}.username.jsx-3469fc8bae278840{color:var(--foreground-dimmer);font-weight:var(--font-weight-medium);margin-right:3px}.time.jsx-3469fc8bae278840{color:var(--foreground-dimmest)}"})]}):null}function x(e){var t=e.messageGroup;if("TextMessageContentType"===t.messageType||"PreviewMessageContentType"===t.messageType)return(0,r.tZ)(y,{messageGroup:t});if("StatusMessageContentType"===t.messageType){var n=t.messages[0];if("StatusMessageContentType"===n.content.__typename&&"resolved"===n.content.status)return(0,r.tZ)(b,{message:n});if("StatusMessageContentType"===n.content.__typename&&"unresolved"===n.content.status)return(0,r.tZ)(v,{message:n})}return null}},21394:function(e,t,n){var r=n(34051),i=n.n(r),o=n(35944),a=n(67294),c=n(79547),l=n.n(c),s=n(44894),u=n(94184),d=n.n(u),f=n(96594),p=n(71171),h=n.n(p),m=n(87349),b=n(39155),v=n(56834),g=n(38380),y=n(88768),x=n(18651),w=n(64784),k=n(30887);function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){S(e,t,n[t])}))}return e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _=a.forwardRef((function(e,t){var n,r,c=e.annote,u=e.placeholder,p=e.onChangeMessage,Z=e.onFinalizeMessage,S=function(){""!==T.trim()&&(Z({messageId:B||h()(),message:T.trim()}),D(null),I(""),setTimeout(M),(0,v.j)(v.U3.CONVERSATION_MESSAGE_SENT,{threadMessagesCount:c.messages.length,otherThreadParticipantsCount:J.length,anchorId:c.id}))},_=null===(n=(0,y.Fqz)().data)||void 0===n||null===(r=n.currentUser)||void 0===r?void 0:r.id,O=C(a.useState(""),2),T=O[0],I=O[1],A=C(a.useState(!1),2),P=A[0],N=A[1],R=a.useRef(null),z=C(a.useState(null),2),B=z[0],D=z[1],U=(0,k.Z)(),L=(0,w.Z)(),X=L.ref,M=L.update,F=C((0,x.Z)({"@":function(){var e,t=(e=i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=U.filter((function(e){return e.id!==_})),t&&(r=t.toLowerCase(),n=n.filter((function(e){return e.username.toLowerCase().startsWith(r)}))),e.abrupt("return",n.slice(0,5).map((function(e){return{icon:(0,o.tZ)(b.Z,{url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})));case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){j(o,r,i,a,c,"next",e)}function c(e){j(o,r,i,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()}),2),G=F[0].suggestions,W=F[1],H=(0,f.Kb)({items:(null===G||void 0===G?void 0:G.results)||[],defaultHighlightedIndex:0,isOpen:Boolean(null===G||void 0===G?void 0:G.results.length),onSelectedItemChange:function(e){var t=e.selectedItem;if(G&&t){var n=G.applySuggestion({targetValue:T,suggestionValue:t.value}),r=n.fullValue,i=n.cursorIndex;I(r),setTimeout((function(){R.current&&(R.current.setSelectionRange(i,i),R.current.focus(),M())}))}}}),V=H.isOpen,K=H.getInputProps,$=H.getMenuProps,q=H.getItemProps,Y=H.highlightedIndex,Q=H.getComboboxProps;a.useEffect((function(){var e="threads/drafts/".concat(c.id),t=s.Z.get(e,"string");t&&I(t);var n=R.current;return function(){if(n){var t=n.value;0!==t.length?s.Z.set(e,t):s.Z.remove(e)}}}),[]),a.useEffect((function(){setTimeout((function(){R.current&&R.current.focus()}))}),[R]);var J=(0,g.Z)(c).filter((function(e){return e.id!==_})),ee="Add a comment";return 1===J.length?ee="Reply to @".concat(J[0].username):J.length>1&&(ee="Reply"),c.isResolved&&(ee="Reply to unresolve this thread"),u&&(ee=u),(0,o.BX)("div",{className:"jsx-bfbb8b62e7b10f1d",children:[(0,o.BX)("div",E({},Q(),{className:"jsx-bfbb8b62e7b10f1d input-group",children:[(0,o.tZ)("textarea",E({},K({autoFocus:!0,placeholder:ee,value:T,onCompositionStart:function(){return N(!0)},onCompositionEnd:function(){return N(!1)},onChange:function(e){var t=e.target.value,n=B||h()();B||D(n),I(t),p({messageId:n,message:t})},onKeyDown:function(e){e.stopPropagation(),V||(e.nativeEvent.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||P||(e.preventDefault(),S()))},rows:1,ref:function(e){R.current=e,t&&"object"===typeof t&&(t.current=e),W(e),X(e)}}),{className:"jsx-bfbb8b62e7b10f1d "+(d()("inputbox",{hasContent:T.length>0})||"")})),(0,o.tZ)("button",{onClick:S,className:"jsx-bfbb8b62e7b10f1d "+(d()("send-button",{isValid:T.length>0})||""),children:(0,o.tZ)(m.Z,{size:12})})]})),(0,o.tZ)("div",E({},$({}),{className:"jsx-bfbb8b62e7b10f1d",children:V&&(0,o.tZ)("div",{className:"jsx-bfbb8b62e7b10f1d mention-suggestions-container",children:G.results.map((function(e,t){return(0,a.createElement)("div",E({},q({item:e,index:t}),{key:e.value,className:"jsx-bfbb8b62e7b10f1d "+(d()("mention-suggestion",{selected:Y===t})||""),children:[e.icon,(0,o.tZ)("div",{className:"jsx-bfbb8b62e7b10f1d",children:e.value})]}))}))})})),(0,o.tZ)(l(),{id:"bfbb8b62e7b10f1d",children:'.input-group.jsx-bfbb8b62e7b10f1d{display:grid;grid-template-columns:1fr -webkit-min-content;grid-template-columns:1fr min-content;grid-gap:10px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start}.inputbox.jsx-bfbb8b62e7b10f1d{background:var(--background-higher);color:var(--foreground-default);border:none;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);padding:var(--space-8);outline:none;resize:none;font-family:"IBM Plex Sans",sans-serif;font-size:var(--font-size-default);line-height:16px;overflow-y:auto;max-height:-webkit-calc(var(--font-size-default)*18);max-height:-moz-calc(var(--font-size-default)*18);max-height:calc(var(--font-size-default)*18)}.inputbox.jsx-bfbb8b62e7b10f1d::-webkit-input-placeholder{white-space:pre}.inputbox.jsx-bfbb8b62e7b10f1d:-moz-placeholder{white-space:pre}.inputbox.jsx-bfbb8b62e7b10f1d::-moz-placeholder{white-space:pre}.inputbox.jsx-bfbb8b62e7b10f1d:-ms-input-placeholder{white-space:pre}.inputbox.jsx-bfbb8b62e7b10f1d::-ms-input-placeholder{white-space:pre}.inputbox.jsx-bfbb8b62e7b10f1d::placeholder{white-space:pre}.inputbox.hasContent.jsx-bfbb8b62e7b10f1d{-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.send-button.jsx-bfbb8b62e7b10f1d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;width:24px;height:24px;background:var(--background-highest);color:var(--foreground-dimmest);border:none;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%}.send-button.jsx-bfbb8b62e7b10f1d:focus{outline:none}.send-button.isValid.jsx-bfbb8b62e7b10f1d{background:var(--accent-primary-default);color:var(--white);cursor:pointer}.send-button.isValid.jsx-bfbb8b62e7b10f1d:hover{background:var(--accent-primary-default)}.send-button.isValid.jsx-bfbb8b62e7b10f1d:active{background:var(--accent-primary-default)}.mention-suggestions-container.jsx-bfbb8b62e7b10f1d{padding-top:1em;display:grid;grid-row-gap:var(--space-4);overflow:hidden}.mention-suggestion.jsx-bfbb8b62e7b10f1d{display:grid;grid-template-columns:-webkit-min-content -webkit-max-content;grid-template-columns:min-content max-content;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;grid-column-gap:var(--space-8);padding:var(--space-8)0;cursor:pointer;color:var(--foreground-default)}.mention-suggestion.selected.jsx-bfbb8b62e7b10f1d{background-color:var(--background-root)}.mention-suggestion.selected.jsx-bfbb8b62e7b10f1d>*.jsx-bfbb8b62e7b10f1d{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}'})]})}));_.displayName="ThreadInputForwarded",t.Z=_},30887:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(88768),i=n(5560);function o(){var e,t=(0,i.Z)(),n=(0,r.OEU)({variables:{replId:t}}).data;if("Repl"!==(null===n||void 0===n?void 0:n.repl.__typename))return[];var o=[];(null===(e=n.repl.owner)||void 0===e?void 0:e.username)&&"User"===n.repl.owner.__typename&&o.push(n.repl.owner);var a=!0,c=!1,l=void 0;try{for(var s,u=n.repl.permissions[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d,f=s.value;(null===(d=f.user)||void 0===d?void 0:d.username)&&o.push(f.user)}}catch(p){c=!0,l=p}finally{try{a||null==u.return||u.return()}finally{if(c)throw l}}return o}},48493:function(e,t,n){n.r(t),n.d(t,{Component:function(){return m},createDotReplitEditOps:function(){return h},useReadFile:function(){return p}});var r=n(35944),i=n(67294),o=n(85486),a=n(32646),c=n(78135),l=n(80209),s=n(21644);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){var n=f(i.useState(null),2),r=n[0],o=n[1];return i.useEffect((function(){var n=!1;return e.readFile(t).then((function(e){n||o(e)})),function(){n=!0}}),[e,t]),r}function h(e,t,n,r){var i=[];return r?(i.push((0,s.xz)("interpreter")),i.push((0,s.xz)("entrypoint")),i.push((0,s.KQ)(e)),n?i.push((0,s.D3)(n)):i.push((0,s.xz)("compile"))):(i.push((0,s.xz)("run")),i.push((0,s.If)(t))),i}var m=function(){var e=(0,c.I0)(),t=(0,a.Z)(),n=function(e){return function(t,n){var r=n().workspace[e].layout;t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}({wid:e,type:"UPDATE_LAYOUT"},o.Od(r,"config")))}};return(0,r.tZ)(l.Z,{closeConfigPane:function(){return e(n(t))},useReadFile:p})}},77998:function(e,t,n){n.d(t,{CU:function(){return F},D6:function(){return k},Di:function(){return X},GE:function(){return G},Hl:function(){return z},JE:function(){return L},LO:function(){return P},M7:function(){return N},N2:function(){return B},Pz:function(){return V},TE:function(){return _},Ud:function(){return I},VF:function(){return S},bb:function(){return W},cF:function(){return T},cM:function(){return R},he:function(){return E},i7:function(){return j},jW:function(){return A},k6:function(){return Z},kT:function(){return O},sh:function(){return D},th:function(){return U},xY:function(){return M},y6:function(){return H},zq:function(){return C}});var r=n(80357),o=n(91861);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){if(Array.isArray(e))return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}function d(e,t){return c(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||p(e,t)||s()}function f(e){return c(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e,i)||s()}function p(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}var h='[ "git remote get-url origin" ]',m="git symbolic-ref HEAD --short",b="git log -0 2>/dev/null && ".concat(m," || echo 'HEAD'");function v(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return["bash","-c",t.join("&&")]}function g(e){return"if ! (( $(busybox ps -o comm | grep git) )) ; then rm -rf .git/index.lock; fi ; ".concat(e)}function y(e){var t=e.remote,n=void 0===t?"":t,r=e.remoteToken;if(!r)return n;var i=d(n.match(/(https:\/\/)(.*)/)||["","",""],3),o=i[1],a=i[2];return"".concat(o).concat(r||"",":x-oauth-basic@").concat(a)}function x(e){return null!==new RegExp(/(^|\n)fatal: Authentication failed/g).exec(e)||null!==new RegExp(/(^|\n)fatal: unable to access/g).exec(e)||null!==new RegExp(/(^|\n)fatal: repository.*not found/g).exec(e)||null!==new RegExp(/(^|\n)fatal: could not read Username/g).exec(e)||null!==new RegExp(/(^|\n)fatal: Could not read from remote repository/g).exec(e)}function w(e){var t=e.split(/ /g);if("1"===t[0]){var n=t[1],i=t.slice(8).join(" "),o=function(e){var t=e.startsWith(".")?e[1]:e[0],n=!e.startsWith(".");switch(t){case"M":case"T":return{changeMode:r.pD.MODIFIED,isStaged:n};case"D":return{changeMode:r.pD.DELETED,isStaged:n};case"A":return{changeMode:r.pD.UNTRACKED,isStaged:n};default:throw new Error("Unknown change type: ".concat(e))}}(n);return{change:o.changeMode,targetPath:i,origPath:i,isStaged:o.isStaged}}if("2"===t[0]){var a=d(t.slice(9).join(" ").split("\t"),2),c=a[0],l=a[1];return{change:r.pD.MOVED,targetPath:c,origPath:l,isStaged:!0}}if("?"===t[0]){var s=t.slice(1).join(" ");return{change:r.pD.UNTRACKED,targetPath:s,origPath:null,isStaged:!1}}if("u"===t[0]){var u=t[2];return{change:r.pD.MODIFIED,targetPath:u,origPath:u,isStaged:!1}}throw new Error("Unrecognized git status entry: ".concat(e))}var k={format:function(e,t){return v('[ ! -d ".git" ]',"git init","git checkout -b main","git config core.fileMode false",'git config user.name "'.concat(t.username||"Replit user",'"'),'git config user.email "<>"',"touch .git/branches/.keep","touch .git/info/.keep","touch .git/objects/.keep","touch .git/refs/.keep")}},Z={format:function(e,t){return["git","rev-list","--left-right","--count","".concat(t,"...origin/").concat(t)]},parse:function(e,t){if(t.startsWith("fatal"))return u({},e,{commitsAhead:null,commitsBehind:null});var n=d(t.split(/\s+/),2),r=n[0],i=n[1];return u({},e,{commitsAhead:parseInt(r)||0,commitsBehind:parseInt(i)||0})}},j={format:function(e){return["git","status","--branch","--porcelain=v2"]},parse:function(e,t){if(t.startsWith("fatal"))return e;if(t.includes("index file corrupt")||t.includes("error: index file"))return u({},e,{badState:r.$U.IndexFilesCorrupted});if(""===t.trim())return u({},e,{changedFiles:[]});var n=t.split("\n").filter((function(e){return""!==e.trim()})),i=e.branch,o=e.defaultBranch,a=!0,c=[],l=!0,s=!1,f=void 0;try{for(var p,h=n[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var m=p.value;if(m.startsWith("#")){var b=d(m.split(/\s+/),3),v=(b[0],b[1]),g=b[2];switch(v){case"branch.head":i=g;break;case"branch.oid":a=!g.includes("(initial)")}}else c.push(w(m))}}catch(y){s=!0,f=y}finally{try{l||null==h.return||h.return()}finally{if(s)throw f}}return a||(o=i,i=""),u({},e,{branch:i,defaultBranch:o,changedFiles:c})}},S={format:function(e){var t=y(e);return v("git push ".concat(t," $(").concat(m,")"))},parse:function(e,t){return x(t)?u({},e,{authError:r.l4.PUSH}):e}},E={format:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=y(e);return v("git fetch ".concat(n,t?" --progress --deepen=10":" +refs/heads/*:refs/remotes/origin/* --progress --depth=10"))},parse:function(e,t){return x(t)?u({},e,{authError:r.l4.FETCH}):e}},C={format:function(e){return 0===e.commits.length?["echo true"]:v(h,"git merge-base origin/$(".concat(m,") $(").concat(m,")"))},parse:function(e,t){return u({},e,{hasMergeBaseWithFetchedRemote:Boolean(t.length)})}},_={format:function(){return v("git fetch origin --progress")},parse:function(e,t){return x(t)?u({},e,{authError:r.l4.FETCH}):e}},O={format:function(e){if(0===e.commits.length)return["true"];var t=["git merge-tree $(git merge-base origin/$(".concat(m,") $(").concat(m,")) origin/$(").concat(m,") $(").concat(m,")"),"grep '^changed in both'","wc -l"].join(" | ");return v(h,t)},parse:function(e,t){return u({},e,{hasConflictsWithFetchedRemote:0!==e.commits.length&&!isNaN(+t.trim())&&"0"!==t.trim()})}},T={format:function(e){return v("git reset --hard origin/$(".concat(m,")"))}},I={format:function(e){var t=y(e);return["git push ".concat(t," $(").concat(m,") --force")]}},A={format:function(){return v(h,"git merge origin/$(".concat(m,")"))},parse:function(e,t){return null!==new RegExp(/(^|\n)error: Your local changes to the following files would be overwritten by merge/g).exec(t)?u({},e,{hasConflictsWithFetchedRemote:!0}):e}},P={format:function(e){return["git","remote","get-url","origin"]},parse:function(e,t){return t.includes("No such remote")||t.startsWith("fatal")?u({},e,{remote:""}):u({},e,{remote:t.trim()})}},N={format:function(e,t){return e.remote?v("git remote remove origin; git remote add origin ".concat(t)):v("git remote add origin ".concat(t))}},R={format:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r="HEAD";t&&e.commits.length>0&&(r=e.commits[e.commits.length-1].hash);var i=["%D","%H","%an","%ae","%aI","%cn","%ce","%cI","%P","%B"];return["git","log","--pretty=".concat(i.join("%x00"),"%x00%x00"),"-".concat(n+1),r,"--"]},parse:function(e,t){if(t.startsWith("fatal"))return u({},e,{commits:[]});if(t.startsWith("error: index file"))return u({},e,{badState:r.$U.IndexFilesCorrupted});var n=t.split("\0\0\n").filter((function(e){return""!==e})).map((function(e){return e.split("\0")})),i=!!n[0][0];n.map((function(e){return e.shift()}));var o=!1;0===e.commits.length||i||e.commits[e.commits.length-1].hash!==n[0][0]||(o=!0,n.shift());var a=o?e.commits:[];return u({},e,{commits:a=a.concat(n.map((function(e){var t=f(e),n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],c=t[5],l=t[6];return{hash:n,parentHash:t[7],message:t.slice(8).join("\n"),authorName:r,authorEmail:i,authorDate:new Date(o.trim()),committerName:a,committerEmail:c,committerDate:new Date(l.trim())}})))})}},z={format:function(){return v(g("git add -A"))},parse:function(e,t){if(t.startsWith("fatal"))return u({},e,{hasConflictsWithFetchedRemote:!0});var n=e.changedFiles.map((function(e){return u({},e,{isStaged:!0})}));return u({},e,{changedFiles:n})}},B={format:function(e,t){return v("git add ".concat(t," && echo done: ").concat(t))},parse:function(e,t){if(!t.startsWith("fatal")){var n=t.split(" ")[1].trim(),r=e.changedFiles.map((function(e){return e.targetPath===n?u({},e,{isStaged:!0}):e}));return u({},e,{changedFiles:r})}return e}},D={format:function(e,t,n){return v("git restore ".concat(n?"--staged":""," ").concat(t," && echo done: ").concat(t))},parse:function(e,t){if(!t.startsWith("fatal")){var n=t.split(" ")[1].trim();return u({},e,{changedFiles:e.changedFiles.map((function(e){return e.targetPath===n?u({},e,{isStaged:!1}):e}))})}return e}},U={format:function(e,t,n){var r;r=e.gitHubName?e.gitHubName:n.fullName||n.username;var i=e.gitHubEmail||"<>",o='-c user.name="'.concat(r,'" -c user.email="').concat(i,'"'),a=t.replace(/'/g,"'\"'\"'");return v(g("git ".concat(o," commit -m '").concat(a,"'")))}},L={format:function(e,t){return e.branches.includes(t)?["git","checkout",t,"--"]:["git","checkout","-b",t,"--"]}},X={format:function(e){var t=y(e);return v("git remote show ".concat(t," | grep 'HEAD branch'"))},parse:function(e,t){var n=d(t.split(":"),2);n[0];return u({},e,{defaultBranch:n[1].trim()})}},M={format:function(e){return v("git checkout ".concat(e.defaultBranch))}},F={format:function(e,t){return v("git revert ".concat(t,"..$(").concat(b,") --no-commit"))}},G={format:function(e){return v(g("git reset $(".concat(b,") --")))}},W={format:function(e){return v("git rev-parse --is-inside-work-tree")},parse:function(e,t){return u({},e,{isInitialized:t.startsWith("true")})}},H={format:function(e){return v("git add -A","git reset --hard $(".concat(b,") --"))}},V={format:function(e){return["git","branch","-a","--no-color"]},parse:function(e,t){if(t.startsWith("fatal"))return e;var n=t.split("\n").filter((function(e){return!!e.trim()})).map((function(e){return e.startsWith("* ")?e.replace(/^\*\s+/,""):e})).map((function(e){return e.trim()})).map(o.iF);return u({},e,{branches:Array.from(new Set(n))})}}},74818:function(e,t,n){n.r(t),n.d(t,{Component:function(){return $t},receiver:function(){return ye},reducer:function(){return ke}});var r=n(35944),i=n(79547),o=n.n(i),a=n(67294),c=n(88768),l=n(78135),s=n(94184),u=n.n(s),d=n(40425);var f=n(7411),p=n(28593),h=n(34051),m=n.n(h),b=n(77998),v=n(80357),g=n(54098),y=n.n(g),x=n(91861);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Z(o,r,i,a,c,"next",e)}function c(e){Z(o,r,i,a,c,"throw",e)}a(void 0)}))}}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function C(e,t,n){return(C=E()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&P(i,n.prototype),i}).apply(null,arguments)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_(e,t,n[t])}))}return e}function A(e,t){return!t||"object"!==R(t)&&"function"!==typeof t?k(e):t}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function z(e){var t="function"===typeof Map?new Map:void 0;return z=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return C(e,arguments,O(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),P(r,e)},z(e)}function B(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var i=O(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return A(this,n)}}var D="https://api.github.com",U=function(e){T(n,e);var t=B(n);function n(){var e;return S(this,n),(e=t.call(this)).message="GitHub Auth Error",e}return n}(z(Error)),L=function(e){T(n,e);var t=B(n);function n(){var e;return S(this,n),(e=t.call(this)).message="GitHub Repo Already Exists",Error.captureStackTrace&&Error.captureStackTrace(k(e),n),e.name="GitHubRepoAlreadyExistsError",e}return n}(z(Error));function X(e,t){return M.apply(this,arguments)}function M(){return(M=j(m().mark((function e(t,n){var r,i,o,a,c,l;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N((0,x.JE)(n),2),i=r[0],o=r[1],a={cache:"no-store"},t&&(a.headers={Authorization:"Bearer ".concat(t)}),e.next=5,y()("".concat(D,"/repos/").concat(i,"/").concat(o),a);case 5:return c=e.sent,e.next=8,W(c);case 8:return l=e.sent,e.abrupt("return",I({},l));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return G.apply(this,arguments)}function G(){return(G=j(m().mark((function e(t){var n,r,i,o,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.token,r=t.owner,i=t.ownerType,o=t.repoData,n){e.next=3;break}throw new Error("Unable to create repository");case 3:if("User"!==i){e.next=10;break}return e.next=7,y()("".concat(D,"/user/repos"),{method:"POST",headers:{Authorization:"Bearer ".concat(n)},body:JSON.stringify(o)});case 7:a=e.sent,e.next=13;break;case 10:return e.next=12,y()("".concat(D,"/orgs/").concat(r,"/repos"),{method:"POST",headers:{Authorization:"Bearer ".concat(n),Accept:"application/vnd.github.nebula-preview+json"},body:JSON.stringify(o)});case 12:a=e.sent;case 13:return e.abrupt("return",W(a));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return H.apply(this,arguments)}function H(){return(H=j(m().mark((function e(t){var n,r,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:return e.next=4,t.json();case 4:n=e.sent,r=new Error("Bad GitHub Response"),e.t0=t.status,e.next=401===e.t0||404===e.t0?9:422===e.t0?11:14;break;case 9:return r=new U,e.abrupt("break",14);case 11:return(null===n||void 0===n||null===(i=n.errors)||void 0===i?void 0:i.length)>0&&n.errors[0].message.startsWith("name already exists")&&(r=new L),e.abrupt("break",14);case 14:throw r;case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=n(87152),K=n(56834),$=n(78411);function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function Q(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Y(o,r,i,a,c,"next",e)}function c(e){Y(o,r,i,a,c,"throw",e)}a(void 0)}))}}function J(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(){return te.apply(this,arguments)}function te(){return(te=Q(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V.l){e.next=2;break}throw new Error("Expected apollo");case 2:return e.next=4,V.l.query({query:c.dJQ});case 4:if(null===(t=e.sent.data)||void 0===t?void 0:t.currentUser){e.next=7;break}throw new Error("Expected current user");case 7:return e.abrupt("return",t.currentUser);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e){var t=e.cmd,n=e.args,r=void 0===n?[]:n,i=e.wid,o=e.pud,a=t.format,c=t.parse;return function(){var e=Q(m().mark((function e(n,l){var s,u,d,p,h,b;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=(0,f.Z)(l(),i,o,"git"),u=s.gitState,d=s.execer,p=s.isExecInProgress,h=s.execQueue,d){e.next=3;break}throw new Error("Expected execer to be registered");case 3:if(p){e.next=9;break}if(n({type:"SEND_GIT_EXEC_COMMAND",wid:i,pud:o}),b=$.Z.get(d)){e.next=8;break}throw new Error("Expected exec handle to contain exec service");case 8:b.request({args:a.apply(void 0,[u].concat(J(r)))});case 9:if(0!==h.length&&!p){e.next=11;break}return e.abrupt("return",new Promise((function(e,a){n({type:"QUEUE_GIT_EXEC",cmd:t,args:r,parser:void 0!==c?c:function(e){return e},callback:e,wid:i,pud:o})})));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function re(e){var t=e.history,n=void 0!==t&&t,r=e.write,i=void 0!==r&&r,o=e.persist,a=void 0!==o&&o,c=e.prefer,l=void 0===c?null:c,s=e.wid,u=e.pud;return function(){var e=Q(m().mark((function e(t,r){var o,c,d,p,h,g,y,x,w,k,Z,j,S,E;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e,n){return t(ne({cmd:e,wid:s,pud:u,args:n}))},e.next=4,o(b.bb);case 4:if(c=(0,f.Z)(r(),s,u,"git"),d=c.gitState,p=d.isInitialized,h=d.remote,p){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,o(b.GE);case 9:return e.next=11,o(b.LO);case 11:if(!i||!h){e.next=40;break}if(null!==l){e.next=15;break}return e.next=15,o(b.kT);case 15:if(!(0,f.Z)(r(),s,u,"git").gitState.hasConflictsWithFetchedRemote&&null===l){e.next=34;break}if("remote"!==l){e.next=24;break}return e.next=20,o(b.cF);case 20:return e.next=22,o(b.VF);case 22:e.next=32;break;case 24:if("repl"!==l){e.next=31;break}return e.next=27,o(b.Ud);case 27:return e.next=29,o(b.VF);case 29:e.next=32;break;case 31:case 32:e.next=38;break;case 34:return e.next=36,o(b.jW);case 36:return e.next=38,o(b.VF);case 38:e.next=43;break;case 40:if(!n||!h){e.next=43;break}return e.next=43,o(b.jW);case 43:if(!(i||n||a)){e.next=53;break}return g=r().services.fs,t({type:"SET_GIT_LOADING_STATE",wid:s,isLoading:!0}),e.next=48,g.persist();case 48:if(e.sent.success){e.next=52;break}return e.next=52,g.persist();case 52:t({type:"SET_GIT_LOADING_STATE",wid:s,isLoading:!1});case 53:return y=(0,f.Z)(r(),s,u,"git"),x=y.gitState,w=x.remote,k=!1,w&&(Z=new Promise((function(e){setTimeout((function(){k=!0,e()}),3e4)})),j=function(){var e=Q(m().mark((function e(t){var n,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.deepen,!k){e.next=3;break}return e.abrupt("return",Promise.reject());case 3:return e.next=5,o(b.he,[n]);case 5:return e.next=7,o(b.cM);case 7:return e.next=9,o(b.zq);case 9:if(i=(0,f.Z)(r(),s,u,"git"),i.gitState.hasMergeBaseWithFetchedRemote){e.next=13;break}return e.next=13,j({deepen:!0});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Promise.race([j({deepen:!1}),Z]).then((function(){var e=(0,f.Z)(r(),s,u,"git").gitState,n=e.hasMergeBaseWithFetchedRemote,i=e.badState,o=e.remote;n||t({type:"UPDATE_GIT_STATE",updates:{badState:i===v.$U.None&&o?v.$U.NoMergeBase:i},wid:s,pud:u})}))),o(b.Pz),o(b.cM),e.next=60,o(b.i7);case 60:return e.next=62,o(b.Hl);case 62:S=(0,f.Z)(r(),s,u,"git"),E=S.gitState.branch,o(b.k6,[E]);case 64:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function ie(e){var t=e.wid,n=e.pud,r=e.remote;return function(){var e=Q(m().mark((function e(i,o){var a,c,l,s,u,d,p,h,v,g;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,r){return i(ne({cmd:e,args:r,wid:t,pud:n}))},e.next=4,i({type:"START_GIT_CLONE",wid:t});case 4:return c=!!r.match(/^https?:\/\/github\.com/i),l=!!r.match(/^https?:\/\/api\.glitch\.com/i),e.next=8,ee();case 8:if(s=e.sent,c)try{(null===(u=s.gitHubInfo)||void 0===u?void 0:u.accessToken)&&(v=s.gitHubInfo,i({type:"UPDATE_GIT_STATE",updates:{remoteToken:v.accessToken,gitHubName:null===(d=v.userInfo)||void 0===d?void 0:d.name,gitHubEmail:null===(p=v.userInfo)||void 0===p?void 0:p.email,gitHubAvatarUrl:null===(h=v.userInfo)||void 0===h?void 0:h.avatarUrl,installations:v.installations},wid:t,pud:n}))}catch(m){}return e.next=12,a(b.D6,[s]);case 12:return e.next=14,a(b.M7,[r]);case 14:return e.next=16,a(b.LO);case 16:return e.next=18,i({type:"START_CLONE_PROGRESS",wid:t,pud:n});case 18:return e.next=20,a(l?b.TE:b.he);case 20:return e.next=22,a(b.Di);case 22:return e.next=24,a(b.xY);case 24:return e.next=26,i({type:"END_CLONE_PROGRESS",wid:t,pud:n});case 26:if(l){e.next=31;break}return e.next=29,i(re({wid:t,pud:n,history:!0}));case 29:e.next=35;break;case 31:return e.next=33,a(b.i7);case 33:return e.next=35,new Promise((function(e){return setTimeout(e,1e3)}));case 35:(g=function(){var e=(0,f.Z)(o(),t,n,"git"),r=e.execQueue,a=e.isExecInProgress;0!==r.length||a?setTimeout(g,1e3):i({type:"END_GIT_CLONE",wid:t})})();case 37:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function oe(e,t){return function(){var n=Q(m().mark((function n(r){var i,o;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=function(n,i){return r(ne({cmd:n,args:i,wid:e,pud:t}))},n.next=4,ee();case 4:return o=n.sent,n.next=7,i(b.Hl);case 7:return n.next=9,i(b.th,["Initial commit",o]);case 9:return n.next=11,r(re({wid:e,pud:t,write:!0}));case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}function ae(e){var t=e.wid,n=e.pud;return function(){var e=Q(m().mark((function e(r,i){var o,a,c,l,s,u,d,p,h;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(ne({cmd:b.LO,wid:t,pud:n}));case 2:if(o=(0,f.Z)(i(),t,n,"git"),a=o.gitState,c=a.remote,l=a.remoteToken,s=!1,!c||!l){e.next=19;break}return e.prev=5,e.next=8,X(l,c);case 8:return u=e.sent,d=u.permissions,p=u.id,h=u.owner,s=d&&d.push,e.next=15,r({type:"UPDATE_GIT_STATE",pud:n,wid:t,updates:{repoId:p,ownerId:h.id}});case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(5);case 19:r({type:"GIT_REMOTE_CHECKED",wid:t,canPush:s,remote:c});case 20:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(t,n){return e.apply(this,arguments)}}()}var ce,le=n(42723);!function(e){e.CHANNEL_OPENED="CHANNEL_OPENED",e.OUTPUT_RECEIVED="OUTPUT_RECEIVED",e.STATE_CHANGED="STATE_CHANGED"}(ce||(ce={}));var se=n(75944),ue=n(50055);function de(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function fe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){de(o,r,i,a,c,"next",e)}function c(e){de(o,r,i,a,c,"throw",e)}a(void 0)}))}}function pe(e){var t=e.container,n=(0,se.ZP)(),r=null;function i(){return o.apply(this,arguments)}function o(){return(o=fe(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt("return",r);case 2:return e.abrupt("return",new Promise((function(e){n.once(ce.CHANNEL_OPENED,(function(t){e(t)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var a="";return t.openChannel({service:"exec"},(function(e){var t=e.error,i=e.channel;if(!t){if(!i)throw new Error("Expected channel");var o=!1;return i.onCommand((function(e){if(null!=e.output)a+=e.output,n.emit(ce.OUTPUT_RECEIVED,e.output);else if(null!=e.state){if(!o)return void(o=!0);n.emit(ce.STATE_CHANGED,{state:e.state,outputBuffer:a}),e.state===ue.api.State.Stopped&&(a="")}})),r=i,n.emit(ce.CHANNEL_OPENED,i),function(){r=null}}})),{request:function(){var e=fe(m().mark((function e(t){var n,r,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.env,r=t.args,e.next=3,i();case 3:return o=e.sent,e.abrupt("return",o.request({exec:{env:n,args:r,blocking:!0}}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onOutput:function(e){return n.on(ce.OUTPUT_RECEIVED,e),function(){n.off(ce.OUTPUT_RECEIVED,e)}},onStateChanged:function(e){return n.on(ce.STATE_CHANGED,e),function(){n.off(ce.STATE_CHANGED,e)}},getStatus:function(){return r?r.status:"closed"}}}var he=n(27754);function me(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function be(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){me(o,r,i,a,c,"next",e)}function c(e){me(o,r,i,a,c,"throw",e)}a(void 0)}))}}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ve(e,t,n[t])}))}return e}function ye(e,t,n){switch(n.type){case"WORKSPACE_MOUNTED":return function(){var n=be(m().mark((function n(r,i){var o,a,c;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=function(e){return c.apply(this,arguments)},c=function(){return(c=be(m().mark((function n(a){var c,l,s,u;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a===he.e.CONNECTED){n.next=2;break}return n.abrupt("return");case 2:if(c=(0,f.Z)(i(),e,t,"git"),l=c.gitState,(s=pe({container:o})).onOutput((function(n){(0,f.Z)(i(),e,t,"git").shouldDisplayCloneLogs&&r((0,le.yY)({wid:e,message:n,type:"interp",raw:!1}))})),s.onStateChanged((function(n){var o=n.state,a=n.outputBuffer,c=(0,f.Z)(i(),e,t,"git").execQueue;o===ue.api.State.Stopped&&0!==c.length&&r({type:"EXIT_GIT_EXEC_COMMAND",output:a,wid:e})})),r({type:"REGISTER_EXECER_SERVICE_HANDLE",execer:$.Z.getHandle(s),wid:e,pud:t}),l.remoteToken){n.next=10;break}return n.next=10,r(ae({wid:e,pud:t}));case 10:if(u=l.remote){n.next=13;break}return n.abrupt("return");case 13:return n.next=15,r(ne({cmd:b.bb,wid:e,pud:t}));case 15:(0,f.Z)(i(),e,t,"git").gitState.isInitialized||(r((0,le.yY)({wid:e,message:"cloning into ".concat(u,"...\n"),type:"interp",raw:!1})),(0,K.j)(K.U3.VERSION_CONTROL_FEATURE_USED,{action:"cloned"}),r(ie({remote:u,wid:e,pud:t})));case 17:case"end":return n.stop()}}),n)})))).apply(this,arguments)},(o=i().services.container).getConnectionState()===he.e.CONNECTED?a(he.e.CONNECTED):o.onConnectionStateChanged(a);case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();case"FILE_CLEAN":return function(n,r){var i=(0,f.Z)(r(),e,t,"git"),o=i.gitState,a=i.hasOpened;o.isInitialized&&a&&n(ne({cmd:b.i7,wid:e,pud:t}))};case"EXIT_GIT_EXEC_COMMAND":return function(){var r=be(m().mark((function r(i,o){var a,c,l,s,u,d;return m().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=(0,f.Z)(o(),e,t,"git"),c=a.execQueue[0],l=$.Z.safeGet(c.parser),s=$.Z.safeGet(c.callback),r.next=6,i({type:"DEQUEUE_GIT_EXEC",wid:e,pud:t});case 6:return r.next=8,i({type:"UPDATE_GIT_STATE",updates:ge({},l(a.gitState,n.output)),wid:e,pud:t});case 8:s(),(u=(0,f.Z)(o(),e,t,"git")).execQueue.length>0&&(d=u.execQueue[0],i(ne({cmd:d.cmd,args:d.args,wid:e,pud:t})));case 11:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}();case"START_GIT_CLONE":return function(){var t=be(m().mark((function t(n){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"LOCK_WORKSPACE",showSpinner:!0,reason:"Cloning",wid:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();case"END_GIT_CLONE":return function(){var n=be(m().mark((function n(r){return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"UNLOCK_WORKSPACE",wid:e}),n.next=3,r(ae({wid:e,pud:t}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();case"GITHUB_REPOSITORY_CREATED":case"CHECK_GIT_REMOTE":return function(){var n=be(m().mark((function n(r){return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r(ae({wid:e,pud:t}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();default:return null}}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){xe(e,t,n[t])}))}return e}var ke=function(e,t){switch(t.type){case"@@INIT":return{gitState:{isInitialized:!1,hasConflictsWithFetchedRemote:!1,hasMergeBaseWithFetchedRemote:!0,authError:v.l4.NONE,badState:v.$U.None,remote:t.initialState.gitRemoteUrl||"",repoId:null,branch:"",defaultBranch:"main",branches:[],installations:[],changedFiles:[],commits:[],commitsAhead:null,commitsBehind:null,remoteToken:null,gitHubName:null,ownerId:null,gitHubAvatarUrl:null,gitHubEmail:null},hasOpened:!1,isSidebarVisible:!1,isCloneInProgress:!1,shouldDisplayCloneLogs:!1,isExecInProgress:!1,isLoading:!0,execQueue:[],execer:null};case"REGISTER_EXECER_SERVICE_HANDLE":return we({},e,{execer:t.execer});case"SEND_GIT_EXEC_COMMAND":return we({},e,{isExecInProgress:!0,isLoading:!0});case"EXIT_GIT_EXEC_COMMAND":return we({},e,{isExecInProgress:!1});case"QUEUE_GIT_EXEC":var n=$.Z.getHandle(t.parser),r=$.Z.getHandle(t.callback);return we({},e,{execQueue:e.execQueue.concat({cmd:t.cmd,args:t.args,parser:n,callback:r})});case"DEQUEUE_GIT_EXEC":return we({},e,{execQueue:e.execQueue.slice(1)});case"START_GIT_CLONE":return we({},e,{isCloneInProgress:!0});case"START_CLONE_PROGRESS":return we({},e,{shouldDisplayCloneLogs:!0});case"END_CLONE_PROGRESS":return we({},e,{shouldDisplayCloneLogs:!1});case"END_GIT_CLONE":return we({},e,{isCloneInProgress:!1});case"SET_GIT_LOADING_STATE":return we({},e,{isLoading:t.isLoading});case"UPDATE_GIT_STATE":return we({},e,{gitState:we({},e.gitState,t.updates),isLoading:(t.updates.badState!==v.$U.None||t.updates.authError!==v.l4.NONE)&&(e.execQueue.length>0||e.isCloneInProgress)});case"SET_GIT_SIDEBAR_VISIBILITY":return we({},e,{isSidebarVisible:t.isSidebarVisible,hasOpened:!0});default:return e}},Ze=n(51281),je=n(93577),Se=n(63059),Ee=n(45193),Ce=n(3204);function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oe(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _e(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ie=function(e,t){var n=(0,x.mJ)(t),r="";switch(e){case v.l4.PUSH:r="push to ".concat(n);break;case v.l4.FETCH:r="fetch from ".concat(n);break;case v.l4.CLONE:r="clone from ".concat(n);break;case v.l4.GITHUB_CREATE:case v.l4.GITHUB_GET_INFO:default:r="create new repositories"}return"Please grant Replit permission to access GitHub on your behalf and confirm that you have permission to ".concat(r,".")},Ae=function(e){var t=e.repoId,n=e.ownerId,i=e.wid,c=e.pud,s=e.authError,u=e.onAuth,d=(0,l.I0)(),p=(0,l.v9)((function(e){return(0,f.Z)(e,i,c,"git")})).gitState,h="Connect to GitHub";p.remote&&(h="Unable to connect to this GitHub repository");var b,g=(0,Se.v)({suggestedRepoId:t,ownerId:n,onAuth:(b=m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(!1),u(),d({type:"UPDATE_GIT_STATE",updates:{authError:v.l4.NONE,badState:v.$U.None},wid:i,pud:c});case 3:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var i=b.apply(e,t);function o(e){Oe(i,n,r,o,a,"next",e)}function a(e){Oe(i,n,r,o,a,"throw",e)}o(void 0)}))})}),y=Te(a.useState(!0),2),x=y[0],w=y[1];return(0,r.BX)(Ee.Z,{onRequestClose:function(){w(!1),s!==v.l4.FETCH?d({type:"UPDATE_GIT_STATE",updates:{authError:v.l4.NONE},wid:i,pud:c}):d({type:"UPDATE_GIT_STATE",updates:{badState:v.$U.AuthFetchError},wid:i,pud:c})},isOpen:x,children:[(0,r.tZ)(o(),{id:"feda4518d52b4edb",children:".auth-modal.jsx-feda4518d52b4edb{padding:20px 24px;background:var(--background-default);color:var(--foreground-default)}h2.jsx-feda4518d52b4edb{margin-bottom:16px}p.jsx-feda4518d52b4edb{line-height:1.4em}.button-group.jsx-feda4518d52b4edb{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.button-group.jsx-feda4518d52b4edb .sentence-case{text-transform:none}"}),(0,r.BX)("div",{className:"jsx-feda4518d52b4edb auth-modal",children:[(0,r.tZ)("h2",{className:"jsx-feda4518d52b4edb",children:h}),(0,r.BX)("div",{css:[Ce.l0.colWithGap(8),Ce.l0.pb(24)],className:"jsx-feda4518d52b4edb",children:[(0,r.tZ)("p",{className:"jsx-feda4518d52b4edb",children:Ie(s,p.remote)}),(0,r.BX)("p",{className:"jsx-feda4518d52b4edb",children:["See"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/github-auth-errors",target:"_blank",rel:"noreferrer",className:"jsx-feda4518d52b4edb",children:"our docs"})," ","for more help with GitHub authentication errors."]})]}),(0,r.tZ)("div",{className:"jsx-feda4518d52b4edb button-group",children:(0,r.tZ)(Ze.Z,{color:"primary",filled:!0,style:{marginLeft:8},onClick:g,children:"Connect Replit to your GitHub Account"})})]})]})},Pe=n(43129),Ne=n(20795),Re=n(70192),ze=n(33108),Be=n(87139),De=n(57541);function Ue(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}var Le=function(e){return e.trim().split(" ").join("-")},Xe=function(e){var t=e.isOpen,n=e.isCreatingBranch,i=e.onClose,a=e.currentBranch,c=e.branches,l=e.successHandler;if(!t)return null;var s=(0,ze.Y)("",(function(e){return e?c.includes(Le(e))?{message:"* this branch name already exists"}:void 0:{message:"* branch names cannot be blank"}})),u=function(){var e,t=(e=m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!s.validate()){e.next=4;break}return e.abrupt("return");case 4:l(Le(s.value));case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Ue(o,r,i,a,c,"next",e)}function c(e){Ue(o,r,i,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,r.tZ)(Ee.Z,{onRequestClose:i,isOpen:!0,children:(0,r.BX)("div",{className:"jsx-4a406bdd6aef82a6 container",children:[(0,r.BX)("form",{onSubmit:u,autoComplete:"off",className:"jsx-4a406bdd6aef82a6",children:[(0,r.tZ)("h1",{className:"jsx-4a406bdd6aef82a6",children:"Create a new branch"}),(0,r.tZ)("h2",{className:"jsx-4a406bdd6aef82a6",children:n?"Creating your new branch":"This branch will be created from ".concat(a)}),(0,r.tZ)("div",{className:"jsx-4a406bdd6aef82a6 creation-error",children:s.error&&s.error.message}),(0,r.tZ)("div",{className:"jsx-4a406bdd6aef82a6 section",children:(0,r.tZ)(De.ZP,{value:s.value,type:"text",autoFocus:!0,name:"branch-name",autoComplete:"off",onChange:function(e){s.setValue(e.currentTarget.value)},placeholder:"name your branch (required)",onFocus:function(e){return e.target.select()}})}),(0,r.tZ)(Ze.Z,{type:"submit","data-testid":"git-confirm-github-repo",color:"primary",filled:!0,children:n?(0,r.BX)("span",{className:"jsx-4a406bdd6aef82a6",children:["creating",(0,r.tZ)(Be.Z,{style:{fontSize:"20px",padding:"1px"}})]}):"create"})]}),(0,r.tZ)(o(),{id:"4a406bdd6aef82a6",children:".container.jsx-4a406bdd6aef82a6{font-size:1rem;width:510px;padding:60px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;height:100%;color:var(--foreground-default)}.container.jsx-4a406bdd6aef82a6 form.jsx-4a406bdd6aef82a6{width:90%}.container.jsx-4a406bdd6aef82a6 h1.jsx-4a406bdd6aef82a6{font-size:23px;margin-bottom:10px;font-weight:normal}.container.jsx-4a406bdd6aef82a6 h2.jsx-4a406bdd6aef82a6{color:var(--foreground-dimmer);font-size:16px;margin-bottom:15px;font-weight:normal}.creation-error.jsx-4a406bdd6aef82a6{min-height:16px;margin:10px;color:var(--accent-negative-default)}.section.jsx-4a406bdd6aef82a6{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding-bottom:25px;width:100%}"})]})})},Me=n(58458),Fe=n(94590),Ge=function(e){var t,n,i=e.checkoutBranch,c=e.gitState,l=e.isLoading,s=e.wid,d=e.isNarrow,f=(0,a.useState)(!1),p=f[0],h=f[1];return(0,a.useEffect)((function(){!l&&p&&h(!1)}),[l]),(0,r.BX)("div",{className:"jsx-3cae6247addd4daa "+(u()("branch-info",{disabled:1===c.branches.length})||""),children:[(0,r.tZ)(o(),{id:"3cae6247addd4daa",children:".branch-info.jsx-3cae6247addd4daa{display:grid;grid-template-columns:1fr auto;grid-column-gap:var(--space-8);margin-top:10px}.branch-info-label.jsx-3cae6247addd4daa{color:var(--foreground-default);font-size:14px;margin-bottom:3px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.branch-info-selectWrapper.jsx-3cae6247addd4daa{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;position:relative}.branch-info-select.jsx-3cae6247addd4daa{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}"}),(0,r.tZ)("div",{className:"jsx-3cae6247addd4daa branch-info-selectWrapper",children:(0,r.BX)("div",{className:"jsx-3cae6247addd4daa branch-info-select",children:[(0,r.tZ)(Re.Z,{}),(0,r.tZ)(Pe.ZP,{clearable:!1,className:"branchSelect-".concat(window.btoa(s).substr(0,10)),disabled:1===c.branches.length,onChange:function(e){e&&!Array.isArray(e)&&e.value!==c.branch&&e.value&&i(e.value)},openOnFocus:!0,options:(t=c.branches,n=c.defaultBranch,0===t.length?[]:t.sort((function(e){return e===n?-1:0})).map((function(e){return{value:e,label:e}}))),optionRenderer:function(e){return function(e){var t=e.branch,n=e.defaultBranch,i=e.currentBranch,a=t.value===i;return(0,r.BX)("div",{className:"jsx-2976945c1b5be69e "+(u()("branchOption",{selected:a})||""),children:[(0,r.tZ)(o(),{id:"2976945c1b5be69e",children:".branchOption.jsx-2976945c1b5be69e{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:100%}.branchOption-checkmark.jsx-2976945c1b5be69e{height:12px;width:12px;margin-right:3px}.branchOption-name.jsx-2976945c1b5be69e{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:baseline;-webkit-align-items:baseline;-moz-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:100%}.branchOption-defaultLabel.jsx-2976945c1b5be69e{font-size:10px;color:var(--foreground-default);margin:0 2px}.selected.jsx-2976945c1b5be69e .branchOption-defaultLabel.jsx-2976945c1b5be69e{color:var(--foreground-dimmer)}"}),a&&(0,r.tZ)("div",{className:"jsx-2976945c1b5be69e branchOption-checkmark",children:(0,r.tZ)(Ne.Checkmark,{})}),(0,r.BX)("div",{className:"jsx-2976945c1b5be69e branchOption-name",children:[(0,r.tZ)("label",{className:"jsx-2976945c1b5be69e",children:t.label}),t.label===n&&(0,r.tZ)("label",{className:"jsx-2976945c1b5be69e branchOption-defaultLabel",children:"default"})]})]})}({branch:e,currentBranch:c.branch,defaultBranch:c.defaultBranch})},placeholder:""!==c.branch||c.commits.length?"loading...":c.defaultBranch,searchable:!0,value:c.branch,valueRenderer:function(){return(0,r.BX)(a.Fragment,{children:[!d&&(0,r.tZ)(Me.Z,{foreground:2,children:"branch: "}),c.branch]})}})]})}),(0,r.tZ)(Ze.Z,{Icon:Fe.Z,onClick:function(){return h(!0)},title:"Create new branch"}),(0,r.tZ)(Xe,{branches:c.branches,currentBranch:c.branch,isCreatingBranch:p&&l,isOpen:p,onClose:function(){return h(!1)},successHandler:function(e){i(e)}})]})},We=n(8996),He=n(79635),Ve=function(e){var t=e.branch,n=e.commitsBehind,i=e.isLoading,a=function(){return i?(0,r.tZ)("p",{children:"checking latest changes... "}):t?null===n?null:n&&1===n?(0,r.BX)("p",{children:[(0,r.tZ)("span",{className:"emphasized",children:"1"})," commit behind ",t]}):n&&n>1?(0,r.BX)("p",{children:[(0,r.tZ)("span",{className:"emphasized",children:n})," commits behind"," ",t]}):(0,r.BX)("p",{children:["up to date with ",t]}):(0,r.tZ)("p",{children:"could not find a default branch - try adding some commits!"})};return(0,r.BX)("div",{className:"jsx-8a02681411c89cd3 remote-progress",children:[(0,r.tZ)(o(),{id:"8a02681411c89cd3",children:".remote-progress.jsx-8a02681411c89cd3{-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;color:var(--foreground-dimmer);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-8);max-width:100%}.remote-progress p{overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.remote-progress .emphasized{color:var(--foreground-default)}"}),(0,r.tZ)(a,{className:"jsx-8a02681411c89cd3"})]})},Ke=function(e){var t=e.gitState,n=e.isLoading,i=e.pull,a=e.setGithubCreationModalOpen,c=""!==t.remote;return(0,r.BX)("div",{className:"jsx-3e819f2ec0f4cd35 remote-info",children:[(0,r.tZ)(o(),{id:"3e819f2ec0f4cd35",children:".remote-info.jsx-3e819f2ec0f4cd35{display:grid;grid-gap:var(--space-16);margin:6px 0}.remote-wrapper-info.jsx-3e819f2ec0f4cd35{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:100%}.remote-wrapper-infolink.jsx-3e819f2ec0f4cd35{padding:0 3px;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.icon-wrapper.jsx-3e819f2ec0f4cd35{height:var(--space-16);width:var(--space-16);margin-right:var(--space-4);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:inherit}.remote-info-progress.jsx-3e819f2ec0f4cd35{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}"}),c?(0,r.BX)("div",{className:"jsx-3e819f2ec0f4cd35 remote-wrapper-info",children:[(0,r.tZ)("div",{title:"Repository origin",className:"jsx-3e819f2ec0f4cd35 icon-wrapper",children:(0,r.tZ)(Ne.GitHub,{})}),(0,r.tZ)("a",{href:t.remote,target:"_blank",rel:"nofererer noopener",className:"jsx-3e819f2ec0f4cd35 remote-wrapper-infolink",children:(0,x.mJ)(t.remote)})]}):(0,r.tZ)(He.ZP,{placement:"right",tooltip:"You don't have any commits yet. Commit some files before connecting to a GitHub repository.",isDisabled:Boolean(t.commits.length),children:(0,r.tZ)(Ze.Z,{fullWidth:!0,onClick:function(){a(!0)},disabled:!t.commits.length,children:(0,r.BX)(We.Ug,{spacing:1,align:"center",children:[(0,r.tZ)("div",{className:"jsx-3e819f2ec0f4cd35 icon-wrapper",children:(0,r.tZ)(Ne.GitHub,{})}),(0,r.tZ)("div",{className:"jsx-3e819f2ec0f4cd35",children:"Connect to Github"})]})})}),c&&(0,r.BX)("div",{className:"jsx-3e819f2ec0f4cd35 remote-info-progress",children:[(0,r.tZ)(Ve,{branch:t.branch,commitsBehind:t.commitsBehind,isLoading:n}),!!t.commitsBehind&&t.commitsBehind>0&&(0,r.tZ)(Ze.Z,{color:"orange",onClick:i,children:"Pull \u2190"})]})]})},$e=n(33539),qe=n(92704),Ye=n(21130),Qe=n(48938),Je=n(92432),et=n(22307),tt=n(54929),nt=n(67938);function rt(e){var t=e.gitCommit,n=e.gitPush,i=e.gitAddAll,o=e.hasRemote,a=e.hasChangedFiles,c=e.hasStagedFiles,l=[];return c||l.push("commit"),o||l.push("push"),(0,r.BX)(tt.Z,{css:[Ce.l0.flex.row,Ce.l0.rowWithGap(2),Ce.l0.pr(2)],children:[(0,r.tZ)(qe.ZP,{css:[Ce.l0.flex.growAndShrink(1)],disabled:!a,iconRight:(0,r.tZ)(Je.Z,{}),onClick:function(){i(),t(),n()},text:"Commit All"+(o?" & Push":""),outlined:!0}),(0,r.BX)(et.ZE,{onAction:function(e){switch(e){case"commit":t();break;case"push":n()}},disabledKeys:l,children:[(0,r.tZ)(et.ck,{children:(0,r.BX)(He.ZP,{tooltip:"You must stage some files using the plus icon beside a file before you can commit",placement:"right",isDisabled:c,children:[(0,r.tZ)(nt.x,{variant:"subheadDefault",css:c?[]:[Ce.l0.color.foregroundDimmest],children:"Commit"}),(0,r.tZ)(nt.x,{variant:"text",css:c?[]:[Ce.l0.color.foregroundDimmest],children:"Locally save your staged changes"})]})},"commit"),(0,r.tZ)(et.ck,{children:(0,r.BX)(He.ZP,{tooltip:"Push is only available if you have a GitHub repository connected",placement:"right",isDisabled:o,children:[(0,r.tZ)(nt.x,{variant:"subheadDefault",css:o?[]:[Ce.l0.color.foregroundDimmest],children:"Push"}),(0,r.tZ)(nt.x,{variant:"text",css:o?[]:[Ce.l0.color.foregroundDimmest],children:"Update remote repo with newest commits"})]})},"push")]})]})}function it(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}var ot=function(e){switch(e.change){case v.pD.UNTRACKED:return"new";case v.pD.MODIFIED:return"modified";case v.pD.MOVED:return"renamed";case v.pD.DELETED:return"deleted";default:return""}},at=function(e){var t,n,i=e.file,a=e.active,c=e.handleChangedFileClick,l=e.isStaged,s=e.gitRestore,u=e.gitAdd,d=!1;if(i.targetPath.endsWith("/")){d=!0;var f=i.targetPath.substr(0,i.targetPath.length-1).split("/");t=f[f.length-1]+"/",n=f.slice(0,f.length-1).join("/")}else{var p=i.targetPath.split("/");t=p[p.length-1],n=p.slice(0,p.length-1).join("/")}var h,b=ot(i),g=b.substr(0,1).toUpperCase(),y=["changedFileItem"];return a&&y.push("active"),d||i.change===v.pD.DELETED||y.push("showable"),(0,r.BX)("div",{onClick:function(){d||i.change===v.pD.DELETED||c(i.targetPath)},className:"jsx-efd6f34434320e10 "+(y.join(" ")||""),children:[(0,r.tZ)(o(),{id:"efd6f34434320e10",children:".changedFileItem.jsx-efd6f34434320e10{-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;border:1px solid var(--background-highest);-webkit-border-radius:2.5px;-moz-border-radius:2.5px;border-radius:2.5px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:5px;padding:6px 12px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%}.showable.changedFileItem.jsx-efd6f34434320e10{cursor:pointer}.changedFileItem.jsx-efd6f34434320e10:hover{background-color:var(--accent-primary-dimmer)}.changedFileItem.jsx-efd6f34434320e10:hover .changeModeBadge.jsx-efd6f34434320e10 .letter.jsx-efd6f34434320e10{display:none}.changedFileItem.jsx-efd6f34434320e10:hover .changeModeBadge.jsx-efd6f34434320e10 .word.jsx-efd6f34434320e10{display:block}.changedFileItem.active.jsx-efd6f34434320e10{background-color:var(--accent-primary-default);border-color:transparent;color:var(--white)}.showable.jsx-efd6f34434320e10 .fileName.jsx-efd6f34434320e10:hover{text-decoration:underline}.fileName.jsx-efd6f34434320e10,.dirs.jsx-efd6f34434320e10,.changeMode.jsx-efd6f34434320e10{display:block;white-space:nowrap}.changeMode.jsx-efd6f34434320e10{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.fileName.jsx-efd6f34434320e10{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:8px;max-width:60%;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.changeMode.jsx-efd6f34434320e10{margin-left:8px}.dirs.jsx-efd6f34434320e10{-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1;margin-right:auto;opacity:.7;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.changeModeBadge.jsx-efd6f34434320e10{-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;background:#999;-webkit-border-radius:2.5px;-moz-border-radius:2.5px;border-radius:2.5px;color:#fff;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;height:24px;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;min-width:24px;padding:2px 4px;-webkit-transition:width.1s;-moz-transition:width.1s;-o-transition:width.1s;transition:width.1s}.changeModeBadge.jsx-efd6f34434320e10 .word.jsx-efd6f34434320e10{display:none}.changedFileItem.active.jsx-efd6f34434320e10 .changeModeBadge.jsx-efd6f34434320e10,.changedFileItem.active.jsx-efd6f34434320e10:hover .new.jsx-efd6f34434320e10,.changedFileItem.active.jsx-efd6f34434320e10:hover .modified.jsx-efd6f34434320e10,.changedFileItem.active.jsx-efd6f34434320e10:hover .deleted.jsx-efd6f34434320e10{background-color:var(--background-default);color:var(--foreground-dimmer);border:transparent}.new.jsx-efd6f34434320e10{background:var(--accent-positive-dimmest);border:1px solid var(--accent-positive-default);color:var(--accent-positive-default)}.modified.jsx-efd6f34434320e10{background:var(--accent-orange-dimmest);border:1px solid var(--accent-orange-default);color:var(--accent-orange-default)}.deleted.jsx-efd6f34434320e10{background:var(--accent-negative-dimmest);border:1px solid var(--accent-negative-default);color:var(--accent-negative-stronger)}.deleted.jsx-efd6f34434320e10:hover{cursor:not-allowed}.changedFileItem.jsx-efd6f34434320e10:hover .new.jsx-efd6f34434320e10{background:var(--accent-positive-default);color:var(--foreground-default)}.changedFileItem.jsx-efd6f34434320e10:hover .modified.jsx-efd6f34434320e10{background:var(--accent-orange-default);color:var(--foreground-default)}.changedFileItem.jsx-efd6f34434320e10:hover .deleted.jsx-efd6f34434320e10{background:var(--accent-negative-default);color:var(--foreground-default)}.renamed.jsx-efd6f34434320e10{background:var(--accent-primary-dimmer)}"}),(0,r.tZ)(Ye.Z,{css:[Ce.l0.mr(4)],alt:l?"Unstage":"Stage",onClick:(h=m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l?s(i.targetPath,!0):u(i.targetPath);case 1:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var i=h.apply(e,t);function o(e){it(i,n,r,o,a,"next",e)}function a(e){it(i,n,r,o,a,"throw",e)}o(void 0)}))}),children:l?(0,r.tZ)(Qe.Z,{}):(0,r.tZ)(Fe.Z,{})}),(0,r.tZ)("div",{title:t,className:"jsx-efd6f34434320e10 fileName",children:t}),(0,r.tZ)("div",{title:n,className:"jsx-efd6f34434320e10 dirs",children:n}),(0,r.tZ)("div",{className:"jsx-efd6f34434320e10 changeMode",children:(0,r.BX)("div",{className:"jsx-efd6f34434320e10 "+("changeModeBadge "+b||0),children:[(0,r.tZ)("div",{className:"jsx-efd6f34434320e10 letter",children:g}),(0,r.tZ)("div",{className:"jsx-efd6f34434320e10 word",children:g+b.substr(1)})]})})]})},ct=function(e){var t=e.changedFiles,n="changed files or folders";if(1===t.length){var i=ot(t[0])||"changed";n="".concat(i," file or folder")}return(0,r.BX)("div",{className:"jsx-4750d0de294a2262 changed-file-message",children:[(0,r.tZ)(o(),{id:"4750d0de294a2262",children:".changed-file-message.jsx-4750d0de294a2262{}.emphasized.jsx-4750d0de294a2262{color:var(--foreground-default)}p.jsx-4750d0de294a2262{color:var(--foreground-dimmer);margin-bottom:10px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}"}),(0,r.BX)("p",{className:"jsx-4750d0de294a2262",children:[(0,r.BX)("span",{className:"jsx-4750d0de294a2262 emphasized",children:[" ",t.length," "]})," ",n]})]})},lt=function(e){var t=e.branch,n=e.commitsAhead,i="commit ahead of";return n&&n>1&&(i="commits ahead of"),(0,r.BX)("div",{className:"jsx-1ae57524add93237",children:[(0,r.tZ)(o(),{id:"1ae57524add93237",children:".emphasized.jsx-1ae57524add93237{color:var(--foreground-default)}p.jsx-1ae57524add93237{color:var(--foreground-dimmer);margin-bottom:15px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}"}),(0,r.BX)("p",{className:"jsx-1ae57524add93237",children:[(0,r.BX)("span",{className:"jsx-1ae57524add93237 emphasized",children:[" ",n," "]})," ",i," ",t]})]})},st=function(e){var t=e.disabled,n=e.onClick;return(0,r.tZ)(qe.ZP,{disabled:t,onClick:n,text:"Push",iconRight:(0,r.tZ)(Je.Z,{}),outlined:!0})},ut=function(e){var t=e.activeFile,n=e.branch,i=e.changedFiles,c=e.commits,l=e.commitsAhead,s=e.commitsBehind,u=e.handleChangedFileClick,d=e.isLoading,f=e.remote,p=e.gitCommit,h=e.gitPush,m=e.gitAddAll,b=e.gitRestore,v=e.gitAdd,g=function(){var e=x.trim();""!==e?(p(e),w(""),j(!1)):j(!0)},y=(0,a.useState)(""),x=y[0],w=y[1],k=(0,a.useState)(!1),Z=k[0],j=k[1],S=(0,a.useState)(!1),E=S[0],C=S[1],_=i;E||(_=i.slice(0,3));var O=i.length>0,T=null!==l,I=null!==s,A=!!l&&l>0,P=!!s&&s>0,N=i.filter((function(e){return e.isStaged}));return d&&!O?(0,r.BX)("div",{className:"jsx-f93e0621dea501b8 loading",children:[(0,r.tZ)(o(),{id:"f93e0621dea501b8",children:".loading.jsx-f93e0621dea501b8{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:30px;overflow:hidden;margin-right:12px;background:var(--background-root);-webkit-border-radius:2.5px;-moz-border-radius:2.5px;border-radius:2.5px;width:100%}.loading-content.jsx-f93e0621dea501b8{-webkit-border-radius:2.5px;-moz-border-radius:2.5px;border-radius:2.5px;color:var(--foreground-default);padding:10px 8px;text-align:center;width:100%}"}),(0,r.BX)("div",{className:"jsx-f93e0621dea501b8 loading-content",children:["loading",(0,r.tZ)(Be.Z,{style:{fontSize:"20px",padding:"1px"}})]})]}):O||A||P||!T||!I?(0,r.BX)("div",{className:"jsx-d1cbbbffbe3fb18a editableGitCommitItem",children:[(0,r.tZ)(o(),{id:"d1cbbbffbe3fb18a",children:".editableGitCommitItem.jsx-d1cbbbffbe3fb18a{background:var(--background-default);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;color:var(--foreground-default);margin-top:30px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%}.commit-author-box.jsx-d1cbbbffbe3fb18a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-bottom:15px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-bottom:16px}textarea.jsx-d1cbbbffbe3fb18a{background-color:transparent;border:1px solid var(--foreground-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;color:var(--foreground-default);font-size:1em;margin-bottom:10px;padding:8px 12px;overflow-y:auto;width:100%;resize:vertical;max-height:100px}textarea.jsx-d1cbbbffbe3fb18a:hover{background-color:var(--background-root)}textarea.jsx-d1cbbbffbe3fb18a:focus{border-color:var(--accent-primary-default);background-color:var(--background-root);outline:0 none}textarea.jsx-d1cbbbffbe3fb18a::-webkit-input-placeholder{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}textarea.jsx-d1cbbbffbe3fb18a:-moz-placeholder{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}textarea.jsx-d1cbbbffbe3fb18a::-moz-placeholder{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}textarea.jsx-d1cbbbffbe3fb18a:-ms-input-placeholder{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}textarea.jsx-d1cbbbffbe3fb18a::-ms-input-placeholder{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}textarea.jsx-d1cbbbffbe3fb18a::placeholder{overflow:hidden;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis}textarea[disabled].jsx-d1cbbbffbe3fb18a{border-color:var(--foreground-dimmest);cursor:not-allowed;opacity:.5}textarea.invalid.jsx-d1cbbbffbe3fb18a{border:1px solid var(--accent-negative-default)}.ahead-overlay.jsx-d1cbbbffbe3fb18a{margin-bottom:15px;position:relative}.changed-files-list.jsx-d1cbbbffbe3fb18a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.show-all-button.jsx-d1cbbbffbe3fb18a{border:none;background-color:var(--background-default);color:var(--foreground-default);cursor:pointer;font-size:12px;outline:0 none;text-decoration:underline}"}),A&&T&&(0,r.tZ)(lt,{branch:n,commitsAhead:l}),!O&&(A||!T)&&(0,r.tZ)("div",{className:"jsx-d1cbbbffbe3fb18a ahead-overlay",children:(0,r.tZ)(He.ZP,{placement:"right",tooltip:"You do not have a remote repository to push to. Connect a remote github repository to push.",isDisabled:Boolean(f),children:(0,r.tZ)(st,{disabled:!f,onClick:h})})}),O&&(0,r.BX)("div",{className:"jsx-d1cbbbffbe3fb18a commit-author-box",children:[(0,r.tZ)("textarea",{required:!0,name:"commitAuthorInput",disabled:0===i.length,placeholder:c.length>0?"What did you change?":"What did you add?",value:x,onChange:function(e){w(e.target.value),j(""===e.target.value)},onKeyDown:function(e){(0,$e.b)(e),"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&g()},className:"jsx-d1cbbbffbe3fb18a "+((Z?"invalid":"")||"")}),(0,r.tZ)(rt,{gitAddAll:m,gitCommit:g,gitPush:h,hasRemote:Boolean(f),hasChangedFiles:i.length>0,hasStagedFiles:N.length>0})]}),(0,r.tZ)(ct,{changedFiles:i}),(0,r.BX)("div",{className:"jsx-d1cbbbffbe3fb18a changed-files-list",children:[_.map((function(e){return(0,r.tZ)(at,{file:e,handleChangedFileClick:u,active:Boolean(t)&&t.endsWith(e.targetPath),isStaged:e.isStaged,gitRestore:b,gitAdd:v},e.targetPath)})),i.length>3&&(0,r.tZ)("button",{onClick:function(){return C(!E)},className:"jsx-d1cbbbffbe3fb18a show-all-button",children:E?"show fewer":"show all"})]})]}):(0,r.BX)("div",{className:"jsx-13b5fc8fc8d38865 no-changes-banner",children:[(0,r.tZ)(o(),{id:"13b5fc8fc8d38865",children:".no-changes-banner.jsx-13b5fc8fc8d38865{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:30px;overflow:hidden;background:var(--background-root);-webkit-border-radius:2.5px;-moz-border-radius:2.5px;border-radius:2.5px}.small.jsx-13b5fc8fc8d38865{color:var(--foreground-dimmer);padding:15px;text-align:center;width:100%;font-size:14px}"}),(0,r.tZ)("p",{className:"jsx-13b5fc8fc8d38865 small",children:"Your file changes will appear here."})]})},dt=n(7055),ft=n(30791),pt=function(e){var t=e.children;return(0,r.BX)("div",{"data-testid":"git-commit-item",className:"jsx-f3445e89aaa242b3 commit-item",children:[(0,r.tZ)(o(),{id:"f3445e89aaa242b3",children:'.commit-item.jsx-f3445e89aaa242b3{display:block;position:relative;-webkit-transition:.1s all;-moz-transition:.1s all;-o-transition:.1s all;transition:.1s all}.commit-item.jsx-f3445e89aaa242b3:first-child .git-graph-shape.jsx-f3445e89aaa242b3::before{background:-webkit-linear-gradient(top,transparent,var(--foreground-dimmer)20px,var(--foreground-dimmer)100%);background:-moz-linear-gradient(top,transparent,var(--foreground-dimmer)20px,var(--foreground-dimmer)100%);background:-o-linear-gradient(top,transparent,var(--foreground-dimmer)20px,var(--foreground-dimmer)100%);background:linear-gradient(to bottom,transparent,var(--foreground-dimmer)20px,var(--foreground-dimmer)100%)}.commit-item.jsx-f3445e89aaa242b3:last-child .git-graph-shape.jsx-f3445e89aaa242b3::before{height:20px}.git-graph-shape.jsx-f3445e89aaa242b3{position:absolute;top:0;bottom:0;left:0;background-color:transparent}.git-graph-shape.jsx-f3445e89aaa242b3::before{content:"";display:block;position:absolute;top:0;bottom:0;height:-webkit-calc(100% + 10px);height:-moz-calc(100% + 10px);height:calc(100% + 10px);width:1px;left:6px;background:var(--foreground-dimmer)}.git-graph-shape.jsx-f3445e89aaa242b3::after{content:"";display:block;width:11px;height:11px;border:1px solid var(--foreground-dimmer);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;background-color:var(--background-default);position:absolute;top:20px;left:0;-webkit-transition:.1s all;-moz-transition:.1s all;-o-transition:.1s all;transition:.1s all}.commit-item.jsx-f3445e89aaa242b3:hover .git-graph-shape.jsx-f3445e89aaa242b3::after{background-color:var(--foreground-default);border-color:1px solid var(--foreground-default)}'}),(0,r.tZ)("div",{className:"jsx-f3445e89aaa242b3 git-graph-shape"}),t]})},ht=function(e){var t=e.commit,n=e.handleRevertToCommit,i=e.displayTimeSinceUnix,a=e.gitHubLink,c=e.isLoggedIn;return(0,r.BX)(pt,{children:[(0,r.tZ)(o(),{id:"4be3def555d01168",children:'.wrapper.jsx-4be3def555d01168{border:1px solid var(--foreground-dimmer);-webkit-border-radius:2.5px;-moz-border-radius:2.5px;border-radius:2.5px;padding:10px 8px;margin:0 0 10px 24px;color:var(--foreground-dimmer)}.wrapper.jsx-4be3def555d01168:hover{background-color:var(--background-root);border:1px solid var(--foreground-dimmer);color:var(--foreground-default)}.commit-hash.jsx-4be3def555d01168{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;font-family:"Menlo","Monaco",monospace;margin-bottom:6px;font-size:14px}.author.jsx-4be3def555d01168{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;color:var(--foreground-default)}.author-name.jsx-4be3def555d01168,.author-email.jsx-4be3def555d01168{-webkit-box-flex:0;-webkit-flex-grow:0;-moz-box-flex:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.author-email.jsx-4be3def555d01168{max-width:150px;margin-bottom:6px;font-size:12px;color:var(--foreground-dimmer)}.commit-hash.jsx-4be3def555d01168{color:var(--foreground-dimmer);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;font-size:12px}button.jsx-4be3def555d01168,.github-link.jsx-4be3def555d01168{visibility:hidden}.wrapper.jsx-4be3def555d01168:hover button.jsx-4be3def555d01168,.wrapper.jsx-4be3def555d01168:hover .github-link.jsx-4be3def555d01168{visibility:visible;background:transparent;color:var(--foreground-default)}button.jsx-4be3def555d01168{cursor:pointer;padding:6px;border:1px solid transparent;-webkit-border-radius:2.5px;-moz-border-radius:2.5px;border-radius:2.5px}.github-link.jsx-4be3def555d01168{display:inline-block;height:16px;width:16px;margin-left:6px;background-color:var(--foreground-default)}'}),(0,r.BX)("div",{className:"jsx-4be3def555d01168 wrapper",children:[(0,r.tZ)(mt,{message:t.message}),(0,r.tZ)("div",{className:"jsx-4be3def555d01168 author",children:(0,r.BX)("div",{title:"commit.authorName",className:"jsx-4be3def555d01168 author-name",children:[t.authorName," \u2022"," ",(0,dt.Z)(t.authorDate,i,{addSuffix:!0})]})}),(0,r.tZ)("div",{title:t.authorEmail,className:"jsx-4be3def555d01168 author-email",children:t.authorEmail}),(0,r.BX)("div",{title:t.hash,className:"jsx-4be3def555d01168 commit-hash",children:[t.hash.substr(0,9),null!==a&&(0,r.tZ)("a",{href:a,target:"_blank",rel:"noopener noreferer",title:"see on GitHub",className:"jsx-4be3def555d01168 github-link",children:(0,r.tZ)(Ne.GitHub,{})})]}),c&&(0,r.tZ)(Ze.Z,{filled:!1,border:!1,color:"orange",size:"small",onClick:function(){return n(t)},children:"revert to here"})]})]})},mt=function(e){var t=e.message.split("\n").filter((function(e){return!!e.trim()})).map((function(e){return(0,r.tZ)("p",{children:e.replace(/:[\w\-+]+:/g,(function(e){return ft.$M[e.slice(1,-1)]||e}))},e)})),n=(0,a.useState)(!1),i=n[0],c=n[1];return(0,r.BX)("div",{className:"jsx-1b7183bd6a42b782 commit-message",children:[(0,r.tZ)(o(),{id:"1b7183bd6a42b782",children:".commit-message.jsx-1b7183bd6a42b782{margin-bottom:10px}.commit-message p{color:var(--foreground-default);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;padding:2px}.more-link.jsx-1b7183bd6a42b782{font-size:14px}"}),i?t:t[0],i&&(0,r.tZ)("a",{href:"#",onClick:function(){return c(!1)},className:"jsx-1b7183bd6a42b782 more-link",children:"see less"},"more"),!i&&t.length>1&&(0,r.tZ)("a",{href:"#",onClick:function(){return c(!0)},className:"jsx-1b7183bd6a42b782 more-link",children:"see more"},"more")]})},bt=function(e){var t=e.gitState,n=e.handleRevertToCommit,i=e.fetchMoreCommits,c=e.isLoggedIn,l=t.commits[t.commits.length-1],s=l&&""!==l.parentHash?(0,r.tZ)(pt,{children:(0,r.tZ)(Ze.Z,{onClick:i,style:{margin:"8px 6px 12px 24px"},children:"load more commits"})},"loadmore"):null,u=(0,a.useState)(Date.now()),d=u[0],f=u[1];(0,a.useEffect)((function(){f(Date.now())}),[t.commits]);var p=t.commitsAhead||0;return(0,r.BX)(r.HY,{children:[t.commits.length>0&&(0,r.BX)("h2",{className:"jsx-db561386c1307398",children:[(0,r.tZ)(o(),{id:"db561386c1307398",children:"h2.jsx-db561386c1307398{color:var(--foreground-default);font-size:18px;font-weight:unset;overflow:hidden;margin:30px 0 10px 0;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;position:relative}"}),"Previous Commits"]}),(0,r.BX)("div",{className:"jsx-2305a354cfb82682 commit-list-section",children:[(0,r.tZ)(o(),{id:"2305a354cfb82682",children:".commit-list-section.jsx-2305a354cfb82682{height:100%}.commit-list-wrapper.jsx-2305a354cfb82682{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.commit-list.jsx-2305a354cfb82682{width:100%;margin-top:10px}"}),(0,r.tZ)("div",{className:"jsx-2305a354cfb82682 commit-list-wrapper",children:t.commits.length>0&&(0,r.BX)("ul",{className:"jsx-2305a354cfb82682 commit-list",children:[t.commits.map((function(e,i){return(0,r.tZ)(ht,{handleRevertToCommit:n,commit:e,displayTimeSinceUnix:d,gitHubLink:""!==t.remote&&i>=p?(0,x.cW)(t.remote,e.hash):null,isLoggedIn:c},e.hash)})),s]})})]})]})},vt=n(50658);function gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var xt=function(e){var t=e.checked,n=e.block,i=e.center,a=e.children,c=yt(e,["checked","block","center","children"]);return(0,r.BX)("button",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){gt(e,t,n[t])}))}return e}({},c,{className:"jsx-de8f65ceab8cbe78 "+(u()(c.className,{checked:t,block:n,center:i})||""),children:[(0,r.tZ)("div",{className:"jsx-de8f65ceab8cbe78 radio"}),a?(0,r.tZ)("div",{className:"jsx-de8f65ceab8cbe78 content",children:a}):null,(0,r.tZ)(o(),{id:"de8f65ceab8cbe78",children:"button.jsx-de8f65ceab8cbe78{font-size:inherit;color:inherit;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border:0 none;background-color:transparent;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-transition:background-color.2s;-moz-transition:background-color.2s;-o-transition:background-color.2s;transition:background-color.2s}.block.jsx-de8f65ceab8cbe78{width:100%}.center.jsx-de8f65ceab8cbe78{-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}button.jsx-de8f65ceab8cbe78:focus{outline:none}.radio.jsx-de8f65ceab8cbe78{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;height:12px;width:12px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;background-color:transparent;border:1.5px solid var(--foreground-dimmer)}.checked.jsx-de8f65ceab8cbe78 .radio.jsx-de8f65ceab8cbe78{border:none;background-color:var(--accent-primary-default)}.content.jsx-de8f65ceab8cbe78{margin-left:10px}"})]}))},wt=n(5560);function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zt(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function jt(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function St(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Et=function(e){var t=e.avatarUrl,n=e.login;return(0,r.BX)("div",{className:"jsx-287255a4c55b34bd gitHubInfo",children:[(0,r.tZ)(o(),{id:"287255a4c55b34bd",children:".gitHubInfo.jsx-287255a4c55b34bd{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.gitHubInfo-avatar.jsx-287255a4c55b34bd{height:36px;width:36px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:5px}.gitHubInfo-login.jsx-287255a4c55b34bd{padding:5px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}"}),(0,r.tZ)("img",{src:t,className:"jsx-287255a4c55b34bd gitHubInfo-avatar"}),(0,r.tZ)("div",{className:"jsx-287255a4c55b34bd gitHubInfo-login",children:n})]})},Ct=function(e){var t=e.authToken,n=e.onClose,i=e.pud,s=e.successHandler,u=e.wid,p=(0,wt.Z)(),h=(0,c.Xah)({variables:{replId:p}}),b=h.data;if(h.loading)return null;if("Repl"!==(null===b||void 0===b?void 0:b.repl.__typename))return(0,r.tZ)(Ee.Z,{onRequestClose:n,isOpen:!0,children:(0,r.BX)("div",{className:"jsx-ca5289f01a1d9783 container",children:[(0,r.tZ)("p",{className:"jsx-ca5289f01a1d9783",children:"Something went wrong. Please try again later."}),(0,r.tZ)(o(),{id:"ca5289f01a1d9783",children:".container.jsx-ca5289f01a1d9783{font-size:1rem;width:510px;padding:0 10px;padding-top:40px;padding-bottom:40px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:100%;color:var(--foreground-default)}"})]})});var g=b.repl,y=St(a.useState(!1),2),x=y[0],w=y[1],k=St(a.useState(g.isPrivate),2),Z=k[0],j=k[1],S=St(a.useState(null),2),E=S[0],C=S[1],_=(0,l.I0)(),O=(0,l.v9)((function(e){return(0,f.Z)(e,u,i,"git")})).gitState,T=(0,ze.Y)(g.isRenamed?g.title:"",(function(e){return e&&e.length>100?{message:"* GitHub repository names cannot exceed 100 characters"}:e?void 0:{message:"* Repository name is required"}})),I=(0,ze.Y)((g.description||"").replace(/(\r\n|\n|\r)/gm," "),(function(e){if(e&&e.length>140)return{message:"* GitHub descriptions cannot exceed 140 characters"}})),A=function(){var e,n=(e=m().mark((function e(n){var r,o,a,c;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(null),n.preventDefault(),w(!0),r=T.validate(),o=I.validate(),!r&&!o){e.next=8;break}return w(!1),e.abrupt("return");case 8:return a={name:T.value,description:I.value,private:Z},e.prev=9,e.next=12,F({token:t,repoData:a,owner:B.value,ownerType:B.type});case 12:c=e.sent,s(c.html_url),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),jt(e.t0,U)?_({type:"UPDATE_GIT_STATE",wid:u,pud:i,updates:{authError:v.l4.GITHUB_CREATE}}):jt(e.t0,L)?C("Another GitHub repository with the same name already exists"):(vt.$e((function(t){t.setTag("source","git"),vt.Tb(e.t0)})),C("Unable to create a GitHub repository"));case 19:w(!1);case 20:case"end":return e.stop()}}),e,null,[[9,16]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Zt(o,r,i,a,c,"next",e)}function c(e){Zt(o,r,i,a,c,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}(),P=!(!T.error&&!I.error),N=O.installations,R=N.find((function(e){return"User"===e.type}))||N[0],z=St(a.useState({value:R.name,label:R.name,avatar:R.avatarUrl,type:R.type}),2),B=z[0],D=z[1],X=N.filter((function(e){return e.name!==B.value})).map((function(e){return{value:e.name,label:e.name,avatar:e.avatarUrl,type:e.type}}));return(0,r.tZ)(Ee.Z,{onRequestClose:n,isOpen:!0,children:(0,r.BX)("div",{className:"jsx-d9943fb2f9db6847 container",children:[(0,r.BX)("form",{onSubmit:A,style:{width:"90%",opacity:x?.6:1},autoComplete:"off",className:"jsx-d9943fb2f9db6847",children:[(0,r.tZ)("div",{className:"jsx-d9943fb2f9db6847 section",children:(0,r.BX)("div",{className:"jsx-d9943fb2f9db6847",children:[(0,r.tZ)(d.Z,{align:"center",level:4,children:"Create a new GitHub repository"}),(0,r.tZ)(Me.Z,{align:"center",foreground:2,children:"You can always edit this information on github"})]})}),(0,r.BX)("div",{className:"jsx-d9943fb2f9db6847 section",children:[(0,r.tZ)(Re.Z,{}),(0,r.tZ)(Pe.ZP,{options:X,optionRenderer:function(e){return(0,r.tZ)(Et,{avatarUrl:e.avatar,login:e.label||""})},disabled:N.length<=1,value:B,valueRenderer:function(e){return(0,r.tZ)(Et,{avatarUrl:e.avatar,login:e.label||""})},onChange:function(e){D(e)},searchable:!1,style:{height:"48px"},clearable:!1}),(0,r.tZ)("span",{className:"jsx-d9943fb2f9db6847 slash",children:" / "}),(0,r.tZ)(De.ZP,{name:"title",autoComplete:"off",placeholder:"repo name (required)",disabled:x,value:T.value,onChange:function(e){T.setValue(e.currentTarget.value),C(null)},onFocus:function(e){return e.target.select()},onBlur:T.handleBlur,validationResults:T.error?[{message:T.error.message,state:"error"}]:void 0})]}),(0,r.tZ)("div",{className:"jsx-d9943fb2f9db6847 section",children:(0,r.tZ)(De.ZP,{name:"description",value:I.value,disabled:x,placeholder:I.value||"Add repo description (optional)",onChange:function(e){I.setValue(e.target.value),C(null)},onBlur:I.handleBlur,validationResults:I.error?[{message:I.error.message,state:"error"}]:void 0})}),(0,r.BX)("div",{className:"jsx-d9943fb2f9db6847 privacy section",children:[(0,r.tZ)("h3",{className:"jsx-d9943fb2f9db6847",children:"GitHub privacy"}),(0,r.BX)("div",{className:"jsx-d9943fb2f9db6847 privacy-radio",children:[(0,r.tZ)(xt,{checked:!Z,type:"button",id:"public",onClick:function(){return j(!1)}}),(0,r.tZ)("div",{className:"jsx-d9943fb2f9db6847 privacy-icon",children:(0,r.tZ)(Ne.GitHubPublic,{})}),(0,r.BX)("div",{className:"jsx-d9943fb2f9db6847 privacy-info",children:[(0,r.tZ)("label",{className:"jsx-d9943fb2f9db6847",children:"Public"}),(0,r.tZ)(Me.Z,{foreground:2,tag:"div",size:"small",children:"Anyone can see this repo, you choose who can commit"})]})]}),(0,r.BX)("div",{className:"jsx-d9943fb2f9db6847 privacy-radio",children:[(0,r.tZ)(xt,{checked:Z,type:"button",id:"private",onClick:function(){return j(!0)}}),(0,r.tZ)("div",{className:"jsx-d9943fb2f9db6847 privacy-icon private",children:(0,r.tZ)(Ne.GitHubPrivate,{})}),(0,r.BX)("div",{className:"jsx-d9943fb2f9db6847 privacy-info",children:[(0,r.tZ)("label",{className:"jsx-d9943fb2f9db6847",children:"Private"}),(0,r.tZ)(Me.Z,{foreground:2,tag:"div",size:"small",children:"you choose who can see and commit to this repo"})]})]})]}),(0,r.tZ)("div",{className:"jsx-d9943fb2f9db6847 create section",children:(0,r.tZ)(Ze.Z,{size:"large",color:"primary",disabled:x||P,type:"submit","data-testid":"git-confirm-github-repo",children:x?"Creating...":"Create GitHub repository"})}),(0,r.tZ)("div",{className:"jsx-d9943fb2f9db6847 creation-error",children:E&&(0,r.BX)("span",{className:"jsx-d9943fb2f9db6847",children:[E,(0,r.tZ)("br",{className:"jsx-d9943fb2f9db6847"}),"Let us know if there is an issue by opening up the sidebar and submitting a ticket via the get help button"]})})]}),(0,r.tZ)(o(),{id:"d9943fb2f9db6847",children:".container.jsx-d9943fb2f9db6847{font-size:1rem;padding:0 10px;padding-top:40px;padding-bottom:40px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:100%;color:var(--foreground-default)}.section.jsx-d9943fb2f9db6847{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding-bottom:25px;width:100%}.section.create.jsx-d9943fb2f9db6847{padding-bottom:0}.section.privacy.jsx-d9943fb2f9db6847{color:var(--foreground-default);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start}.section.privacy.jsx-d9943fb2f9db6847 h3.jsx-d9943fb2f9db6847{margin-bottom:10px;font-weight:normal}.privacy-radio.jsx-d9943fb2f9db6847{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:20px;padding:3px;width:100%}.privacy-icon.jsx-d9943fb2f9db6847{margin-left:10px;width:24px;height:32px}.privacy-icon.jsx-d9943fb2f9db6847{color:var(--foreground-dimmer)}.privacy-icon.private.jsx-d9943fb2f9db6847{color:var(--remove-color-gold-light)}.privacy-info.jsx-d9943fb2f9db6847{margin-left:10px}.Select{width:100%}.slash.jsx-d9943fb2f9db6847{color:var(--foreground-default);margin:5px}.creation-error.jsx-d9943fb2f9db6847{line-height:1.3;padding-top:20px;margin:0 10px;height:40px;color:var(--accent-negative-default)}"})]})})};function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ot(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function Tt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Ot(o,r,i,a,c,"next",e)}function c(e){Ot(o,r,i,a,c,"throw",e)}a(void 0)}))}}function It(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _t(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(e){var t=e.wid,n=e.pud,i=e.gitState,c=(0,l.I0)(),s=function(){c({type:"UPDATE_GIT_STATE",wid:t,pud:n,updates:{hasConflictsWithFetchedRemote:!1}})},u=It(a.useState(null),2),d=u[0],f=u[1],p=It(a.useState(!0),2),h=p[0],m=p[1],b="Confirm",v=["conflictChoices"];return"repl"===d?(v.push("chosen-repl"),b="Confirm keep Replit"):"remote"===d&&(v.push("chosen-remote"),b="Confirm overwrite from GitHub"),h||v.push("invalid"),(0,r.BX)(Ee.Z,{isOpen:!0,onRequestClose:s,children:[(0,r.tZ)(o(),{id:"1c46516bcb7b3a47",children:".resolveConflictModal.jsx-1c46516bcb7b3a47{max-width:600px;padding:20px 24px;background:var(--background-default);color:var(--foreground-default)}h2.jsx-1c46516bcb7b3a47{margin-bottom:16px}p.jsx-1c46516bcb7b3a47{margin-bottom:24px;line-height:1.4em}.conflictChoices.jsx-1c46516bcb7b3a47{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.conflictPreference.jsx-1c46516bcb7b3a47{width:48%;border:1px solid var(--foreground-default);cursor:pointer;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;overflow:hidden;-webkit-transition:-webkit-transform.2s;-moz-transition:-moz-transform.2s;-o-transition:-o-transform.2s;transition:-webkit-transform.2s;transition:-moz-transform.2s;transition:-o-transform.2s;transition:transform.2s}.conflictPreference.jsx-1c46516bcb7b3a47:hover{-webkit-transform:translate(0,-3px);-moz-transform:translate(0,-3px);-ms-transform:translate(0,-3px);-o-transform:translate(0,-3px);transform:translate(0,-3px)}.conflictPreference.jsx-1c46516bcb7b3a47 .header.jsx-1c46516bcb7b3a47{padding:8px 12px;font-weight:bold;background:var(--background-root)}.conflictPreference.jsx-1c46516bcb7b3a47 .body.jsx-1c46516bcb7b3a47{padding:8px 12px;line-height:1.4em}.chosen-repl.jsx-1c46516bcb7b3a47 .replPreference.jsx-1c46516bcb7b3a47 .header.jsx-1c46516bcb7b3a47,.chosen-remote.jsx-1c46516bcb7b3a47 .remotePreference.jsx-1c46516bcb7b3a47 .header.jsx-1c46516bcb7b3a47{color:var(--background-default);background:var(--foreground-default)}.chosen-repl.jsx-1c46516bcb7b3a47 .remotePreference.jsx-1c46516bcb7b3a47,.chosen-remote.jsx-1c46516bcb7b3a47 .replPreference.jsx-1c46516bcb7b3a47{border-color:var(--foreground-dimmer)}.buttonGroup.jsx-1c46516bcb7b3a47{margin-top:20px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}"}),(0,r.BX)("div",{className:"jsx-1c46516bcb7b3a47 resolveConflictModal",children:[(0,r.tZ)("h2",{className:"jsx-1c46516bcb7b3a47",children:"Conflicting changes"}),(0,r.BX)("p",{className:"jsx-1c46516bcb7b3a47",children:["There are changes from the remote (",(0,r.tZ)("a",{href:i.remote,target:"_blank",rel:"nofererer noopener",className:"jsx-1c46516bcb7b3a47",children:i.remote}),") that have been made since your changes on Replit that conflict with each other. Which version would you like to keep?"]}),(0,r.BX)("div",{className:"jsx-1c46516bcb7b3a47 "+(v.join(" ")||""),children:[(0,r.BX)("div",{onClick:function(){return f("remote")},className:"jsx-1c46516bcb7b3a47 remotePreference conflictPreference",children:[(0,r.tZ)("div",{className:"jsx-1c46516bcb7b3a47 header",children:"Keep version on GitHub"}),(0,r.tZ)("div",{className:"jsx-1c46516bcb7b3a47 body",children:"Permanently delete any changes in your Repl that are not on GitHub."})]}),(0,r.BX)("div",{onClick:function(){return f("repl")},className:"jsx-1c46516bcb7b3a47 replPreference conflictPreference",children:[(0,r.tZ)("div",{className:"jsx-1c46516bcb7b3a47 header",children:"Keep version on Replit"}),(0,r.tZ)("div",{className:"jsx-1c46516bcb7b3a47 body",children:"Permanently delete any changes in your GitHub repository that are not on Replit"})]})]}),(0,r.BX)("div",{className:"jsx-1c46516bcb7b3a47 buttonGroup",children:[(0,r.tZ)(Ze.Z,{style:{marginLeft:"8px"},onClick:s,children:"Cancel"}),(0,r.tZ)(Ze.Z,{color:"negative",style:{marginLeft:"8px"},onClick:function(){null!==d?(c(re({write:!0,prefer:d,wid:t,pud:n})),s()):m(!1)},children:b})]})]})]})}function Pt(e){var t=e.actionDescription,n=e.onConfirm,i=e.onCancel,a={marginLeft:8};return(0,r.BX)("div",{className:"jsx-a6b618bf6ea164ac gitRevertConfirmModal",children:[(0,r.tZ)(o(),{id:"a6b618bf6ea164ac",children:".gitRevertConfirmModal.jsx-a6b618bf6ea164ac{max-width:600px;padding:20px 24px;background:var(--background-default);color:var(--foreground-default)}h2.jsx-a6b618bf6ea164ac{margin-bottom:16px}p.jsx-a6b618bf6ea164ac{margin-bottom:24px;line-height:1.4em}.buttonGroup.jsx-a6b618bf6ea164ac{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}"}),(0,r.tZ)("h2",{className:"jsx-a6b618bf6ea164ac",children:"Overwrite existing changes?"}),(0,r.BX)("p",{className:"jsx-a6b618bf6ea164ac",children:["You have some changes that are not committed yet. ",t," ","will overwrite any un-committed changes. Overwrite and continue?"]}),(0,r.BX)("div",{className:"jsx-a6b618bf6ea164ac buttonGroup",children:[(0,r.tZ)(Ze.Z,{style:a,onClick:i,autoFocus:!0,children:"Cancel"}),(0,r.tZ)(Ze.Z,{color:"negative",style:a,onClick:n,children:"Overwrite and continue"})]})]})}var Nt=function(e){var t=e.wid,n=e.pud,i=e.isLoading,c=e.isNarrow,s=e.currentUser,u=e.refetchUser,d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.history,i=void 0!==r&&r,o=e.write,a=void 0!==o&&o,c=e.persist,l=void 0!==c&&c;h(re({history:i,write:a,persist:l,wid:t,pud:n}))},p=function(e,r){return h(ne({cmd:e,args:r,wid:t,pud:n}))},h=(0,l.I0)(),g=(0,je.Z)(),y=It((0,f.J)(t,n,"git"),1)[0].gitState,x=y.hasConflictsWithFetchedRemote&&(0,r.tZ)(At,{wid:t,pud:n,gitState:y}),w=It(a.useState(null),2),k=w[0],Z=w[1],j=null!==k&&(0,r.tZ)(Ee.Z,{isOpen:!0,onRequestClose:function(){return Z(null)},children:(0,r.tZ)(Pt,{actionDescription:"Reverting to this previous version",onConfirm:Tt(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z(null),p(b.y6),p(b.CU,[k.hash]),d({persist:!0});case 4:case"end":return e.stop()}}),e)}))),onCancel:function(){return Z(null)}})}),S=It(a.useState(null),2),E=S[0],C=S[1],_=null!==E&&(0,r.tZ)(Ee.Z,{isOpen:!0,onRequestClose:function(){return C(null)},children:(0,r.tZ)(Pt,{actionDescription:"Checking out branch ".concat(E),onConfirm:Tt(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(null),p(b.y6),e.next=4,p(b.JE,[E]);case 4:d({persist:!0});case 5:case"end":return e.stop()}}),e)}))),onCancel:function(){return C(null)}})});function O(){return(O=Tt(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,K.j)(K.U3.VERSION_CONTROL_FEATURE_USED,{action:"reverted"}),!(y.changedFiles.length>0)){e.next=4;break}return Z(t),e.abrupt("return");case 4:p(b.CU,[t.hash]),d({persist:!0});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Tt(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==y.branch){e.next=2;break}return e.abrupt("return");case 2:if((0,K.j)(K.U3.VERSION_CONTROL_FEATURE_USED,{action:"checkedOut"}),!(y.changedFiles.length>0&&y.branches.includes(t))){e.next=6;break}return C(t),e.abrupt("return");case 6:return e.next=8,p(b.JE,[t]);case 8:d({persist:!0});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=It(a.useState(!1),2),A=I[0],P=I[1];return(0,r.BX)(r.HY,{children:[s?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Ke,{gitState:y,isLoading:i,pull:function(){(0,K.j)(K.U3.VERSION_CONTROL_FEATURE_USED,{action:"pulled"}),d({history:!0})},setGithubCreationModalOpen:function(){y.remoteToken&&y.installations.length>0?P(!0):h({type:"UPDATE_GIT_STATE",wid:t,pud:n,updates:{authError:v.l4.GITHUB_GET_INFO}})}}),(0,r.tZ)(Ge,{isLoading:i,gitState:y,wid:t,checkoutBranch:function(e){return T.apply(this,arguments)},isNarrow:c}),(0,r.tZ)(ut,{branch:y.branch,changedFiles:y.changedFiles,commits:y.commits,isLoading:i,commitsAhead:y.commitsAhead,commitsBehind:y.commitsBehind,activeFile:g||"",remote:y.remote,handleChangedFileClick:function(e){h({type:"OPEN_FILE",path:e,wid:t})},gitAddAll:function(){p(b.Hl)},gitCommit:function(){var e=Tt(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,K.j)(K.U3.VERSION_CONTROL_FEATURE_USED,{action:"committed"}),e.next=3,p(b.th,[t,s]);case 3:d({persist:!0});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gitPush:function(){d({write:!0})},gitRestore:function(){var e=Tt(m().mark((function e(t,n){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(b.sh,[t,n]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),gitAdd:function(){var e=Tt(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(b.N2,[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]}):(0,r.BX)("div",{className:"jsx-d687cb3bccb0e01e sign-up",children:[(0,r.tZ)("a",{href:"/signup",className:"jsx-d687cb3bccb0e01e",children:" create an account"}),(0,r.tZ)("div",{className:"jsx-d687cb3bccb0e01e",children:"to use version control with Replit!"})]}),(0,r.tZ)(bt,{gitState:y,handleRevertToCommit:function(e){return O.apply(this,arguments)},fetchMoreCommits:function(){y.remote&&p(b.he,[!0]),p(b.cM,[!0])},isLoggedIn:Boolean(s)}),j,_,x,y.authError!==v.l4.NONE&&(y.remote||y.branch)&&(0,r.tZ)(Ae,{wid:t,pud:n,repoId:y.repoId,ownerId:y.ownerId,authError:y.authError,onAuth:u}),A&&(0,r.tZ)(Ct,{authToken:y.remoteToken,onClose:function(){return P(!1)},successHandler:function(e){h(function(e){var t=e.remote,n=e.wid,r=e.pud;return function(){var e=Q(m().mark((function e(i){var o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e,t){return i(ne({cmd:e,args:t,wid:n,pud:r}))},e.next=4,o(b.M7,[t]);case 4:return e.next=6,o(b.LO);case 6:return e.next=8,o(b.VF);case 8:return e.next=10,i({type:"GITHUB_REPOSITORY_CREATED",wid:n,pud:r});case 10:return e.next=12,i(re({wid:n,pud:r,persist:!0}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({wid:t,pud:n,remote:e})),P(!1)},wid:t,pud:n}),(0,r.tZ)(o(),{id:"d687cb3bccb0e01e",children:".sign-up.jsx-d687cb3bccb0e01e{padding:10px;text-align:center}"})]})},Rt=n(55435),zt=n(33398),Bt=function(e){var t=e.onInit,n=e.isLoggedIn;return(0,r.BX)("div",{className:"jsx-1c35961896dd966 git-empty",children:[(0,r.BX)("div",{className:"jsx-1c35961896dd966",children:["Track and rollback changes to your repl."," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/git-with-replit",target:"_blank",rel:"noopener noreferrer",onClick:function(e){e.preventDefault(),window.open(e.target.href,"_blank")},className:"jsx-1c35961896dd966 learn-link",children:"Learn more here"}),(0,r.tZ)("div",{className:"jsx-1c35961896dd966 ctas",children:n?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Ze.Z,{color:"primary",filled:!0,onClick:t,children:"Create a Git Repo"}),(0,r.tZ)(Rt.Z,{activeTab:zt.m.GitHub,children:(0,r.tZ)("a",{className:"jsx-1c35961896dd966",children:"Existing git repository?"})})]}):(0,r.BX)("div",{className:"jsx-1c35961896dd966 sign-up",children:[(0,r.tZ)("a",{href:"/signup",className:"jsx-1c35961896dd966",children:" create an account"})," to use version control with Replit!"]})})]}),(0,r.tZ)("div",{className:"jsx-1c35961896dd966",children:(0,r.tZ)("img",{src:"/public/images/gitart.png",className:"jsx-1c35961896dd966"})}),(0,r.tZ)(o(),{id:"1c35961896dd966",children:".git-empty.jsx-1c35961896dd966{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;height:100%;padding:10px;max-width:250px;margin:0 auto}.learn-link.jsx-1c35961896dd966{color:inherit;text-decoration:underline}.ctas.jsx-1c35961896dd966{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin:40px 0}.ctas.jsx-1c35961896dd966>a.jsx-1c35961896dd966{margin-top:12px;text-align:center}img.jsx-1c35961896dd966{width:100%;max-width:200px}"})]})},Dt=n(25675),Ut=n.n(Dt),Lt=n(27218),Xt=n(30617),Mt=n(3609),Ft=function(e){var t=e.wid,n=e.pud,i=e.badState,o=e.remote,a=(0,Xt.Z)().container,c=(0,l.I0)(),s=function(){switch(i){case v.$U.NoMergeBase:return(0,r.BX)(nt.x,{multiline:!0,children:["We couldn\u2019t find commits in common with that GitHub repository. Try"," ",(0,r.tZ)("a",{href:"/github/"+o,target:"_blank",rel:"noreferrer noopener",children:"importing the repo"})," ","into a new Repl instead."]});case v.$U.AuthFetchError:return(0,r.BX)(nt.x,{multiline:!0,children:["We couldn\u2019t find that repository on GitHub. Try connecting your GitHub account in your"," ",(0,r.tZ)("a",{href:"/account",target:"_blank",rel:"noreferrer noopener",children:"Account Settings"}),"."]});case v.$U.IndexFilesCorrupted:return(0,r.tZ)(nt.x,{multiline:!0,children:"Your Git index files were corrupted. Try resetting your index file to restore your repository."});default:return(0,r.tZ)(nt.x,{multiline:!0,children:"We ran into an error trying to sync your repository."})}},u=function(){c({type:"UPDATE_GIT_STATE",wid:t,pud:n,updates:{remote:"",commitsAhead:0,commitsBehind:0,repoId:null,ownerId:null,badState:v.$U.None,authError:v.l4.NONE}})};return(0,r.BX)(tt.Z,{css:[Ce.l0.p(8),Ce.l0.colWithGap(8)],children:[(0,r.tZ)(nt.x,{variant:"subheadDefault",multiline:!0,children:"There\u2019s something wrong with this repository..."}),(0,r.tZ)(s,{}),i!==v.$U.IndexFilesCorrupted?(0,r.BX)(r.HY,{children:[(0,r.tZ)(nt.x,{multiline:!0,children:"You can also try disconnecting this repository from GitHub and trying again."}),(0,r.tZ)(qe.zx,{colorway:"negative",text:"Disconnect repo",iconLeft:(0,r.tZ)(Lt.Z,{}),css:[Ce.l0.mt(12),Ce.l0.mb(16)],onClick:function(){a.exec("bash","-c","git rev-parse 2>/dev/null && for i in $(git remote); do git remote remove $i; done"),u()}})]}):(0,r.tZ)(qe.zx,{colorway:"negative",text:"Reset index",iconLeft:(0,r.tZ)(Mt.Z,{}),css:[Ce.l0.mt(12),Ce.l0.mb(16)],onClick:function(){a.exec("bash","-c","rm .git/index; git reset HEAD ."),u()}}),(0,r.tZ)(Ut(),{src:"/images/gitart.png",alt:"GitHub integration decoration art.",layout:"responsive",width:1694,height:3543,css:[Ce.l0.maxWidth(200)]})]})},Gt=n(42650),Wt=n(40079),Ht=n(11542);function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $t(e){var t=e.wid,n=e.pud,i=e.style,s=e.dimensions,h=(0,l.I0)(),g=(0,a.useState)(!1),y=g[0],x=g[1],w=(0,Xt.Z)().container,k=Kt((0,f.J)(t,n,"git"),1)[0],Z=k.gitState,j=k.isLoading,S=k.isCloneInProgress,E=(0,c.X27)({notifyOnNetworkStatusChange:!0,onCompleted:function(e){var r,i,o,a,c;if("GitHubInfo"===(null===e||void 0===e||null===(r=e.currentUser)||void 0===r||null===(i=r.gitHubInfo)||void 0===i?void 0:i.__typename)){var l=e.currentUser.gitHubInfo;l.accessToken&&h({type:"UPDATE_GIT_STATE",updates:{remoteToken:l.accessToken,gitHubName:null===(o=l.userInfo)||void 0===o?void 0:o.name,gitHubEmail:null===(a=l.userInfo)||void 0===a?void 0:a.email,gitHubAvatarUrl:null===(c=l.userInfo)||void 0===c?void 0:c.avatarUrl,installations:l.installations},wid:t,pud:n})}}}),C=E.data,_=E.loading,O=E.refetch;(0,a.useEffect)((function(){if(s){var e=window.document.getElementById(Wt.b);if(!e)throw new Error("Couldn't find workspace root");var t=s.w,n=e.clientWidth*(t.pc/100)+t.px;n<=210&&!y?x(!0):n>210&&y&&x(!1)}}),[s,y]);var T=Kt(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,a.useState)(t),r=n[0],i=n[1],o=(0,a.useRef)();return(0,a.useEffect)((function(){return o.current&&clearTimeout(o.current),o.current=setTimeout((function(){i(e)}),250),function(){o.current&&clearTimeout(o.current)}}),[e]),[r||e,i]}(j||_,!0),2),I=T[0],A=T[1];(0,a.useEffect)((function(){return S||_||(A(!0),h(re({history:!1,write:!1,persist:!1,wid:t,pud:n}))),h({type:"SET_GIT_SIDEBAR_VISIBILITY",isSidebarVisible:!0,wid:t}),function(){h({type:"SET_GIT_SIDEBAR_VISIBILITY",isSidebarVisible:!1,wid:t})}}),[_,w]);var P=null;return P=_||I&&!Z.isInitialized?(0,r.tZ)(p.Z,{style:{margin:"10px auto",width:"35px",height:"35px"}}):Z.remote||Z.isInitialized?Z.badState!==v.$U.None?(0,r.tZ)(Ft,{wid:t,pud:n,badState:Z.badState,remote:Z.remote}):(0,r.tZ)(Nt,{wid:t,pud:n,isLoading:I,isNarrow:y,currentUser:null===C||void 0===C?void 0:C.currentUser,refetchUser:O}):(0,r.tZ)(Bt,{isLoggedIn:Boolean(null===C||void 0===C?void 0:C.currentUser),onInit:function(){h(function(e,t){return function(){var n=Q(m().mark((function n(r){var i,o;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=function(n,i){return r(ne({cmd:n,args:i,wid:e,pud:t}))},(0,K.j)(K.U3.VERSION_CONTROL_FEATURE_USED,{action:"initialized"}),n.next=5,ee();case 5:return o=n.sent,n.next=8,i(b.D6,[o]);case 8:return n.next=10,r(oe(e,t));case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}),(0,r.BX)("div",{style:i,className:"jsx-c53b9b484ed45518 gitSidebar",children:[(0,r.tZ)(o(),{id:"c53b9b484ed45518",children:".gitSidebar.jsx-c53b9b484ed45518{position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:100%;min-width:150px;padding:var(--space-8);background-color:var(--background-default);color:var(--foreground-default);-webkit-border-top-right-radius:var(--border-radius-4);-moz-border-radius-topright:var(--border-radius-4);border-top-right-radius:var(--border-radius-4);-webkit-border-bottom-right-radius:var(--border-radius-4);-moz-border-radius-bottomright:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4)}.gitSidebar-header.jsx-c53b9b484ed45518{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;position:relative;height:var(--space-32);color:var(--foreground-default);width:100%;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.git-content-scroll-wrapper.jsx-c53b9b484ed45518{width:100%;height:100%;overflow-y:auto;overflow-x:hidden}.git-content-wrapper.jsx-c53b9b484ed45518{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;position:relative;width:100%}.git-content-wrapper.is-loading.jsx-c53b9b484ed45518{opacity:.5;pointer-events:none}"}),(0,r.BX)("div",{className:"jsx-c53b9b484ed45518 gitSidebar-header",children:[(0,r.tZ)(d.Z,{truncate:!0,level:4,children:"Version control"}),(0,r.tZ)(Gt.Z,{link:"https://replit.com/support"})]}),(0,r.tZ)(Ht.Z,{height:1}),(0,r.tZ)("div",{className:"jsx-c53b9b484ed45518 git-content-scroll-wrapper",children:(0,r.tZ)("div",{className:"jsx-c53b9b484ed45518 "+(u()("git-content-wrapper",{"is-loading":I&&Z.badState===v.$U.None})||""),children:P})}),(0,r.tZ)(qt,{})]})}function qt(){return(0,r.BX)("div",{className:"jsx-ea99c912d83a4006 gitSidebar-footer",children:[(0,r.tZ)(o(),{id:"ea99c912d83a4006",children:".gitSidebar-footer.jsx-ea99c912d83a4006{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:6px 12px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:100%;background-color:var(--background-root);color:var(--foreground-dimmer);font-size:13px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.gitSidebar-footer.jsx-ea99c912d83a4006 .feedbackLink.jsx-ea99c912d83a4006{text-align:right}"}),(0,r.tZ)("a",{href:"https://replit.com/talk/announcements/Feedback-for-git-support-the-new-GitHub-integration/21631",target:"_blank",rel:"noopener",className:"jsx-ea99c912d83a4006 feedbackLink",children:"Send feedback"})]})}},80357:function(e,t,n){var r,i,o;n.d(t,{$U:function(){return o},l4:function(){return i},pD:function(){return r}}),function(e){e[e.UNTRACKED=0]="UNTRACKED",e[e.MODIFIED=1]="MODIFIED",e[e.MOVED=2]="MOVED",e[e.DELETED=3]="DELETED"}(r||(r={})),function(e){e[e.NONE=0]="NONE",e[e.PUSH=1]="PUSH",e[e.CLONE=2]="CLONE",e[e.FETCH=3]="FETCH",e[e.GITHUB_CREATE=4]="GITHUB_CREATE",e[e.GITHUB_GET_INFO=5]="GITHUB_GET_INFO"}(i||(i={})),function(e){e.None="NONE",e.NoMergeBase="NO_MERGE_BASE",e.AuthFetchError="AUTH_FETCH_ERROR",e.IndexFilesCorrupted="INDEX_FILES_CORRUPTED"}(o||(o={}))},91861:function(e,t,n){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){if(!e)return"";var t=i(a(e),2),n=t[0],r=t[1];return n&&r?"".concat(n,"/").concat(r):e}function a(e){if(!e)return["",""];var t=e.match(/^https:\/\/github\.com\/(.+)\/(.+)/);if(null!==t){var n=i(t,3);return[n[1],n[2]]}return["",""]}function c(e,t){return"".concat(e,"/commit/").concat(t)}function l(e){return e.startsWith("remotes/origin/HEAD ->")?e.split("/").reverse()[0]:(e.startsWith("remotes/origin/")&&(e=e.replace("remotes/origin/","")),e.includes(" -> ")&&(e=e.split(" -> ")[0]),e.trim())}n.d(t,{JE:function(){return a},cW:function(){return c},iF:function(){return l},mJ:function(){return o}})},27318:function(e,t,n){n.d(t,{E3:function(){return je},sJ:function(){return xe},ZP:function(){return Ze}});var r=n(35944),i=n(79547),o=n.n(i),a=n(67294),c=n(50658),l=n(7163),s=n(41664),u=n.n(s),d=n(70917),f=n(39155),p=n(44054),h=n(59325),m=n(56834),b=n(16124),v=n(11163),g=n(8849),y=n(88768),x=n(57541),w=n(54929),k=n(42122),Z=n(38880),j=n(8996),S=n(92704),E=n(58375),C=n(94184),_=n.n(C),O=n(70294),T=n(58458),I=n(63735),A=n(76695),P=n(23139),N=n(3204);function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){R(e,t,n[t])}))}return e}function B(e){var t,n=e.isBoosted||e.needsUpgrade,i=(0,y.E63)({skip:n,fetchPolicy:"cache-and-network"}),a=i.data,c=i.loading,l=(null===a||void 0===a||null===(t=a.currentUser)||void 0===t?void 0:t.canBoost)||!1,s=e.alwaysOn?1:3,u=e.isBoosted?1:3,d=e.isBoosted?"Your Repl is currently boosted":"Your Repl will be 2x faster",f=l?{}:{"aria-label":"Boost limit reached","data-microtip-position":"top",role:"tooltip"};return(0,r.BX)(r.HY,{children:[(0,r.BX)("div",{className:o().dynamic([["6dc489fc1322f928",[e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" always-on",children:[(0,r.BX)(j.gC,{spacing:"8px",children:[(0,r.BX)(j.Ug,{spacing:"8px",align:"center",children:[(0,r.tZ)(T.Z,{foreground:s,align:"center",children:(0,r.tZ)(A.Z,{})}),(0,r.tZ)(T.Z,{foreground:s,size:"small",fontWeight:"medium",children:"Always On"})]}),(0,r.tZ)(T.Z,{size:"xsmall",foreground:s,children:"Your Repl will stay awake"})]}),(0,r.tZ)("div",{className:o().dynamic([["6dc489fc1322f928",[e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" toggle-box",children:(0,r.tZ)(O.Z,{isOn:e.alwaysOn,onChange:function(){e.onChange(!e.alwaysOn)}})})]}),(0,r.BX)("div",{className:o().dynamic([["6dc489fc1322f928",[e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" "+(_()("boost",{"is-boosted":e.isBoosted})||""),children:[(0,r.BX)(j.gC,{spacing:"8px",children:[(0,r.BX)(j.Ug,{spacing:"8px",align:"center",justify:"center",children:[(0,r.tZ)(T.Z,{className:"rocket-text",foreground:u,align:"center",children:(0,r.tZ)(I.Z,{})}),(0,r.tZ)(T.Z,{className:"boost-text",foreground:u,size:"small",fontWeight:e.isBoosted?"medium":"regular",children:"Boost"})]}),(0,r.tZ)(T.Z,{size:"xsmall",foreground:u,children:d})]}),(0,r.tZ)("div",{className:o().dynamic([["6dc489fc1322f928",[e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" toggle-box",children:e.isBoosted?(0,r.tZ)(P.hU,{onClick:function(){e.onUnboostClick()},colorway:"negative",alt:"Unboost Repl",children:(0,r.tZ)(E.Z,{css:[N.l0.color.foregroundDefault]})}):(0,r.tZ)("div",z({},f,{className:o().dynamic([["6dc489fc1322f928",[e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" "+(f&&null!=f.className&&f.className||""),children:(0,r.tZ)(S.ZP,{disabled:!l||c,onClick:function(){e.onBoostChange(!0)},outlined:!0,text:"Add Boost",iconLeft:(0,r.tZ)(I.Z,{}),colorway:"positive"})}))})]}),(0,r.tZ)(o(),{id:"6dc489fc1322f928",dynamic:[e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"],children:".always-on.__jsx-style-dynamic-selector,.boost.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--space-8);-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.always-on.__jsx-style-dynamic-selector{margin-bottom:var(--space-8)}.boost.__jsx-style-dynamic-selector .rocket-text{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;color:".concat(e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",";width:16px}.boost.__jsx-style-dynamic-selector .boost-text{color:").concat(e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)","}.is-boosted.__jsx-style-dynamic-selector{background-color:var(--accent-positive-dimmest);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);padding:var(--space-8);border:1px solid var(--accent-positive-dimmer)}.rocket-container.__jsx-style-dynamic-selector{margin-right:var(--space-4)}.boost-menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--accent-negative-default)}.boost-icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:0 var(--space-4)}.boost-menu-text.__jsx-style-dynamic-selector{padding:0 var(--space-4)}.toggle-box.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;pointer-events:").concat(e.needsUpgrade?"none":"auto",";opacity:").concat(e.needsUpgrade?.5:1,";cursor:").concat(e.needsUpgrade?"not-allowed":"pointer","}")})]})}var D=n(45193),U=n(7177),L=n(63292),X=n(53985),M=n(13475),F=n(23589),G=n(66552),W=n(74302),H=n(88897),V=n(69780),K=n(15866),$=n(81736),q=n(37424),Y=n(57923),Q=n(67938);function J(e){var t=e.onUnboost,n=e.hideModal;return(0,r.BX)(w.Z,{css:[N.l0.colWithGap(24)],children:[(0,r.tZ)(Q.h,{variant:"headerDefault",level:2,children:"Unboost Repl"}),(0,r.tZ)(Q.x,{multiline:!0,children:"Are you sure you want to unboost your Repl? This will downgrade your Repl to a less powerful machine."}),(0,r.BX)(w.Z,{css:[N.l0.rowWithGap(12),N.l0.justify.end],children:[(0,r.tZ)(S.zx,{onClick:n,text:"Cancel"}),(0,r.tZ)(S.zx,{colorway:"negative",onClick:function(){t(),n()},text:"Yes, unboost this Repl"})]})]})}var ee,te=n(22546),ne=n(73248),re=n(28747),ie=n(534),oe=n(62424),ae=n(38657),ce=n(44195),le=n(59339),se=n(90309),ue=n(29698),de=n(88341),fe=n(44327),pe=n(50876),he=n(74255),me=n(83347);function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ve(e,t,n[t])}))}return e}function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return be(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e){var t=e.user;return(0,r.BX)(r.HY,{children:[t?(0,r.tZ)(u(),ge({},(0,l.Ru)(t),{prefetch:!1,children:(0,r.tZ)("a",{onClick:function(e){e.stopPropagation()},className:o().dynamic([["177bfdbfdbe915fa",[p.j.tabletMax]]])+" icon",children:(0,r.tZ)(ie.Z,{src:t.image,alt:t.username,size:32})})})):(0,r.tZ)("div",{className:o().dynamic([["177bfdbfdbe915fa",[p.j.tabletMax]]])+" icon",children:(0,r.tZ)(f.Z,{size:"inherit"})}),(0,r.tZ)(o(),{id:"177bfdbfdbe915fa",dynamic:[p.j.tabletMax],children:".icon.__jsx-style-dynamic-selector{display:none}@media screen and (min-width:".concat(p.j.tabletMax,"px){.icon.__jsx-style-dynamic-selector{display:block}}")})]})}!function(e){e.Fork="Fork",e.Delete="Delete",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings"}(ee||(ee={}));var we,ke=(0,d.iv)([N.l0.rowWithGap(8),N.l0.p(4),N.l0.cursor.pointer,N.l0.color.foregroundDimmer,N.l0.borderRadius(4),N.l0.position.relative,N.l0.align.center,{border:"1px solid transparent","&:hover":{borderColor:N.TV.backgroundHighest}}]);function Ze(e){var t,n=e.repl,i=e.refetch,o=e.onUpdateRepl,c=e.showInModal,l=ye(a.useState(!1),2),s=l[0],u=l[1],d=(0,y.koY)().data,f=n.isAlwaysOn?(0,r.tZ)(w.Z,{"aria-label":"Always on","data-microtip-position":"bottom",role:"tooltip",css:[N.l0.width(8),N.l0.height(8),N.l0.borderRadius("full"),N.l0.backgroundColor.accentPositiveDefault,{alignSelf:"center",boxShadow:"0 0 12px "+N.TV.accentPositiveDefault}]}):null,p=(0,r.tZ)(je,{setIsEditing:u,repl:n,refetch:i,onUpdateRepl:o});return(null===d||void 0===d||null===(t=d.currentUser)||void 0===t?void 0:t.hasFlagBuyCyclesGate)&&(p=(0,r.tZ)(me.Sq,{setIsEditing:u,repl:n,refetch:i,onUpdateRepl:o})),c?(0,r.BX)(r.HY,{children:[(0,r.BX)(w.Z,{css:[N.l0.flex.shrink(1),ke],"data-cy":"ws-repl-info-container",onClick:function(){u(!0)},children:[(0,r.tZ)(xe,{user:n.user}),(0,r.tZ)(h.Z,{repl:n}),f]}),(0,r.tZ)(D.Z,{isOpen:s,onRequestClose:function(){return u(!1)},children:p})]}):(0,r.BX)(de.Z,{isOpen:s,maxWidth:460,onClickOutside:function(){},padding:0,placement:"bottom-start",growToMaxWidth:!0,zIndex:he.I-1,children:[(0,r.BX)(w.Z,{"data-cy":"ws-repl-info-container",css:[ke,s&&{pointerEvents:"none"}],onClick:function(){u(!0)},children:[(0,r.tZ)(xe,{user:n.user}),(0,r.tZ)(h.Z,{repl:n}),f]}),p]})}function je(e){var t,n=e.repl,i=e.onUpdateRepl,l=e.setIsEditing,s=(0,v.useRouter)(),d=ye(a.useState(!1),2),f=d[0],h=d[1],C=ye(a.useState(null),2),_=C[0],O=C[1],A=ye(a.useState(n.isBoosted),2),R=A[0],z=A[1],D=ye(a.useState(n.isRenamed?n.title:""),2),Q=D[0],ie=D[1],de=ye(a.useState(n.description||""),2),he=de[0],me=de[1],be=ye(a.useState(n.rawTemplateLabel),2),ve=be[0],xe=be[1],ke=ye(a.useState(null),2),Ze=ke[0],je=ke[1],Se=(0,Z.Z)().showError,Ee=n.publishedAs===y.O2h.Template,Ce=Boolean(n.publishedAs);a.useEffect((function(){me(n.description||"")}),[n.description]);var _e=(0,Y.Z)(),Oe=a.useRef(n),Te=ye((0,y.ap1)({variables:{id:n.id},onCompleted:function(){return s.push("/home","/~")},update:(0,b.t)({id:n.id}),onError:function(e){return Se((0,g.Z)(e.message))}}),1)[0],Ie=ye((0,y.vib)({onError:function(e){return Se((0,g.Z)(e.message))},onCompleted:function(e){var t=e.updateRepl.repl,r=Oe.current,o={};r.description!==t.description&&(o.description=t.description),r.title!==t.title&&(o.title=t.title),r.url!==t.url&&(o.url=t.url),r.isRenamed!==t.isRenamed&&(o.isRenamed=!!t.isRenamed),Oe.current=n,Object.keys(o).length>0&&(i(o),l(!1))}}),1)[0],Ae=ye((0,re.Z)(),2),Pe=Ae[0],Ne=Ae[1].loading,Re=ye((0,y.prL)({onCompleted:function(e){_e.current&&("UserError"===e.setAlwaysOn.__typename?je(e.setAlwaysOn.message):je(null))},onError:function(e){return Se((0,g.Z)(e.message))}}),2),ze=Re[0],Be=Re[1].loading,De=ye((0,y.BjH)({variables:{replId:n.id},onCompleted:function(e){var t=e.boostRepl;"UserError"!==t.__typename?((0,H.Z)(n.id).catch((function(e){c.Tb(e),_e.current&&je("Something went wrong when boosting your repl. Please refresh or try again.")})),_e.current&&(je(null),z(!0))):_e.current&&je(t.message)},onError:function(e){c.Tb(e),Se((0,g.Z)(e.message))}}),2),Ue=De[0],Le=De[1].loading,Xe=n.currentUserPermissions.publish,Me=ye((0,y.gFT)({variables:{input:{replId:n.id}},onError:function(e){c.Tb(e),Se((0,g.Z)(e.message))}}),2),Fe=Me[0],Ge=Me[1],We=ye((0,y.cry)({variables:{replId:n.id},onCompleted:function(e){var t=e.unboostRepl;"UserError"!==t.__typename?((0,H.Z)(n.id).catch((function(e){c.Tb(e),_e.current&&je("Something went wrong when unboosting your Repl. Please refresh or try again.")})),_e.current&&(je(null),z(!1))):je(t.message)},onError:function(e){c.Tb(e),Se((0,g.Z)(e.message))}}),2),He=We[0],Ve=We[1].loading,Ke=a.useMemo((function(){return!(!Q||Q===n.title)||(ve!==n.rawTemplateLabel||!(""===he&&!n.description)&&he!==n.description)}),[n,Q,he,ve]),$e=a.useCallback((function(){if(Ke){var e={id:n.id,title:Q||n.title,description:he,templateLabel:n.currentUserPermissions.changeTemplateLabel?ve:void 0};Ie({variables:{input:e}})}}),[Ke,Ie,n,Q,he,ve]),qe=f||null!==_||Ne,Ye=(0,M.Z)((function(){qe||(Ke?$e():l(!1))}),[qe,Ke,$e]),Qe=a.useContext(ce.G).usesDigitalGoodsService,Je=function(){Le||Ve||((0,m.j)(m.U3.BOOST_TOGGLED,{enabled:!R}),R?He():Ue())},et=n.isRenamed?"name your repl":"default name: ".concat(n.title),tt=[y.Sy.Submit,y.Sy.PublishTemplate,y.Sy.EditTemplate].includes(n.workspaceCta),nt=[];n.currentUserPermissions.fork&&nt.push({value:ee.Fork,label:"Fork",icon:(0,r.tZ)(ne.Z,{})}),n.publishedAs===y.O2h.RegularRepl&&Xe&&nt.push({value:ee.Unpublish,label:"Unpublish",icon:(0,r.tZ)($.Z,{})}),Ee&&Xe&&nt.push({value:ee.UnpublishTemplate,label:"Unpublish template",icon:(0,r.tZ)($.Z,{})}),Ce&&Xe&&nt.push({value:ee.EditPublishSettings,label:"Edit Publish Settings",icon:(0,r.tZ)(ue.Z,{})}),n.currentUserPermissions.delete&&nt.push({isDestructive:!0,value:ee.Delete,label:"Delete",icon:(0,r.tZ)(E.Z,{})});var rt=n.currentUserPermissions.changePrivacy===y.HA$.SubscriptionRequired,it=n.currentUserPermissions.changeAlwaysOn===y.fnM.SubscriptionRequired,ot=rt?"Get access to Private Repls, Always On, and Boosts.":"Get access to Always On and Boosts.",at=(0,q.H)();return(0,r.BX)("div",{ref:Ye,className:o().dynamic([["7541e2a1623a09e",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",it?"var(--background-root)":"var(--background-default)",p.j.mobileMax]]])+" repl-info-form",children:[(0,r.tZ)("form",{onSubmit:function(e){e.preventDefault(),$e()},className:o().dynamic([["7541e2a1623a09e",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",it?"var(--background-root)":"var(--background-default)",p.j.mobileMax]]]),children:(0,r.BX)(j.gC,{wrap:"nowrap",spacing:2,align:"stretch",children:[(0,r.BX)(j.gC,{wrap:"nowrap",spacing:"4px",align:"stretch",children:[(0,r.BX)(j.Ug,{spacing:1,align:"center",justify:"space-between",children:[(0,r.tZ)(w.Z,{css:[N.l0.rowWithGap(8)],children:(0,r.tZ)(u(),ge({},(0,W.j3)(n),{prefetch:!1,children:(0,r.tZ)("a",{style:{textDecoration:"none"},className:o().dynamic([["7541e2a1623a09e",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",it?"var(--background-root)":"var(--background-default)",p.j.mobileMax]]]),children:(0,r.tZ)(S.ZP,{type:"button",iconLeft:(0,r.tZ)(F.Z,{}),colorway:"primary",text:"Cover page"})})}))}),(0,r.tZ)(te.Z,{items:nt,onItemClick:function(e){switch(e.value){case ee.Unpublish:return void O(we.Unpublish);case ee.UnpublishTemplate:return void O(we.UnpublishTemplate);case ee.Fork:return void O(we.ForkRepl);case ee.Delete:return void O(we.DeleteRepl);case ee.EditPublishSettings:O(we.EditPublishSettings)}},onOpenChange:h})]}),n.lastPublishedAt&&Xe?(0,r.BX)(T.Z,{size:"small",foreground:3,children:["Last published on"," ",new Date(n.lastPublishedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null]}),n.currentUserPermissions.changeIconUrl&&Ee?(0,r.tZ)(oe.Z,{value:n.iconUrl,onChange:function(e){return Ie({variables:{input:{id:n.id,iconUrl:e}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:ge({},n,{iconUrl:e})}}})}}):null,(0,r.BX)(j.gC,{wrap:"nowrap",align:"end",children:[(0,r.tZ)(x.ZP,{style:{cursor:n.currentUserPermissions.changeTitle?"auto":"not-allowed"},disabled:!n.currentUserPermissions.changeTitle,maxLength:60,placeholder:et,value:Q,onChange:function(e){return ie(e.target.value)},spellCheck:!1}),(0,r.tZ)(k.Z,{maxLength:60,value:Q,hideLabel:!0})]}),(0,r.BX)(j.gC,{wrap:"nowrap",align:"end",children:[(0,r.tZ)("textarea",{onKeyDown:function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)},disabled:!n.currentUserPermissions.changeDescription,maxLength:ae.p,value:he,onChange:function(e){return me(e.target.value)},placeholder:"What does this Repl do?",className:o().dynamic([["7541e2a1623a09e",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",it?"var(--background-root)":"var(--background-default)",p.j.mobileMax]]])}),(0,r.tZ)(k.Z,{maxLength:ae.p,value:he,hideLabel:!0})]}),Ee&&n.currentUserPermissions.changeTemplateLabel&&(0,r.tZ)(G.Z,{css:[N.l0.p(8),N.l0.borderRadius(8)],children:(0,r.BX)(j.gC,{wrap:"nowrap",spacing:1,children:[(0,r.BX)(j.Ug,{spacing:1,children:[(0,r.tZ)(K.Z,{}),(0,r.tZ)(T.Z,{children:"Template Label"})]}),(0,r.tZ)(x.ZP,{value:ve,maxLength:60,placeholder:"Template Label",spellCheck:!1,onChange:function(e){return xe(e.target.value)}})]})})]})}),tt?null:(0,r.BX)(r.HY,{children:[it&&(0,r.tZ)("div",{className:o().dynamic([["7541e2a1623a09e",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",it?"var(--background-root)":"var(--background-default)",p.j.mobileMax]]]),children:Qe?(0,r.BX)(j.gC,{justify:"center",align:"center",style:{paddingBottom:"var(--space-16)"},children:[(0,r.tZ)(T.Z,{foreground:3,children:ot}),(0,r.BX)(T.Z,{foreground:3,children:["Go to"," ",(0,r.tZ)("a",{href:"https://replit.com/pricing",target:"_blank",className:o().dynamic([["7541e2a1623a09e",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",it?"var(--background-root)":"var(--background-default)",p.j.mobileMax]]]),children:"replit.com"})," ","to upgrade your account."]})]}):(0,r.BX)(w.Z,{css:[N.l0.px(8)],children:[(0,r.tZ)(S.ZP,{iconLeft:(0,r.tZ)(I.Z,{}),type:"button",colorway:"primary",stretch:!0,onClick:function(){(0,m.j)(m.U3.UPGRADE_SELECTED,{source:"inline",planID:"hacker"}),O(we.SubscribeUser)},text:"Upgrade to Hacker"}),(0,r.tZ)("div",{className:o().dynamic([["7541e2a1623a09e",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",it?"var(--background-root)":"var(--background-default)",p.j.mobileMax]]])+" upgrade-text-container",children:(0,r.tZ)(T.Z,{foreground:3,children:ot})})]})}),(0,r.BX)(j.gC,{className:"hacker-features-container",children:[n.currentUserPermissions.changePrivacy!==y.HA$.Disallowed&&(0,r.tZ)("div",{className:o().dynamic([["7541e2a1623a09e",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",it?"var(--background-root)":"var(--background-default)",p.j.mobileMax]]])+" edit-repl-privacy",children:(0,r.BX)(P.hE,{tag:"fieldset",name:at("privacy"),value:n.isPrivate.toString(),onChange:function(){return Ie({variables:{input:{id:n.id,isPrivate:!n.isPrivate}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:ge({},n,{isPrivate:!n.isPrivate})}}})},row:!0,stretch:!0,children:[(0,r.tZ)(P.rK,{id:at("false"),value:"false",text:"Public",icon:(0,r.tZ)(V.Z,{})}),(0,r.tZ)(P.rK,{id:at("true"),value:"true",text:"Private",icon:(0,r.tZ)(K.Z,{})})]})}),n.currentUserPermissions.changeAlwaysOn!==y.fnM.Disallowed&&(0,r.BX)("div",{className:o().dynamic([["7541e2a1623a09e",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",it?"var(--background-root)":"var(--background-default)",p.j.mobileMax]]])+" set-always-online",children:[(0,r.tZ)(B,{alwaysOn:n.isAlwaysOn,isBoosted:R,onChange:function(){if(!Be){var e=!n.isAlwaysOn;ze({variables:{replId:n.id,enabled:e},optimisticResponse:{setAlwaysOn:ge({__typename:"Repl"},n,{isAlwaysOn:e})}})}},onBoostChange:Je,needsUpgrade:it,onUpgrade:function(){return O(we.SubscribeUser)},onUnboostClick:function(){return O(we.UnboostRepl)}}),Ze&&(0,r.tZ)("div",{className:o().dynamic([["7541e2a1623a09e",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",it?"var(--background-root)":"var(--background-default)",p.j.mobileMax]]])+" always-on-boost-error-container",children:(0,r.tZ)(T.Z,{size:"small",children:Ze})})]})]})]}),(0,r.tZ)(U.Z,{isOpen:_===we.DeleteRepl,onRequestClose:function(){return O(null)},maxWidth:512,children:(0,r.tZ)(L.Z,{delete:Te,entityType:"Repl",hideModal:function(){return O(null)}})}),(0,r.tZ)(U.Z,{isOpen:_===we.UnboostRepl,onRequestClose:function(){return O(null)},maxWidth:512,children:(0,r.tZ)(J,{onUnboost:Je,hideModal:function(){return O(null)}})}),(0,r.tZ)(U.Z,{isOpen:_===we.ForkRepl,onRequestClose:function(){return O(null)},maxWidth:512,children:(0,r.tZ)(se.Z,{onFork:function(e,t){Pe({originId:n.id,teamId:e,title:t,forkToPersonal:!e,trackingData:{forkSource:"editReplPopoverMenuItem"}}),(0,m.j)(m.U3.REPLS_REPL_SELF_FORKED,{replId:n.id})},initialValue:n.title,hideModal:function(){return O(null)},teamContext:null===(t=n.user)||void 0===t?void 0:t.username})}),(0,r.tZ)(X.Z,{isOpen:_===we.SubscribeUser,onClose:function(){return O(null)},trackingInfo:{context:"workspace-header"}}),(0,r.tZ)(U.Z,{isOpen:_===we.Unpublish,onRequestClose:function(){return O(null)},maxWidth:512,children:(0,r.tZ)(fe.Z,{repl:n,source:"replEnvironment",onDone:function(){O(null)}})}),(0,r.tZ)(U.Z,{isOpen:_===we.UnpublishTemplate,onRequestClose:function(){return O(null)},maxWidth:512,children:(0,r.tZ)(le.Z,{confirmLabel:"Yes, unpublish this Template",isDestructive:!0,title:"Unpublish Template",onCancel:function(){return O(null)},onConfirm:function(){Ge.loading||(Fe(),O(null))},children:"Your Repl will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,r.tZ)(U.Z,{isOpen:_===we.EditPublishSettings,onRequestClose:function(){return O(null)},noPadding:!0,children:(0,r.tZ)(pe.Z,{source:"replEnvironment",replId:n.id})}),(0,r.tZ)(o(),{id:"7541e2a1623a09e",dynamic:[n.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",it?"var(--background-root)":"var(--background-default)",p.j.mobileMax],children:".repl-info-form.__jsx-style-dynamic-selector{position:relative}form.__jsx-style-dynamic-selector{padding:var(--space-16)}textarea.__jsx-style-dynamic-selector{min-height:42px;height:200px;resize:none;cursor:".concat(n.currentUserPermissions.changeDescription?"auto":"not-allowed",";font-size:var(--font-size-default);font-family:var(--font-family-default);padding:var(--space-8);display:block;width:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:1px solid var(--outline-dimmest);-webkit-transition:.2s border-color;-moz-transition:.2s border-color;-o-transition:.2s border-color;transition:.2s border-color;background-color:transparent;color:var(--foreground-default)}textarea.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}textarea.__jsx-style-dynamic-selector:disabled{opacity:.5}textarea.__jsx-style-dynamic-selector:focus,textarea.__jsx-style-dynamic-selector:active{outline:none;border-color:var(--accent-primary-default)}.edit-repl-privacy.__jsx-style-dynamic-selector{background-color:").concat(rt?"var(--background-root)":"var(--background-default)",";pointer-events:").concat(rt?"none":"auto",";opacity:").concat(rt?.5:1,";cursor:").concat(rt?"not-allowed":"pointer","}.set-always-online.__jsx-style-dynamic-selector{background-color:").concat(it?"var(--background-root)":"var(--background-default)","}.edit-repl-privacy.__jsx-style-dynamic-selector,.set-always-online.__jsx-style-dynamic-selector{width:100%;padding:var(--space-8)}.set-always-online.__jsx-style-dynamic-selector{-webkit-border-bottom-left-radius:8px;-moz-border-radius-bottomleft:8px;border-bottom-left-radius:8px;-webkit-border-bottom-right-radius:8px;-moz-border-radius-bottomright:8px;border-bottom-right-radius:8px;overflow:hidden}.edit-repl.__jsx-style-dynamic-selector .hacker-features-container{margin:var(--space-8)}.edit-repl-actions.__jsx-style-dynamic-selector{padding:0 var(--space-16)}.menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--foreground-default)}.delete-menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--accent-negative-default)}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:0 var(--space-4)}.menu-text.__jsx-style-dynamic-selector{padding:0 var(--space-4)}.upgrade-button-container.__jsx-style-dynamic-selector{padding:0 var(--space-8)}.upgrade-button-container.__jsx-style-dynamic-selector .sentence-case{text-transform:none}.upgrade-text-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.always-on-indicator.__jsx-style-dynamic-selector{margin-left:var(--space-4);margin-right:var(--space-8);width:8px;height:8px;-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;background-color:var(--accent-green-default);-webkit-box-shadow:0 0 12px var(--accent-green-default);-moz-box-shadow:0 0 12px var(--accent-green-default);box-shadow:0 0 12px var(--accent-green-default)}.always-on-boost-error-container.__jsx-style-dynamic-selector{margin-top:var(--space-8)}.always-on-boost-error-container.__jsx-style-dynamic-selector .text{color:var(--accent-negative-default)}@media screen and (max-width:").concat(p.j.mobileMax,"px){.edit-repl.__jsx-style-dynamic-selector{width:80vw}}")})]})}!function(e){e.DeleteRepl="DeleteRepl",e.ForkRepl="ForkRepl",e.UnboostRepl="UnboostRepl",e.SubscribeUser="SubscribeUser",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings"}(we||(we={}))},59325:function(e,t,n){var r=n(35944),i=n(79547),o=n.n(i),a=(n(67294),n(41664)),c=n.n(a),l=n(7163),s=n(37026),u=n(63805);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){var t=e.repl,n=(0,u.isMobile)({tablet:!1}),i=t.user?(0,r.tZ)(c(),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}({},(0,l.Ru)(t.user),{prefetch:!1,children:(0,r.tZ)("a",{style:{color:"var(--accent-primary-default)",fontWeight:500,textDecoration:"none"},className:"username",children:t.user.username})})):(0,r.tZ)("span",{className:"username",children:"@anonymous"}),a=n?"":152;return(0,r.BX)("div",{className:"jsx-7e345183c0c8a2d6 workspace-header-info",children:[(0,r.BX)("div",{className:"jsx-7e345183c0c8a2d6 workspace-header-title",children:[!n&&(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{className:"jsx-7e345183c0c8a2d6 breadcrumb interactive",children:(0,r.tZ)("span",{onClick:function(e){return e.stopPropagation()},className:"jsx-7e345183c0c8a2d6 breadcrumb-content",children:i})}),(0,r.tZ)("span",{className:"jsx-7e345183c0c8a2d6 slash",children:"/"})]}),(0,r.tZ)("span",{style:{justifyContent:"flex-end"},className:"jsx-7e345183c0c8a2d6 breadcrumb repl-title",children:(0,r.tZ)("span",{style:{maxWidth:a,fontWeight:n?500:400},className:"jsx-7e345183c0c8a2d6 breadcrumb-content",children:t.title})})]}),(0,r.tZ)("div",{className:"jsx-7e345183c0c8a2d6 spacer"}),(0,r.tZ)("div",{title:t.templateInfo.label,className:"jsx-7e345183c0c8a2d6 language-icon-container",children:(0,r.tZ)(s.Z,{iconUrl:t.templateInfo.iconUrl,size:16,alt:t.templateInfo.label})}),(0,r.tZ)(o(),{id:"7e345183c0c8a2d6",children:".workspace-header-info.jsx-7e345183c0c8a2d6,.workspace-header-title.jsx-7e345183c0c8a2d6{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;overflow:hidden;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;font-size:var(--font-size-default)}.workspace-header-info.jsx-7e345183c0c8a2d6{width:100%}.workspace-header-user-link.jsx-7e345183c0c8a2d6{color:var(--accent-primary-default);text-decoration:none}.language-icon-container.jsx-7e345183c0c8a2d6{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-4);background-color:var(--background-higher);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);position:relative}.breadcrumb.jsx-7e345183c0c8a2d6{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:2px var(--space-4);width:auto}.breadcrumb.interactive.jsx-7e345183c0c8a2d6:hover{background-color:var(--background-higher)}.breadcrumb-content.jsx-7e345183c0c8a2d6{display:inline-block;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.spacer.jsx-7e345183c0c8a2d6{width:var(--space-8);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}.username.jsx-7e345183c0c8a2d6,.repl-title.jsx-7e345183c0c8a2d6{white-space:nowrap;color:var(--foreground-default)}.slash.jsx-7e345183c0c8a2d6{color:var(--foreground-dimmest);padding:0 2px}.repl-title.jsx-7e345183c0c8a2d6{overflow:hidden}"})]})}},88897:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(34051),i=n.n(r),o=n(88768),a=n(27754),c=n(87152),l=n(81544);function s(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){s(o,r,i,a,c,"next",e)}function c(e){s(o,r,i,a,c,"throw",e)}a(void 0)}))}}function d(e){return f.apply(this,arguments)}function f(){return(f=u(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return h=u(i().mark((function e(t){var n,r=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:1,e.prev=1,e.next=4,m(t);case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),!(n>5)){e.next=10;break}throw e.t0;case 10:setTimeout((function(){p(t,n+1)}),1e3*(Math.pow(2,n)-1));case 11:case"end":return e.stop()}}),e,null,[[1,6]])}))),h.apply(this,arguments)}function m(e){return b.apply(this,arguments)}function b(){return(b=u(i().mark((function e(t){var n,r,s,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,a.Z)({onUnrecoverableError:function(e){throw new Error("Failed to create temporary goval connection. Received error ".concat(e.message))}}),c.l){e.next=4;break}throw n.destroy(),new Error("Expected Apollo Client");case 4:return e.next=6,c.l.query({query:o.PkY,variables:{id:t}});case 6:if("Repl"===(r=e.sent.data).repl.__typename){e.next=10;break}throw n.destroy(),new Error("Failed to query repl info when creating temporary connection");case 10:return s=r.currentUser,u=r.repl,e.abrupt("return",new Promise((function(e){n.onConnectionStateChanged((function(t){t===a.e.CONNECTED&&(n.destroy(),e())})),n.connect({context:(0,l.U)({repl:u,currentUser:s})})})));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},72121:function(e,t,n){n.r(t),n.d(t,{Component:function(){return y},SpinnerModal:function(){return g},default:function(){return w},receiver:function(){return w},reducer:function(){return x}});var r=n(34051),i=n.n(r),o=n(35944),a=n(79547),c=n.n(a),l=(n(67294),n(78135)),s=n(52294),u=n(20657),d=n(7411),f=n(85486),p=n(62873);function h(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){h(o,r,i,a,c,"next",e)}function c(e){h(o,r,i,a,c,"throw",e)}a(void 0)}))}}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}var g=function(e){var t=e.reason;return(0,o.BX)("div",{className:"jsx-d7f50223569d59c6 spinner-modal-container",children:[(0,o.tZ)("div",{className:"jsx-d7f50223569d59c6 spinner",children:(0,o.tZ)(p.Z,{})}),(0,o.BX)("h3",{className:"jsx-d7f50223569d59c6 reason",children:[t,"..."]}),(0,o.tZ)(c(),{id:"d7f50223569d59c6",children:"@-webkit-keyframes replit-logo-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes replit-logo-spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes replit-logo-spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes replit-logo-spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.spinner-modal-container.jsx-d7f50223569d59c6{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;min-width:225px;height:225px;cursor:not-allowed;background-color:var(--background-overlay);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);z-index:500000;padding:var(--space-16);color:var(--foreground-default)}.spinner.jsx-d7f50223569d59c6{width:80px;height:80px;-webkit-animation:replit-logo-spin 1.5s linear infinite;-moz-animation:replit-logo-spin 1.5s linear infinite;-o-animation:replit-logo-spin 1.5s linear infinite;animation:replit-logo-spin 1.5s linear infinite}.reason.jsx-d7f50223569d59c6{margin-top:20px;font-size:18px;font-weight:500}"})]})},y=function(e){var t=e.style,n=e.wid,r=e.pud,i=(0,l.v9)((function(e){return(0,d.Z)(e,n,r,"lock")})),a=i.isLocked,s=i.showSpinner,u=i.reason;return a?s?(0,o.BX)("div",{style:t,className:"jsx-c6481388fcbd4378",children:[(0,o.tZ)(g,{reason:u}),(0,o.tZ)(c(),{id:"c6481388fcbd4378",children:"div.jsx-c6481388fcbd4378{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;position:fixed;top:0;bottom:0;left:0;right:0;cursor:not-allowed;background-color:rgba(0,0,0,.25);z-index:500000}"})]}):(0,o.tZ)("div",{style:t,className:"jsx-51edd2e08e15b20d",children:(0,o.tZ)(c(),{id:"51edd2e08e15b20d",children:"div.jsx-51edd2e08e15b20d{position:fixed;top:0;bottom:0;left:0;right:0;cursor:not-allowed;z-index:500000}"})}):null},x=(0,u.$)({primary:function(e,t){switch(t.type){case"LOCK_WORKSPACE":return v({},e,{showSpinner:t.showSpinner,reason:t.reason,isLocked:!0});case"UNLOCK_WORKSPACE":return v({},e,{showSpinner:!1,isLocked:!1});default:return e}},preferences:s.c});function w(e,t,n){switch(n.type){case"LOCK_WORKSPACE":return function(){var t=m(i().mark((function t(n,r){var o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r().workspace[e].layout,!f.Bp(o,"lock")){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,n(v({wid:e,type:"UPDATE_LAYOUT"},f.$T(o,"lock","inside",["floating"])));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();case"UNLOCK_WORKSPACE":return function(){var t=m(i().mark((function t(n,r){var o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r().workspace[e].layout,t.next=3,n(v({wid:e,type:"UPDATE_LAYOUT"},f.Od(o,"lock")));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();default:return null}}},55912:function(e,t,n){n.d(t,{$w:function(){return w},rJ:function(){return g},wh:function(){return x}});var r=n(34051),i=n.n(r),o=n(85486),a=n(27740),c=n.n(a),l=n(35424),s=n.n(l),u=n(93770),d=n(91272),f=n(41045),p=n(46846);function h(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,i)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){h(o,r,i,a,c,"next",e)}function c(e){h(o,r,i,a,c,"throw",e)}a(void 0)}))}}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}function g(e){return new Promise((function(t,n){var r=e.openChannel({service:"gcsfiles"},(function(e){if(!e.error)return e.channel.request({persistMirror:{path:"."}}).then((function(e){e.ok,r(),t()})),function(e){e.willReconnect&&r()};n(e.error)}))}))}var y=function(e){var t={"go.mod":"go","package.json":"nodejs","Cargo.toml":"rust","requirements.txt":"python3","pyproject.toml":"python3","index.html":"html",Gemfile:"ruby",Makefile:"bash"};for(var n in t)if(e.includes(n))return t[n];var r=c().allSupportedByPopularity().reduce((function(e,t){var n=t.ext,r=t.key;return e[n]=e[n]?e[n]:r,e}),{}),i=e.map((function(e){return e.split(".").slice(-1)[0]})).reduce((function(e,t){var n=e.find((function(e){return e.ext===t}));return n?n.count++:e.push({ext:t,count:1}),e}),[]).sort((function(e,t){return t.count-e.count}));return i.length&&(1===i.length||i[0].count>=2*i[1].count)&&r[i[0].ext]?r[i[0].count]:"bash"};function x(e){var t=e.wid,n=e.replLanguage,r=e.onDone;return e.isNixGhImport?function(){var e=m(i().mark((function e(n,r){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r().services.container,e.next=3,g(o);case 3:n({type:"INSERT_RUN_FLOW_PLUGIN",wid:t,pudToInsert:"config"});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}():function(){var e=m(i().mark((function e(o,a){var l,h,m,b,v,x,w,k,Z,j,S,E,C,_,O,T,I;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:"LOCK_WORKSPACE",showSpinner:!0,reason:"Detecting Language",wid:t}),l=a().services,h=l.fs,m=l.session,b=l.container,e.next=4,h.readDir(f.Q);case 4:return v=e.sent,x=v.error?[]:v.children.filter((function(e){return e.type===p.Tv.File})).map((function(e){return e.filename})),(w=x.find((function(e){return e.toLowerCase().includes("readme")}))||(0,d.T)(x,n)||x[0])&&m.openFile(w),e.next=10,g(b);case 10:return e.next=12,h.readFile(".replit");case 12:return k=e.sent,e.next=15,h.stat("replit.nix");case 15:if(Z=e.sent,j=null,S={displayName:""},E=!1,null===k.error&&Z.exists?(j="nix",S=c().get(j),E=!0):null===k.error&&(j=null!==(C=s().parse(k.content.toString("utf8")).language)&&void 0!==C?C:"bash",S=c().get(j),E="Unknown"!==S.displayName),!k.error&&j&&E){e.next=30;break}if(o({type:"UNLOCK_WORKSPACE",wid:t}),!k.error){e.next=28;break}return _=y(x),O="nodejs"===_?"npm start":"",T='language = "'.concat(_,'"\nrun = "').concat(O,'"'),e.next=28,h.writeFile(".replit",u.Z.from(T));case 28:return o({type:"INSERT_RUN_FLOW_PLUGIN",wid:t,pudToInsert:"config"}),e.abrupt("return");case 30:if(j!==n){e.next=33;break}return o({type:"UNLOCK_WORKSPACE",wid:t}),e.abrupt("return");case 33:return I=S.displayName,o({type:"LOCK_WORKSPACE",showSpinner:!0,reason:"Upgrading to ".concat(I),wid:t}),e.next=37,h.persist({skipDebounce:!0});case 37:r(c().getCanonicalName(j));case 38:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function w(e){var t=e.wid,n=e.currentPud,r=e.pudToInsert,i=e.setCurrentPud;return function(e,a){var c=a().workspace[t],l=c.layout,s=c.plugins;if(!o.e$(l,r)){var u=o.PP(l,s,"shell");if(!u)throw new Error("Expected shell path");var d=o.Il(o.Il(u));e(v({wid:t,type:"UPDATE_LAYOUT"},o.$T(l,r,"above",d)));var f=a().workspace[t].layout;n&&e(v({wid:t,type:"UPDATE_LAYOUT"},o.Od(f,n))),i(r)}}}},4655:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(67294),i=n(62774),o=n(56834),a=n(77012),c=n(51968);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){var t=e.autoFocus,n=e.onShellKey,l=e.container,u=e.createXtermProps,d=s((0,a.Z)({createXtermProps:u}),2),f=d[0],p=d[1],h=(0,i.Z)({service:"shell",container:l});return r.useEffect((function(){if(h.channel&&f){var e=f.onKey((function(e){var t=e.key,r=e.domEvent;"\r"===t&&(0,o.j)(o.U3.SHELL_COMMAND_EVALED),n&&n(r)})),t=f.onData((function(e){if(h.channel&&"closed"!==h.channel.status){var t=(0,c.I)(e);h.channel.send({input:t})}}));h.channel.onCommand((function(e){e.hint?f.write("\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n")):e.output&&f.write(e.output)}));var r=function(){h.channel&&"open"===h.channel.status&&h.channel.send({resizeTerm:f.getSize()})},i=f.onResize(r);return r(),function(){e.dispose(),t.dispose(),i.dispose()}}}),[h.channel,f,n]),r.useEffect((function(){t&&f&&f.focus()}),[t,f]),[f,p]}},78411:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=new WeakMap}var t,r,i;return t=e,(r=[{key:"getHandle",value:function(e){if(!e||"object"!==typeof e&&"function"!==typeof e)throw new Error("Only objects");var t={type:"handle",identity:e.constructor?Object.prototype.toString.call(e.constructor):Object.prototype.toString.call(e)};return this.map.set(t,e),t}},{key:"get",value:function(e){return this.map.get(e)}},{key:"safeGet",value:function(e){if(!e)throw new Error("Expected object handle to be truthy");var t=this.map.get(e);if(!t)throw new Error("Expected object handle to return object");return t}}])&&n(t.prototype,r),i&&n(t,i),e}());t.Z=r},98184:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(35944),i=n(79547),o=n.n(i),a=(n(67294),n(24561)),c=n(90039);function l(e){var t=e.preventHighlightBorder,n=(0,c.Z)();return(0,r.BX)("div",{className:o().dynamic([["52913039492d7332",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])+" loader",children:[(0,r.tZ)("div",{className:o().dynamic([["52913039492d7332",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])+" wrap",children:(0,r.BX)(a.ZP,{primaryColor:"var(--background-highest)",secondaryColor:"var(--background-higher)",uniquekey:"editorLoader",children:[(0,r.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["52913039492d7332",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"80",y:"0",rx:"3",ry:"3",width:"100",height:"10",className:o().dynamic([["52913039492d7332",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"190",y:"0",rx:"3",ry:"3",width:"10",height:"10",className:o().dynamic([["52913039492d7332",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:o().dynamic([["52913039492d7332",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"155",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:o().dynamic([["52913039492d7332",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"40",rx:"3",ry:"3",width:"90",height:"10",className:o().dynamic([["52913039492d7332",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"115",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["52913039492d7332",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"185",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["52913039492d7332",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"30",height:"10",className:o().dynamic([["52913039492d7332",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"80",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["52913039492d7332",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"95",y:"80",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["52913039492d7332",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"165",y:"80",rx:"3",ry:"3",width:"30",height:"10",className:o().dynamic([["52913039492d7332",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"100",rx:"3",ry:"3",width:"110",height:"10",className:o().dynamic([["52913039492d7332",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"135",y:"100",rx:"3",ry:"3",width:"100",height:"10",className:o().dynamic([["52913039492d7332",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["52913039492d7332",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])})]})}),(0,r.tZ)(o(),{id:"52913039492d7332",dynamic:[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"],children:".loader.__jsx-style-dynamic-selector{z-index:3;height:100%;width:100%;background-color:var(--background-default);overflow:hidden;padding:var(--space-16);-webkit-border-bottom-right-radius:var(--border-radius-4);-moz-border-radius-bottomright:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);-webkit-border-bottom-left-radius:var(--border-radius-4);-moz-border-radius-bottomleft:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);-webkit-box-shadow:".concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)",";-moz-box-shadow:").concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)",";box-shadow:").concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)","}.wrap.__jsx-style-dynamic-selector{overflow:hidden}.wrap.__jsx-style-dynamic-selector>svg{max-width:640px;min-width:500px;height:auto}@media screen and (min-width:900px){.loader.__jsx-style-dynamic-selector{padding:30px}}")})]})}},20657:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e}function o(e){"function"!==typeof e.primary&&(e.primary=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e});var t=Object.keys(e);return function(n,r){var o,a=!1,c={},l=!0,s=!1,u=void 0;try{for(var d,f=t[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value;if("primary"!==p){var h=e[p],m=n?n[p]:void 0,b=h(m,r);c[p]=b,a=a||b!==m}}}catch(g){s=!0,u=g}finally{try{l||null==f.return||f.return()}finally{if(s)throw u}}n&&(o=a?i({},n,c):n);var v=e.primary(o,r);return(a=a||v!==o)?i({},c,v):n}}n.d(t,{$:function(){return o}})},7411:function(e,t,n){n.d(t,{J:function(){return o},Z:function(){return i}});var r=n(78135);function i(e,t,n,r){var i=e.workspace[t].plugins[n];if(i.type!==r)throw new Error("expected type to be "+r);return i.state}function o(e,t,n,o){var a=(0,r.v9)((function(r){return i(r,e,t,n)}),o),c=(0,r.I0)();return[a,function(n){c({type:"SET_STATE",wid:e,pud:t,state:n})}]}},5440:function(e,t,n){n.d(t,{YI:function(){return R},kW:function(){return N}});var r,i=n(35944),o=n(79547),a=n.n(o),c=(n(67294),n(58458));function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}!function(e){e.TEXT="TEXT",e.MENTION="MENTION",e.LINK="LINK",e.REPL_LINK="REPL_LINK",e.DEEP_LINK="DEEP_LINK",e.CODE="CODE",e.BOLD="BOLD",e.ITALICS="ITALICS",e.STRIKETHROUGH="STRIKETHROUGH",e.QUOTE="QUOTE"}(r||(r={}));var u=function(e){var t=e.fragment,n=e.onClick;return(0,i.tZ)(c.Z,{size:"small",onClick:n,children:t.content})},d=function(e){var t=e.fragment,n=e.onClick;return(0,i.tZ)(c.Z,{size:"small",fontWeight:"medium",onClick:n,children:t.content})},f=function(e){var t=e.fragment,n=e.onClick;return(0,i.tZ)("a",{href:t.url,onClick:n,rel:"noreferrer noopener nofollow",target:"_blank",children:t.content})},p=function(e){var t=e.fragment,n=e.onClick;return(0,i.tZ)("a",{href:t.url,onClick:n,target:"_blank",children:t.content})},h=function(e){var t=e.fragment,n=e.onClick;return(0,i.tZ)("a",{href:t.url,onClick:n,children:t.content})},m=function(e){var t=e.fragment,n=e.onClick,r=e.style;return(0,i.tZ)("code",{onClick:n,style:r,children:t.content})},b=function(e){var t=e.fragment,n=e.onClick;return(0,i.tZ)("b",{onClick:n,children:t.content})},v=function(e){var t=e.fragment,n=e.onClick;return(0,i.tZ)("i",{onClick:n,children:t.content})},g=function(e){var t=e.fragment,n=e.onClick;return(0,i.BX)("span",{onClick:n,className:"jsx-e2f6e2707e7599fa",children:[t.content,(0,i.tZ)(a(),{id:"e2f6e2707e7599fa",children:"span.jsx-e2f6e2707e7599fa{text-decoration:line-through}"})]})},y=function(e){var t=e.fragment,n=e.onClick;return(0,i.BX)("blockquote",{onClick:n,className:"jsx-8741a91fadaf26be",children:[t.content,(0,i.tZ)(a(),{id:"8741a91fadaf26be",children:"blockquote.jsx-8741a91fadaf26be{border-left:2px solid var(--foreground-dimmest);padding-left:6px;color:var(--foreground-dimmest)}"})]})},x=/(@[0-9a-zA-Z_]+)/,w=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,k=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,Z=/(`.+?`)/,j=/(\*\*.+?\*\*)/,S=/(_.+?_)/,E=/(\*.+?\*)/,C=/(~~.+?~~)/,_=/(^>.+?$\n?)/m,O=/\/@([0-9a-zA-Z_]+)\/(.+)/;function T(e){var t=e.url;return{type:r.LINK,url:t,content:t}}function I(e){var t=e.hash;return{type:r.DEEP_LINK,url:t,content:t}}function A(e,t){if(k.test(e)){var n={};try{n=new window.URL(e)}catch(o){return{content:e,type:r.TEXT}}return["repl.it","replit.com","firewalledreplit.com",document.location.host].includes(n.host)?n.pathname===t.replUrl?I({hash:n.hash}):O.test(n.pathname)?function(e){var t=e.url,n=O.exec(t.pathname);if(!n)throw new Error("Not a Repl URL");return{type:r.REPL_LINK,url:t.href,content:"@".concat(n[1],"/").concat(n[2]).concat(t.hash)}}({url:n}):T({url:e}):T({url:e})}if(w.test(e))return I({hash:e});if(_.test(e))return function(e){var t=e.text;return{type:r.QUOTE,content:t}}({text:e.slice(1).trim()});if(Z.test(e))return function(e){var t=e.code;return{type:r.CODE,content:t}}({code:e.slice(1,-1)});if(j.test(e))return function(e){var t=e.text;return{type:r.BOLD,content:t}}({text:e.slice(2,-2)});if(S.test(e)||E.test(e))return function(e){var t=e.text;return{type:r.ITALICS,content:t}}({text:e.slice(1,-1)});if(C.test(e))return function(e){var t=e.text;return{type:r.STRIKETHROUGH,content:t}}({text:e.slice(2,-2)});if(x.test(e)){var i=e.slice(1);if(!t.users||t.users.includes(i))return function(e){var t=e.username;return{type:r.MENTION,username:t,content:"@".concat(t)}}({username:i})}return{content:e,type:r.TEXT}}var P=new RegExp([Z.source,j.source,S.source,E.source,C.source,k.source,x.source,w.source,_.source].join("|"),"m");function N(e,t){var n=e.split(P),i=[],o=[],a=!0,c=!1,l=void 0;try{for(var s,u=n[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;if(d){var f=A(d,t);if(f){if(f.type===r.MENTION){if(!f.username)continue;i.push(f.username)}o.push(f)}}}}catch(p){c=!0,l=p}finally{try{a||null==u.return||u.return()}finally{if(c)throw l}}return{tokens:o,mentions:i}}function R(e){var t=e.message,n=e.onMentionClick,o=void 0===n?function(){}:n,a=e.codeStyles,c=void 0===a?{}:a;return(0,i.tZ)(i.HY,{children:t.tokens.map((function(e,t){var n={fragment:e,key:t};return e.type===r.MENTION?(0,i.tZ)(d,s({},n,{onClick:function(){return o(e)}})):e.type===r.LINK?(0,i.tZ)(f,s({},n)):e.type===r.REPL_LINK?(0,i.tZ)(p,s({},n)):e.type===r.DEEP_LINK?(0,i.tZ)(h,s({},n)):e.type===r.CODE?(0,i.tZ)(m,s({},n,{style:c})):e.type===r.BOLD?(0,i.tZ)(b,s({},n)):e.type===r.ITALICS?(0,i.tZ)(v,s({},n)):e.type===r.STRIKETHROUGH?(0,i.tZ)(g,s({},n)):e.type===r.QUOTE?(0,i.tZ)(y,s({},n)):(0,i.tZ)(u,s({},n))}))})}},52294:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e}n.d(t,{U:function(){return o},c:function(){return a}});var o=n(14844).L;function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;return"UPDATE_WORKSPACE_PREFERENCES"===t.type?i({},e,t.updates):e}}}]);
//# sourceMappingURL=7014-964578a263e2189b.js.map