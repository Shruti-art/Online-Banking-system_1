"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6658],{81193:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(67294);function i(e){var t=(0,r.useState)(!1),n=t[0],i=t[1],o=(0,r.useRef)(0);return[n,(0,r.useMemo)((function(){return{onDragEnter:function(e){e.preventDefault(),o.current++,i(!0)},onDragLeave:function(e){e.preventDefault(),o.current--,0===o.current&&i(!1)},onDrop:function(t){var n,r;t.preventDefault(),o.current=0,i(!1),t.persist();var a=Array.from(null!==(r=null===t||void 0===t||null===(n=t.dataTransfer)||void 0===n?void 0:n.files)&&void 0!==r?r:[]);0!==a.length?e(a):e(null)},onDragOver:function(e){e.preventDefault()}}}),[e])]}},3104:function(e,t,n){n.d(t,{G:function(){return Z},Z:function(){return k}});var r=n(35944),i=(n(67294),n(70917)),o=n(88768),a=n(54929),l=n(14285),u=n(3204),c=n(56834),s=n(24506),d=n(21130),f=n(92704),p=n(66552),v=n(24388),h=n(67938),y=n(98510);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Z=(0,i.iv)([s.gU.filled,u.l0.p(8),{width:"auto",height:"auto"}]);function k(e){var t=e.repl,n=e.currentUser,i=e.surface,s=void 0===i||i,m=w((0,o.lUA)(),2),b=m[0],k=m[1].loading,x=(0,r.BX)(r.HY,{children:[(null===n||void 0===n?void 0:n.isVerified)&&(0,r.tZ)(f.zx,{css:[s&&Z],disabled:k,onClick:function(){t.currentUserDidLike||(0,c.j)(c.U3.REACTED_TO_REPL,{replView:"https://replit.com"+t.url,reaction:"heart",isReplTalk:!1,item:"repl",isCommunityPublish:t.wasPosted,isAppPublish:t.wasPublished}),b({variables:{input:{replId:t.id}},optimisticResponse:{toggleReplLike:g({},t,{likeCount:Math.max(0,t.likeCount+(t.currentUserDidLike?-1:1)),currentUserDidLike:!t.currentUserDidLike})}})},iconLeft:t.currentUserDidLike?(0,r.tZ)(y.Z,{}):(0,r.tZ)(l.Z,{}),text:t.likeCount>0?(0,v.d)(t.likeCount):"Like"}),n&&!n.isVerified&&(0,r.BX)(a.Z,{css:[u.l0.flex.row,u.l0.align.center,u.l0.backgroundColor.backgroundHigher,u.l0.borderRadius(8),u.l0.pr(8)],children:[(0,r.tZ)(d.Z,{alt:"Verify your email to like",css:s&&Z,disabled:!0,children:(0,r.tZ)(l.Z,{})}),(0,r.tZ)(h.x,{color:"dimmer",children:(0,v.d)(t.likeCount)})]}),!n&&(0,r.BX)(a.Z,{css:[u.l0.flex.row,u.l0.align.center,u.l0.backgroundColor.backgroundHigher,u.l0.borderRadius(8),u.l0.pr(8)],children:[(0,r.tZ)(d.Z,{alt:"Log in to like",css:s&&Z,disabled:!0,children:(0,r.tZ)(l.Z,{})}),(0,r.tZ)(h.x,{color:"dimmer",children:(0,v.d)(t.likeCount)})]})]});return s?(0,r.tZ)(p.Z,{background:"default",css:[u.l0.borderRadius(8)],children:x}):(0,r.tZ)(a.Z,{children:x})}},66658:function(e,t,n){n.d(t,{Z:function(){return Ot}});var r=n(35944),i=n(67294),o=n(88768),a=n(66552),l=n(3204),u=n(54929),c=n(92704),s=n(16108),d=n(67938),f=n(81193),p=n(58375),v=n(59339),h=n(7177),y=n(38956),m=n(21130),b=n(79744),g=n(70917),w=n(52620),Z=n(56834),k=n(72829),x=n(45309),S=n(20255),R=n(87349);function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){E(e,t,n[t])}))}return e}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j=(0,g.iv)({position:"absolute",top:0,left:0,width:"100%",height:"100%"});function I(e){var t=e.src,n=e.alt;return(0,r.BX)(u.Z,{css:[j,{borderBottomLeftRadius:8,borderBottomRightRadius:8,overflow:"hidden"}],children:[(0,r.tZ)(b.Z,{objectFit:"cover",layout:"fill",src:t,alt:n}),(0,r.tZ)(u.Z,{css:[j,{background:"radial-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6))",backgroundRepeat:"no-repeat"}]})]})}function P(e){var t=e.onClick;return(0,r.tZ)(u.Z,{onClick:function(){(0,Z.j)(Z.U3.RUN_BUTTON_CLICKED,{context:"replView",overlay:!0}),t()},css:[j,l.l0.center,{":hover > svg":{transform:"scale(1.2)"},"> svg":{transition:"transform 200ms",width:64,height:"auto",cursor:"pointer",filter:l.TV.shadowDefault}}],children:(0,r.tZ)(R.Z,{color:l.TV.white})})}function N(e){var t=e.isPublished,n=e.onChangeClick,o=e.onRemoveClick,a=A(i.useState(!1),2),s=a[0],d=a[1];return(0,r.BX)(u.Z,{css:[l.l0.rowWithGap(8),l.l0.align.center],children:[(0,r.tZ)(c.ZP,{onClick:function(e){e.stopPropagation(),n()},text:"Change image"}),t?(0,r.tZ)(m.Z,{alt:"Cannot remove cover image of a published Repl",disabled:!0,colorway:"negative",children:(0,r.tZ)(p.Z,{})}):null,t?null:(0,r.tZ)(u.Z,{children:(0,r.tZ)(m.Z,{alt:"Remove Image",colorway:"negative",onClick:function(){d(!0)},children:(0,r.tZ)(p.Z,{})})}),(0,r.tZ)(h.Z,{isOpen:s,onRequestClose:function(){return d(!1)},maxWidth:512,children:(0,r.tZ)(v.Z,{confirmLabel:"Yes, remove this image",title:"Remove image",isDestructive:!0,onConfirm:function(){o(),d(!1)},onCancel:function(){return d(!1)},children:"This will remove your Repl\u2019s cover image. You can always add one back at any time."})})]})}function D(e){var t=e.onClick,n=e.isActive;return(0,r.BX)(u.Z,{css:[l.l0.colWithGap(16),l.l0.center],children:[(0,r.BX)(u.Z,{css:[l.l0.colWithGap(8),l.l0.center],children:[(0,r.tZ)(u.Z,{css:[{"> svg":{width:44,height:"auto"}},n&&{color:l.TV.accentPrimaryDefault}],children:(0,r.tZ)(w.Z,{})}),(0,r.tZ)(d.x,{children:"Drag and drop a cover image"})]}),(0,r.tZ)(u.Z,{children:(0,r.tZ)(c.ZP,{onClick:t,iconLeft:(0,r.tZ)(S.Z,{}),colorway:"primary",text:"Or select a file"})})]})}function L(e){var t=e.onClick,n=e.repl,a=function(e){if(null!==e&&0!==e.length){var t=e.find((function(e){return e.type.startsWith("image/")}));t?(p(null),b.uploadImage(t,x.N.ReplCoverImage)):p("Expected an image file")}},c=i.useRef(null),s=A(i.useState(null),2),d=s[0],p=s[1],v=A(i.useState(n.imageUrl),2),h=v[0],m=v[1],b=(0,y.Z)({onUpload:function(e){var t=e.url;g({variables:{input:{id:n.id,imageUrl:t}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:O({},n,{imageUrl:t})}}})},onUploadPreview:function(e){var t=e.dataUrl;m(t)},onError:function(e){p(e.message)}}),g=A((0,o.wPL)({onCompleted:function(e){p(null),m(e.updateRepl.repl.imageUrl)}}),1)[0],w=n.currentUserPermissions.changeImageUrl,Z=A((0,f.Z)(a),2),S=Z[0],R=Z[1],C=!h&&w;return(0,r.BX)(u.Z,O({css:[l.l0.center,l.l0.flex.growAndShrink(1),!C&&{backgroundColor:l.TV.black},{borderBottomLeftRadius:8,borderBottomRightRadius:8,position:"relative",":hover .image-controls":{opacity:1}}]},R,{children:[h?(0,r.tZ)(I,{src:h,alt:n.title}):null,C?null:(0,r.tZ)(P,{onClick:t}),h&&w?(0,r.BX)(u.Z,{className:"image-controls",css:[{position:"absolute",top:l.TV.space8,right:l.TV.space8,opacity:0,".is-touch-device &":{opacity:1}}],children:[(0,r.tZ)(N,{onChangeClick:function(){var e;null===(e=c.current)||void 0===e||e.click()},onRemoveClick:function(){g({variables:{input:{id:n.id,imageUrl:null}}})},isPublished:Boolean(n.lastPublishedAt)}),d?(0,r.tZ)("div",{className:"error",children:d}):null]}):null,C?(0,r.tZ)(D,{isActive:S,onClick:function(){var e;null===(e=c.current)||void 0===e||e.click()}}):null,w?(0,r.tZ)("input",{css:{width:.1,height:.1,opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},ref:c,accept:k.W9.join(","),type:"file",onChange:function(e){var t=e.target,n=t.validity,r=t.files;n.valid&&a(r?Array.from(r):null)}}):null]}))}var B=n(17221),U=n(73049),F=n(56700),T=n(21217),_=n(81544),V=n(34051),M=n.n(V),z=n(50658),X=n(11163),G=n.n(X),W=n(22654),H=n(27754),K=n(44160),$=n(39441),q=n(35932),Y=n(9440),J=n(11938),Q=n(25108);function ee(e,t,n,r,i,o,a){try{var l=e[o](a),u=l.value}catch(c){return void n(c)}l.done?t(u):Promise.resolve(u).then(r,i)}var te=n(91272),ne=n(46846);function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var oe,ae=".lesson/lessonplan.md";function le(e){var t=e.fs,n=e.container,r=e.dotReplit,o=e.skip,a=e.preferredFile,l=ie(i.useState(null),2),u=l[0],c=l[1],s=function(e){var t,n=ie(i.useState(null===(t=e.getContext())||void 0===t?void 0:t.repl.id),2),r=n[0],o=n[1];return i.useEffect((function(){return e.onConnectionStateChanged((function(t){var n;t===H.e.CONNECTING&&o(null===(n=e.getContext())||void 0===n?void 0:n.repl.id)}))}),[e]),r}(n);return i.useEffect((function(){if(!o&&s){var e=!1;return Promise.all([(0,te.W)({replId:s,dotReplit:r,fs:t}),"LessonPlan"===(null===a||void 0===a?void 0:a.type)?t.stat(ae):null,"FilePath"===(null===a||void 0===a?void 0:a.type)?t.stat(a.path):null]).then((function(t){var n=ie(t,3),r=n[0],i=r.entrypoint,o=r.readmeFile,l=n[1],u=n[2];e||("LessonPlan"===(null===a||void 0===a?void 0:a.type)&&l&&l.exists&&l.type===ne.Tv.File?c(ae):"FilePath"===(null===a||void 0===a?void 0:a.type)&&u&&u.exists&&u.type===ne.Tv.File?c(a.path):"Readme"===(null===a||void 0===a?void 0:a.type)&&o?c(o):i&&c(i))})),function(){e=!0}}}),[t,r,s,o,a]),u}function ue(e,t,n,r,i,o,a){try{var l=e[o](a),u=l.value}catch(c){return void n(c)}l.done?t(u):Promise.resolve(u).then(r,i)}function ce(e){var t=e.currentDeeplink,n=e.onChange,r=e.fs,o=e.enabled,a=(0,i.useRef)(!1);(0,i.useEffect)((function(){if(o){var e=function(){var e,t=(e=M().mark((function e(){var t,i,o,l;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,U.mv)(r);case 4:if(t=e.sent,i=t.path,o=t.line,l=t.col,i){e.next=11;break}return n(null),e.abrupt("return");case 11:n({path:i,line:o,col:l});case 12:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ue(o,r,i,a,l,"next",e)}function l(e){ue(o,r,i,a,l,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return window.addEventListener("hashchange",e),function(){window.removeEventListener("hashchange",e)}}}),[r,n,o]),(0,i.useEffect)((function(){if(o&&t){var e=(0,U.YM)(t);if(!G().asPath.endsWith(e)){var n=G().asPath.includes("#")?G().asPath.slice(0,G().asPath.indexOf("#")):G().asPath;a.current=!0,G().push({pathname:G().pathname,query:G().query},"".concat(n).concat(e),{shallow:!0}),a.current=!1}}}),[r,t,o])}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e){var t,n,r=e.currentUser,a=e.repl,l=e.initialViewMode,u=e.enableDeeplinks,c=de(i.useState(""),2),s=c[0],d=c[1],f=(0,i.useState)(F.e.DISCONNECTED),p=f[0],v=f[1],h=(0,i.useState)(T.A.OFFLINE),y=h[0],m=h[1],b=(0,i.useState)((function(){return function(e){var t,n=e.setBsodSentryEventId,r=(0,H.Z)({onUnrecoverableError:function(e){if(e.message.toLowerCase().includes("repl not found"))G().push("/home","~/");else{Q.error(e),z.Tb(e);var t=(0,q.Z)(e,{tags:{replviewer:"true"}});n(t)}}}),i=(0,W.Z)({container:r}),o=(0,J.Z)({container:r,fs:i}),a=(0,$.Z)({container:r,dotReplit:o}),l=(0,K.Z)({container:r,mode:"shellrunner",beforeRun:(t=M().mark((function e(){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Y.Z)(r,o);case 2:if(!e.sent){e.next=5;break}return e.next=5,a.installPackages();case 5:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){ee(o,r,i,a,l,"next",e)}function l(e){ee(o,r,i,a,l,"throw",e)}a(void 0)}))})});return{container:r,fs:i,runner:l,dotReplit:o,packager:a}}({setBsodSentryEventId:d})})),g=b[0],w=g.container,k=g.fs,x=g.dotReplit,S=g.runner,R=g.packager,C=(0,i.useRef)((0,U.u9)()),E=(null===(t=a.replViewSettings)||void 0===t?void 0:t.defaultView)===o.dZH.ReplFile&&a.replViewSettings.replFile?a.replViewSettings.replFile:void 0,O={type:"Readme"};a.isProject?O={type:"LessonPlan"}:E&&(O={type:"FilePath",path:E});var A=(null===(n=a.replViewSettings)||void 0===n?void 0:n.defaultView)!==o.dZH.ReplImage&&(a.publishedAs===o.O2h.Template||a.isProject),j=(0,i.useState)((function(){return l===oe.Code||C.current||E||A?{type:"code",fs:k,container:w,dotReplit:x}:null})),I=j[0],P=j[1],N=(0,i.useState)(C.current),D=N[0],L=N[1],B=de(i.useState(null),2),V=B[0],X=B[1],te=Boolean("code"===(null===I||void 0===I?void 0:I.type)&&!I.deeplink&&!C.current),ne=le({fs:k,dotReplit:x,container:w,preferredFile:O,skip:!te});ce({fs:k,currentDeeplink:"code"===(null===I||void 0===I?void 0:I.type)?I.deeplink:void 0,onChange:function(e){P(e?{deeplink:e,type:"code",container:w,fs:k,dotReplit:x}:null)},enabled:u});var re=de((0,o.yo9)({variables:{replId:a.id}}),1)[0];(0,i.useEffect)((function(){if((0,U.u9)()){var e=!1;return(0,U.mv)(k).then((function(t){var n=t.path,r=t.line,i=t.col;e||n&&P({type:"code",container:w,fs:k,dotReplit:x,deeplink:{path:n,line:r,col:i}})})),function(){e=!0}}}),[w,k,x]),(0,i.useEffect)((function(){te&&ne&&P({type:"code",container:w,fs:k,dotReplit:x,deeplink:{path:ne}})}),[te,ne,w,k,x]),(0,i.useEffect)((function(){V&&P("server"!==V?{type:"vnc",container:w,fs:k}:{type:"server",previewUrl:a.previewUrl})}),[w,k,V,a.previewUrl]),(0,i.useEffect)((function(){p!==F.e.CONNECTED&&X(null)}),[p]);var ie=(0,_.b)({repl:a,currentUser:r}),ae=function(e){return!!["html","web_project","kaboom"].includes(e.lang.id)||Boolean(e.config.isServer)}(a),ue=D||Boolean(I&&("code"===I.type||"vnc"===I.type||"replboxDisplay"===I.type||"terminal"===I.type));(0,i.useEffect)((function(){if(ue&&w.getConnectionState()===F.e.DISCONNECTED){w.connect({context:ie});var e=ae?[w.close]:[S.onStateChanged(m),w.onConnectionStateChanged(v),w.onPortOpened((function(e){var t=e.isVnc;X(t?"vnc":"server")})),w.close];return function(){e.forEach((function(e){return e()}))}}}),[ue,w,S,ie,ae]);var se=(0,i.useRef)(!1);return(0,i.useEffect)((function(){y===T.A.IDLE&&se.current&&(se.current=!1,"terminal"===(null===I||void 0===I?void 0:I.type)&&S.run())}),[y,I,S]),{fs:k,openFile:function(e){"server"!==(null===I||void 0===I?void 0:I.type)&&"replboxDisplay"!==(null===I||void 0===I?void 0:I.type)||m(T.A.IDLE),P({type:"code",container:w,fs:k,deeplink:{path:e},dotReplit:x}),S.getRunState()===T.A.RUNNING&&S.stopRun()},viewState:I,runRepl:function(){if(L(!1),r&&re(),(0,Z.j)(Z.U3.REACTED_TO_REPL,{replView:"https://replit.com"+a.url,reaction:"repl_ran",isReplTalk:!1,item:"repl",isCommunityPublish:a.wasPosted,isAppPublish:a.wasPublished}),ae){var e,t,n=(null===(e=a.deployment)||void 0===e||null===(t=e.activeRelease)||void 0===t?void 0:t.previewUrl)||a.previewUrl;return P({type:"server",previewUrl:n}),void m(T.A.RUNNING)}return a.lang.canUseShellRunner?(P("server"===V?{type:"server",previewUrl:a.previewUrl}:"vnc"===V?{type:"vnc",container:w,fs:k}:{type:"terminal",runner:S,packager:R}),S.getRunState()!==T.A.IDLE?void(se.current=!0):void S.run()):a.lang.hasReplboxWebview?(P({type:"replboxDisplay",fs:k}),void m(T.A.RUNNING)):void P({type:"deprecationNotice"})},stopRepl:function(){P(null),L(!1),m(T.A.IDLE),ae||S.getRunState()===T.A.RUNNING&&S.stopRun()},runState:y,isFileTreeOpen:D,setIsFileTreeOpen:L,didBsod:Boolean(s),showUrlOutput:ae,devClearBsod:function(){d("")}}}!function(e){e.Code="Code",e.Output="Output"}(oe||(oe={}));var pe=n(77346),ve=n(79547),he=n.n(ve),ye=n(67289),me=n(62208),be=n(93770),ge=n(44054),we=ge.j.tabletMin,Ze=n(5152),ke=n.n(Ze),xe=n(88457);function Se(e,t,n,r,i,o,a){try{var l=e[o](a),u=l.value}catch(c){return void n(c)}l.done?t(u):Promise.resolve(u).then(r,i)}function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ce=function(){var e,t=(e=M().mark((function e(){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(2738),n.e(4474)]).then(n.t.bind(n,74474,23)).then((function(e){return e.default})));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Se(o,r,i,a,l,"next",e)}function l(e){Se(o,r,i,a,l,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),Ee=ke()(Ce,{ssr:!1,loading:function(){return null}});function Oe(e){var t=e.contents,n={scrollToContent:!0};try{n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Re(e,t,n[t])}))}return e}({},n,JSON.parse(t||"{}"))}catch(o){}var i=(0,xe.Fg)();return(0,r.BX)("div",{className:"jsx-f04e2237e6284377 excalidraw-wrapper",children:[(0,r.tZ)(Ee,{viewModeEnabled:!0,zenModeEnabled:!0,initialData:n,theme:i===xe.V2.replitLight?"light":"dark"}),(0,r.tZ)(he(),{id:"f04e2237e6284377",children:".excalidraw-wrapper.jsx-f04e2237e6284377{cursor:all-scroll;height:100%;width:100%}"})]})}var Ae=n(34837),je=n.n(Ae),Ie=n(51409);function Pe(e){var t=e.contents,n=e.isKbmsprite,o=i.useRef(null);return i.useEffect((function(){var e=o.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var r=JSON.parse(t),i=je()({canvas:e,data:n?(0,Ie.C)(r):r,readonly:!0});return function(){i.cleanUp()}}}),[t,n]),(0,r.tZ)("canvas",{ref:o,className:"jsx-93826966b3fae22 pedit",children:(0,r.tZ)(he(),{id:"93826966b3fae22",children:".pedit.jsx-93826966b3fae22{width:100%;height:100%}"})})}var Ne=n(91299),De=n(24039),Le=n(5426),Be=n(45421),Ue=n(24931);function Fe(e){var t=e.fs,n=e.deeplink,i=null===n||void 0===n?void 0:n.path,o=(0,Ne.Z)({fs:t,path:i});return(0,r.BX)("div",{className:he().dynamic([["2895239035e2208a",[we]]])+" file-viewer",children:[(0,r.BX)("div",{className:he().dynamic([["2895239035e2208a",[we]]])+" content",children:[o.result&&o.result.fileViewerType===Be.D.Media?(0,r.tZ)("div",{className:he().dynamic([["2895239035e2208a",[we]]])+" media",children:(0,r.tZ)(me.A,{content:be.Z.from(o.result.content).toString("base64"),mime:(0,ye.yC)(o.result.path)})}):null,o.isLoading&&o.fileViewerType===Be.D.Media?(0,r.tZ)("div",{className:he().dynamic([["2895239035e2208a",[we]]])+" file-loader",children:(0,r.tZ)(De.Z,{})}):null,o.result&&o.result.fileViewerType===Be.D.Markdown?(0,r.tZ)("div",{className:he().dynamic([["2895239035e2208a",[we]]])+" markdown",children:(0,r.tZ)(Ue.Z,{path:o.result.path,source:o.result.content.toString(),fs:t,sourcePos:!1})}):null,o.isLoading&&o.fileViewerType===Be.D.Markdown?(0,r.tZ)("div",{className:he().dynamic([["2895239035e2208a",[we]]])+" file-loader",children:(0,r.tZ)(De.Z,{})}):null,o.result&&o.result.fileViewerType===Be.D.Draw?(0,r.tZ)("div",{className:he().dynamic([["2895239035e2208a",[we]]])+" draw",children:(0,r.tZ)(Oe,{contents:o.result.content.toString()})}):null,o.isLoading&&o.fileViewerType===Be.D.Draw?(0,r.tZ)("div",{className:he().dynamic([["2895239035e2208a",[we]]])+" file-loader",children:(0,r.tZ)(De.Z,{})}):null,o.result&&o.result.fileViewerType===Be.D.Code?(0,r.tZ)(Le.Z,{filePath:o.result.path,code:o.result.content.toString(),fontSize:14}):null,o.isLoading&&o.fileViewerType===Be.D.Code?(0,r.tZ)("div",{className:he().dynamic([["2895239035e2208a",[we]]])+" file-loader",children:(0,r.tZ)(De.Z,{})}):null,o.result&&o.result.fileViewerType===Be.D.Pedit?(0,r.tZ)(Pe,{contents:o.result.content.toString(),isKbmsprite:!!(null===i||void 0===i?void 0:i.endsWith(".kbmsprite"))}):null,!o.isLoading&&o.error?(0,r.tZ)("div",{className:he().dynamic([["2895239035e2208a",[we]]])+" error",children:(0,r.BX)("div",{className:he().dynamic([["2895239035e2208a",[we]]]),children:["Could not load ",o.error.path]})}):null]}),(0,r.tZ)(he(),{id:"2895239035e2208a",dynamic:[we],children:".file-viewer.__jsx-style-dynamic-selector{position:absolute;top:0;left:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;align:stretch;height:100%;width:100%}.markdown.__jsx-style-dynamic-selector{word-break:break-word;max-width:840px;margin:0 auto;padding:var(--space-16);overflow-y:auto;position:relative;height:100%}.draw.__jsx-style-dynamic-selector{height:100%;width:100%}.file-tree.__jsx-style-dynamic-selector{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);overflow:auto;display:none}.content.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:100%;height:100%;overflow-y:auto;position:relative}.file-loader.__jsx-style-dynamic-selector{width:100%;padding-top:var(--space-8);padding-left:var(--space-8);position:absolute;top:0;left:0;z-index:100;opacity:0;-webkit-animation:fadeIn ease 0s forwards;-moz-animation:fadeIn ease 0s forwards;-o-animation:fadeIn ease 0s forwards;animation:fadeIn ease 0s forwards;-webkit-animation-delay:200ms;-moz-animation-delay:200ms;-o-animation-delay:200ms;animation-delay:200ms}.media.__jsx-style-dynamic-selector,.error.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-moz-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-o-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@media screen and (min-width:".concat(we,"px){.file-tree.__jsx-style-dynamic-selector{display:block;width:260px}}")})]})}var Te=n(55662),_e=n(46878),Ve=n(24388),Me=n(96194),ze=n(78842);function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var We=(0,u.K)("div");function He(e){var t=e.replId,n=e.language,o=Ge(i.useState((function(){return(0,Me.Z)({beforeRun:function(){return Promise.resolve()},getMainFileContents:function(){return(0,ze.Z)({language:e.language,fs:e.fs})}})})),1)[0],a=i.useRef(null);return i.useEffect((function(){if(a.current){var e=!1;return o.load({replId:t,language:n,iframeParent:a.current}).then((function(){e||o.run()})),function(){e=!0,o.getRunState()!==T.A.OFFLINE&&o.destroy()}}}),[o,t,n]),(0,r.tZ)(We,{ref:a,css:[l.l0.width("100%"),l.l0.height("100%"),{backgroundColor:"white",borderBottomRightRadius:8,borderBottomLeftRadius:8,iframe:[l.l0.width("100%"),l.l0.height("100%"),{display:"block",utline:"none",border:"none",borderBottomRightRadius:8,borderBottomLeftRadius:8}]}]})}var Ke=n(41045),$e=n(60139),qe=n(37156),Ye=n(95883),Je=n(89796),Qe=n(73440);function et(e,t,n,r,i,o,a){try{var l=e[o](a),u=l.value}catch(c){return void n(c)}l.done?t(u):Promise.resolve(u).then(r,i)}function tt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){et(o,r,i,a,l,"next",e)}function l(e){et(o,r,i,a,l,"throw",e)}a(void 0)}))}}function nt(e){var t=e.fs,n=e.language,i=e.activePath,o=e.onNodeClick,a=(0,Qe.Z)({fs:t}),c=a.dirInfo,s=a.setExpandedState,f=a.watchDir;return(0,r.tZ)(Je.i.Provider,{value:{activePath:i,downloadFile:function(){},fs:t,transformChildren:(0,Ye.Z)({language:n,shouldHideHiddenFiles:!1}),setPendingFileType:function(){},uploadFiles:function(){},pendingFileType:null,getNodeType:function(){var e=tt(M().mark((function e(n){var r;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.readFile(n);case 2:return r=e.sent,e.abrupt("return",r.error===ne.Df.IsDirectory?ne.Tv.Directory:ne.Tv.File);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pendingUploads:[],currentRenamePath:null,setCurrentRenamePath:function(){},pendingDelete:null,setPendingDelete:function(){},overwriteNode:function(){},renameNode:function(){},deleteNode:function(){},duplicateFile:tt(M().mark((function e(){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),currentOp:null,nodeOpError:null,dirInfo:c,setExpandedState:s,watchDir:f},children:(0,r.tZ)(qe.Z,{children:(0,r.BX)(u.Z,{css:[l.l0.flex.column,l.l0.p(8),(0,g.iv)({overflow:"auto",height:"100%"})],children:[(0,r.tZ)(u.Z,{css:[l.l0.p(8)],children:(0,r.tZ)(d.h,{level:3,variant:"subheadDefault",children:"Files"})}),(0,r.tZ)($e.Z,{siblings:[],readOnly:!0,onClick:function(){return null},onNodeClick:o,path:Ke.Q})]})})})}var rt=n(34860),it=n(85252),ot=n(3104),at=n(59897),lt=n(29868),ut=n(79523),ct=n(68316),st=n(11476),dt=n(38880);function ft(){return Boolean(function(){var e=document;return e.fullscreenElement||e.webkitFullscreenElement||e.mozFullscreenElement}())}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){yt(e,t,n[t])}))}return e}function bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ht(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var gt="1px solid "+l.TV.outlineDimmer;function wt(e){var t=e.children;return(0,r.tZ)(u.Z,{tag:"header",css:[{borderBottom:gt},l.l0.p(8),l.l0.rowWithGap(8),l.l0.align.center],children:t})}var Zt=(0,u.K)("a");function kt(e){var t=e.runCount,n=e.runState,i=e.onClick,a=e.publishedAs,d=n===T.A.RUNNING?(0,r.tZ)(Te.Z,{fill:"currentColor"}):(0,r.tZ)(s.Z,{fill:"currentColor"}),f=a===o.O2h.Template?"Run example":"Run";return n===T.A.RUNNING&&(f="Stop"),(0,r.tZ)(u.Z,{css:[l.l0.rowWithGap(8),l.l0.align.center],children:(0,r.tZ)(c.ZP,mt({colorway:n===T.A.RUNNING||a===o.O2h.Template?void 0:"positive",onClick:i,iconLeft:d,text:f},t>0&&{secondaryText:(0,Ve.d)(t)}))})}function xt(e){var t=e.innerRef,n=e.children;return(0,r.tZ)(a.Z,{elevated:!0,css:[{border:gt},l.l0.borderRadius(8)],innerRef:t,children:n})}function St(e){var t=e.src;return(0,r.tZ)(u.Z,{css:[l.l0.width("100%"),l.l0.height("100%")],children:(0,r.tZ)(u.Z,{tag:"iframe",sandbox:"allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-modals",src:t,css:[l.l0.width("100%"),l.l0.height("100%"),{borderBottomRightRadius:8,borderBottomLeftRadius:8,position:"absolute",backgroundColor:"white",display:"block",border:"none",top:0,left:0}]})})}function Rt(e){var t=e.fs,n=e.isOpen,i=e.language,o=e.activePath,l=e.onNodeClick;return(0,r.tZ)(u.Z,{css:[{zIndex:101,position:"absolute",top:0,left:0,height:"100%",overflow:"hidden",borderBottomLeftRadius:8},!n&&{pointerEvents:"none"}],children:(0,r.tZ)(a.Z,{elevated:!0,css:[{height:"100%",width:200,transition:"transform ".concat(160,"ms"),transform:"translateX(".concat(n?0:-200,"px)")}],children:(0,r.tZ)(nt,{fs:t,language:i,activePath:o,onNodeClick:l})})})}var Ct=(0,u.K)("div");function Et(e){var t,n=e.repl,o=e.currentUser,s=e.enableDeeplinks,f=e.isFromProfile,p=fe({enableDeeplinks:Boolean(s),repl:n,currentUser:o}),v=p.openFile,h=p.viewState,y=p.fs,b=p.runRepl,g=p.stopRepl,w=p.runState,k=p.didBsod,x=p.devClearBsod,S=p.isFileTreeOpen,R=p.setIsFileTreeOpen,C=p.showUrlOutput,E=i.useRef(null),O=(0,dt.Z)().showNotice,A=(0,i.useState)(!1),j=A[0],I=A[1],P=function(){var e=vt(i.useState(ft()),2),t=e[0],n=e[1];return i.useEffect((function(){var e=function(){n(ft())};return document.addEventListener("fullscreenchange",e),function(){document.removeEventListener("fullscreenchange",e)}})),t}(),N=(0,it.Z)((function(e){void 0!==e.width&&I(e.width<=500)})),D=bt(i.useState("code"===(null===h||void 0===h?void 0:h.type)&&h.deeplink?null===(t=h.deeplink)||void 0===t?void 0:t.path:null),2),U=D[0],F=D[1];return k?(0,r.tZ)(B.Z,{devHide:x}):(0,r.BX)(xt,{innerRef:E,children:[(0,r.BX)(wt,{children:[(0,r.BX)(u.Z,{css:[l.l0.flex.growAndShrink(1),l.l0.rowWithGap(8)],children:[(0,r.BX)(u.Z,{css:[l.l0.rowWithGap(4),l.l0.align.center],children:[(0,r.tZ)(c.ZP,{iconLeft:(0,r.tZ)(at.Z,{}),text:S?"Hide files":"Show files",onClick:function(){return R((function(e){return!e}))},css:yt({},"@media (max-width: ".concat(ge.j.mobileMax,"px)"),{display:"none"})}),(0,r.tZ)(a.Z,{background:"default",css:[l.l0.borderRadius(8),yt({},"@media (min-width: ".concat(ge.j.mobileMax+1,"px)"),{display:"none"})],children:(0,r.tZ)(m.Z,{css:ot.G,alt:S?"Hide files":"Show files",onClick:function(){return R((function(e){return!e}))},children:(0,r.tZ)(at.Z,{})})})]}),C||"server"===(null===h||void 0===h?void 0:h.type)?(0,r.tZ)(u.Z,{css:[l.l0.center,{borderLeft:"1px solid "+l.TV.outlineDimmest}],children:(0,r.BX)(Zt,{css:[l.l0.rowWithGap(4),l.l0.color.foregroundDimmer,l.l0.px(8)],href:n.prodUrl,target:"_blank",children:[(0,r.tZ)(rt.Z,{}),(0,r.tZ)(d.x,{children:(0,r.tZ)("span",{css:yt({},"@media (max-width: ".concat(ge.j.mobileMax+20,"px)"),{display:"none"}),children:"Open website"})})]})}):null]}),(0,r.BX)(u.Z,{css:[l.l0.rowWithGap(8),l.l0.align.center],children:[E.current&&document.fullscreenEnabled&&(0,r.tZ)(m.Z,{alt:P?"Exit fullscreen":"Enter fullscreen",css:ot.G,onClick:function(){var e=E.current;e?P?function(){var e=document;e.exitFullscreen?e.exitFullscreen():e.mozExitFullScreen?e.mozExitFullScreen():e.webkitExitFullScreen&&e.webkitExitFullScreen()}():(!function(e){var t=e;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()}(e),(0,Z.j)(Z.U3.REPL_VIEWER_FULLSCREEN_ENTERED,{location:f?"profile":"coverpage"})):O("Failed to enter fullscreen mode")},children:P?(0,r.tZ)(st.Z,{}):(0,r.tZ)(ct.Z,{})}),(0,r.tZ)(ot.Z,{repl:n,currentUser:o}),(0,r.tZ)(kt,{runCount:n.runCount,runState:w,publishedAs:n.publishedAs,onClick:function(){if(w===T.A.IDLE||w===T.A.OFFLINE)return(0,Z.j)(Z.U3.RUN_BUTTON_CLICKED,{context:"replView"}),void b();w===T.A.RUNNING&&g()}})]})]}),(0,r.BX)(Ct,{ref:function(e){N(e)},css:[l.l0.flex.growAndShrink(1),{position:"relative"}],children:[null===h?(0,r.tZ)(L,{repl:n,onClick:b}):null,"server"===(null===h||void 0===h?void 0:h.type)?(0,r.tZ)(St,{src:h.previewUrl}):null,"vnc"===(null===h||void 0===h?void 0:h.type)?(0,r.tZ)(pe.Z,{fs:h.fs,container:h.container}):null,"replboxDisplay"===(null===h||void 0===h?void 0:h.type)?(0,r.tZ)(He,{replId:n.id,language:n.language,fs:h.fs}):null,"deprecationNotice"===(null===h||void 0===h?void 0:h.type)?(0,r.tZ)(u.Z,{css:[l.l0.center,l.l0.p(16),l.l0.height("100%")],children:(0,r.BX)(d.x,{multiline:!0,variant:"subheadDefault",children:['Running "',n.lang.displayName,'" is no longer supported.'," ",(0,r.tZ)("a",{href:"https://replit.com/support",target:"_blank",rel:"noopener noreferrer",children:"Send feedback"})]})}):null,"terminal"===(null===h||void 0===h?void 0:h.type)?(0,r.tZ)(u.Z,{css:[l.l0.height("100%"),l.l0.width("100%"),l.l0.position.relative,{overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8}],children:(0,r.tZ)(_e.Z,{packager:h.packager,runner:h.runner,languageHeader:n.lang.header||void 0})}):null,"code"===(null===h||void 0===h?void 0:h.type)?(0,r.tZ)(u.Z,{css:[l.l0.height("100%"),l.l0.flex.growAndShrink(1),{position:"relative",overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8,transition:"margin ".concat(160,"ms"),marginLeft:S&&!j?200:0}],onClick:function(){j&&R(!1)},children:(0,r.tZ)(Fe,{fs:h.fs,deeplink:h.deeplink})}):null,(0,r.tZ)(Rt,{isOpen:S,language:n.lang.id,activePath:U,onNodeClick:function(e){F(e.path),e.type!==ne.Tv.Directory&&(v(e.path),j&&R(!1))},fs:y})]})]})}function Ot(e){var t=e.repl,n=e.currentUser,o=e.enableDeeplinks,a=e.isFromProfile,l=(0,i.useState)(!1),u=l[0],c=l[1];return(0,i.useEffect)((function(){return c(!0)}),[]),(0,i.useEffect)(ut.S,[]),u?(0,r.tZ)(lt.Z.Provider,{value:t.id,children:(0,r.tZ)(Et,{isFromProfile:a,repl:t,currentUser:n,enableDeeplinks:o})}):(0,r.tZ)(xt,{})}},91299:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(67294),i=n(45421);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}({},e,t)}var c={isLoading:!1,result:null,error:null,fileViewerType:null};function s(e){var t=e.fs,n=e.path,o=l(r.useReducer(u,c),2),a=o[0],s=o[1];return r.useEffect((function(){if(n){var e=!1,r=(0,i.V)(n);return s({isLoading:!0,fileViewerType:r}),t.readFile(n).then((function(t){e||(t.error?s({isLoading:!1,result:null,error:{path:n,fileViewerType:r,error:t.error}}):s({isLoading:!1,result:{path:n,fileViewerType:r,content:t.content},error:null}))})),function(){e=!0}}s(c)}),[t,n]),a}},46878:function(e,t,n){n.d(t,{Z:function(){return P}});var r,i=n(35944),o=n(79547),a=n.n(o),l=n(67294),u=n(23139),c=n(90601),s=n(8996),d=n(70917),f=n(50055),p=n(90213);function v(e,t){var n,i;switch(e){case r.Init:n="5%",i="Loading...";break;case r.Booting:i="Booting Repl",n="20%";break;case r.LoadingFiles:i="Downloading files",n="".concat(Math.floor(20+70*t).toString(),"%");break;case r.Ready:i="Ready",n="100%";break;default:(0,p.Z)(e)}return{percentString:n,message:i}}!function(e){e.Init="Init",e.Booting="Booting",e.LoadingFiles="LoadingFiles",e.Ready="Ready"}(r||(r={}));var h=(0,d.F4)({"0%":{opacity:0,top:0},"100%":{opacity:1,top:"-25px"}});function y(e){var t=e.onBootStatus,n=(0,l.useState)({current:r.Init,previous:null}),o=n[0],a=n[1],u=(0,l.useState)(0),c=u[0],s=u[1];(0,l.useEffect)((function(){var e=0,n=0,i=null,o=null,l=function(){e=0,n=0,i=null,o&&(clearInterval(o),o=null)},u=t((function(t){var u;switch(function(t){var r=t.stage,a=t.progress,u=t.total;if(o&&clearInterval(o),r!==f.api.BootStatus.Stage.PULL_FILES&&r!==f.api.BootStatus.Stage.LOAD_BLOCK||!u)return l(),void s(0);if(!(e>a)&&n!==a){var c=Date.now(),d=0;d=i?(a-n)/(c-i)*50:5e4,i=c,n=a,o=setInterval((function(){(e+=d)>u&&(e=u),e=Math.max(e,a),s(e/u)}),50)}}(t),t.stage){case f.api.BootStatus.Stage.ACQUIRING:u=r.Booting;break;case f.api.BootStatus.Stage.PULL_FILES:case f.api.BootStatus.Stage.LOAD_BLOCK:u=r.LoadingFiles;break;case f.api.BootStatus.Stage.COMPLETE:u=r.Ready;break;default:return}a((function(e){return e.current===u?e:{current:u,previous:e.current}}))}));return function(){l(),u()}}),[t]);var d=o.previous?v(o.previous,1):null,p=v(o.current,c);return(0,i.BX)("div",{css:{position:"absolute",left:"25%",right:"25%",top:"45%",backgroundColor:"transparent",color:"white",transition:"all 1s 0.5s",opacity:o.current===r.Ready?0:1},children:[(0,i.BX)("div",{children:[d&&(0,i.BX)("div",{css:{textAlign:"center",position:"absolute",width:"100%",top:"-100px",opacity:0,transition:"top 0.4s, opacity 0.4s"},children:[d.message,o.previous===r.LoadingFiles&&" 100%"]},d.message),(0,i.BX)("div",{css:{textAlign:"center",position:"absolute",width:"100%",top:"-25px",opacity:1,animationName:h.toString(),animationDuration:"0.6s"},children:[p.message,o.current===r.LoadingFiles&&" ".concat(p.percentString)]},p.message)]}),(0,i.tZ)("div",{css:{background:"none",border:"solid white 1px",borderRadius:"10px"},children:(0,i.tZ)("div",{css:{height:"5px",width:p.percentString,backgroundColor:"#fff",transition:"width cubic-bezier(0.28, 0.26, 0.33, 1) 2s"}})})]})}var m=n(77012),b=n(51968),g=n(21217);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var k=n(17070),x=n(89290),S=n(16911),R=n(84948),C=n(44660),E=n(88457),O=n(34140);function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var I=function(e,t){var n=e.runner,r=e.packager,o=e.languageHeader,d=e.onClear,f=e.enableScreenReaderMode,p=e.borderRadius,v=void 0===p?u.TV.borderRadius4:p,h=e.onBootStatus,w=j(function(e){var t=e.runner,n=e.packager,r=e.languageHeader,i=e.enableScreenReaderMode,o=Z((0,m.Z)({createXtermProps:{enableScreenReaderMode:i}}),2),a=o[0],u=o[1],c=(0,l.useState)(""),s=c[0],d=c[1];return(0,l.useEffect)((function(){if(!a&&"shell"===t.mode)return t.onOutput((function(e){return d((function(t){return t+e}))}))}),[a,t,d]),(0,l.useEffect)((function(){if(!a&&n)return n.onOutput((function(e){return d((function(t){return t+e.replace(/\n/g,"\n\r")}))}))}),[a,n,d]),(0,l.useEffect)((function(){var e=function(e){if(!a)throw new Error("Expected xterm");a.write(e.replace(/\n/g,"\n\r"))};if(a&&n){var t=n.onOutput((function(t){e(t)})),r=n.onError((function(){return e("\x1b[31m\n\nReplit: Package operation failed.\x1b[00m")})),i=n.onStateChanged((function(t){t&&e("\n\nReplit: Updating package configuration\n\n")}));return function(){t(),r(),i()}}}),[a,n]),(0,l.useEffect)((function(){s&&a&&(a.write(s),d(""))}),[a,s]),(0,l.useEffect)((function(){r&&d((function(e){return e+"".concat(r.replace(/\n/g,"\n\r"),"\n\r")}))}),[r,d]),(0,l.useEffect)((function(){if(a){var e=function(){t.getRunState()!==g.A.OFFLINE&&t.resizeTerminal(a.getSize())},n=[];n.push(a.onResize(e).dispose);var r=[];n.push(a.onData((function(e){var n=(0,b.I)(e);t.getRunState()!==g.A.OFFLINE?t.sendInput(n):r.push(n)})).dispose),n.push(t.onOutput((function(e){a.write(e)})));var i=!1;return n.push(t.onStateChanged((function(n){if(n!==g.A.OFFLINE){if(i||(e(),i=!0),r.length){var o=!0,a=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value;t.sendInput(s)}}catch(d){a=!0,l=d}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}r=[]}}else i=!1}))),t.getRunState()!==g.A.OFFLINE&&(e(),i=!0),function(){n.forEach((function(e){return e()}))}}}),[a,t]),[a,u,d]}({runner:n,packager:r,languageHeader:o,enableScreenReaderMode:f}),3),A=w[0],I=w[1],P=w[2],N=j(l.useState(!1),2),D=N[0],L=N[1],B=(0,E.Fg)();l.useImperativeHandle(t,(function(){return{write:function(e){A?A.write(e):P((function(t){return t+e.replace(/\n/g,"\n\r")}))},clear:function(){A&&A.clear()},focus:function(){A&&A.focus()}}}));var U=(0,R.Z)(C.H.Output);return(0,i.BX)("div",{onKeyDown:function(e){"f"===e.key&&(0,c.j)(e)&&!e.shiftKey&&(L(!0),e.preventDefault())},ref:U,className:a().dynamic([["c5caaf6b33bfcc2f",[v]]])+" "+"".concat(E.RJ," ").concat(B===E.V2.replitSpooky?"spooky":"dark"," terminal"),children:[(0,i.tZ)("div",{className:a().dynamic([["c5caaf6b33bfcc2f",[v]]])+" controls",children:(0,i.BX)(s.Ug,{align:"center",wrap:"nowrap",children:[D&&A?(0,i.tZ)(k.R,{findPrevious:A.findPrevious,findNext:A.findNext,exit:function(){return L(!1)}}):(0,i.tZ)(x.l,{onClick:function(){return L(!0)}}),(0,i.tZ)(S.Z,{onClick:function(){A&&(A.clear(),d&&d(),o&&A.write("".concat(o.replace(/\n/g,"\n\r"),"\n\r")),A.focus())}})]})}),!f&&(0,i.tZ)(O.T,{children:'Enable "Accessible Terminal" in Workspace Settings to use a screen reader with the console.'}),(0,i.tZ)("div",{ref:I,className:a().dynamic([["c5caaf6b33bfcc2f",[v]]])+" xterm-container"}),h?(0,i.tZ)(y,{onBootStatus:h}):null,(0,i.tZ)(a(),{id:"c5caaf6b33bfcc2f",dynamic:[v],children:".terminal.__jsx-style-dynamic-selector{height:100%;width:100%;position:relative;background-color:var(--background-default);-webkit-border-radius:".concat(v,";-moz-border-radius:").concat(v,";border-radius:").concat(v,";padding-left:var(--space-16);padding-top:var(--space-4)}.controls.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;position:absolute;opacity:0;top:var(--space-8);right:var(--space-8);z-index:100;min-height:30px}.terminal.__jsx-style-dynamic-selector:focus-within .controls.__jsx-style-dynamic-selector{opacity:1}.xterm-container.__jsx-style-dynamic-selector{height:100%;overflow:auto}.xterm-container.__jsx-style-dynamic-selector .xterm{height:100%}.xterm-container.__jsx-style-dynamic-selector .xterm-viewport{overflow-y:auto!important;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}")})]})},P=l.forwardRef(I)}}]);
//# sourceMappingURL=6658-bfb7fab686ca96e0.js.map